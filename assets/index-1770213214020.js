var QC=Object.defineProperty;var TC=(t,e,r)=>e in t?QC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Kr=(t,e,r)=>TC(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const A of a.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&n(A)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var U6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function LC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var V2={exports:{}},I0={},z2={exports:{}},Cr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eh=Symbol.for("react.element"),PC=Symbol.for("react.portal"),OC=Symbol.for("react.fragment"),DC=Symbol.for("react.strict_mode"),RC=Symbol.for("react.profiler"),HC=Symbol.for("react.provider"),MC=Symbol.for("react.context"),$C=Symbol.for("react.forward_ref"),KC=Symbol.for("react.suspense"),GC=Symbol.for("react.memo"),VC=Symbol.for("react.lazy"),tv=Symbol.iterator;function zC(t){return t===null||typeof t!="object"?null:(t=tv&&t[tv]||t["@@iterator"],typeof t=="function"?t:null)}var q2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W2=Object.assign,J2={};function mu(t,e,r){this.props=t,this.context=e,this.refs=J2,this.updater=r||q2}mu.prototype.isReactComponent={};mu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};mu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Y2(){}Y2.prototype=mu.prototype;function kx(t,e,r){this.props=t,this.context=e,this.refs=J2,this.updater=r||q2}var Ux=kx.prototype=new Y2;Ux.constructor=kx;W2(Ux,mu.prototype);Ux.isPureReactComponent=!0;var rv=Array.isArray,X2=Object.prototype.hasOwnProperty,Ix={current:null},Z2={key:!0,ref:!0,__self:!0,__source:!0};function eb(t,e,r){var n,s={},a=null,A=null;if(e!=null)for(n in e.ref!==void 0&&(A=e.ref),e.key!==void 0&&(a=""+e.key),e)X2.call(e,n)&&!Z2.hasOwnProperty(n)&&(s[n]=e[n]);var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return{$$typeof:eh,type:t,key:a,ref:A,props:s,_owner:Ix.current}}function qC(t,e){return{$$typeof:eh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qx(t){return typeof t=="object"&&t!==null&&t.$$typeof===eh}function WC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var nv=/\/+/g;function bp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?WC(""+t.key):e.toString(36)}function Bf(t,e,r,n,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var A=!1;if(t===null)A=!0;else switch(a){case"string":case"number":A=!0;break;case"object":switch(t.$$typeof){case eh:case PC:A=!0}}if(A)return A=t,s=s(A),t=n===""?"."+bp(A,0):n,rv(s)?(r="",t!=null&&(r=t.replace(nv,"$&/")+"/"),Bf(s,e,r,"",function(c){return c})):s!=null&&(Qx(s)&&(s=qC(s,r+(!s.key||A&&A.key===s.key?"":(""+s.key).replace(nv,"$&/")+"/")+t)),e.push(s)),1;if(A=0,n=n===""?".":n+":",rv(t))for(var o=0;o<t.length;o++){a=t[o];var l=n+bp(a,o);A+=Bf(a,e,r,l,s)}else if(l=zC(t),typeof l=="function")for(t=l.call(t),o=0;!(a=t.next()).done;)a=a.value,l=n+bp(a,o++),A+=Bf(a,e,r,l,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return A}function Bh(t,e,r){if(t==null)return t;var n=[],s=0;return Bf(t,n,"","",function(a){return e.call(r,a,s++)}),n}function JC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Js={current:null},Cf={transition:null},YC={ReactCurrentDispatcher:Js,ReactCurrentBatchConfig:Cf,ReactCurrentOwner:Ix};function tb(){throw Error("act(...) is not supported in production builds of React.")}Cr.Children={map:Bh,forEach:function(t,e,r){Bh(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Bh(t,function(){e++}),e},toArray:function(t){return Bh(t,function(e){return e})||[]},only:function(t){if(!Qx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Cr.Component=mu;Cr.Fragment=OC;Cr.Profiler=RC;Cr.PureComponent=kx;Cr.StrictMode=DC;Cr.Suspense=KC;Cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YC;Cr.act=tb;Cr.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=W2({},t.props),s=t.key,a=t.ref,A=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,A=Ix.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)X2.call(e,l)&&!Z2.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:eh,type:t.type,key:s,ref:a,props:n,_owner:A}};Cr.createContext=function(t){return t={$$typeof:MC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:HC,_context:t},t.Consumer=t};Cr.createElement=eb;Cr.createFactory=function(t){var e=eb.bind(null,t);return e.type=t,e};Cr.createRef=function(){return{current:null}};Cr.forwardRef=function(t){return{$$typeof:$C,render:t}};Cr.isValidElement=Qx;Cr.lazy=function(t){return{$$typeof:VC,_payload:{_status:-1,_result:t},_init:JC}};Cr.memo=function(t,e){return{$$typeof:GC,type:t,compare:e===void 0?null:e}};Cr.startTransition=function(t){var e=Cf.transition;Cf.transition={};try{t()}finally{Cf.transition=e}};Cr.unstable_act=tb;Cr.useCallback=function(t,e){return Js.current.useCallback(t,e)};Cr.useContext=function(t){return Js.current.useContext(t)};Cr.useDebugValue=function(){};Cr.useDeferredValue=function(t){return Js.current.useDeferredValue(t)};Cr.useEffect=function(t,e){return Js.current.useEffect(t,e)};Cr.useId=function(){return Js.current.useId()};Cr.useImperativeHandle=function(t,e,r){return Js.current.useImperativeHandle(t,e,r)};Cr.useInsertionEffect=function(t,e){return Js.current.useInsertionEffect(t,e)};Cr.useLayoutEffect=function(t,e){return Js.current.useLayoutEffect(t,e)};Cr.useMemo=function(t,e){return Js.current.useMemo(t,e)};Cr.useReducer=function(t,e,r){return Js.current.useReducer(t,e,r)};Cr.useRef=function(t){return Js.current.useRef(t)};Cr.useState=function(t){return Js.current.useState(t)};Cr.useSyncExternalStore=function(t,e,r){return Js.current.useSyncExternalStore(t,e,r)};Cr.useTransition=function(){return Js.current.useTransition()};Cr.version="18.3.1";z2.exports=Cr;var V=z2.exports;const XC=LC(V);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZC=V,eN=Symbol.for("react.element"),tN=Symbol.for("react.fragment"),rN=Object.prototype.hasOwnProperty,nN=ZC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sN={key:!0,ref:!0,__self:!0,__source:!0};function rb(t,e,r){var n,s={},a=null,A=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(A=e.ref);for(n in e)rN.call(e,n)&&!sN.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:eN,type:t,key:a,ref:A,props:s,_owner:nN.current}}I0.Fragment=tN;I0.jsx=rb;I0.jsxs=rb;V2.exports=I0;var i=V2.exports,Vg={},nb={exports:{}},Ui={},sb={exports:{}},ib={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ie,de){var ge=ie.length;ie.push(de);e:for(;0<ge;){var ve=ge-1>>>1,I=ie[ve];if(0<s(I,de))ie[ve]=de,ie[ge]=I,ge=ve;else break e}}function r(ie){return ie.length===0?null:ie[0]}function n(ie){if(ie.length===0)return null;var de=ie[0],ge=ie.pop();if(ge!==de){ie[0]=ge;e:for(var ve=0,I=ie.length,H=I>>>1;ve<H;){var re=2*(ve+1)-1,Y=ie[re],le=re+1,me=ie[le];if(0>s(Y,ge))le<I&&0>s(me,Y)?(ie[ve]=me,ie[le]=ge,ve=le):(ie[ve]=Y,ie[re]=ge,ve=re);else if(le<I&&0>s(me,ge))ie[ve]=me,ie[le]=ge,ve=le;else break e}}return de}function s(ie,de){var ge=ie.sortIndex-de.sortIndex;return ge!==0?ge:ie.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var A=Date,o=A.now();t.unstable_now=function(){return A.now()-o}}var l=[],c=[],d=1,p=null,g=3,h=!1,b=!1,w=!1,j=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(ie){for(var de=r(c);de!==null;){if(de.callback===null)n(c);else if(de.startTime<=ie)n(c),de.sortIndex=de.expirationTime,e(l,de);else break;de=r(c)}}function E(ie){if(w=!1,B(ie),!b)if(r(l)!==null)b=!0,ue(L);else{var de=r(c);de!==null&&fe(E,de.startTime-ie)}}function L(ie,de){b=!1,w&&(w=!1,x(G),G=-1),h=!0;var ge=g;try{for(B(de),p=r(l);p!==null&&(!(p.expirationTime>de)||ie&&!k());){var ve=p.callback;if(typeof ve=="function"){p.callback=null,g=p.priorityLevel;var I=ve(p.expirationTime<=de);de=t.unstable_now(),typeof I=="function"?p.callback=I:p===r(l)&&n(l),B(de)}else n(l);p=r(l)}if(p!==null)var H=!0;else{var re=r(c);re!==null&&fe(E,re.startTime-de),H=!1}return H}finally{p=null,g=ge,h=!1}}var U=!1,M=null,G=-1,N=5,$=-1;function k(){return!(t.unstable_now()-$<N)}function _(){if(M!==null){var ie=t.unstable_now();$=ie;var de=!0;try{de=M(!0,ie)}finally{de?z():(U=!1,M=null)}}else U=!1}var z;if(typeof y=="function")z=function(){y(_)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,te=O.port2;O.port1.onmessage=_,z=function(){te.postMessage(null)}}else z=function(){j(_,0)};function ue(ie){M=ie,U||(U=!0,z())}function fe(ie,de){G=j(function(){ie(t.unstable_now())},de)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ie){ie.callback=null},t.unstable_continueExecution=function(){b||h||(b=!0,ue(L))},t.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ie?Math.floor(1e3/ie):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(ie){switch(g){case 1:case 2:case 3:var de=3;break;default:de=g}var ge=g;g=de;try{return ie()}finally{g=ge}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ie,de){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ge=g;g=ie;try{return de()}finally{g=ge}},t.unstable_scheduleCallback=function(ie,de,ge){var ve=t.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?ve+ge:ve):ge=ve,ie){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=ge+I,ie={id:d++,callback:de,priorityLevel:ie,startTime:ge,expirationTime:I,sortIndex:-1},ge>ve?(ie.sortIndex=ge,e(c,ie),r(l)===null&&ie===r(c)&&(w?(x(G),G=-1):w=!0,fe(E,ge-ve))):(ie.sortIndex=I,e(l,ie),b||h||(b=!0,ue(L))),ie},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(ie){var de=g;return function(){var ge=g;g=de;try{return ie.apply(this,arguments)}finally{g=ge}}}})(ib);sb.exports=ib;var iN=sb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aN=V,ki=iN;function vt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ab=new Set,Sd={};function Jl(t,e){Au(t,e),Au(t+"Capture",e)}function Au(t,e){for(Sd[t]=e,t=0;t<e.length;t++)ab.add(e[t])}var $A=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zg=Object.prototype.hasOwnProperty,AN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sv={},iv={};function oN(t){return zg.call(iv,t)?!0:zg.call(sv,t)?!1:AN.test(t)?iv[t]=!0:(sv[t]=!0,!1)}function lN(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function cN(t,e,r,n){if(e===null||typeof e>"u"||lN(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ys(t,e,r,n,s,a,A){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=A}var ws={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ws[t]=new Ys(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ws[e]=new Ys(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ws[t]=new Ys(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ws[t]=new Ys(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ws[t]=new Ys(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ws[t]=new Ys(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ws[t]=new Ys(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ws[t]=new Ys(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ws[t]=new Ys(t,5,!1,t.toLowerCase(),null,!1,!1)});var Tx=/[\-:]([a-z])/g;function Lx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Tx,Lx);ws[e]=new Ys(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Tx,Lx);ws[e]=new Ys(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Tx,Lx);ws[e]=new Ys(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ws[t]=new Ys(t,1,!1,t.toLowerCase(),null,!1,!1)});ws.xlinkHref=new Ys("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ws[t]=new Ys(t,1,!1,t.toLowerCase(),null,!0,!0)});function Px(t,e,r,n){var s=ws.hasOwnProperty(e)?ws[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cN(e,r,s,n)&&(r=null),n||s===null?oN(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var qA=aN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ch=Symbol.for("react.element"),Qc=Symbol.for("react.portal"),Tc=Symbol.for("react.fragment"),Ox=Symbol.for("react.strict_mode"),qg=Symbol.for("react.profiler"),Ab=Symbol.for("react.provider"),ob=Symbol.for("react.context"),Dx=Symbol.for("react.forward_ref"),Wg=Symbol.for("react.suspense"),Jg=Symbol.for("react.suspense_list"),Rx=Symbol.for("react.memo"),So=Symbol.for("react.lazy"),lb=Symbol.for("react.offscreen"),av=Symbol.iterator;function Qu(t){return t===null||typeof t!="object"?null:(t=av&&t[av]||t["@@iterator"],typeof t=="function"?t:null)}var bn=Object.assign,Bp;function Ju(t){if(Bp===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Bp=e&&e[1]||""}return`
`+Bp+t}var Cp=!1;function Np(t,e){if(!t||Cp)return"";Cp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),a=n.stack.split(`
`),A=s.length-1,o=a.length-1;1<=A&&0<=o&&s[A]!==a[o];)o--;for(;1<=A&&0<=o;A--,o--)if(s[A]!==a[o]){if(A!==1||o!==1)do if(A--,o--,0>o||s[A]!==a[o]){var l=`
`+s[A].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=A&&0<=o);break}}}finally{Cp=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Ju(t):""}function uN(t){switch(t.tag){case 5:return Ju(t.type);case 16:return Ju("Lazy");case 13:return Ju("Suspense");case 19:return Ju("SuspenseList");case 0:case 2:case 15:return t=Np(t.type,!1),t;case 11:return t=Np(t.type.render,!1),t;case 1:return t=Np(t.type,!0),t;default:return""}}function Yg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Tc:return"Fragment";case Qc:return"Portal";case qg:return"Profiler";case Ox:return"StrictMode";case Wg:return"Suspense";case Jg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ob:return(t.displayName||"Context")+".Consumer";case Ab:return(t._context.displayName||"Context")+".Provider";case Dx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Rx:return e=t.displayName||null,e!==null?e:Yg(t.type)||"Memo";case So:e=t._payload,t=t._init;try{return Yg(t(e))}catch{}}return null}function dN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yg(e);case 8:return e===Ox?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function hN(t){var e=cb(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(A){n=""+A,a.call(this,A)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(A){n=""+A},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nh(t){t._valueTracker||(t._valueTracker=hN(t))}function ub(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=cb(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Gf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Xg(t,e){var r=e.checked;return bn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Av(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Wo(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function db(t,e){e=e.checked,e!=null&&Px(t,"checked",e,!1)}function Zg(t,e){db(t,e);var r=Wo(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?em(t,e.type,r):e.hasOwnProperty("defaultValue")&&em(t,e.type,Wo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ov(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function em(t,e,r){(e!=="number"||Gf(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Yu=Array.isArray;function Wc(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Wo(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function tm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(vt(91));return bn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function lv(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(vt(92));if(Yu(r)){if(1<r.length)throw Error(vt(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Wo(r)}}function hb(t,e){var r=Wo(e.value),n=Wo(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function cv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function fb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?fb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Sh,pb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Sh=Sh||document.createElement("div"),Sh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Sh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function jd(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var od={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fN=["Webkit","ms","Moz","O"];Object.keys(od).forEach(function(t){fN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),od[e]=od[t]})});function gb(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||od.hasOwnProperty(t)&&od[t]?(""+e).trim():e+"px"}function mb(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=gb(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var pN=bn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nm(t,e){if(e){if(pN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(vt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(vt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(vt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(vt(62))}}function sm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var im=null;function Hx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var am=null,Jc=null,Yc=null;function uv(t){if(t=nh(t)){if(typeof am!="function")throw Error(vt(280));var e=t.stateNode;e&&(e=O0(e),am(t.stateNode,t.type,e))}}function xb(t){Jc?Yc?Yc.push(t):Yc=[t]:Jc=t}function vb(){if(Jc){var t=Jc,e=Yc;if(Yc=Jc=null,uv(t),e)for(t=0;t<e.length;t++)uv(e[t])}}function wb(t,e){return t(e)}function yb(){}var Sp=!1;function bb(t,e,r){if(Sp)return t(e,r);Sp=!0;try{return wb(t,e,r)}finally{Sp=!1,(Jc!==null||Yc!==null)&&(yb(),vb())}}function Ed(t,e){var r=t.stateNode;if(r===null)return null;var n=O0(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(vt(231,e,typeof r));return r}var Am=!1;if($A)try{var Tu={};Object.defineProperty(Tu,"passive",{get:function(){Am=!0}}),window.addEventListener("test",Tu,Tu),window.removeEventListener("test",Tu,Tu)}catch{Am=!1}function gN(t,e,r,n,s,a,A,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var ld=!1,Vf=null,zf=!1,om=null,mN={onError:function(t){ld=!0,Vf=t}};function xN(t,e,r,n,s,a,A,o,l){ld=!1,Vf=null,gN.apply(mN,arguments)}function vN(t,e,r,n,s,a,A,o,l){if(xN.apply(this,arguments),ld){if(ld){var c=Vf;ld=!1,Vf=null}else throw Error(vt(198));zf||(zf=!0,om=c)}}function Yl(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Bb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function dv(t){if(Yl(t)!==t)throw Error(vt(188))}function wN(t){var e=t.alternate;if(!e){if(e=Yl(t),e===null)throw Error(vt(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return dv(s),t;if(a===n)return dv(s),e;a=a.sibling}throw Error(vt(188))}if(r.return!==n.return)r=s,n=a;else{for(var A=!1,o=s.child;o;){if(o===r){A=!0,r=s,n=a;break}if(o===n){A=!0,n=s,r=a;break}o=o.sibling}if(!A){for(o=a.child;o;){if(o===r){A=!0,r=a,n=s;break}if(o===n){A=!0,n=a,r=s;break}o=o.sibling}if(!A)throw Error(vt(189))}}if(r.alternate!==n)throw Error(vt(190))}if(r.tag!==3)throw Error(vt(188));return r.stateNode.current===r?t:e}function Cb(t){return t=wN(t),t!==null?Nb(t):null}function Nb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Nb(t);if(e!==null)return e;t=t.sibling}return null}var Sb=ki.unstable_scheduleCallback,hv=ki.unstable_cancelCallback,yN=ki.unstable_shouldYield,bN=ki.unstable_requestPaint,Ln=ki.unstable_now,BN=ki.unstable_getCurrentPriorityLevel,Mx=ki.unstable_ImmediatePriority,jb=ki.unstable_UserBlockingPriority,qf=ki.unstable_NormalPriority,CN=ki.unstable_LowPriority,Eb=ki.unstable_IdlePriority,Q0=null,hA=null;function NN(t){if(hA&&typeof hA.onCommitFiberRoot=="function")try{hA.onCommitFiberRoot(Q0,t,void 0,(t.current.flags&128)===128)}catch{}}var Ia=Math.clz32?Math.clz32:EN,SN=Math.log,jN=Math.LN2;function EN(t){return t>>>=0,t===0?32:31-(SN(t)/jN|0)|0}var jh=64,Eh=4194304;function Xu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wf(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,a=t.pingedLanes,A=r&268435455;if(A!==0){var o=A&~s;o!==0?n=Xu(o):(a&=A,a!==0&&(n=Xu(a)))}else A=r&~s,A!==0?n=Xu(A):a!==0&&(n=Xu(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Ia(e),s=1<<r,n|=t[r],e&=~s;return n}function FN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _N(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var A=31-Ia(a),o=1<<A,l=s[A];l===-1?(!(o&r)||o&n)&&(s[A]=FN(o,e)):l<=e&&(t.expiredLanes|=o),a&=~o}}function lm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Fb(){var t=jh;return jh<<=1,!(jh&4194240)&&(jh=64),t}function jp(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function th(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ia(e),t[e]=r}function kN(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Ia(r),a=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~a}}function $x(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Ia(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Vr=0;function _b(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var kb,Kx,Ub,Ib,Qb,cm=!1,Fh=[],Do=null,Ro=null,Ho=null,Fd=new Map,_d=new Map,_o=[],UN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fv(t,e){switch(t){case"focusin":case"focusout":Do=null;break;case"dragenter":case"dragleave":Ro=null;break;case"mouseover":case"mouseout":Ho=null;break;case"pointerover":case"pointerout":Fd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_d.delete(e.pointerId)}}function Lu(t,e,r,n,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},e!==null&&(e=nh(e),e!==null&&Kx(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function IN(t,e,r,n,s){switch(e){case"focusin":return Do=Lu(Do,t,e,r,n,s),!0;case"dragenter":return Ro=Lu(Ro,t,e,r,n,s),!0;case"mouseover":return Ho=Lu(Ho,t,e,r,n,s),!0;case"pointerover":var a=s.pointerId;return Fd.set(a,Lu(Fd.get(a)||null,t,e,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,_d.set(a,Lu(_d.get(a)||null,t,e,r,n,s)),!0}return!1}function Tb(t){var e=Il(t.target);if(e!==null){var r=Yl(e);if(r!==null){if(e=r.tag,e===13){if(e=Bb(r),e!==null){t.blockedOn=e,Qb(t.priority,function(){Ub(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=um(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);im=n,r.target.dispatchEvent(n),im=null}else return e=nh(r),e!==null&&Kx(e),t.blockedOn=r,!1;e.shift()}return!0}function pv(t,e,r){Nf(t)&&r.delete(e)}function QN(){cm=!1,Do!==null&&Nf(Do)&&(Do=null),Ro!==null&&Nf(Ro)&&(Ro=null),Ho!==null&&Nf(Ho)&&(Ho=null),Fd.forEach(pv),_d.forEach(pv)}function Pu(t,e){t.blockedOn===e&&(t.blockedOn=null,cm||(cm=!0,ki.unstable_scheduleCallback(ki.unstable_NormalPriority,QN)))}function kd(t){function e(s){return Pu(s,t)}if(0<Fh.length){Pu(Fh[0],t);for(var r=1;r<Fh.length;r++){var n=Fh[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Do!==null&&Pu(Do,t),Ro!==null&&Pu(Ro,t),Ho!==null&&Pu(Ho,t),Fd.forEach(e),_d.forEach(e),r=0;r<_o.length;r++)n=_o[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<_o.length&&(r=_o[0],r.blockedOn===null);)Tb(r),r.blockedOn===null&&_o.shift()}var Xc=qA.ReactCurrentBatchConfig,Jf=!0;function TN(t,e,r,n){var s=Vr,a=Xc.transition;Xc.transition=null;try{Vr=1,Gx(t,e,r,n)}finally{Vr=s,Xc.transition=a}}function LN(t,e,r,n){var s=Vr,a=Xc.transition;Xc.transition=null;try{Vr=4,Gx(t,e,r,n)}finally{Vr=s,Xc.transition=a}}function Gx(t,e,r,n){if(Jf){var s=um(t,e,r,n);if(s===null)Pp(t,e,n,Yf,r),fv(t,n);else if(IN(s,t,e,r,n))n.stopPropagation();else if(fv(t,n),e&4&&-1<UN.indexOf(t)){for(;s!==null;){var a=nh(s);if(a!==null&&kb(a),a=um(t,e,r,n),a===null&&Pp(t,e,n,Yf,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else Pp(t,e,n,null,r)}}var Yf=null;function um(t,e,r,n){if(Yf=null,t=Hx(n),t=Il(t),t!==null)if(e=Yl(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Bb(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yf=t,null}function Lb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(BN()){case Mx:return 1;case jb:return 4;case qf:case CN:return 16;case Eb:return 536870912;default:return 16}default:return 16}}var Io=null,Vx=null,Sf=null;function Pb(){if(Sf)return Sf;var t,e=Vx,r=e.length,n,s="value"in Io?Io.value:Io.textContent,a=s.length;for(t=0;t<r&&e[t]===s[t];t++);var A=r-t;for(n=1;n<=A&&e[r-n]===s[a-n];n++);return Sf=s.slice(t,1<n?1-n:void 0)}function jf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function _h(){return!0}function gv(){return!1}function Ii(t){function e(r,n,s,a,A){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=A,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?_h:gv,this.isPropagationStopped=gv,this}return bn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=_h)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=_h)},persist:function(){},isPersistent:_h}),e}var xu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zx=Ii(xu),rh=bn({},xu,{view:0,detail:0}),PN=Ii(rh),Ep,Fp,Ou,T0=bn({},rh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ou&&(Ou&&t.type==="mousemove"?(Ep=t.screenX-Ou.screenX,Fp=t.screenY-Ou.screenY):Fp=Ep=0,Ou=t),Ep)},movementY:function(t){return"movementY"in t?t.movementY:Fp}}),mv=Ii(T0),ON=bn({},T0,{dataTransfer:0}),DN=Ii(ON),RN=bn({},rh,{relatedTarget:0}),_p=Ii(RN),HN=bn({},xu,{animationName:0,elapsedTime:0,pseudoElement:0}),MN=Ii(HN),$N=bn({},xu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),KN=Ii($N),GN=bn({},xu,{data:0}),xv=Ii(GN),VN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qN[t])?!!e[t]:!1}function qx(){return WN}var JN=bn({},rh,{key:function(t){if(t.key){var e=VN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=jf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qx,charCode:function(t){return t.type==="keypress"?jf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),YN=Ii(JN),XN=bn({},T0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vv=Ii(XN),ZN=bn({},rh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qx}),eS=Ii(ZN),tS=bn({},xu,{propertyName:0,elapsedTime:0,pseudoElement:0}),rS=Ii(tS),nS=bn({},T0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),sS=Ii(nS),iS=[9,13,27,32],Wx=$A&&"CompositionEvent"in window,cd=null;$A&&"documentMode"in document&&(cd=document.documentMode);var aS=$A&&"TextEvent"in window&&!cd,Ob=$A&&(!Wx||cd&&8<cd&&11>=cd),wv=" ",yv=!1;function Db(t,e){switch(t){case"keyup":return iS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Lc=!1;function AS(t,e){switch(t){case"compositionend":return Rb(e);case"keypress":return e.which!==32?null:(yv=!0,wv);case"textInput":return t=e.data,t===wv&&yv?null:t;default:return null}}function oS(t,e){if(Lc)return t==="compositionend"||!Wx&&Db(t,e)?(t=Pb(),Sf=Vx=Io=null,Lc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ob&&e.locale!=="ko"?null:e.data;default:return null}}var lS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!lS[t.type]:e==="textarea"}function Hb(t,e,r,n){xb(n),e=Xf(e,"onChange"),0<e.length&&(r=new zx("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var ud=null,Ud=null;function cS(t){Xb(t,0)}function L0(t){var e=Dc(t);if(ub(e))return t}function uS(t,e){if(t==="change")return e}var Mb=!1;if($A){var kp;if($A){var Up="oninput"in document;if(!Up){var Bv=document.createElement("div");Bv.setAttribute("oninput","return;"),Up=typeof Bv.oninput=="function"}kp=Up}else kp=!1;Mb=kp&&(!document.documentMode||9<document.documentMode)}function Cv(){ud&&(ud.detachEvent("onpropertychange",$b),Ud=ud=null)}function $b(t){if(t.propertyName==="value"&&L0(Ud)){var e=[];Hb(e,Ud,t,Hx(t)),bb(cS,e)}}function dS(t,e,r){t==="focusin"?(Cv(),ud=e,Ud=r,ud.attachEvent("onpropertychange",$b)):t==="focusout"&&Cv()}function hS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return L0(Ud)}function fS(t,e){if(t==="click")return L0(e)}function pS(t,e){if(t==="input"||t==="change")return L0(e)}function gS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ta=typeof Object.is=="function"?Object.is:gS;function Id(t,e){if(Ta(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!zg.call(e,s)||!Ta(t[s],e[s]))return!1}return!0}function Nv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sv(t,e){var r=Nv(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Nv(r)}}function Kb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Kb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Gb(){for(var t=window,e=Gf();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Gf(t.document)}return e}function Jx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function mS(t){var e=Gb(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Kb(r.ownerDocument.documentElement,r)){if(n!==null&&Jx(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!t.extend&&a>n&&(s=n,n=a,a=s),s=Sv(r,a);var A=Sv(r,n);s&&A&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==A.node||t.focusOffset!==A.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(A.node,A.offset)):(e.setEnd(A.node,A.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var xS=$A&&"documentMode"in document&&11>=document.documentMode,Pc=null,dm=null,dd=null,hm=!1;function jv(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;hm||Pc==null||Pc!==Gf(n)||(n=Pc,"selectionStart"in n&&Jx(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),dd&&Id(dd,n)||(dd=n,n=Xf(dm,"onSelect"),0<n.length&&(e=new zx("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Pc)))}function kh(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Oc={animationend:kh("Animation","AnimationEnd"),animationiteration:kh("Animation","AnimationIteration"),animationstart:kh("Animation","AnimationStart"),transitionend:kh("Transition","TransitionEnd")},Ip={},Vb={};$A&&(Vb=document.createElement("div").style,"AnimationEvent"in window||(delete Oc.animationend.animation,delete Oc.animationiteration.animation,delete Oc.animationstart.animation),"TransitionEvent"in window||delete Oc.transitionend.transition);function P0(t){if(Ip[t])return Ip[t];if(!Oc[t])return t;var e=Oc[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Vb)return Ip[t]=e[r];return t}var zb=P0("animationend"),qb=P0("animationiteration"),Wb=P0("animationstart"),Jb=P0("transitionend"),Yb=new Map,Ev="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zo(t,e){Yb.set(t,e),Jl(e,[t])}for(var Qp=0;Qp<Ev.length;Qp++){var Tp=Ev[Qp],vS=Tp.toLowerCase(),wS=Tp[0].toUpperCase()+Tp.slice(1);Zo(vS,"on"+wS)}Zo(zb,"onAnimationEnd");Zo(qb,"onAnimationIteration");Zo(Wb,"onAnimationStart");Zo("dblclick","onDoubleClick");Zo("focusin","onFocus");Zo("focusout","onBlur");Zo(Jb,"onTransitionEnd");Au("onMouseEnter",["mouseout","mouseover"]);Au("onMouseLeave",["mouseout","mouseover"]);Au("onPointerEnter",["pointerout","pointerover"]);Au("onPointerLeave",["pointerout","pointerover"]);Jl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zu));function Fv(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,vN(n,e,void 0,t),t.currentTarget=null}function Xb(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var A=n.length-1;0<=A;A--){var o=n[A],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&s.isPropagationStopped())break e;Fv(s,o,c),a=l}else for(A=0;A<n.length;A++){if(o=n[A],l=o.instance,c=o.currentTarget,o=o.listener,l!==a&&s.isPropagationStopped())break e;Fv(s,o,c),a=l}}}if(zf)throw t=om,zf=!1,om=null,t}function on(t,e){var r=e[xm];r===void 0&&(r=e[xm]=new Set);var n=t+"__bubble";r.has(n)||(Zb(e,t,2,!1),r.add(n))}function Lp(t,e,r){var n=0;e&&(n|=4),Zb(r,t,n,e)}var Uh="_reactListening"+Math.random().toString(36).slice(2);function Qd(t){if(!t[Uh]){t[Uh]=!0,ab.forEach(function(r){r!=="selectionchange"&&(yS.has(r)||Lp(r,!1,t),Lp(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Uh]||(e[Uh]=!0,Lp("selectionchange",!1,e))}}function Zb(t,e,r,n){switch(Lb(e)){case 1:var s=TN;break;case 4:s=LN;break;default:s=Gx}r=s.bind(null,e,r,t),s=void 0,!Am||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Pp(t,e,r,n,s){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var A=n.tag;if(A===3||A===4){var o=n.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(A===4)for(A=n.return;A!==null;){var l=A.tag;if((l===3||l===4)&&(l=A.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;A=A.return}for(;o!==null;){if(A=Il(o),A===null)return;if(l=A.tag,l===5||l===6){n=a=A;continue e}o=o.parentNode}}n=n.return}bb(function(){var c=a,d=Hx(r),p=[];e:{var g=Yb.get(t);if(g!==void 0){var h=zx,b=t;switch(t){case"keypress":if(jf(r)===0)break e;case"keydown":case"keyup":h=YN;break;case"focusin":b="focus",h=_p;break;case"focusout":b="blur",h=_p;break;case"beforeblur":case"afterblur":h=_p;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=mv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=DN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=eS;break;case zb:case qb:case Wb:h=MN;break;case Jb:h=rS;break;case"scroll":h=PN;break;case"wheel":h=sS;break;case"copy":case"cut":case"paste":h=KN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=vv}var w=(e&4)!==0,j=!w&&t==="scroll",x=w?g!==null?g+"Capture":null:g;w=[];for(var y=c,B;y!==null;){B=y;var E=B.stateNode;if(B.tag===5&&E!==null&&(B=E,x!==null&&(E=Ed(y,x),E!=null&&w.push(Td(y,E,B)))),j)break;y=y.return}0<w.length&&(g=new h(g,b,null,r,d),p.push({event:g,listeners:w}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",g&&r!==im&&(b=r.relatedTarget||r.fromElement)&&(Il(b)||b[KA]))break e;if((h||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,h?(b=r.relatedTarget||r.toElement,h=c,b=b?Il(b):null,b!==null&&(j=Yl(b),b!==j||b.tag!==5&&b.tag!==6)&&(b=null)):(h=null,b=c),h!==b)){if(w=mv,E="onMouseLeave",x="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(w=vv,E="onPointerLeave",x="onPointerEnter",y="pointer"),j=h==null?g:Dc(h),B=b==null?g:Dc(b),g=new w(E,y+"leave",h,r,d),g.target=j,g.relatedTarget=B,E=null,Il(d)===c&&(w=new w(x,y+"enter",b,r,d),w.target=B,w.relatedTarget=j,E=w),j=E,h&&b)t:{for(w=h,x=b,y=0,B=w;B;B=uc(B))y++;for(B=0,E=x;E;E=uc(E))B++;for(;0<y-B;)w=uc(w),y--;for(;0<B-y;)x=uc(x),B--;for(;y--;){if(w===x||x!==null&&w===x.alternate)break t;w=uc(w),x=uc(x)}w=null}else w=null;h!==null&&_v(p,g,h,w,!1),b!==null&&j!==null&&_v(p,j,b,w,!0)}}e:{if(g=c?Dc(c):window,h=g.nodeName&&g.nodeName.toLowerCase(),h==="select"||h==="input"&&g.type==="file")var L=uS;else if(bv(g))if(Mb)L=pS;else{L=hS;var U=dS}else(h=g.nodeName)&&h.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=fS);if(L&&(L=L(t,c))){Hb(p,L,r,d);break e}U&&U(t,g,c),t==="focusout"&&(U=g._wrapperState)&&U.controlled&&g.type==="number"&&em(g,"number",g.value)}switch(U=c?Dc(c):window,t){case"focusin":(bv(U)||U.contentEditable==="true")&&(Pc=U,dm=c,dd=null);break;case"focusout":dd=dm=Pc=null;break;case"mousedown":hm=!0;break;case"contextmenu":case"mouseup":case"dragend":hm=!1,jv(p,r,d);break;case"selectionchange":if(xS)break;case"keydown":case"keyup":jv(p,r,d)}var M;if(Wx)e:{switch(t){case"compositionstart":var G="onCompositionStart";break e;case"compositionend":G="onCompositionEnd";break e;case"compositionupdate":G="onCompositionUpdate";break e}G=void 0}else Lc?Db(t,r)&&(G="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(G="onCompositionStart");G&&(Ob&&r.locale!=="ko"&&(Lc||G!=="onCompositionStart"?G==="onCompositionEnd"&&Lc&&(M=Pb()):(Io=d,Vx="value"in Io?Io.value:Io.textContent,Lc=!0)),U=Xf(c,G),0<U.length&&(G=new xv(G,t,null,r,d),p.push({event:G,listeners:U}),M?G.data=M:(M=Rb(r),M!==null&&(G.data=M)))),(M=aS?AS(t,r):oS(t,r))&&(c=Xf(c,"onBeforeInput"),0<c.length&&(d=new xv("onBeforeInput","beforeinput",null,r,d),p.push({event:d,listeners:c}),d.data=M))}Xb(p,e)})}function Td(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Xf(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Ed(t,r),a!=null&&n.unshift(Td(t,a,s)),a=Ed(t,e),a!=null&&n.push(Td(t,a,s))),t=t.return}return n}function uc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function _v(t,e,r,n,s){for(var a=e._reactName,A=[];r!==null&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&c!==null&&(o=c,s?(l=Ed(r,a),l!=null&&A.unshift(Td(r,l,o))):s||(l=Ed(r,a),l!=null&&A.push(Td(r,l,o)))),r=r.return}A.length!==0&&t.push({event:e,listeners:A})}var bS=/\r\n?/g,BS=/\u0000|\uFFFD/g;function kv(t){return(typeof t=="string"?t:""+t).replace(bS,`
`).replace(BS,"")}function Ih(t,e,r){if(e=kv(e),kv(t)!==e&&r)throw Error(vt(425))}function Zf(){}var fm=null,pm=null;function gm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var mm=typeof setTimeout=="function"?setTimeout:void 0,CS=typeof clearTimeout=="function"?clearTimeout:void 0,Uv=typeof Promise=="function"?Promise:void 0,NS=typeof queueMicrotask=="function"?queueMicrotask:typeof Uv<"u"?function(t){return Uv.resolve(null).then(t).catch(SS)}:mm;function SS(t){setTimeout(function(){throw t})}function Op(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),kd(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);kd(e)}function Mo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Iv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var vu=Math.random().toString(36).slice(2),uA="__reactFiber$"+vu,Ld="__reactProps$"+vu,KA="__reactContainer$"+vu,xm="__reactEvents$"+vu,jS="__reactListeners$"+vu,ES="__reactHandles$"+vu;function Il(t){var e=t[uA];if(e)return e;for(var r=t.parentNode;r;){if(e=r[KA]||r[uA]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Iv(t);t!==null;){if(r=t[uA])return r;t=Iv(t)}return e}t=r,r=t.parentNode}return null}function nh(t){return t=t[uA]||t[KA],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Dc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(vt(33))}function O0(t){return t[Ld]||null}var vm=[],Rc=-1;function el(t){return{current:t}}function cn(t){0>Rc||(t.current=vm[Rc],vm[Rc]=null,Rc--)}function an(t,e){Rc++,vm[Rc]=t.current,t.current=e}var Jo={},Ls=el(Jo),oi=el(!1),$l=Jo;function ou(t,e){var r=t.type.contextTypes;if(!r)return Jo;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function li(t){return t=t.childContextTypes,t!=null}function e0(){cn(oi),cn(Ls)}function Qv(t,e,r){if(Ls.current!==Jo)throw Error(vt(168));an(Ls,e),an(oi,r)}function e5(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(vt(108,dN(t)||"Unknown",s));return bn({},r,n)}function t0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Jo,$l=Ls.current,an(Ls,t),an(oi,oi.current),!0}function Tv(t,e,r){var n=t.stateNode;if(!n)throw Error(vt(169));r?(t=e5(t,e,$l),n.__reactInternalMemoizedMergedChildContext=t,cn(oi),cn(Ls),an(Ls,t)):cn(oi),an(oi,r)}var PA=null,D0=!1,Dp=!1;function t5(t){PA===null?PA=[t]:PA.push(t)}function FS(t){D0=!0,t5(t)}function tl(){if(!Dp&&PA!==null){Dp=!0;var t=0,e=Vr;try{var r=PA;for(Vr=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}PA=null,D0=!1}catch(s){throw PA!==null&&(PA=PA.slice(t+1)),Sb(Mx,tl),s}finally{Vr=e,Dp=!1}}return null}var Hc=[],Mc=0,r0=null,n0=0,Wi=[],Ji=0,Kl=null,DA=1,RA="";function Nl(t,e){Hc[Mc++]=n0,Hc[Mc++]=r0,r0=t,n0=e}function r5(t,e,r){Wi[Ji++]=DA,Wi[Ji++]=RA,Wi[Ji++]=Kl,Kl=t;var n=DA;t=RA;var s=32-Ia(n)-1;n&=~(1<<s),r+=1;var a=32-Ia(e)+s;if(30<a){var A=s-s%5;a=(n&(1<<A)-1).toString(32),n>>=A,s-=A,DA=1<<32-Ia(e)+s|r<<s|n,RA=a+t}else DA=1<<a|r<<s|n,RA=t}function Yx(t){t.return!==null&&(Nl(t,1),r5(t,1,0))}function Xx(t){for(;t===r0;)r0=Hc[--Mc],Hc[Mc]=null,n0=Hc[--Mc],Hc[Mc]=null;for(;t===Kl;)Kl=Wi[--Ji],Wi[Ji]=null,RA=Wi[--Ji],Wi[Ji]=null,DA=Wi[--Ji],Wi[Ji]=null}var _i=null,Ei=null,pn=!1,Ua=null;function n5(t,e){var r=Xi(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Lv(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,_i=t,Ei=Mo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,_i=t,Ei=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Kl!==null?{id:DA,overflow:RA}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Xi(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,_i=t,Ei=null,!0):!1;default:return!1}}function wm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ym(t){if(pn){var e=Ei;if(e){var r=e;if(!Lv(t,e)){if(wm(t))throw Error(vt(418));e=Mo(r.nextSibling);var n=_i;e&&Lv(t,e)?n5(n,r):(t.flags=t.flags&-4097|2,pn=!1,_i=t)}}else{if(wm(t))throw Error(vt(418));t.flags=t.flags&-4097|2,pn=!1,_i=t}}}function Pv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;_i=t}function Qh(t){if(t!==_i)return!1;if(!pn)return Pv(t),pn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gm(t.type,t.memoizedProps)),e&&(e=Ei)){if(wm(t))throw s5(),Error(vt(418));for(;e;)n5(t,e),e=Mo(e.nextSibling)}if(Pv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(vt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Ei=Mo(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Ei=null}}else Ei=_i?Mo(t.stateNode.nextSibling):null;return!0}function s5(){for(var t=Ei;t;)t=Mo(t.nextSibling)}function lu(){Ei=_i=null,pn=!1}function Zx(t){Ua===null?Ua=[t]:Ua.push(t)}var _S=qA.ReactCurrentBatchConfig;function Du(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(vt(309));var n=r.stateNode}if(!n)throw Error(vt(147,t));var s=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(A){var o=s.refs;A===null?delete o[a]:o[a]=A},e._stringRef=a,e)}if(typeof t!="string")throw Error(vt(284));if(!r._owner)throw Error(vt(290,t))}return t}function Th(t,e){throw t=Object.prototype.toString.call(e),Error(vt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ov(t){var e=t._init;return e(t._payload)}function i5(t){function e(x,y){if(t){var B=x.deletions;B===null?(x.deletions=[y],x.flags|=16):B.push(y)}}function r(x,y){if(!t)return null;for(;y!==null;)e(x,y),y=y.sibling;return null}function n(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function s(x,y){return x=Vo(x,y),x.index=0,x.sibling=null,x}function a(x,y,B){return x.index=B,t?(B=x.alternate,B!==null?(B=B.index,B<y?(x.flags|=2,y):B):(x.flags|=2,y)):(x.flags|=1048576,y)}function A(x){return t&&x.alternate===null&&(x.flags|=2),x}function o(x,y,B,E){return y===null||y.tag!==6?(y=Vp(B,x.mode,E),y.return=x,y):(y=s(y,B),y.return=x,y)}function l(x,y,B,E){var L=B.type;return L===Tc?d(x,y,B.props.children,E,B.key):y!==null&&(y.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===So&&Ov(L)===y.type)?(E=s(y,B.props),E.ref=Du(x,y,B),E.return=x,E):(E=Qf(B.type,B.key,B.props,null,x.mode,E),E.ref=Du(x,y,B),E.return=x,E)}function c(x,y,B,E){return y===null||y.tag!==4||y.stateNode.containerInfo!==B.containerInfo||y.stateNode.implementation!==B.implementation?(y=zp(B,x.mode,E),y.return=x,y):(y=s(y,B.children||[]),y.return=x,y)}function d(x,y,B,E,L){return y===null||y.tag!==7?(y=Dl(B,x.mode,E,L),y.return=x,y):(y=s(y,B),y.return=x,y)}function p(x,y,B){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Vp(""+y,x.mode,B),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ch:return B=Qf(y.type,y.key,y.props,null,x.mode,B),B.ref=Du(x,null,y),B.return=x,B;case Qc:return y=zp(y,x.mode,B),y.return=x,y;case So:var E=y._init;return p(x,E(y._payload),B)}if(Yu(y)||Qu(y))return y=Dl(y,x.mode,B,null),y.return=x,y;Th(x,y)}return null}function g(x,y,B,E){var L=y!==null?y.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return L!==null?null:o(x,y,""+B,E);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Ch:return B.key===L?l(x,y,B,E):null;case Qc:return B.key===L?c(x,y,B,E):null;case So:return L=B._init,g(x,y,L(B._payload),E)}if(Yu(B)||Qu(B))return L!==null?null:d(x,y,B,E,null);Th(x,B)}return null}function h(x,y,B,E,L){if(typeof E=="string"&&E!==""||typeof E=="number")return x=x.get(B)||null,o(y,x,""+E,L);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ch:return x=x.get(E.key===null?B:E.key)||null,l(y,x,E,L);case Qc:return x=x.get(E.key===null?B:E.key)||null,c(y,x,E,L);case So:var U=E._init;return h(x,y,B,U(E._payload),L)}if(Yu(E)||Qu(E))return x=x.get(B)||null,d(y,x,E,L,null);Th(y,E)}return null}function b(x,y,B,E){for(var L=null,U=null,M=y,G=y=0,N=null;M!==null&&G<B.length;G++){M.index>G?(N=M,M=null):N=M.sibling;var $=g(x,M,B[G],E);if($===null){M===null&&(M=N);break}t&&M&&$.alternate===null&&e(x,M),y=a($,y,G),U===null?L=$:U.sibling=$,U=$,M=N}if(G===B.length)return r(x,M),pn&&Nl(x,G),L;if(M===null){for(;G<B.length;G++)M=p(x,B[G],E),M!==null&&(y=a(M,y,G),U===null?L=M:U.sibling=M,U=M);return pn&&Nl(x,G),L}for(M=n(x,M);G<B.length;G++)N=h(M,x,G,B[G],E),N!==null&&(t&&N.alternate!==null&&M.delete(N.key===null?G:N.key),y=a(N,y,G),U===null?L=N:U.sibling=N,U=N);return t&&M.forEach(function(k){return e(x,k)}),pn&&Nl(x,G),L}function w(x,y,B,E){var L=Qu(B);if(typeof L!="function")throw Error(vt(150));if(B=L.call(B),B==null)throw Error(vt(151));for(var U=L=null,M=y,G=y=0,N=null,$=B.next();M!==null&&!$.done;G++,$=B.next()){M.index>G?(N=M,M=null):N=M.sibling;var k=g(x,M,$.value,E);if(k===null){M===null&&(M=N);break}t&&M&&k.alternate===null&&e(x,M),y=a(k,y,G),U===null?L=k:U.sibling=k,U=k,M=N}if($.done)return r(x,M),pn&&Nl(x,G),L;if(M===null){for(;!$.done;G++,$=B.next())$=p(x,$.value,E),$!==null&&(y=a($,y,G),U===null?L=$:U.sibling=$,U=$);return pn&&Nl(x,G),L}for(M=n(x,M);!$.done;G++,$=B.next())$=h(M,x,G,$.value,E),$!==null&&(t&&$.alternate!==null&&M.delete($.key===null?G:$.key),y=a($,y,G),U===null?L=$:U.sibling=$,U=$);return t&&M.forEach(function(_){return e(x,_)}),pn&&Nl(x,G),L}function j(x,y,B,E){if(typeof B=="object"&&B!==null&&B.type===Tc&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case Ch:e:{for(var L=B.key,U=y;U!==null;){if(U.key===L){if(L=B.type,L===Tc){if(U.tag===7){r(x,U.sibling),y=s(U,B.props.children),y.return=x,x=y;break e}}else if(U.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===So&&Ov(L)===U.type){r(x,U.sibling),y=s(U,B.props),y.ref=Du(x,U,B),y.return=x,x=y;break e}r(x,U);break}else e(x,U);U=U.sibling}B.type===Tc?(y=Dl(B.props.children,x.mode,E,B.key),y.return=x,x=y):(E=Qf(B.type,B.key,B.props,null,x.mode,E),E.ref=Du(x,y,B),E.return=x,x=E)}return A(x);case Qc:e:{for(U=B.key;y!==null;){if(y.key===U)if(y.tag===4&&y.stateNode.containerInfo===B.containerInfo&&y.stateNode.implementation===B.implementation){r(x,y.sibling),y=s(y,B.children||[]),y.return=x,x=y;break e}else{r(x,y);break}else e(x,y);y=y.sibling}y=zp(B,x.mode,E),y.return=x,x=y}return A(x);case So:return U=B._init,j(x,y,U(B._payload),E)}if(Yu(B))return b(x,y,B,E);if(Qu(B))return w(x,y,B,E);Th(x,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,y!==null&&y.tag===6?(r(x,y.sibling),y=s(y,B),y.return=x,x=y):(r(x,y),y=Vp(B,x.mode,E),y.return=x,x=y),A(x)):r(x,y)}return j}var cu=i5(!0),a5=i5(!1),s0=el(null),i0=null,$c=null,e1=null;function t1(){e1=$c=i0=null}function r1(t){var e=s0.current;cn(s0),t._currentValue=e}function bm(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Zc(t,e){i0=t,e1=$c=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ai=!0),t.firstContext=null)}function ra(t){var e=t._currentValue;if(e1!==t)if(t={context:t,memoizedValue:e,next:null},$c===null){if(i0===null)throw Error(vt(308));$c=t,i0.dependencies={lanes:0,firstContext:t}}else $c=$c.next=t;return e}var Ql=null;function n1(t){Ql===null?Ql=[t]:Ql.push(t)}function A5(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,n1(e)):(r.next=s.next,s.next=r),e.interleaved=r,GA(t,n)}function GA(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var jo=!1;function s1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function o5(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function HA(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function $o(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Tr&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,GA(t,r)}return s=n.interleaved,s===null?(e.next=e,n1(n)):(e.next=s.next,s.next=e),n.interleaved=e,GA(t,r)}function Ef(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,$x(t,r)}}function Dv(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var A={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=A:a=a.next=A,r=r.next}while(r!==null);a===null?s=a=e:a=a.next=e}else s=a=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function a0(t,e,r,n){var s=t.updateQueue;jo=!1;var a=s.firstBaseUpdate,A=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,c=l.next;l.next=null,A===null?a=c:A.next=c,A=l;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==A&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(a!==null){var p=s.baseState;A=0,d=c=l=null,o=a;do{var g=o.lane,h=o.eventTime;if((n&g)===g){d!==null&&(d=d.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var b=t,w=o;switch(g=e,h=r,w.tag){case 1:if(b=w.payload,typeof b=="function"){p=b.call(h,p,g);break e}p=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=w.payload,g=typeof b=="function"?b.call(h,p,g):b,g==null)break e;p=bn({},p,g);break e;case 2:jo=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[o]:g.push(o))}else h={eventTime:h,lane:g,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=h,l=p):d=d.next=h,A|=g;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;g=o,o=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(d===null&&(l=p),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do A|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);Vl|=A,t.lanes=A,t.memoizedState=p}}function Rv(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(vt(191,s));s.call(n)}}}var sh={},fA=el(sh),Pd=el(sh),Od=el(sh);function Tl(t){if(t===sh)throw Error(vt(174));return t}function i1(t,e){switch(an(Od,e),an(Pd,t),an(fA,sh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:rm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=rm(e,t)}cn(fA),an(fA,e)}function uu(){cn(fA),cn(Pd),cn(Od)}function l5(t){Tl(Od.current);var e=Tl(fA.current),r=rm(e,t.type);e!==r&&(an(Pd,t),an(fA,r))}function a1(t){Pd.current===t&&(cn(fA),cn(Pd))}var wn=el(0);function A0(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Rp=[];function A1(){for(var t=0;t<Rp.length;t++)Rp[t]._workInProgressVersionPrimary=null;Rp.length=0}var Ff=qA.ReactCurrentDispatcher,Hp=qA.ReactCurrentBatchConfig,Gl=0,yn=null,Zn=null,is=null,o0=!1,hd=!1,Dd=0,kS=0;function js(){throw Error(vt(321))}function o1(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Ta(t[r],e[r]))return!1;return!0}function l1(t,e,r,n,s,a){if(Gl=a,yn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ff.current=t===null||t.memoizedState===null?TS:LS,t=r(n,s),hd){a=0;do{if(hd=!1,Dd=0,25<=a)throw Error(vt(301));a+=1,is=Zn=null,e.updateQueue=null,Ff.current=PS,t=r(n,s)}while(hd)}if(Ff.current=l0,e=Zn!==null&&Zn.next!==null,Gl=0,is=Zn=yn=null,o0=!1,e)throw Error(vt(300));return t}function c1(){var t=Dd!==0;return Dd=0,t}function cA(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return is===null?yn.memoizedState=is=t:is=is.next=t,is}function na(){if(Zn===null){var t=yn.alternate;t=t!==null?t.memoizedState:null}else t=Zn.next;var e=is===null?yn.memoizedState:is.next;if(e!==null)is=e,Zn=t;else{if(t===null)throw Error(vt(310));Zn=t,t={memoizedState:Zn.memoizedState,baseState:Zn.baseState,baseQueue:Zn.baseQueue,queue:Zn.queue,next:null},is===null?yn.memoizedState=is=t:is=is.next=t}return is}function Rd(t,e){return typeof e=="function"?e(t):e}function Mp(t){var e=na(),r=e.queue;if(r===null)throw Error(vt(311));r.lastRenderedReducer=t;var n=Zn,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var A=s.next;s.next=a.next,a.next=A}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var o=A=null,l=null,c=a;do{var d=c.lane;if((Gl&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var p={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=p,A=n):l=l.next=p,yn.lanes|=d,Vl|=d}c=c.next}while(c!==null&&c!==a);l===null?A=n:l.next=o,Ta(n,e.memoizedState)||(Ai=!0),e.memoizedState=n,e.baseState=A,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do a=s.lane,yn.lanes|=a,Vl|=a,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function $p(t){var e=na(),r=e.queue;if(r===null)throw Error(vt(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,a=e.memoizedState;if(s!==null){r.pending=null;var A=s=s.next;do a=t(a,A.action),A=A.next;while(A!==s);Ta(a,e.memoizedState)||(Ai=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function c5(){}function u5(t,e){var r=yn,n=na(),s=e(),a=!Ta(n.memoizedState,s);if(a&&(n.memoizedState=s,Ai=!0),n=n.queue,u1(f5.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||is!==null&&is.memoizedState.tag&1){if(r.flags|=2048,Hd(9,h5.bind(null,r,n,s,e),void 0,null),As===null)throw Error(vt(349));Gl&30||d5(r,e,s)}return s}function d5(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=yn.updateQueue,e===null?(e={lastEffect:null,stores:null},yn.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function h5(t,e,r,n){e.value=r,e.getSnapshot=n,p5(e)&&g5(t)}function f5(t,e,r){return r(function(){p5(e)&&g5(t)})}function p5(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Ta(t,r)}catch{return!0}}function g5(t){var e=GA(t,1);e!==null&&Qa(e,t,1,-1)}function Hv(t){var e=cA();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rd,lastRenderedState:t},e.queue=t,t=t.dispatch=QS.bind(null,yn,t),[e.memoizedState,t]}function Hd(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=yn.updateQueue,e===null?(e={lastEffect:null,stores:null},yn.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function m5(){return na().memoizedState}function _f(t,e,r,n){var s=cA();yn.flags|=t,s.memoizedState=Hd(1|e,r,void 0,n===void 0?null:n)}function R0(t,e,r,n){var s=na();n=n===void 0?null:n;var a=void 0;if(Zn!==null){var A=Zn.memoizedState;if(a=A.destroy,n!==null&&o1(n,A.deps)){s.memoizedState=Hd(e,r,a,n);return}}yn.flags|=t,s.memoizedState=Hd(1|e,r,a,n)}function Mv(t,e){return _f(8390656,8,t,e)}function u1(t,e){return R0(2048,8,t,e)}function x5(t,e){return R0(4,2,t,e)}function v5(t,e){return R0(4,4,t,e)}function w5(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function y5(t,e,r){return r=r!=null?r.concat([t]):null,R0(4,4,w5.bind(null,e,t),r)}function d1(){}function b5(t,e){var r=na();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&o1(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function B5(t,e){var r=na();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&o1(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function C5(t,e,r){return Gl&21?(Ta(r,e)||(r=Fb(),yn.lanes|=r,Vl|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ai=!0),t.memoizedState=r)}function US(t,e){var r=Vr;Vr=r!==0&&4>r?r:4,t(!0);var n=Hp.transition;Hp.transition={};try{t(!1),e()}finally{Vr=r,Hp.transition=n}}function N5(){return na().memoizedState}function IS(t,e,r){var n=Go(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},S5(t))j5(e,r);else if(r=A5(t,e,r,n),r!==null){var s=Ws();Qa(r,t,n,s),E5(r,e,n)}}function QS(t,e,r){var n=Go(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(S5(t))j5(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var A=e.lastRenderedState,o=a(A,r);if(s.hasEagerState=!0,s.eagerState=o,Ta(o,A)){var l=e.interleaved;l===null?(s.next=s,n1(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}r=A5(t,e,s,n),r!==null&&(s=Ws(),Qa(r,t,n,s),E5(r,e,n))}}function S5(t){var e=t.alternate;return t===yn||e!==null&&e===yn}function j5(t,e){hd=o0=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function E5(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,$x(t,r)}}var l0={readContext:ra,useCallback:js,useContext:js,useEffect:js,useImperativeHandle:js,useInsertionEffect:js,useLayoutEffect:js,useMemo:js,useReducer:js,useRef:js,useState:js,useDebugValue:js,useDeferredValue:js,useTransition:js,useMutableSource:js,useSyncExternalStore:js,useId:js,unstable_isNewReconciler:!1},TS={readContext:ra,useCallback:function(t,e){return cA().memoizedState=[t,e===void 0?null:e],t},useContext:ra,useEffect:Mv,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,_f(4194308,4,w5.bind(null,e,t),r)},useLayoutEffect:function(t,e){return _f(4194308,4,t,e)},useInsertionEffect:function(t,e){return _f(4,2,t,e)},useMemo:function(t,e){var r=cA();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=cA();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=IS.bind(null,yn,t),[n.memoizedState,t]},useRef:function(t){var e=cA();return t={current:t},e.memoizedState=t},useState:Hv,useDebugValue:d1,useDeferredValue:function(t){return cA().memoizedState=t},useTransition:function(){var t=Hv(!1),e=t[0];return t=US.bind(null,t[1]),cA().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=yn,s=cA();if(pn){if(r===void 0)throw Error(vt(407));r=r()}else{if(r=e(),As===null)throw Error(vt(349));Gl&30||d5(n,e,r)}s.memoizedState=r;var a={value:r,getSnapshot:e};return s.queue=a,Mv(f5.bind(null,n,a,t),[t]),n.flags|=2048,Hd(9,h5.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=cA(),e=As.identifierPrefix;if(pn){var r=RA,n=DA;r=(n&~(1<<32-Ia(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Dd++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=kS++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},LS={readContext:ra,useCallback:b5,useContext:ra,useEffect:u1,useImperativeHandle:y5,useInsertionEffect:x5,useLayoutEffect:v5,useMemo:B5,useReducer:Mp,useRef:m5,useState:function(){return Mp(Rd)},useDebugValue:d1,useDeferredValue:function(t){var e=na();return C5(e,Zn.memoizedState,t)},useTransition:function(){var t=Mp(Rd)[0],e=na().memoizedState;return[t,e]},useMutableSource:c5,useSyncExternalStore:u5,useId:N5,unstable_isNewReconciler:!1},PS={readContext:ra,useCallback:b5,useContext:ra,useEffect:u1,useImperativeHandle:y5,useInsertionEffect:x5,useLayoutEffect:v5,useMemo:B5,useReducer:$p,useRef:m5,useState:function(){return $p(Rd)},useDebugValue:d1,useDeferredValue:function(t){var e=na();return Zn===null?e.memoizedState=t:C5(e,Zn.memoizedState,t)},useTransition:function(){var t=$p(Rd)[0],e=na().memoizedState;return[t,e]},useMutableSource:c5,useSyncExternalStore:u5,useId:N5,unstable_isNewReconciler:!1};function Ea(t,e){if(t&&t.defaultProps){e=bn({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Bm(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:bn({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var H0={isMounted:function(t){return(t=t._reactInternals)?Yl(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Ws(),s=Go(t),a=HA(n,s);a.payload=e,r!=null&&(a.callback=r),e=$o(t,a,s),e!==null&&(Qa(e,t,s,n),Ef(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Ws(),s=Go(t),a=HA(n,s);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=$o(t,a,s),e!==null&&(Qa(e,t,s,n),Ef(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Ws(),n=Go(t),s=HA(r,n);s.tag=2,e!=null&&(s.callback=e),e=$o(t,s,n),e!==null&&(Qa(e,t,n,r),Ef(e,t,n))}};function $v(t,e,r,n,s,a,A){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,A):e.prototype&&e.prototype.isPureReactComponent?!Id(r,n)||!Id(s,a):!0}function F5(t,e,r){var n=!1,s=Jo,a=e.contextType;return typeof a=="object"&&a!==null?a=ra(a):(s=li(e)?$l:Ls.current,n=e.contextTypes,a=(n=n!=null)?ou(t,s):Jo),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=H0,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function Kv(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&H0.enqueueReplaceState(e,e.state,null)}function Cm(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},s1(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=ra(a):(a=li(e)?$l:Ls.current,s.context=ou(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Bm(t,e,a,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&H0.enqueueReplaceState(s,s.state,null),a0(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function du(t,e){try{var r="",n=e;do r+=uN(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function Kp(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Nm(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var OS=typeof WeakMap=="function"?WeakMap:Map;function _5(t,e,r){r=HA(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){u0||(u0=!0,Tm=n),Nm(t,e)},r}function k5(t,e,r){r=HA(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){Nm(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Nm(t,e),typeof n!="function"&&(Ko===null?Ko=new Set([this]):Ko.add(this));var A=e.stack;this.componentDidCatch(e.value,{componentStack:A!==null?A:""})}),r}function Gv(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new OS;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=XS.bind(null,t,e,r),e.then(t,t))}function Vv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function zv(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=HA(-1,1),e.tag=2,$o(r,e,1))),r.lanes|=1),t)}var DS=qA.ReactCurrentOwner,Ai=!1;function qs(t,e,r,n){e.child=t===null?a5(e,null,r,n):cu(e,t.child,r,n)}function qv(t,e,r,n,s){r=r.render;var a=e.ref;return Zc(e,s),n=l1(t,e,r,n,a,s),r=c1(),t!==null&&!Ai?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,VA(t,e,s)):(pn&&r&&Yx(e),e.flags|=1,qs(t,e,n,s),e.child)}function Wv(t,e,r,n,s){if(t===null){var a=r.type;return typeof a=="function"&&!w1(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,U5(t,e,a,n,s)):(t=Qf(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var A=a.memoizedProps;if(r=r.compare,r=r!==null?r:Id,r(A,n)&&t.ref===e.ref)return VA(t,e,s)}return e.flags|=1,t=Vo(a,n),t.ref=e.ref,t.return=e,e.child=t}function U5(t,e,r,n,s){if(t!==null){var a=t.memoizedProps;if(Id(a,n)&&t.ref===e.ref)if(Ai=!1,e.pendingProps=n=a,(t.lanes&s)!==0)t.flags&131072&&(Ai=!0);else return e.lanes=t.lanes,VA(t,e,s)}return Sm(t,e,r,n,s)}function I5(t,e,r){var n=e.pendingProps,s=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},an(Gc,Ni),Ni|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,an(Gc,Ni),Ni|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,an(Gc,Ni),Ni|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,an(Gc,Ni),Ni|=n;return qs(t,e,s,r),e.child}function Q5(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Sm(t,e,r,n,s){var a=li(r)?$l:Ls.current;return a=ou(e,a),Zc(e,s),r=l1(t,e,r,n,a,s),n=c1(),t!==null&&!Ai?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,VA(t,e,s)):(pn&&n&&Yx(e),e.flags|=1,qs(t,e,r,s),e.child)}function Jv(t,e,r,n,s){if(li(r)){var a=!0;t0(e)}else a=!1;if(Zc(e,s),e.stateNode===null)kf(t,e),F5(e,r,n),Cm(e,r,n,s),n=!0;else if(t===null){var A=e.stateNode,o=e.memoizedProps;A.props=o;var l=A.context,c=r.contextType;typeof c=="object"&&c!==null?c=ra(c):(c=li(r)?$l:Ls.current,c=ou(e,c));var d=r.getDerivedStateFromProps,p=typeof d=="function"||typeof A.getSnapshotBeforeUpdate=="function";p||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(o!==n||l!==c)&&Kv(e,A,n,c),jo=!1;var g=e.memoizedState;A.state=g,a0(e,n,A,s),l=e.memoizedState,o!==n||g!==l||oi.current||jo?(typeof d=="function"&&(Bm(e,r,d,n),l=e.memoizedState),(o=jo||$v(e,r,o,n,g,l,c))?(p||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(e.flags|=4194308)):(typeof A.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),A.props=n,A.state=l,A.context=c,n=o):(typeof A.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{A=e.stateNode,o5(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:Ea(e.type,o),A.props=c,p=e.pendingProps,g=A.context,l=r.contextType,typeof l=="object"&&l!==null?l=ra(l):(l=li(r)?$l:Ls.current,l=ou(e,l));var h=r.getDerivedStateFromProps;(d=typeof h=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(o!==p||g!==l)&&Kv(e,A,n,l),jo=!1,g=e.memoizedState,A.state=g,a0(e,n,A,s);var b=e.memoizedState;o!==p||g!==b||oi.current||jo?(typeof h=="function"&&(Bm(e,r,h,n),b=e.memoizedState),(c=jo||$v(e,r,c,n,g,b,l)||!1)?(d||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(n,b,l),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(n,b,l)),typeof A.componentDidUpdate=="function"&&(e.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof A.componentDidUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=b),A.props=n,A.state=b,A.context=l,n=c):(typeof A.componentDidUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),n=!1)}return jm(t,e,r,n,a,s)}function jm(t,e,r,n,s,a){Q5(t,e);var A=(e.flags&128)!==0;if(!n&&!A)return s&&Tv(e,r,!1),VA(t,e,a);n=e.stateNode,DS.current=e;var o=A&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&A?(e.child=cu(e,t.child,null,a),e.child=cu(e,null,o,a)):qs(t,e,o,a),e.memoizedState=n.state,s&&Tv(e,r,!0),e.child}function T5(t){var e=t.stateNode;e.pendingContext?Qv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Qv(t,e.context,!1),i1(t,e.containerInfo)}function Yv(t,e,r,n,s){return lu(),Zx(s),e.flags|=256,qs(t,e,r,n),e.child}var Em={dehydrated:null,treeContext:null,retryLane:0};function Fm(t){return{baseLanes:t,cachePool:null,transitions:null}}function L5(t,e,r){var n=e.pendingProps,s=wn.current,a=!1,A=(e.flags&128)!==0,o;if((o=A)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),an(wn,s&1),t===null)return ym(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(A=n.children,t=n.fallback,a?(n=e.mode,a=e.child,A={mode:"hidden",children:A},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=A):a=K0(A,n,0,null),t=Dl(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Fm(r),e.memoizedState=Em,t):h1(e,A));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return RS(t,e,A,n,o,s,r);if(a){a=n.fallback,A=e.mode,s=t.child,o=s.sibling;var l={mode:"hidden",children:n.children};return!(A&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Vo(s,l),n.subtreeFlags=s.subtreeFlags&14680064),o!==null?a=Vo(o,a):(a=Dl(a,A,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,A=t.child.memoizedState,A=A===null?Fm(r):{baseLanes:A.baseLanes|r,cachePool:null,transitions:A.transitions},a.memoizedState=A,a.childLanes=t.childLanes&~r,e.memoizedState=Em,n}return a=t.child,t=a.sibling,n=Vo(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function h1(t,e){return e=K0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Lh(t,e,r,n){return n!==null&&Zx(n),cu(e,t.child,null,r),t=h1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function RS(t,e,r,n,s,a,A){if(r)return e.flags&256?(e.flags&=-257,n=Kp(Error(vt(422))),Lh(t,e,A,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,s=e.mode,n=K0({mode:"visible",children:n.children},s,0,null),a=Dl(a,s,A,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&cu(e,t.child,null,A),e.child.memoizedState=Fm(A),e.memoizedState=Em,a);if(!(e.mode&1))return Lh(t,e,A,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var o=n.dgst;return n=o,a=Error(vt(419)),n=Kp(a,n,void 0),Lh(t,e,A,n)}if(o=(A&t.childLanes)!==0,Ai||o){if(n=As,n!==null){switch(A&-A){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|A)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,GA(t,s),Qa(n,t,s,-1))}return v1(),n=Kp(Error(vt(421))),Lh(t,e,A,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=ZS.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,Ei=Mo(s.nextSibling),_i=e,pn=!0,Ua=null,t!==null&&(Wi[Ji++]=DA,Wi[Ji++]=RA,Wi[Ji++]=Kl,DA=t.id,RA=t.overflow,Kl=e),e=h1(e,n.children),e.flags|=4096,e)}function Xv(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),bm(t.return,e,r)}function Gp(t,e,r,n,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function P5(t,e,r){var n=e.pendingProps,s=n.revealOrder,a=n.tail;if(qs(t,e,n.children,r),n=wn.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xv(t,r,e);else if(t.tag===19)Xv(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(an(wn,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&A0(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Gp(e,!1,s,r,a);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&A0(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Gp(e,!0,r,null,a);break;case"together":Gp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function kf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function VA(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Vl|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(vt(153));if(e.child!==null){for(t=e.child,r=Vo(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Vo(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function HS(t,e,r){switch(e.tag){case 3:T5(e),lu();break;case 5:l5(e);break;case 1:li(e.type)&&t0(e);break;case 4:i1(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;an(s0,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(an(wn,wn.current&1),e.flags|=128,null):r&e.child.childLanes?L5(t,e,r):(an(wn,wn.current&1),t=VA(t,e,r),t!==null?t.sibling:null);an(wn,wn.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return P5(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),an(wn,wn.current),n)break;return null;case 22:case 23:return e.lanes=0,I5(t,e,r)}return VA(t,e,r)}var O5,_m,D5,R5;O5=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};_m=function(){};D5=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Tl(fA.current);var a=null;switch(r){case"input":s=Xg(t,s),n=Xg(t,n),a=[];break;case"select":s=bn({},s,{value:void 0}),n=bn({},n,{value:void 0}),a=[];break;case"textarea":s=tm(t,s),n=tm(t,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Zf)}nm(r,n);var A;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(A in o)o.hasOwnProperty(A)&&(r||(r={}),r[A]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Sd.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in n){var l=n[c];if(o=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(A in o)!o.hasOwnProperty(A)||l&&l.hasOwnProperty(A)||(r||(r={}),r[A]="");for(A in l)l.hasOwnProperty(A)&&o[A]!==l[A]&&(r||(r={}),r[A]=l[A])}else r||(a||(a=[]),a.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(a=a||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Sd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&on("scroll",t),a||o===l||(a=[])):(a=a||[]).push(c,l))}r&&(a=a||[]).push("style",r);var c=a;(e.updateQueue=c)&&(e.flags|=4)}};R5=function(t,e,r,n){r!==n&&(e.flags|=4)};function Ru(t,e){if(!pn)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Es(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function MS(t,e,r){var n=e.pendingProps;switch(Xx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Es(e),null;case 1:return li(e.type)&&e0(),Es(e),null;case 3:return n=e.stateNode,uu(),cn(oi),cn(Ls),A1(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Qh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ua!==null&&(Om(Ua),Ua=null))),_m(t,e),Es(e),null;case 5:a1(e);var s=Tl(Od.current);if(r=e.type,t!==null&&e.stateNode!=null)D5(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(vt(166));return Es(e),null}if(t=Tl(fA.current),Qh(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[uA]=e,n[Ld]=a,t=(e.mode&1)!==0,r){case"dialog":on("cancel",n),on("close",n);break;case"iframe":case"object":case"embed":on("load",n);break;case"video":case"audio":for(s=0;s<Zu.length;s++)on(Zu[s],n);break;case"source":on("error",n);break;case"img":case"image":case"link":on("error",n),on("load",n);break;case"details":on("toggle",n);break;case"input":Av(n,a),on("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},on("invalid",n);break;case"textarea":lv(n,a),on("invalid",n)}nm(r,a),s=null;for(var A in a)if(a.hasOwnProperty(A)){var o=a[A];A==="children"?typeof o=="string"?n.textContent!==o&&(a.suppressHydrationWarning!==!0&&Ih(n.textContent,o,t),s=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Ih(n.textContent,o,t),s=["children",""+o]):Sd.hasOwnProperty(A)&&o!=null&&A==="onScroll"&&on("scroll",n)}switch(r){case"input":Nh(n),ov(n,a,!0);break;case"textarea":Nh(n),cv(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Zf)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{A=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=fb(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=A.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=A.createElement(r,{is:n.is}):(t=A.createElement(r),r==="select"&&(A=t,n.multiple?A.multiple=!0:n.size&&(A.size=n.size))):t=A.createElementNS(t,r),t[uA]=e,t[Ld]=n,O5(t,e,!1,!1),e.stateNode=t;e:{switch(A=sm(r,n),r){case"dialog":on("cancel",t),on("close",t),s=n;break;case"iframe":case"object":case"embed":on("load",t),s=n;break;case"video":case"audio":for(s=0;s<Zu.length;s++)on(Zu[s],t);s=n;break;case"source":on("error",t),s=n;break;case"img":case"image":case"link":on("error",t),on("load",t),s=n;break;case"details":on("toggle",t),s=n;break;case"input":Av(t,n),s=Xg(t,n),on("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=bn({},n,{value:void 0}),on("invalid",t);break;case"textarea":lv(t,n),s=tm(t,n),on("invalid",t);break;default:s=n}nm(r,s),o=s;for(a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="style"?mb(t,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&pb(t,l)):a==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&jd(t,l):typeof l=="number"&&jd(t,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Sd.hasOwnProperty(a)?l!=null&&a==="onScroll"&&on("scroll",t):l!=null&&Px(t,a,l,A))}switch(r){case"input":Nh(t),ov(t,n,!1);break;case"textarea":Nh(t),cv(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Wo(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?Wc(t,!!n.multiple,a,!1):n.defaultValue!=null&&Wc(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Zf)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Es(e),null;case 6:if(t&&e.stateNode!=null)R5(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(vt(166));if(r=Tl(Od.current),Tl(fA.current),Qh(e)){if(n=e.stateNode,r=e.memoizedProps,n[uA]=e,(a=n.nodeValue!==r)&&(t=_i,t!==null))switch(t.tag){case 3:Ih(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ih(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[uA]=e,e.stateNode=n}return Es(e),null;case 13:if(cn(wn),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pn&&Ei!==null&&e.mode&1&&!(e.flags&128))s5(),lu(),e.flags|=98560,a=!1;else if(a=Qh(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(vt(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(vt(317));a[uA]=e}else lu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Es(e),a=!1}else Ua!==null&&(Om(Ua),Ua=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||wn.current&1?ts===0&&(ts=3):v1())),e.updateQueue!==null&&(e.flags|=4),Es(e),null);case 4:return uu(),_m(t,e),t===null&&Qd(e.stateNode.containerInfo),Es(e),null;case 10:return r1(e.type._context),Es(e),null;case 17:return li(e.type)&&e0(),Es(e),null;case 19:if(cn(wn),a=e.memoizedState,a===null)return Es(e),null;if(n=(e.flags&128)!==0,A=a.rendering,A===null)if(n)Ru(a,!1);else{if(ts!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(A=A0(t),A!==null){for(e.flags|=128,Ru(a,!1),n=A.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,A=a.alternate,A===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=A.childLanes,a.lanes=A.lanes,a.child=A.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=A.memoizedProps,a.memoizedState=A.memoizedState,a.updateQueue=A.updateQueue,a.type=A.type,t=A.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return an(wn,wn.current&1|2),e.child}t=t.sibling}a.tail!==null&&Ln()>hu&&(e.flags|=128,n=!0,Ru(a,!1),e.lanes=4194304)}else{if(!n)if(t=A0(A),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Ru(a,!0),a.tail===null&&a.tailMode==="hidden"&&!A.alternate&&!pn)return Es(e),null}else 2*Ln()-a.renderingStartTime>hu&&r!==1073741824&&(e.flags|=128,n=!0,Ru(a,!1),e.lanes=4194304);a.isBackwards?(A.sibling=e.child,e.child=A):(r=a.last,r!==null?r.sibling=A:e.child=A,a.last=A)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Ln(),e.sibling=null,r=wn.current,an(wn,n?r&1|2:r&1),e):(Es(e),null);case 22:case 23:return x1(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Ni&1073741824&&(Es(e),e.subtreeFlags&6&&(e.flags|=8192)):Es(e),null;case 24:return null;case 25:return null}throw Error(vt(156,e.tag))}function $S(t,e){switch(Xx(e),e.tag){case 1:return li(e.type)&&e0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return uu(),cn(oi),cn(Ls),A1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return a1(e),null;case 13:if(cn(wn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(vt(340));lu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return cn(wn),null;case 4:return uu(),null;case 10:return r1(e.type._context),null;case 22:case 23:return x1(),null;case 24:return null;default:return null}}var Ph=!1,Ts=!1,KS=typeof WeakSet=="function"?WeakSet:Set,$t=null;function Kc(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Fn(t,e,n)}else r.current=null}function km(t,e,r){try{r()}catch(n){Fn(t,e,n)}}var Zv=!1;function GS(t,e){if(fm=Jf,t=Gb(),Jx(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var A=0,o=-1,l=-1,c=0,d=0,p=t,g=null;t:for(;;){for(var h;p!==r||s!==0&&p.nodeType!==3||(o=A+s),p!==a||n!==0&&p.nodeType!==3||(l=A+n),p.nodeType===3&&(A+=p.nodeValue.length),(h=p.firstChild)!==null;)g=p,p=h;for(;;){if(p===t)break t;if(g===r&&++c===s&&(o=A),g===a&&++d===n&&(l=A),(h=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=h}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(pm={focusedElem:t,selectionRange:r},Jf=!1,$t=e;$t!==null;)if(e=$t,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$t=t;else for(;$t!==null;){e=$t;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var w=b.memoizedProps,j=b.memoizedState,x=e.stateNode,y=x.getSnapshotBeforeUpdate(e.elementType===e.type?w:Ea(e.type,w),j);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var B=e.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(vt(163))}}catch(E){Fn(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,$t=t;break}$t=e.return}return b=Zv,Zv=!1,b}function fd(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&km(e,r,a)}s=s.next}while(s!==n)}}function M0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Um(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function H5(t){var e=t.alternate;e!==null&&(t.alternate=null,H5(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[uA],delete e[Ld],delete e[xm],delete e[jS],delete e[ES])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function M5(t){return t.tag===5||t.tag===3||t.tag===4}function ew(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||M5(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Im(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Zf));else if(n!==4&&(t=t.child,t!==null))for(Im(t,e,r),t=t.sibling;t!==null;)Im(t,e,r),t=t.sibling}function Qm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Qm(t,e,r),t=t.sibling;t!==null;)Qm(t,e,r),t=t.sibling}var gs=null,_a=!1;function yo(t,e,r){for(r=r.child;r!==null;)$5(t,e,r),r=r.sibling}function $5(t,e,r){if(hA&&typeof hA.onCommitFiberUnmount=="function")try{hA.onCommitFiberUnmount(Q0,r)}catch{}switch(r.tag){case 5:Ts||Kc(r,e);case 6:var n=gs,s=_a;gs=null,yo(t,e,r),gs=n,_a=s,gs!==null&&(_a?(t=gs,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):gs.removeChild(r.stateNode));break;case 18:gs!==null&&(_a?(t=gs,r=r.stateNode,t.nodeType===8?Op(t.parentNode,r):t.nodeType===1&&Op(t,r),kd(t)):Op(gs,r.stateNode));break;case 4:n=gs,s=_a,gs=r.stateNode.containerInfo,_a=!0,yo(t,e,r),gs=n,_a=s;break;case 0:case 11:case 14:case 15:if(!Ts&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,A=a.destroy;a=a.tag,A!==void 0&&(a&2||a&4)&&km(r,e,A),s=s.next}while(s!==n)}yo(t,e,r);break;case 1:if(!Ts&&(Kc(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Fn(r,e,o)}yo(t,e,r);break;case 21:yo(t,e,r);break;case 22:r.mode&1?(Ts=(n=Ts)||r.memoizedState!==null,yo(t,e,r),Ts=n):yo(t,e,r);break;default:yo(t,e,r)}}function tw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new KS),e.forEach(function(n){var s=e3.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Ba(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=t,A=e,o=A;e:for(;o!==null;){switch(o.tag){case 5:gs=o.stateNode,_a=!1;break e;case 3:gs=o.stateNode.containerInfo,_a=!0;break e;case 4:gs=o.stateNode.containerInfo,_a=!0;break e}o=o.return}if(gs===null)throw Error(vt(160));$5(a,A,s),gs=null,_a=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Fn(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)K5(e,t),e=e.sibling}function K5(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ba(e,t),eA(t),n&4){try{fd(3,t,t.return),M0(3,t)}catch(w){Fn(t,t.return,w)}try{fd(5,t,t.return)}catch(w){Fn(t,t.return,w)}}break;case 1:Ba(e,t),eA(t),n&512&&r!==null&&Kc(r,r.return);break;case 5:if(Ba(e,t),eA(t),n&512&&r!==null&&Kc(r,r.return),t.flags&32){var s=t.stateNode;try{jd(s,"")}catch(w){Fn(t,t.return,w)}}if(n&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,A=r!==null?r.memoizedProps:a,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&db(s,a),sm(o,A);var c=sm(o,a);for(A=0;A<l.length;A+=2){var d=l[A],p=l[A+1];d==="style"?mb(s,p):d==="dangerouslySetInnerHTML"?pb(s,p):d==="children"?jd(s,p):Px(s,d,p,c)}switch(o){case"input":Zg(s,a);break;case"textarea":hb(s,a);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var h=a.value;h!=null?Wc(s,!!a.multiple,h,!1):g!==!!a.multiple&&(a.defaultValue!=null?Wc(s,!!a.multiple,a.defaultValue,!0):Wc(s,!!a.multiple,a.multiple?[]:"",!1))}s[Ld]=a}catch(w){Fn(t,t.return,w)}}break;case 6:if(Ba(e,t),eA(t),n&4){if(t.stateNode===null)throw Error(vt(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(w){Fn(t,t.return,w)}}break;case 3:if(Ba(e,t),eA(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{kd(e.containerInfo)}catch(w){Fn(t,t.return,w)}break;case 4:Ba(e,t),eA(t);break;case 13:Ba(e,t),eA(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(g1=Ln())),n&4&&tw(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Ts=(c=Ts)||d,Ba(e,t),Ts=c):Ba(e,t),eA(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for($t=t,d=t.child;d!==null;){for(p=$t=d;$t!==null;){switch(g=$t,h=g.child,g.tag){case 0:case 11:case 14:case 15:fd(4,g,g.return);break;case 1:Kc(g,g.return);var b=g.stateNode;if(typeof b.componentWillUnmount=="function"){n=g,r=g.return;try{e=n,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(w){Fn(n,r,w)}}break;case 5:Kc(g,g.return);break;case 22:if(g.memoizedState!==null){nw(p);continue}}h!==null?(h.return=g,$t=h):nw(p)}d=d.sibling}e:for(d=null,p=t;;){if(p.tag===5){if(d===null){d=p;try{s=p.stateNode,c?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=p.stateNode,l=p.memoizedProps.style,A=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=gb("display",A))}catch(w){Fn(t,t.return,w)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(w){Fn(t,t.return,w)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Ba(e,t),eA(t),n&4&&tw(t);break;case 21:break;default:Ba(e,t),eA(t)}}function eA(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(M5(r)){var n=r;break e}r=r.return}throw Error(vt(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(jd(s,""),n.flags&=-33);var a=ew(t);Qm(t,a,s);break;case 3:case 4:var A=n.stateNode.containerInfo,o=ew(t);Im(t,o,A);break;default:throw Error(vt(161))}}catch(l){Fn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function VS(t,e,r){$t=t,G5(t)}function G5(t,e,r){for(var n=(t.mode&1)!==0;$t!==null;){var s=$t,a=s.child;if(s.tag===22&&n){var A=s.memoizedState!==null||Ph;if(!A){var o=s.alternate,l=o!==null&&o.memoizedState!==null||Ts;o=Ph;var c=Ts;if(Ph=A,(Ts=l)&&!c)for($t=s;$t!==null;)A=$t,l=A.child,A.tag===22&&A.memoizedState!==null?sw(s):l!==null?(l.return=A,$t=l):sw(s);for(;a!==null;)$t=a,G5(a),a=a.sibling;$t=s,Ph=o,Ts=c}rw(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,$t=a):rw(t)}}function rw(t){for(;$t!==null;){var e=$t;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ts||M0(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ts)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Ea(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Rv(e,a,n);break;case 3:var A=e.updateQueue;if(A!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Rv(e,A,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&kd(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(vt(163))}Ts||e.flags&512&&Um(e)}catch(g){Fn(e,e.return,g)}}if(e===t){$t=null;break}if(r=e.sibling,r!==null){r.return=e.return,$t=r;break}$t=e.return}}function nw(t){for(;$t!==null;){var e=$t;if(e===t){$t=null;break}var r=e.sibling;if(r!==null){r.return=e.return,$t=r;break}$t=e.return}}function sw(t){for(;$t!==null;){var e=$t;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{M0(4,e)}catch(l){Fn(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(l){Fn(e,s,l)}}var a=e.return;try{Um(e)}catch(l){Fn(e,a,l)}break;case 5:var A=e.return;try{Um(e)}catch(l){Fn(e,A,l)}}}catch(l){Fn(e,e.return,l)}if(e===t){$t=null;break}var o=e.sibling;if(o!==null){o.return=e.return,$t=o;break}$t=e.return}}var zS=Math.ceil,c0=qA.ReactCurrentDispatcher,f1=qA.ReactCurrentOwner,ta=qA.ReactCurrentBatchConfig,Tr=0,As=null,zn=null,vs=0,Ni=0,Gc=el(0),ts=0,Md=null,Vl=0,$0=0,p1=0,pd=null,ai=null,g1=0,hu=1/0,TA=null,u0=!1,Tm=null,Ko=null,Oh=!1,Qo=null,d0=0,gd=0,Lm=null,Uf=-1,If=0;function Ws(){return Tr&6?Ln():Uf!==-1?Uf:Uf=Ln()}function Go(t){return t.mode&1?Tr&2&&vs!==0?vs&-vs:_S.transition!==null?(If===0&&(If=Fb()),If):(t=Vr,t!==0||(t=window.event,t=t===void 0?16:Lb(t.type)),t):1}function Qa(t,e,r,n){if(50<gd)throw gd=0,Lm=null,Error(vt(185));th(t,r,n),(!(Tr&2)||t!==As)&&(t===As&&(!(Tr&2)&&($0|=r),ts===4&&ko(t,vs)),ci(t,n),r===1&&Tr===0&&!(e.mode&1)&&(hu=Ln()+500,D0&&tl()))}function ci(t,e){var r=t.callbackNode;_N(t,e);var n=Wf(t,t===As?vs:0);if(n===0)r!==null&&hv(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&hv(r),e===1)t.tag===0?FS(iw.bind(null,t)):t5(iw.bind(null,t)),NS(function(){!(Tr&6)&&tl()}),r=null;else{switch(_b(n)){case 1:r=Mx;break;case 4:r=jb;break;case 16:r=qf;break;case 536870912:r=Eb;break;default:r=qf}r=Z5(r,V5.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function V5(t,e){if(Uf=-1,If=0,Tr&6)throw Error(vt(327));var r=t.callbackNode;if(eu()&&t.callbackNode!==r)return null;var n=Wf(t,t===As?vs:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=h0(t,n);else{e=n;var s=Tr;Tr|=2;var a=q5();(As!==t||vs!==e)&&(TA=null,hu=Ln()+500,Ol(t,e));do try{JS();break}catch(o){z5(t,o)}while(!0);t1(),c0.current=a,Tr=s,zn!==null?e=0:(As=null,vs=0,e=ts)}if(e!==0){if(e===2&&(s=lm(t),s!==0&&(n=s,e=Pm(t,s))),e===1)throw r=Md,Ol(t,0),ko(t,n),ci(t,Ln()),r;if(e===6)ko(t,n);else{if(s=t.current.alternate,!(n&30)&&!qS(s)&&(e=h0(t,n),e===2&&(a=lm(t),a!==0&&(n=a,e=Pm(t,a))),e===1))throw r=Md,Ol(t,0),ko(t,n),ci(t,Ln()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(vt(345));case 2:Sl(t,ai,TA);break;case 3:if(ko(t,n),(n&130023424)===n&&(e=g1+500-Ln(),10<e)){if(Wf(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Ws(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=mm(Sl.bind(null,t,ai,TA),e);break}Sl(t,ai,TA);break;case 4:if(ko(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var A=31-Ia(n);a=1<<A,A=e[A],A>s&&(s=A),n&=~a}if(n=s,n=Ln()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*zS(n/1960))-n,10<n){t.timeoutHandle=mm(Sl.bind(null,t,ai,TA),n);break}Sl(t,ai,TA);break;case 5:Sl(t,ai,TA);break;default:throw Error(vt(329))}}}return ci(t,Ln()),t.callbackNode===r?V5.bind(null,t):null}function Pm(t,e){var r=pd;return t.current.memoizedState.isDehydrated&&(Ol(t,e).flags|=256),t=h0(t,e),t!==2&&(e=ai,ai=r,e!==null&&Om(e)),t}function Om(t){ai===null?ai=t:ai.push.apply(ai,t)}function qS(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!Ta(a(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ko(t,e){for(e&=~p1,e&=~$0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Ia(e),n=1<<r;t[r]=-1,e&=~n}}function iw(t){if(Tr&6)throw Error(vt(327));eu();var e=Wf(t,0);if(!(e&1))return ci(t,Ln()),null;var r=h0(t,e);if(t.tag!==0&&r===2){var n=lm(t);n!==0&&(e=n,r=Pm(t,n))}if(r===1)throw r=Md,Ol(t,0),ko(t,e),ci(t,Ln()),r;if(r===6)throw Error(vt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Sl(t,ai,TA),ci(t,Ln()),null}function m1(t,e){var r=Tr;Tr|=1;try{return t(e)}finally{Tr=r,Tr===0&&(hu=Ln()+500,D0&&tl())}}function zl(t){Qo!==null&&Qo.tag===0&&!(Tr&6)&&eu();var e=Tr;Tr|=1;var r=ta.transition,n=Vr;try{if(ta.transition=null,Vr=1,t)return t()}finally{Vr=n,ta.transition=r,Tr=e,!(Tr&6)&&tl()}}function x1(){Ni=Gc.current,cn(Gc)}function Ol(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,CS(r)),zn!==null)for(r=zn.return;r!==null;){var n=r;switch(Xx(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&e0();break;case 3:uu(),cn(oi),cn(Ls),A1();break;case 5:a1(n);break;case 4:uu();break;case 13:cn(wn);break;case 19:cn(wn);break;case 10:r1(n.type._context);break;case 22:case 23:x1()}r=r.return}if(As=t,zn=t=Vo(t.current,null),vs=Ni=e,ts=0,Md=null,p1=$0=Vl=0,ai=pd=null,Ql!==null){for(e=0;e<Ql.length;e++)if(r=Ql[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var A=a.next;a.next=s,n.next=A}r.pending=n}Ql=null}return t}function z5(t,e){do{var r=zn;try{if(t1(),Ff.current=l0,o0){for(var n=yn.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}o0=!1}if(Gl=0,is=Zn=yn=null,hd=!1,Dd=0,f1.current=null,r===null||r.return===null){ts=1,Md=e,zn=null;break}e:{var a=t,A=r.return,o=r,l=e;if(e=vs,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=o,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=Vv(A);if(h!==null){h.flags&=-257,zv(h,A,o,a,e),h.mode&1&&Gv(a,c,e),e=h,l=c;var b=e.updateQueue;if(b===null){var w=new Set;w.add(l),e.updateQueue=w}else b.add(l);break e}else{if(!(e&1)){Gv(a,c,e),v1();break e}l=Error(vt(426))}}else if(pn&&o.mode&1){var j=Vv(A);if(j!==null){!(j.flags&65536)&&(j.flags|=256),zv(j,A,o,a,e),Zx(du(l,o));break e}}a=l=du(l,o),ts!==4&&(ts=2),pd===null?pd=[a]:pd.push(a),a=A;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var x=_5(a,l,e);Dv(a,x);break e;case 1:o=l;var y=a.type,B=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Ko===null||!Ko.has(B)))){a.flags|=65536,e&=-e,a.lanes|=e;var E=k5(a,o,e);Dv(a,E);break e}}a=a.return}while(a!==null)}J5(r)}catch(L){e=L,zn===r&&r!==null&&(zn=r=r.return);continue}break}while(!0)}function q5(){var t=c0.current;return c0.current=l0,t===null?l0:t}function v1(){(ts===0||ts===3||ts===2)&&(ts=4),As===null||!(Vl&268435455)&&!($0&268435455)||ko(As,vs)}function h0(t,e){var r=Tr;Tr|=2;var n=q5();(As!==t||vs!==e)&&(TA=null,Ol(t,e));do try{WS();break}catch(s){z5(t,s)}while(!0);if(t1(),Tr=r,c0.current=n,zn!==null)throw Error(vt(261));return As=null,vs=0,ts}function WS(){for(;zn!==null;)W5(zn)}function JS(){for(;zn!==null&&!yN();)W5(zn)}function W5(t){var e=X5(t.alternate,t,Ni);t.memoizedProps=t.pendingProps,e===null?J5(t):zn=e,f1.current=null}function J5(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=$S(r,e),r!==null){r.flags&=32767,zn=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ts=6,zn=null;return}}else if(r=MS(r,e,Ni),r!==null){zn=r;return}if(e=e.sibling,e!==null){zn=e;return}zn=e=t}while(e!==null);ts===0&&(ts=5)}function Sl(t,e,r){var n=Vr,s=ta.transition;try{ta.transition=null,Vr=1,YS(t,e,r,n)}finally{ta.transition=s,Vr=n}return null}function YS(t,e,r,n){do eu();while(Qo!==null);if(Tr&6)throw Error(vt(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(vt(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(kN(t,a),t===As&&(zn=As=null,vs=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Oh||(Oh=!0,Z5(qf,function(){return eu(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=ta.transition,ta.transition=null;var A=Vr;Vr=1;var o=Tr;Tr|=4,f1.current=null,GS(t,r),K5(r,t),mS(pm),Jf=!!fm,pm=fm=null,t.current=r,VS(r),bN(),Tr=o,Vr=A,ta.transition=a}else t.current=r;if(Oh&&(Oh=!1,Qo=t,d0=s),a=t.pendingLanes,a===0&&(Ko=null),NN(r.stateNode),ci(t,Ln()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(u0)throw u0=!1,t=Tm,Tm=null,t;return d0&1&&t.tag!==0&&eu(),a=t.pendingLanes,a&1?t===Lm?gd++:(gd=0,Lm=t):gd=0,tl(),null}function eu(){if(Qo!==null){var t=_b(d0),e=ta.transition,r=Vr;try{if(ta.transition=null,Vr=16>t?16:t,Qo===null)var n=!1;else{if(t=Qo,Qo=null,d0=0,Tr&6)throw Error(vt(331));var s=Tr;for(Tr|=4,$t=t.current;$t!==null;){var a=$t,A=a.child;if($t.flags&16){var o=a.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for($t=c;$t!==null;){var d=$t;switch(d.tag){case 0:case 11:case 15:fd(8,d,a)}var p=d.child;if(p!==null)p.return=d,$t=p;else for(;$t!==null;){d=$t;var g=d.sibling,h=d.return;if(H5(d),d===c){$t=null;break}if(g!==null){g.return=h,$t=g;break}$t=h}}}var b=a.alternate;if(b!==null){var w=b.child;if(w!==null){b.child=null;do{var j=w.sibling;w.sibling=null,w=j}while(w!==null)}}$t=a}}if(a.subtreeFlags&2064&&A!==null)A.return=a,$t=A;else e:for(;$t!==null;){if(a=$t,a.flags&2048)switch(a.tag){case 0:case 11:case 15:fd(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,$t=x;break e}$t=a.return}}var y=t.current;for($t=y;$t!==null;){A=$t;var B=A.child;if(A.subtreeFlags&2064&&B!==null)B.return=A,$t=B;else e:for(A=y;$t!==null;){if(o=$t,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:M0(9,o)}}catch(L){Fn(o,o.return,L)}if(o===A){$t=null;break e}var E=o.sibling;if(E!==null){E.return=o.return,$t=E;break e}$t=o.return}}if(Tr=s,tl(),hA&&typeof hA.onPostCommitFiberRoot=="function")try{hA.onPostCommitFiberRoot(Q0,t)}catch{}n=!0}return n}finally{Vr=r,ta.transition=e}}return!1}function aw(t,e,r){e=du(r,e),e=_5(t,e,1),t=$o(t,e,1),e=Ws(),t!==null&&(th(t,1,e),ci(t,e))}function Fn(t,e,r){if(t.tag===3)aw(t,t,r);else for(;e!==null;){if(e.tag===3){aw(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ko===null||!Ko.has(n))){t=du(r,t),t=k5(e,t,1),e=$o(e,t,1),t=Ws(),e!==null&&(th(e,1,t),ci(e,t));break}}e=e.return}}function XS(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Ws(),t.pingedLanes|=t.suspendedLanes&r,As===t&&(vs&r)===r&&(ts===4||ts===3&&(vs&130023424)===vs&&500>Ln()-g1?Ol(t,0):p1|=r),ci(t,e)}function Y5(t,e){e===0&&(t.mode&1?(e=Eh,Eh<<=1,!(Eh&130023424)&&(Eh=4194304)):e=1);var r=Ws();t=GA(t,e),t!==null&&(th(t,e,r),ci(t,r))}function ZS(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Y5(t,r)}function e3(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(vt(314))}n!==null&&n.delete(e),Y5(t,r)}var X5;X5=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||oi.current)Ai=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Ai=!1,HS(t,e,r);Ai=!!(t.flags&131072)}else Ai=!1,pn&&e.flags&1048576&&r5(e,n0,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;kf(t,e),t=e.pendingProps;var s=ou(e,Ls.current);Zc(e,r),s=l1(null,e,n,t,s,r);var a=c1();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,li(n)?(a=!0,t0(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s1(e),s.updater=H0,e.stateNode=s,s._reactInternals=e,Cm(e,n,t,r),e=jm(null,e,n,!0,a,r)):(e.tag=0,pn&&a&&Yx(e),qs(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(kf(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=r3(n),t=Ea(n,t),s){case 0:e=Sm(null,e,n,t,r);break e;case 1:e=Jv(null,e,n,t,r);break e;case 11:e=qv(null,e,n,t,r);break e;case 14:e=Wv(null,e,n,Ea(n.type,t),r);break e}throw Error(vt(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ea(n,s),Sm(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ea(n,s),Jv(t,e,n,s,r);case 3:e:{if(T5(e),t===null)throw Error(vt(387));n=e.pendingProps,a=e.memoizedState,s=a.element,o5(t,e),a0(e,n,null,r);var A=e.memoizedState;if(n=A.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:A.cache,pendingSuspenseBoundaries:A.pendingSuspenseBoundaries,transitions:A.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=du(Error(vt(423)),e),e=Yv(t,e,n,r,s);break e}else if(n!==s){s=du(Error(vt(424)),e),e=Yv(t,e,n,r,s);break e}else for(Ei=Mo(e.stateNode.containerInfo.firstChild),_i=e,pn=!0,Ua=null,r=a5(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(lu(),n===s){e=VA(t,e,r);break e}qs(t,e,n,r)}e=e.child}return e;case 5:return l5(e),t===null&&ym(e),n=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,A=s.children,gm(n,s)?A=null:a!==null&&gm(n,a)&&(e.flags|=32),Q5(t,e),qs(t,e,A,r),e.child;case 6:return t===null&&ym(e),null;case 13:return L5(t,e,r);case 4:return i1(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=cu(e,null,n,r):qs(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ea(n,s),qv(t,e,n,s,r);case 7:return qs(t,e,e.pendingProps,r),e.child;case 8:return qs(t,e,e.pendingProps.children,r),e.child;case 12:return qs(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,a=e.memoizedProps,A=s.value,an(s0,n._currentValue),n._currentValue=A,a!==null)if(Ta(a.value,A)){if(a.children===s.children&&!oi.current){e=VA(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){A=a.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(a.tag===1){l=HA(-1,r&-r),l.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),bm(a.return,r,e),o.lanes|=r;break}l=l.next}}else if(a.tag===10)A=a.type===e.type?null:a.child;else if(a.tag===18){if(A=a.return,A===null)throw Error(vt(341));A.lanes|=r,o=A.alternate,o!==null&&(o.lanes|=r),bm(A,r,e),A=a.sibling}else A=a.child;if(A!==null)A.return=a;else for(A=a;A!==null;){if(A===e){A=null;break}if(a=A.sibling,a!==null){a.return=A.return,A=a;break}A=A.return}a=A}qs(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Zc(e,r),s=ra(s),n=n(s),e.flags|=1,qs(t,e,n,r),e.child;case 14:return n=e.type,s=Ea(n,e.pendingProps),s=Ea(n.type,s),Wv(t,e,n,s,r);case 15:return U5(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ea(n,s),kf(t,e),e.tag=1,li(n)?(t=!0,t0(e)):t=!1,Zc(e,r),F5(e,n,s),Cm(e,n,s,r),jm(null,e,n,!0,t,r);case 19:return P5(t,e,r);case 22:return I5(t,e,r)}throw Error(vt(156,e.tag))};function Z5(t,e){return Sb(t,e)}function t3(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xi(t,e,r,n){return new t3(t,e,r,n)}function w1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function r3(t){if(typeof t=="function")return w1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Dx)return 11;if(t===Rx)return 14}return 2}function Vo(t,e){var r=t.alternate;return r===null?(r=Xi(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Qf(t,e,r,n,s,a){var A=2;if(n=t,typeof t=="function")w1(t)&&(A=1);else if(typeof t=="string")A=5;else e:switch(t){case Tc:return Dl(r.children,s,a,e);case Ox:A=8,s|=8;break;case qg:return t=Xi(12,r,e,s|2),t.elementType=qg,t.lanes=a,t;case Wg:return t=Xi(13,r,e,s),t.elementType=Wg,t.lanes=a,t;case Jg:return t=Xi(19,r,e,s),t.elementType=Jg,t.lanes=a,t;case lb:return K0(r,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ab:A=10;break e;case ob:A=9;break e;case Dx:A=11;break e;case Rx:A=14;break e;case So:A=16,n=null;break e}throw Error(vt(130,t==null?t:typeof t,""))}return e=Xi(A,r,e,s),e.elementType=t,e.type=n,e.lanes=a,e}function Dl(t,e,r,n){return t=Xi(7,t,n,e),t.lanes=r,t}function K0(t,e,r,n){return t=Xi(22,t,n,e),t.elementType=lb,t.lanes=r,t.stateNode={isHidden:!1},t}function Vp(t,e,r){return t=Xi(6,t,null,e),t.lanes=r,t}function zp(t,e,r){return e=Xi(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function n3(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jp(0),this.expirationTimes=jp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jp(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function y1(t,e,r,n,s,a,A,o,l){return t=new n3(t,e,r,o,l),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Xi(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},s1(a),t}function s3(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qc,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function eB(t){if(!t)return Jo;t=t._reactInternals;e:{if(Yl(t)!==t||t.tag!==1)throw Error(vt(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(li(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(vt(171))}if(t.tag===1){var r=t.type;if(li(r))return e5(t,r,e)}return e}function tB(t,e,r,n,s,a,A,o,l){return t=y1(r,n,!0,t,s,a,A,o,l),t.context=eB(null),r=t.current,n=Ws(),s=Go(r),a=HA(n,s),a.callback=e??null,$o(r,a,s),t.current.lanes=s,th(t,s,n),ci(t,n),t}function G0(t,e,r,n){var s=e.current,a=Ws(),A=Go(s);return r=eB(r),e.context===null?e.context=r:e.pendingContext=r,e=HA(a,A),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=$o(s,e,A),t!==null&&(Qa(t,s,A,a),Ef(t,s,A)),A}function f0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Aw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function b1(t,e){Aw(t,e),(t=t.alternate)&&Aw(t,e)}function i3(){return null}var rB=typeof reportError=="function"?reportError:function(t){console.error(t)};function B1(t){this._internalRoot=t}V0.prototype.render=B1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(vt(409));G0(t,e,null,null)};V0.prototype.unmount=B1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zl(function(){G0(null,t,null,null)}),e[KA]=null}};function V0(t){this._internalRoot=t}V0.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ib();t={blockedOn:null,target:t,priority:e};for(var r=0;r<_o.length&&e!==0&&e<_o[r].priority;r++);_o.splice(r,0,t),r===0&&Tb(t)}};function C1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function z0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ow(){}function a3(t,e,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var c=f0(A);a.call(c)}}var A=tB(e,n,t,0,null,!1,!1,"",ow);return t._reactRootContainer=A,t[KA]=A.current,Qd(t.nodeType===8?t.parentNode:t),zl(),A}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var o=n;n=function(){var c=f0(l);o.call(c)}}var l=y1(t,0,!1,null,null,!1,!1,"",ow);return t._reactRootContainer=l,t[KA]=l.current,Qd(t.nodeType===8?t.parentNode:t),zl(function(){G0(e,l,r,n)}),l}function q0(t,e,r,n,s){var a=r._reactRootContainer;if(a){var A=a;if(typeof s=="function"){var o=s;s=function(){var l=f0(A);o.call(l)}}G0(e,A,t,s)}else A=a3(r,e,t,s,n);return f0(A)}kb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Xu(e.pendingLanes);r!==0&&($x(e,r|1),ci(e,Ln()),!(Tr&6)&&(hu=Ln()+500,tl()))}break;case 13:zl(function(){var n=GA(t,1);if(n!==null){var s=Ws();Qa(n,t,1,s)}}),b1(t,1)}};Kx=function(t){if(t.tag===13){var e=GA(t,134217728);if(e!==null){var r=Ws();Qa(e,t,134217728,r)}b1(t,134217728)}};Ub=function(t){if(t.tag===13){var e=Go(t),r=GA(t,e);if(r!==null){var n=Ws();Qa(r,t,e,n)}b1(t,e)}};Ib=function(){return Vr};Qb=function(t,e){var r=Vr;try{return Vr=t,e()}finally{Vr=r}};am=function(t,e,r){switch(e){case"input":if(Zg(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=O0(n);if(!s)throw Error(vt(90));ub(n),Zg(n,s)}}}break;case"textarea":hb(t,r);break;case"select":e=r.value,e!=null&&Wc(t,!!r.multiple,e,!1)}};wb=m1;yb=zl;var A3={usingClientEntryPoint:!1,Events:[nh,Dc,O0,xb,vb,m1]},Hu={findFiberByHostInstance:Il,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},o3={bundleType:Hu.bundleType,version:Hu.version,rendererPackageName:Hu.rendererPackageName,rendererConfig:Hu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qA.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Cb(t),t===null?null:t.stateNode},findFiberByHostInstance:Hu.findFiberByHostInstance||i3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dh.isDisabled&&Dh.supportsFiber)try{Q0=Dh.inject(o3),hA=Dh}catch{}}Ui.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A3;Ui.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!C1(e))throw Error(vt(200));return s3(t,e,null,r)};Ui.createRoot=function(t,e){if(!C1(t))throw Error(vt(299));var r=!1,n="",s=rB;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=y1(t,1,!1,null,null,r,!1,n,s),t[KA]=e.current,Qd(t.nodeType===8?t.parentNode:t),new B1(e)};Ui.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(vt(188)):(t=Object.keys(t).join(","),Error(vt(268,t)));return t=Cb(e),t=t===null?null:t.stateNode,t};Ui.flushSync=function(t){return zl(t)};Ui.hydrate=function(t,e,r){if(!z0(e))throw Error(vt(200));return q0(null,t,e,!0,r)};Ui.hydrateRoot=function(t,e,r){if(!C1(t))throw Error(vt(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",A=rB;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(A=r.onRecoverableError)),e=tB(e,null,t,1,r??null,s,!1,a,A),t[KA]=e.current,Qd(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new V0(e)};Ui.render=function(t,e,r){if(!z0(e))throw Error(vt(200));return q0(null,t,e,!1,r)};Ui.unmountComponentAtNode=function(t){if(!z0(t))throw Error(vt(40));return t._reactRootContainer?(zl(function(){q0(null,null,t,!1,function(){t._reactRootContainer=null,t[KA]=null})}),!0):!1};Ui.unstable_batchedUpdates=m1;Ui.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!z0(r))throw Error(vt(200));if(t==null||t._reactInternals===void 0)throw Error(vt(38));return q0(t,e,r,!1,n)};Ui.version="18.3.1-next-f1338f8080-20240426";function nB(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nB)}catch(t){console.error(t)}}nB(),nb.exports=Ui;var l3=nb.exports,lw=l3;Vg.createRoot=lw.createRoot,Vg.hydrateRoot=lw.hydrateRoot;function W0(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function c3(t,e,r,n){function s(a){return a instanceof r?a:new r(function(A){A(a)})}return new(r||(r=Promise))(function(a,A){function o(d){try{c(n.next(d))}catch(p){A(p)}}function l(d){try{c(n.throw(d))}catch(p){A(p)}}function c(d){d.done?a(d.value):s(d.value).then(o,l)}c((n=n.apply(t,e||[])).next())})}const u3=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class N1 extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class d3 extends N1{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class cw extends N1{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class uw extends N1{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Dm;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Dm||(Dm={}));class h3{constructor(e,{headers:r={},customFetch:n,region:s=Dm.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=u3(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return c3(this,arguments,void 0,function*(r,n={}){var s;let a,A;try{const{headers:o,method:l,body:c,signal:d,timeout:p}=n;let g={},{region:h}=n;h||(h=this.region);const b=new URL(`${this.url}/${r}`);h&&h!=="any"&&(g["x-region"]=h,b.searchParams.set("forceFunctionRegion",h));let w;c&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(g["Content-Type"]="application/octet-stream",w=c):typeof c=="string"?(g["Content-Type"]="text/plain",w=c):typeof FormData<"u"&&c instanceof FormData?w=c:(g["Content-Type"]="application/json",w=JSON.stringify(c)):w=c;let j=d;p&&(A=new AbortController,a=setTimeout(()=>A.abort(),p),d?(j=A.signal,d.addEventListener("abort",()=>A.abort())):j=A.signal);const x=yield this.fetch(b.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},g),this.headers),o),body:w,signal:j}).catch(L=>{throw new d3(L)}),y=x.headers.get("x-relay-error");if(y&&y==="true")throw new cw(x);if(!x.ok)throw new uw(x);let B=((s=x.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),E;return B==="application/json"?E=yield x.json():B==="application/octet-stream"||B==="application/pdf"?E=yield x.blob():B==="text/event-stream"?E=x:B==="multipart/form-data"?E=yield x.formData():E=yield x.text(),{data:E,error:null,response:x}}catch(o){return{data:null,error:o,response:o instanceof uw||o instanceof cw?o.context:void 0}}finally{a&&clearTimeout(a)}})}}var f3=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},p3=class{constructor(t){var e,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let A=null,o=null,l=null,c=a.status,d=a.statusText;if(a.ok){var p,g;if(r.method!=="HEAD"){var h;const x=await a.text();x===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((h=r.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?o=x:o=JSON.parse(x))}const w=(p=r.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),j=(g=a.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");w&&j&&j.length>1&&(l=parseInt(j[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(o)&&(o.length>1?(A={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,d="Not Acceptable"):o.length===1?o=o[0]:o=null)}else{var b;const w=await a.text();try{A=JSON.parse(w),Array.isArray(A)&&a.status===404&&(o=[],A=null,c=200,d="OK")}catch{a.status===404&&w===""?(c=204,d="No Content"):A={message:w}}if(A&&r.isMaybeSingle&&(!(A==null||(b=A.details)===null||b===void 0)&&b.includes("0 rows"))&&(A=null,c=200,d="OK"),A&&r.shouldThrowOnError)throw new f3(A)}return{error:A,data:o,count:l,status:c,statusText:d}});return this.shouldThrowOnError||(s=s.catch(a=>{var A;let o="";const l=a==null?void 0:a.cause;if(l){var c,d,p,g;const b=(c=l==null?void 0:l.message)!==null&&c!==void 0?c:"",w=(d=l==null?void 0:l.code)!==null&&d!==void 0?d:"";o=`${(p=a==null?void 0:a.name)!==null&&p!==void 0?p:"FetchError"}: ${a==null?void 0:a.message}`,o+=`

Caused by: ${(g=l==null?void 0:l.name)!==null&&g!==void 0?g:"Error"}: ${b}`,w&&(o+=` (${w})`),l!=null&&l.stack&&(o+=`
${l.stack}`)}else{var h;o=(h=a==null?void 0:a.stack)!==null&&h!==void 0?h:""}return{error:{message:`${(A=a==null?void 0:a.name)!==null&&A!==void 0?A:"FetchError"}: ${a==null?void 0:a.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}returns(){return this}overrideTypes(){return this}},g3=class extends p3{select(t){let e=!1;const r=(t??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const a=s?`${s}.order`:"order",A=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${A?`${A},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(a,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:a="text"}={}){var A;const o=[t?"analyze":null,e?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=(A=this.headers.get("Accept"))!==null&&A!==void 0?A:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${l}"; options=${o};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const dw=new RegExp("[,()]");var jc=class extends g3{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&dw.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}notIn(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&dw.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`not.in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${a}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}},m3=class{constructor(t,{headers:e={},schema:r,fetch:n}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=n}select(t,e){const{head:r=!1,count:n}=e??{},s=r?"HEAD":"GET";let a=!1;const A=(t??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",A),n&&this.headers.append("Prefer",`count=${n}`),new jc({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:r=!0}={}){var n;const s="POST";if(e&&this.headers.append("Prefer",`count=${e}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((A,o)=>A.concat(Object.keys(o)),[]);if(a.length>0){const A=[...new Set(a)].map(o=>`"${o}"`);this.url.searchParams.set("columns",A.join(","))}}return new jc({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var a;const A="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),n&&this.headers.append("Prefer",`count=${n}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new jc({method:A,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(t,{count:e}={}){var r;const n="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new jc({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var e;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new jc({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},x3=class sB{constructor(e,{headers:r={},schema:n,fetch:s}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new m3(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new sB(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:s=!1,count:a}={}){var A;let o;const l=new URL(`${this.url}/rpc/${e}`);let c;n||s?(o=n?"HEAD":"GET",Object.entries(r).filter(([p,g])=>g!==void 0).map(([p,g])=>[p,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([p,g])=>{l.searchParams.append(p,g)})):(o="POST",c=r);const d=new Headers(this.headers);return a&&d.set("Prefer",`count=${a}`),new jc({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:(A=this.fetch)!==null&&A!==void 0?A:fetch})}};class v3{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const w3="2.89.0",y3=`realtime-js/${w3}`,iB="1.0.0",b3="2.0.0",hw=iB,Rm=1e4,B3=1e3,C3=100;var Eo;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Eo||(Eo={}));var Xn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Xn||(Xn={}));var ka;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ka||(ka={}));var Hm;(function(t){t.websocket="websocket"})(Hm||(Hm={}));var Fl;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Fl||(Fl={}));class N3{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const s=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var r,n;const s=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},A=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,A)}_encodeUserBroadcastPush(e,r,n){var s,a;const A=e.topic,o=(s=e.ref)!==null&&s!==void 0?s:"",l=(a=e.join_ref)!==null&&a!==void 0?a:"",c=e.payload.event,d=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},p=Object.keys(d).length===0?"":JSON.stringify(d);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(A.length>255)throw new Error(`topic length ${A.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`metadata length ${p.length} exceeds maximum of 255`);const g=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+o.length+A.length+c.length+p.length,h=new ArrayBuffer(this.HEADER_LENGTH+g);let b=new DataView(h),w=0;b.setUint8(w++,this.KINDS.userBroadcastPush),b.setUint8(w++,l.length),b.setUint8(w++,o.length),b.setUint8(w++,A.length),b.setUint8(w++,c.length),b.setUint8(w++,p.length),b.setUint8(w++,r),Array.from(l,x=>b.setUint8(w++,x.charCodeAt(0))),Array.from(o,x=>b.setUint8(w++,x.charCodeAt(0))),Array.from(A,x=>b.setUint8(w++,x.charCodeAt(0))),Array.from(c,x=>b.setUint8(w++,x.charCodeAt(0))),Array.from(p,x=>b.setUint8(w++,x.charCodeAt(0)));var j=new Uint8Array(h.byteLength+n.byteLength);return j.set(new Uint8Array(h),0),j.set(new Uint8Array(n),h.byteLength),j.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[s,a,A,o,l]=n;return r({join_ref:s,ref:a,topic:A,event:o,payload:l})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,s)}}_decodeUserBroadcast(e,r,n){const s=r.getUint8(1),a=r.getUint8(2),A=r.getUint8(3),o=r.getUint8(4);let l=this.HEADER_LENGTH+4;const c=n.decode(e.slice(l,l+s));l=l+s;const d=n.decode(e.slice(l,l+a));l=l+a;const p=n.decode(e.slice(l,l+A));l=l+A;const g=e.slice(l,e.byteLength),h=o===this.JSON_ENCODING?JSON.parse(n.decode(g)):g,b={type:this.BROADCAST_EVENT,event:d,payload:h};return A>0&&(b.meta=JSON.parse(p)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:b}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}class aB{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var nn;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(nn||(nn={}));const fw=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((a,A)=>(a[A]=S3(A,t,e,s),a),{}):{}},S3=(t,e,r,n)=>{const s=e.find(o=>o.name===t),a=s==null?void 0:s.type,A=r[t];return a&&!n.includes(a)?AB(a,A):Mm(A)},AB=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return _3(e,r)}switch(t){case nn.bool:return j3(e);case nn.float4:case nn.float8:case nn.int2:case nn.int4:case nn.int8:case nn.numeric:case nn.oid:return E3(e);case nn.json:case nn.jsonb:return F3(e);case nn.timestamp:return k3(e);case nn.abstime:case nn.date:case nn.daterange:case nn.int4range:case nn.int8range:case nn.money:case nn.reltime:case nn.text:case nn.time:case nn.timestamptz:case nn.timetz:case nn.tsrange:case nn.tstzrange:return Mm(e);default:return Mm(e)}},Mm=t=>t,j3=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},E3=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},F3=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},_3=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let a;const A=t.slice(1,r);try{a=JSON.parse("["+A+"]")}catch{a=A?A.split(","):[]}return a.map(o=>AB(e,o))}return t},k3=t=>typeof t=="string"?t.replace(" ","T"):t,oB=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class qp{constructor(e,r,n={},s=Rm){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var pw;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(pw||(pw={}));class md{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:A,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=md.syncState(this.state,s,a,A),this.pendingDiffs.forEach(l=>{this.state=md.syncDiff(this.state,l,a,A)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:A,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=md.syncDiff(this.state,s,a,A),o())}),this.onJoin((s,a,A)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:A})}),this.onLeave((s,a,A)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:A})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const a=this.cloneDeep(e),A=this.transformState(r),o={},l={};return this.map(a,(c,d)=>{A[c]||(l[c]=d)}),this.map(A,(c,d)=>{const p=a[c];if(p){const g=d.map(j=>j.presence_ref),h=p.map(j=>j.presence_ref),b=d.filter(j=>h.indexOf(j.presence_ref)<0),w=p.filter(j=>g.indexOf(j.presence_ref)<0);b.length>0&&(o[c]=b),w.length>0&&(l[c]=w)}else o[c]=d}),this.syncDiff(a,{joins:o,leaves:l},n,s)}static syncDiff(e,r,n,s){const{joins:a,leaves:A}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(o,l)=>{var c;const d=(c=e[o])!==null&&c!==void 0?c:[];if(e[o]=this.cloneDeep(l),d.length>0){const p=e[o].map(h=>h.presence_ref),g=d.filter(h=>p.indexOf(h.presence_ref)<0);e[o].unshift(...g)}n(o,d,l)}),this.map(A,(o,l)=>{let c=e[o];if(!c)return;const d=l.map(p=>p.presence_ref);c=c.filter(p=>d.indexOf(p.presence_ref)<0),e[o]=c,s(o,c,l),c.length===0&&delete e[o]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var gw;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(gw||(gw={}));var xd;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(xd||(xd={}));var LA;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(LA||(LA={}));class Vc{constructor(e,r={config:{}},n){var s,a;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Xn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new qp(this,ka.join,this.params,this.timeout),this.rejoinTimer=new aB(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(A=>A.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Xn.closed,this.socket._remove(this)}),this._onError(A=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,A),this.state=Xn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Xn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",A=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,A),this.state=Xn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ka.reply,{},(A,o)=>{this._trigger(this._replyEventName(o),A)}),this.presence=new md(this),this.broadcastEndpointURL=oB(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Xn.closed){const{config:{broadcast:A,presence:o,private:l}}=this.params,c=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(h=>h.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[xd.PRESENCE]&&this.bindings[xd.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,p={},g={broadcast:A,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(h=>e==null?void 0:e(LA.CHANNEL_ERROR,h)),this._onClose(()=>e==null?void 0:e(LA.CLOSED)),this.updateJoinPayload(Object.assign({config:g},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:h})=>{var b;if(this.socket._isManualToken()||this.socket.setAuth(),h===void 0){e==null||e(LA.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,j=(b=w==null?void 0:w.length)!==null&&b!==void 0?b:0,x=[];for(let y=0;y<j;y++){const B=w[y],{filter:{event:E,schema:L,table:U,filter:M}}=B,G=h&&h[y];if(G&&G.event===E&&Vc.isFilterValueEqual(G.schema,L)&&Vc.isFilterValueEqual(G.table,U)&&Vc.isFilterValueEqual(G.filter,M))x.push(Object.assign(Object.assign({},B),{id:G.id}));else{this.unsubscribe(),this.state=Xn.errored,e==null||e(LA.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(LA.SUBSCRIBED);return}}).receive("error",h=>{this.state=Xn.errored,e==null||e(LA.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(LA.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Xn.joined&&e===xd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const A={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,A,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(o.status===202)return{success:!0};let l=o.statusText;try{const c=await o.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:A}=e,o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:A,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var A,o,l;const c=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(A=this.params)===null||A===void 0?void 0:A.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&a("ok"),c.receive("ok",()=>a("ok")),c.receive("error",()=>a("error")),c.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Xn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ka.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new qp(this,ka.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Xn.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),A=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),A}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new qp(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>C3){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,a;const A=e.toLocaleLowerCase(),{close:o,error:l,leave:c,join:d}=ka;if(n&&[o,l,c,d].indexOf(A)>=0&&n!==this._joinRef())return;let g=this._onMessage(A,r,n);if(r&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(A)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(h=>{var b,w,j;return((b=h.filter)===null||b===void 0?void 0:b.event)==="*"||((j=(w=h.filter)===null||w===void 0?void 0:w.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===A}).map(h=>h.callback(g,n)):(a=this.bindings[A])===null||a===void 0||a.filter(h=>{var b,w,j,x,y,B;if(["broadcast","presence","postgres_changes"].includes(A))if("id"in h){const E=h.id,L=(b=h.filter)===null||b===void 0?void 0:b.event;return E&&((w=r.ids)===null||w===void 0?void 0:w.includes(E))&&(L==="*"||(L==null?void 0:L.toLocaleLowerCase())===((j=r.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const E=(y=(x=h==null?void 0:h.filter)===null||x===void 0?void 0:x.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return E==="*"||E===((B=r==null?void 0:r.event)===null||B===void 0?void 0:B.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===A}).map(h=>{if(typeof g=="object"&&"ids"in g){const b=g.data,{schema:w,table:j,commit_timestamp:x,type:y,errors:B}=b;g=Object.assign(Object.assign({},{schema:w,table:j,commit_timestamp:x,eventType:y,new:{},old:{},errors:B}),this._getPayloadRecords(b))}h.callback(g,n)})}_isClosed(){return this.state===Xn.closed}_isJoined(){return this.state===Xn.joined}_isJoining(){return this.state===Xn.joining}_isLeaving(){return this.state===Xn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Vc.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}static isFilterValueEqual(e,r){return(e??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ka.close,{},e)}_onError(e){this._on(ka.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=fw(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=fw(e.columns,e.old_record)),r}}const Wp=()=>{},Rh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},U3=[1e3,2e3,5e3,1e4],I3=1e4,Q3=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class T3{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Rm,this.transport=null,this.heartbeatIntervalMs=Rh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Wp,this.ref=0,this.reconnectTimer=null,this.vsn=hw,this.logger=Wp,this.conn=null,this.sendBuffer=[],this.serializer=new N3,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Hm.websocket}`,this.httpEndpoint=oB(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=v3.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Eo.connecting:return Fl.Connecting;case Eo.open:return Fl.Open;case Eo.closing:return Fl.Closing;default:return Fl.Closed}}isConnected(){return this.connectionState()===Fl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(a=>a.topic===n);if(s)return s;{const a=new Vc(`realtime:${e}`,r,this);return this.channels.push(a),a}}push(e){const{topic:r,event:n,payload:s,ref:a}=e,A=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?A():this.sendBuffer.push(A)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(B3,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Rh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:a,ref:A}=r,o=A?`(${A})`:"",l=a.status||"";this.log("receive",`${l} ${n} ${s} ${o}`.trim(),a),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(s,a,A)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Eo.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Eo.open||this.conn.readyState===Eo.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ka.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([Q3],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r,n=!1;if(e)r=e,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const a={access_token:r,version:y3};r&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(ka.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new aB(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Rh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,a,A,o,l,c,d,p,g,h;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Rm,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Rh.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(A=e==null?void 0:e.accessToken)!==null&&A!==void 0?A:null,this.heartbeatCallback=(o=e==null?void 0:e.heartbeatCallback)!==null&&o!==void 0?o:Wp,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:hw,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:b=>U3[b-1]||I3,this.vsn){case iB:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(b,w)=>w(JSON.stringify(b)),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:(b,w)=>w(JSON.parse(b));break;case b3:this.encode=(g=e==null?void 0:e.encode)!==null&&g!==void 0?g:this.serializer.encode.bind(this.serializer),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var $d=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function L3(t,e,r){const n=new URL(e,t);if(r)for(const[s,a]of Object.entries(r))a!==void 0&&n.searchParams.set(s,a);return n.toString()}async function P3(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function O3(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:a,headers:A}){const o=L3(t.baseUrl,n,s),l=await P3(t.auth),c=await e(o,{method:r,headers:{...a?{"Content-Type":"application/json"}:{},...l,...A},body:a?JSON.stringify(a):void 0}),d=await c.text(),p=(c.headers.get("content-type")||"").includes("application/json"),g=p&&d?JSON.parse(d):d;if(!c.ok){const h=p?g:void 0,b=h==null?void 0:h.error;throw new $d((b==null?void 0:b.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:b==null?void 0:b.type,icebergCode:b==null?void 0:b.code,details:h})}return{status:c.status,headers:c.headers,data:g}}}}function Hh(t){return t.join("")}var D3=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Hh(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Hh(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Hh(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Hh(t.namespace)}`}),!0}catch(e){if(e instanceof $d&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof $d&&r.status===409)return;throw r}}};function dc(t){return t.join("")}var R3=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${dc(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${dc(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${dc(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${dc(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${dc(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${dc(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof $d&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof $d&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},H3=class{constructor(t){var n;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=O3({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(n=t.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new D3(this.client,e),this.tableOps=new R3(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},J0=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function vn(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var M3=class extends J0{constructor(t,e,r){super(t),this.name="StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},$m=class extends J0{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const S1=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),$3=()=>Response,Km=t=>{if(Array.isArray(t))return t.map(r=>Km(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=Km(n)}),e},K3=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},G3=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Kd(t){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kd(t)}function V3(t,e){if(Kd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Kd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function z3(t){var e=V3(t,"string");return Kd(e)=="symbol"?e:e+""}function q3(t,e,r){return(e=z3(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function ar(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mw(Object(r),!0).forEach(function(n){q3(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mw(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const Jp=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},W3=async(t,e,r)=>{t instanceof await $3()&&!(r!=null&&r.noResolveJson)?t.json().then(n=>{const s=t.status||500,a=(n==null?void 0:n.statusCode)||s+"";e(new M3(Jp(n),s,a))}).catch(n=>{e(new $m(Jp(n),n))}):e(new $m(Jp(t),t))},J3=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(K3(n)?(s.headers=ar({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),ar(ar({},s),r))};async function ih(t,e,r,n,s,a){return new Promise((A,o)=>{t(r,J3(e,n,s,a)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>A(l)).catch(l=>W3(l,o,n))})}async function Gd(t,e,r,n){return ih(t,"GET",e,r,n)}async function Fa(t,e,r,n,s){return ih(t,"POST",e,n,s,r)}async function Gm(t,e,r,n,s){return ih(t,"PUT",e,n,s,r)}async function Y3(t,e,r,n){return ih(t,"HEAD",e,ar(ar({},r),{},{noResolveJson:!0}),n)}async function j1(t,e,r,n,s){return ih(t,"DELETE",e,n,s,r)}var X3=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(vn(e))return{data:null,error:e};throw e}}};let lB;lB=Symbol.toStringTag;var Z3=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[lB]="BlobDownloadBuilder",this.promise=null}asStream(){return new X3(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(vn(e))return{data:null,error:e};throw e}}};const ej={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},xw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var tj=class{constructor(t,e={},r,n){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=r,this.fetch=S1(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,r,n){var s=this;try{let a;const A=ar(ar({},xw),n);let o=ar(ar({},s.headers),t==="POST"&&{"x-upsert":String(A.upsert)});const l=A.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",A.cacheControl),l&&a.append("metadata",s.encodeMetadata(l)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.has("cacheControl")||a.append("cacheControl",A.cacheControl),l&&!a.has("metadata")&&a.append("metadata",s.encodeMetadata(l))):(a=r,o["cache-control"]=`max-age=${A.cacheControl}`,o["content-type"]=A.contentType,l&&(o["x-metadata"]=s.toBase64(s.encodeMetadata(l))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!A.duplex&&(A.duplex="half")),n!=null&&n.headers&&(o=ar(ar({},o),n.headers));const c=s._removeEmptyFolders(e),d=s._getFinalPath(c),p=await(t=="PUT"?Gm:Fa)(s.fetch,`${s.url}/object/${d}`,a,ar({headers:o},A!=null&&A.duplex?{duplex:A.duplex}:{}));return{data:{path:c,id:p.Id,fullPath:p.Key},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(vn(a))return{data:null,error:a};throw a}}async upload(t,e,r){return this.uploadOrUpdate("POST",t,e,r)}async uploadToSignedUrl(t,e,r,n){var s=this;const a=s._removeEmptyFolders(t),A=s._getFinalPath(a),o=new URL(s.url+`/object/upload/sign/${A}`);o.searchParams.set("token",e);try{let l;const c=ar({upsert:xw.upsert},n),d=ar(ar({},s.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType),{data:{path:a,fullPath:(await Gm(s.fetch,o.toString(),l,{headers:d})).Key},error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(vn(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(t,e){var r=this;try{let n=r._getFinalPath(t);const s=ar({},r.headers);e!=null&&e.upsert&&(s["x-upsert"]="true");const a=await Fa(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),A=new URL(r.url+a.url),o=A.searchParams.get("token");if(!o)throw new J0("No token returned by API");return{data:{signedUrl:A.toString(),path:t,token:o},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(vn(n))return{data:null,error:n};throw n}}async update(t,e,r){return this.uploadOrUpdate("PUT",t,e,r)}async move(t,e,r){var n=this;try{return{data:await Fa(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(vn(s))return{data:null,error:s};throw s}}async copy(t,e,r){var n=this;try{return{data:{path:(await Fa(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(vn(s))return{data:null,error:s};throw s}}async createSignedUrl(t,e,r){var n=this;try{let s=n._getFinalPath(t),a=await Fa(n.fetch,`${n.url}/object/sign/${s}`,ar({expiresIn:e},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const A=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${n.url}${a.signedURL}${A}`)},{data:a,error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(vn(s))return{data:null,error:s};throw s}}async createSignedUrls(t,e,r){var n=this;try{const s=await Fa(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:e,paths:t},{headers:n.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(A=>ar(ar({},A),{},{signedUrl:A.signedURL?encodeURI(`${n.url}${A.signedURL}${a}`):null})),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(vn(s))return{data:null,error:s};throw s}}download(t,e){const r=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),s=n?`?${n}`:"",a=this._getFinalPath(t),A=()=>Gd(this.fetch,`${this.url}/${r}/${a}${s}`,{headers:this.headers,noResolveJson:!0});return new Z3(A,this.shouldThrowOnError)}async info(t){var e=this;const r=e._getFinalPath(t);try{return{data:Km(await Gd(e.fetch,`${e.url}/object/info/${r}`,{headers:e.headers})),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(vn(n))return{data:null,error:n};throw n}}async exists(t){var e=this;const r=e._getFinalPath(t);try{return await Y3(e.fetch,`${e.url}/object/${r}`,{headers:e.headers}),{data:!0,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(vn(n)&&n instanceof $m){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}}getPublicUrl(t,e){const r=this._getFinalPath(t),n=[],s=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&n.push(s);const a=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",A=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});A!==""&&n.push(A);let o=n.join("&");return o!==""&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${o}`)}}}async remove(t){var e=this;try{return{data:await j1(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(vn(r))return{data:null,error:r};throw r}}async list(t,e,r){var n=this;try{const s=ar(ar(ar({},ej),e),{},{prefix:t||""});return{data:await Fa(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(vn(s))return{data:null,error:s};throw s}}async listV2(t,e){var r=this;try{const n=ar({},t);return{data:await Fa(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},e),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(vn(n))return{data:null,error:n};throw n}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const cB="2.89.0",uB={"X-Client-Info":`storage-js/${cB}`};var rj=class{constructor(t,e={},r,n){this.shouldThrowOnError=!1;const s=new URL(t);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=ar(ar({},uB),e),this.fetch=S1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const r=e.listBucketOptionsToQueryString(t);return{data:await Gd(e.fetch,`${e.url}/bucket${r}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(vn(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await Gd(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(vn(r))return{data:null,error:r};throw r}}async createBucket(t,e={public:!1}){var r=this;try{return{data:await Fa(r.fetch,`${r.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(vn(n))return{data:null,error:n};throw n}}async updateBucket(t,e){var r=this;try{return{data:await Gm(r.fetch,`${r.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(vn(n))return{data:null,error:n};throw n}}async emptyBucket(t){var e=this;try{return{data:await Fa(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(vn(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await j1(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(vn(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},nj=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ar(ar({},uB),e),this.fetch=S1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Fa(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(vn(r))return{data:null,error:r};throw r}}async listBuckets(t){var e=this;try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),s=n?`${e.url}/bucket?${n}`:`${e.url}/bucket`;return{data:await Gd(e.fetch,s,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(vn(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await j1(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(vn(r))return{data:null,error:r};throw r}}from(t){var e=this;if(!G3(t))throw new J0("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new H3({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,a){const A=s[a];return typeof A!="function"?A:async(...o)=>{try{return{data:await A.apply(s,o),error:null}}catch(l){if(n)throw l;return{data:null,error:l}}}}})}};const E1={"X-Client-Info":`storage-js/${cB}`,"Content-Type":"application/json"};var dB=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Si(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var Yp=class extends dB{constructor(t,e,r){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},sj=class extends dB{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const F1=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),ij=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},vw=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),aj=async(t,e,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const n=t.status||500,s=t;if(typeof s.json=="function")s.json().then(a=>{const A=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||n+"";e(new Yp(vw(a),n,A))}).catch(()=>{const a=n+"";e(new Yp(s.statusText||`HTTP ${n} error`,n,a))});else{const a=n+"";e(new Yp(s.statusText||`HTTP ${n} error`,n,a))}}else e(new sj(vw(t),t))},Aj=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(ij(n)?(s.headers=ar({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,ar(ar({},s),r)):s};async function oj(t,e,r,n,s,a){return new Promise((A,o)=>{t(r,Aj(e,n,s,a)).then(l=>{if(!l.ok)throw l;if(n!=null&&n.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>A(l)).catch(l=>aj(l,o,n))})}async function ji(t,e,r,n,s){return oj(t,"POST",e,n,s,r)}var lj=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ar(ar({},E1),e),this.fetch=F1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await ji(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Si(r))return{data:null,error:r};throw r}}async getIndex(t,e){var r=this;try{return{data:await ji(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Si(n))return{data:null,error:n};throw n}}async listIndexes(t){var e=this;try{return{data:await ji(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Si(r))return{data:null,error:r};throw r}}async deleteIndex(t,e){var r=this;try{return{data:await ji(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Si(n))return{data:null,error:n};throw n}}},cj=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ar(ar({},E1),e),this.fetch=F1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await ji(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Si(r))return{data:null,error:r};throw r}}async getVectors(t){var e=this;try{return{data:await ji(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Si(r))return{data:null,error:r};throw r}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await ji(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Si(r))return{data:null,error:r};throw r}}async queryVectors(t){var e=this;try{return{data:await ji(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Si(r))return{data:null,error:r};throw r}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await ji(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Si(r))return{data:null,error:r};throw r}}},uj=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ar(ar({},E1),e),this.fetch=F1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await ji(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Si(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await ji(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Si(r))return{data:null,error:r};throw r}}async listBuckets(t={}){var e=this;try{return{data:await ji(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Si(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await ji(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Si(r))return{data:null,error:r};throw r}}},dj=class extends uj{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new hj(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,r=this;return e().call(r,t)}async getBucket(t){var e=()=>super.getBucket,r=this;return e().call(r,t)}async listBuckets(t={}){var e=()=>super.listBuckets,r=this;return e().call(r,t)}async deleteBucket(t){var e=()=>super.deleteBucket,r=this;return e().call(r,t)}},hj=class extends lj{constructor(t,e,r,n){super(t,e,n),this.vectorBucketName=r}async createIndex(t){var e=()=>super.createIndex,r=this;return e().call(r,ar(ar({},t),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,r=this;return e().call(r,ar(ar({},t),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,r=this;return e().call(r,r.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,r=this;return e().call(r,r.vectorBucketName,t)}index(t){return new fj(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},fj=class extends cj{constructor(t,e,r,n,s){super(t,e,s),this.vectorBucketName=r,this.indexName=n}async putVectors(t){var e=()=>super.putVectors,r=this;return e().call(r,ar(ar({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(t){var e=()=>super.getVectors,r=this;return e().call(r,ar(ar({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,r=this;return e().call(r,ar(ar({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,r=this;return e().call(r,ar(ar({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,r=this;return e().call(r,ar(ar({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},pj=class extends rj{constructor(t,e={},r,n){super(t,e,r,n)}from(t){return new tj(this.url,this.headers,t,this.fetch)}get vectors(){return new dj(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new nj(this.url+"/iceberg",this.headers,this.fetch)}};const hB="2.89.0",Ec=30*1e3,Vm=3,Xp=Vm*Ec,gj="http://localhost:9999",mj="supabase.auth.token",xj={"X-Client-Info":`gotrue-js/${hB}`},zm="X-Supabase-Api-Version",fB={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},vj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,wj=10*60*1e3;class Vd extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Zt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class yj extends Vd{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function bj(t){return Zt(t)&&t.name==="AuthApiError"}class _l extends Vd{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class WA extends Vd{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class Bi extends WA{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Bj(t){return Zt(t)&&t.name==="AuthSessionMissingError"}class hc extends WA{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Mh extends WA{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class $h extends WA{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Cj(t){return Zt(t)&&t.name==="AuthImplicitGrantRedirectError"}class ww extends WA{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Nj extends WA{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class qm extends WA{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Zp(t){return Zt(t)&&t.name==="AuthRetryableFetchError"}class yw extends WA{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Wm extends WA{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const p0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),bw=` 	
\r=`.split(""),Sj=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<bw.length;e+=1)t[bw[e].charCodeAt(0)]=-2;for(let e=0;e<p0.length;e+=1)t[p0[e].charCodeAt(0)]=e;return t})();function Bw(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(p0[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(p0[n]),e.queuedBits-=6}}function pB(t,e,r){const n=Sj[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Cw(t){const e=[],r=A=>{e.push(String.fromCodePoint(A))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=A=>{Fj(A,n,r)};for(let A=0;A<t.length;A+=1)pB(t.charCodeAt(A),s,a);return e.join("")}function jj(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Ej(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}jj(n,e)}}function Fj(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function tu(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)pB(t.charCodeAt(s),r,n);return new Uint8Array(e)}function _j(t){const e=[];return Ej(t,r=>e.push(r)),new Uint8Array(e)}function Ll(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>Bw(s,r,n)),Bw(null,r,n),e.join("")}function kj(t){return Math.round(Date.now()/1e3)+t}function Uj(){return Symbol("auth-callback")}const ps=()=>typeof window<"u"&&typeof document<"u",bl={tested:!1,writable:!1},gB=()=>{if(!ps())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bl.tested)return bl.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),bl.tested=!0,bl.writable=!0}catch{bl.tested=!0,bl.writable=!1}return bl.writable};function Ij(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const mB=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Qj=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Fc=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Bl=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},hs=async(t,e)=>{await t.removeItem(e)};class Y0{constructor(){this.promise=new Y0.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Y0.promiseConstructor=Promise;function eg(t){const e=t.split(".");if(e.length!==3)throw new Wm("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!vj.test(e[n]))throw new Wm("JWT not in base64url format");return{header:JSON.parse(Cw(e[0])),payload:JSON.parse(Cw(e[1])),signature:tu(e[2]),raw:{header:e[0],payload:e[1]}}}async function Tj(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Lj(t,e){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const A=await t(a);if(!e(a,null,A)){n(A);return}}catch(A){if(!e(a,A)){s(A);return}}})()})}function Pj(t){return("0"+t.toString(16)).substr(-2)}function Oj(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,Pj).join("")}async function Dj(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function Rj(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await Dj(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function fc(t,e,r=!1){const n=Oj();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Fc(t,`${e}-code-verifier`,s);const a=await Rj(n);return[a,n===a?"plain":"s256"]}const Hj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Mj(t){const e=t.headers.get(zm);if(!e||!e.match(Hj))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function $j(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Kj(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Gj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function pc(t){if(!Gj.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function tg(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Vj(t,e){return new Proxy(t,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,s)}})}function Nw(t){return JSON.parse(JSON.stringify(t))}const jl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),zj=[502,503,504];async function Sw(t){var e;if(!Qj(t))throw new qm(jl(t),0);if(zj.includes(t.status))throw new qm(jl(t),t.status);let r;try{r=await t.json()}catch(a){throw new _l(jl(a),a)}let n;const s=Mj(t);if(s&&s.getTime()>=fB["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new yw(jl(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Bi}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,A)=>a&&typeof A=="string",!0))throw new yw(jl(r),t.status,r.weak_password.reasons);throw new yj(jl(r),t.status||500,n)}const qj=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function ir(t,e,r,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[zm]||(a[zm]=fB["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const A=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(A.redirect_to=n.redirectTo);const o=Object.keys(A).length?"?"+new URLSearchParams(A).toString():"",l=await Wj(t,e,r+o,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function Wj(t,e,r,n,s,a){const A=qj(e,n,s,a);let o;try{o=await t(r,Object.assign({},A))}catch(l){throw console.error(l),new qm(jl(l),0)}if(o.ok||await Sw(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(l){await Sw(l)}}function Sa(t){var e;let r=null;Xj(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=kj(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function jw(t){const e=Sa(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Uo(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Jj(t){return{data:t,error:null}}function Yj(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=t,A=W0(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},l=Object.assign({},A);return{data:{properties:o,user:l},error:null}}function Ew(t){return t}function Xj(t){return t.access_token&&t.refresh_token&&t.expires_in}const rg=["global","local","others"];class Zj{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=mB(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=rg[0]){if(rg.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${rg.join(", ")}`);try{return await ir(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Zt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await ir(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Uo})}catch(n){if(Zt(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=W0(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await ir(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Yj,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Zt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await ir(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Uo})}catch(r){if(Zt(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,a,A,o,l;try{const c={nextPage:null,lastPage:0,total:0},d=await ir(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Ew});if(d.error)throw d.error;const p=await d.json(),g=(A=d.headers.get("x-total-count"))!==null&&A!==void 0?A:0,h=(l=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(b=>{const w=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(b.split(";")[1].split("=")[1]);c[`${j}Page`]=w}),c.total=parseInt(g)),{data:Object.assign(Object.assign({},p),c),error:null}}catch(c){if(Zt(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){pc(e);try{return await ir(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Uo})}catch(r){if(Zt(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){pc(e);try{return await ir(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Uo})}catch(n){if(Zt(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){pc(e);try{return await ir(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Uo})}catch(n){if(Zt(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){pc(e.userId);try{const{data:r,error:n}=await ir(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(Zt(r))return{data:null,error:r};throw r}}async _deleteFactor(e){pc(e.userId),pc(e.id);try{return{data:await ir(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(Zt(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,s,a,A,o,l;try{const c={nextPage:null,lastPage:0,total:0},d=await ir(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Ew});if(d.error)throw d.error;const p=await d.json(),g=(A=d.headers.get("x-total-count"))!==null&&A!==void 0?A:0,h=(l=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(b=>{const w=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(b.split(";")[1].split("=")[1]);c[`${j}Page`]=w}),c.total=parseInt(g)),{data:Object.assign(Object.assign({},p),c),error:null}}catch(c){if(Zt(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await ir(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Zt(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await ir(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Zt(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await ir(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Zt(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await ir(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Zt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await ir(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Zt(r))return{data:null,error:r};throw r}}}function Fw(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const gc={debug:!!(globalThis&&gB()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class xB extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class eE extends xB{}async function tE(t,e,r){gc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),gc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){gc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{gc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw gc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new eE(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(gc.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function rE(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function vB(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function nE(t){return parseInt(t,16)}function sE(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function iE(t){var e;const{chainId:r,domain:n,expirationTime:s,issuedAt:a=new Date,nonce:A,notBefore:o,requestId:l,resources:c,scheme:d,uri:p,version:g}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(A&&A.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${A}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(g!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${g}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const h=vB(t.address),b=d?`${d}://${n}`:n,w=t.statement?`${t.statement}
`:"",j=`${b} wants you to sign in with your Ethereum account:
${h}

${w}`;let x=`URI: ${p}
Version: ${g}
Chain ID: ${r}${A?`
Nonce: ${A}`:""}
Issued At: ${a.toISOString()}`;if(s&&(x+=`
Expiration Time: ${s.toISOString()}`),o&&(x+=`
Not Before: ${o.toISOString()}`),l&&(x+=`
Request ID: ${l}`),c){let y=`
Resources:`;for(const B of c){if(!B||typeof B!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${B}`);y+=`
- ${B}`}x+=y}return`${j}
${x}`}class Gn extends Error{constructor({message:e,code:r,cause:n,name:s}){var a;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=s??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class g0 extends Gn{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function aE({error:t,options:e}){var r,n,s;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Gn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Gn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Gn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Gn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Gn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Gn({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new Gn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Gn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const A=window.location.hostname;if(wB(A)){if(a.rp.id!==A)return new Gn({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Gn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Gn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Gn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Gn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function AE({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Gn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Gn({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(wB(n)){if(r.rpId!==n)return new Gn({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Gn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Gn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Gn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class oE{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const lE=new oE;function cE(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,s=W0(t,["challenge","user","excludeCredentials"]),a=tu(e).buffer,A=Object.assign(Object.assign({},r),{id:tu(r.id).buffer}),o=Object.assign(Object.assign({},s),{challenge:a,user:A});if(n&&n.length>0){o.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const c=n[l];o.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:tu(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return o}function uE(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=W0(t,["challenge","allowCredentials"]),s=tu(e).buffer,a=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let A=0;A<r.length;A++){const o=r[A];a.allowCredentials[A]=Object.assign(Object.assign({},o),{id:tu(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return a}function dE(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ll(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ll(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function hE(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ll(new Uint8Array(s.authenticatorData)),clientDataJSON:Ll(new Uint8Array(s.clientDataJSON)),signature:Ll(new Uint8Array(s.signature)),userHandle:s.userHandle?Ll(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function wB(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function _w(){var t,e;return!!(ps()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function fE(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new g0("Browser returned unexpected credential type",e)}:{data:null,error:new g0("Empty credential response",e)}}catch(e){return{data:null,error:aE({error:e,options:t})}}}async function pE(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new g0("Browser returned unexpected credential type",e)}:{data:null,error:new g0("Empty credential response",e)}}catch(e){return{data:null,error:AE({error:e,options:t})}}}const gE={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},mE={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function m0(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of t)if(s)for(const a in s){const A=s[a];if(A!==void 0)if(Array.isArray(A))n[a]=A;else if(r(A))n[a]=A;else if(e(A)){const o=n[a];e(o)?n[a]=m0(o,A):n[a]=m0(A)}else n[a]=A}return n}function xE(t,e){return m0(gE,t,e||{})}function vE(t,e){return m0(mE,t,e||{})}class wE{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:s},a){try{const{data:A,error:o}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!A)return{data:null,error:o};const l=s??lE.createNewAbortSignal();if(A.webauthn.type==="create"){const{user:c}=A.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${n}`),c.displayName||(c.displayName=c.name)}switch(A.webauthn.type){case"create":{const c=xE(A.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:d,error:p}=await fE({publicKey:c,signal:l});return d?{data:{factorId:e,challengeId:A.id,webauthn:{type:A.webauthn.type,credential_response:d}},error:null}:{data:null,error:p}}case"request":{const c=vE(A.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:d,error:p}=await pE(Object.assign(Object.assign({},A.webauthn.credential_options),{publicKey:c,signal:l}));return d?{data:{factorId:e,challengeId:A.id,webauthn:{type:A.webauthn.type,credential_response:d}},error:null}:{data:null,error:p}}}}catch(A){return Zt(A)?{data:null,error:A}:{data:null,error:new _l("Unexpected error in challenge",A)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!r)return{data:null,error:new Vd("rpId is required for WebAuthn authentication")};try{if(!_w())return{data:null,error:new _l("Browser does not support WebAuthn",null)};const{data:A,error:o}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:a});if(!A)return{data:null,error:o};const{webauthn:l}=A;return this._verify({factorId:e,challengeId:A.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:n,credential_response:l.credential_response}})}catch(A){return Zt(A)?{data:null,error:A}:{data:null,error:new _l("Unexpected error in authenticate",A)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!r)return{data:null,error:new Vd("rpId is required for WebAuthn registration")};try{if(!_w())return{data:null,error:new _l("Browser does not support WebAuthn",null)};const{data:A,error:o}=await this._enroll({friendlyName:e});if(!A)return await this.client.mfa.listFactors().then(d=>{var p;return(p=d.data)===null||p===void 0?void 0:p.all.find(g=>g.factor_type==="webauthn"&&g.friendly_name===e&&g.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:o};const{data:l,error:c}=await this._challenge({factorId:A.id,friendlyName:A.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:a});return l?this._verify({factorId:A.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(A){return Zt(A)?{data:null,error:A}:{data:null,error:new _l("Unexpected error in register",A)}}}}rE();const yE={url:gj,storageKey:mj,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:xj,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function kw(t,e,r){return await r()}const mc={};class zd{get jwks(){var e,r;return(r=(e=mc[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){mc[this.storageKey]=Object.assign(Object.assign({},mc[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=mc[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){mc[this.storageKey]=Object.assign(Object.assign({},mc[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},yE),e);if(this.storageKey=a.storageKey,this.instanceID=(r=zd.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,zd.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&ps()){const A=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(A),this.logDebugMessages&&console.trace(A)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Zj({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=mB(a.fetch),this.lock=a.lock||kw,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:this.persistSession&&ps()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=tE:this.lock=kw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new wE(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:gB()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Fw(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Fw(this.memoryStorage)),ps()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(A){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",A)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async A=>{this._debug("received broadcast notification from other tab or client",A),await this._notifyAllSubscribers(A.data.event,A.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${hB}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(ps()&&(r=Ij(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),ps()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Cj(a)){const l=(e=a.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:A,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",A,"redirect type",o),await this._saveSession(A),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",A):await this._notifyAllSubscribers("SIGNED_IN",A)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Zt(r)?this._returnResult({error:r}):this._returnResult({error:new _l("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const a=await ir(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Sa}),{data:A,error:o}=a;if(o||!A)return this._returnResult({data:{user:null,session:null},error:o});const l=A.session,c=A.user;return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(a){if(Zt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var r,n,s;try{let a;if("email"in e){const{email:d,password:p,options:g}=e;let h=null,b=null;this.flowType==="pkce"&&([h,b]=await fc(this.storage,this.storageKey)),a=await ir(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:d,password:p,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:h,code_challenge_method:b},xform:Sa})}else if("phone"in e){const{phone:d,password:p,options:g}=e;a=await ir(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:p,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},channel:(s=g==null?void 0:g.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Sa})}else throw new Mh("You must provide either an email or phone number and a password");const{data:A,error:o}=a;if(o||!A)return await hs(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const l=A.session,c=A.user;return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(a){if(await hs(this.storage,`${this.storageKey}-code-verifier`),Zt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let r;if("email"in e){const{email:a,password:A,options:o}=e;r=await ir(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:A,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:jw})}else if("phone"in e){const{phone:a,password:A,options:o}=e;r=await ir(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:A,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:jw})}else throw new Mh("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const a=new hc;return this._returnResult({data:{user:null,session:null},error:a})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(Zt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,s,a,A,o,l,c,d,p,g;let h,b;if("message"in e)h=e.message,b=e.signature;else{const{chain:w,wallet:j,statement:x,options:y}=e;let B;if(ps())if(typeof j=="object")B=j;else{const N=window;if("ethereum"in N&&typeof N.ethereum=="object"&&"request"in N.ethereum&&typeof N.ethereum.request=="function")B=N.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=j}const E=new URL((r=y==null?void 0:y.url)!==null&&r!==void 0?r:window.location.href),L=await B.request({method:"eth_requestAccounts"}).then(N=>N).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!L||L.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const U=vB(L[0]);let M=(n=y==null?void 0:y.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!M){const N=await B.request({method:"eth_chainId"});M=nE(N)}const G={domain:E.host,address:U,statement:x,uri:E.href,version:"1",chainId:M,nonce:(s=y==null?void 0:y.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(A=(a=y==null?void 0:y.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&A!==void 0?A:new Date,expirationTime:(o=y==null?void 0:y.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(l=y==null?void 0:y.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=y==null?void 0:y.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(d=y==null?void 0:y.signInWithEthereum)===null||d===void 0?void 0:d.resources};h=iE(G),b=await B.request({method:"personal_sign",params:[sE(h),U]})}try{const{data:w,error:j}=await ir(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:b},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Sa});if(j)throw j;if(!w||!w.session||!w.user){const x=new hc;return this._returnResult({data:{user:null,session:null},error:x})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:j})}catch(w){if(Zt(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(e){var r,n,s,a,A,o,l,c,d,p,g,h;let b,w;if("message"in e)b=e.message,w=e.signature;else{const{chain:j,wallet:x,statement:y,options:B}=e;let E;if(ps())if(typeof x=="object")E=x;else{const U=window;if("solana"in U&&typeof U.solana=="object"&&("signIn"in U.solana&&typeof U.solana.signIn=="function"||"signMessage"in U.solana&&typeof U.solana.signMessage=="function"))E=U.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(B!=null&&B.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=x}const L=new URL((r=B==null?void 0:B.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in E&&E.signIn){const U=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},B==null?void 0:B.signInWithSolana),{version:"1",domain:L.host,uri:L.href}),y?{statement:y}:null));let M;if(Array.isArray(U)&&U[0]&&typeof U[0]=="object")M=U[0];else if(U&&typeof U=="object"&&"signedMessage"in U&&"signature"in U)M=U;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)b=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),w=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${L.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${L.href}`,`Issued At: ${(s=(n=B==null?void 0:B.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=B==null?void 0:B.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${B.signInWithSolana.notBefore}`]:[],...!((A=B==null?void 0:B.signInWithSolana)===null||A===void 0)&&A.expirationTime?[`Expiration Time: ${B.signInWithSolana.expirationTime}`]:[],...!((o=B==null?void 0:B.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${B.signInWithSolana.chainId}`]:[],...!((l=B==null?void 0:B.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${B.signInWithSolana.nonce}`]:[],...!((c=B==null?void 0:B.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${B.signInWithSolana.requestId}`]:[],...!((p=(d=B==null?void 0:B.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||p===void 0)&&p.length?["Resources",...B.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const U=await E.signMessage(new TextEncoder().encode(b),"utf8");if(!U||!(U instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=U}}try{const{data:j,error:x}=await ir(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:Ll(w)},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Sa});if(x)throw x;if(!j||!j.session||!j.user){const y=new hc;return this._returnResult({data:{user:null,session:null},error:y})}return j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),this._returnResult({data:Object.assign({},j),error:x})}catch(j){if(Zt(j))return this._returnResult({data:{user:null,session:null},error:j});throw j}}async _exchangeCodeForSession(e){const r=await Bl(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new Nj;const{data:a,error:A}=await ir(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Sa});if(await hs(this.storage,`${this.storageKey}-code-verifier`),A)throw A;if(!a||!a.session||!a.user){const o=new hc;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:A})}catch(a){if(await hs(this.storage,`${this.storageKey}-code-verifier`),Zt(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:a,nonce:A}=e,o=await ir(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:A,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Sa}),{data:l,error:c}=o;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const d=new hc;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(r){if(Zt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,s,a,A;try{if("email"in e){const{email:o,options:l}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await fc(this.storage,this.storageKey));const{error:p}=await ir(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in e){const{phone:o,options:l}=e,{data:c,error:d}=await ir(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(a=l==null?void 0:l.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(A=l==null?void 0:l.channel)!==null&&A!==void 0?A:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d})}throw new Mh("You must provide either an email or phone number.")}catch(o){if(await hs(this.storage,`${this.storageKey}-code-verifier`),Zt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(e){var r,n;try{let s,a;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:A,error:o}=await ir(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Sa});if(o)throw o;if(!A)throw new Error("An error occurred on token verification.");const l=A.session,c=A.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(Zt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var r,n,s,a,A;try{let o=null,l=null;this.flowType==="pkce"&&([o,l]=await fc(this.storage,this.storageKey));const c=await ir(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:Jj});return!((a=c.data)===null||a===void 0)&&a.url&&ps()&&!(!((A=e.options)===null||A===void 0)&&A.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(o){if(await hs(this.storage,`${this.storageKey}-code-verifier`),Zt(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Bi;const{error:s}=await ir(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(Zt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:a}=e,{error:A}=await ir(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:A})}else if("phone"in e){const{phone:n,type:s,options:a}=e,{data:A,error:o}=await ir(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:A==null?void 0:A.message_id},error:o})}throw new Mh("You must provide either an email or phone number and a type")}catch(r){if(Zt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Bl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Xp:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const A=await Bl(this.userStorage,this.storageKey+"-user");A!=null&&A.user?e.user=A.user:e.user=tg()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const A={value:this.suppressGetSessionWarning};e.user=Vj(e.user,A),A.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await ir(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Uo}):await this._useSession(async r=>{var n,s,a;const{data:A,error:o}=r;if(o)throw o;return!(!((n=A.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Bi}:await ir(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=A.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Uo})})}catch(r){if(Zt(r))return Bj(r)&&(await this._removeSession(),await hs(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new Bi;const A=s.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await fc(this.storage,this.storageKey));const{data:c,error:d}=await ir(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:A.access_token,xform:Uo});if(d)throw d;return A.user=c.user,await this._saveSession(A),await this._notifyAllSubscribers("USER_UPDATED",A),this._returnResult({data:{user:A.user},error:null})})}catch(n){if(await hs(this.storage,`${this.storageKey}-code-verifier`),Zt(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Bi;const r=Date.now()/1e3;let n=r,s=!0,a=null;const{payload:A}=eg(e.access_token);if(A.exp&&(n=A.exp,s=n<=r),s){const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;a={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(Zt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:A,error:o}=r;if(o)throw o;e=(n=A.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Bi;const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Zt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!ps())throw new $h("No browser detected.");if(e.error||e.error_description||e.error_code)throw new $h(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new ww("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new $h("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ww("No code detected.");const{data:y,error:B}=await this._exchangeCodeForSession(e.code);if(B)throw B;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:A,expires_in:o,expires_at:l,token_type:c}=e;if(!a||!o||!A||!c)throw new $h("No session defined in URL");const d=Math.round(Date.now()/1e3),p=parseInt(o);let g=d+p;l&&(g=parseInt(l));const h=g-d;h*1e3<=Ec&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${p}s`);const b=g-p;d-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,g,d):d-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,g,d);const{data:w,error:j}=await this._getUser(a);if(j)throw j;const x={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:p,expires_at:g,refresh_token:A,token_type:c,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:x,redirectType:e.type},error:null})}catch(n){if(Zt(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Bl(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return this._returnResult({error:a});const A=(n=s.session)===null||n===void 0?void 0:n.access_token;if(A){const{error:o}=await this.admin.signOut(A,e);if(o&&!(bj(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return e!=="others"&&(await this._removeSession(),await hs(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=Uj(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:A}=r;if(A)throw A;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await fc(this.storage,this.storageKey,!0));try{return await ir(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(await hs(this.storage,`${this.storageKey}-code-verifier`),Zt(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(Zt(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var A,o,l,c,d;const{data:p,error:g}=a;if(g)throw g;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(A=e.options)===null||A===void 0?void 0:A.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ir(this.fetch,"GET",h,{headers:this.headers,jwt:(d=(c=p.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return ps()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(Zt(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:a}}=r;if(s)throw s;const{options:A,provider:o,token:l,access_token:c,nonce:d}=e,p=await ir(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a==null?void 0:a.access_token)!==null&&n!==void 0?n:void 0,body:{provider:o,id_token:l,access_token:c,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken}},xform:Sa}),{data:g,error:h}=p;return h?this._returnResult({data:{user:null,session:null},error:h}):!g||!g.session||!g.user?this._returnResult({data:{user:null,session:null},error:new hc}):(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("USER_UPDATED",g.session)),this._returnResult({data:g,error:h}))}catch(s){if(await hs(this.storage,`${this.storageKey}-code-verifier`),Zt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:a,error:A}=r;if(A)throw A;return await ir(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Zt(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Lj(async s=>(s>0&&await Tj(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await ir(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Sa})),(s,a)=>{const A=200*Math.pow(2,s);return a&&Zp(a)&&Date.now()+A-n<Ec})}catch(n){if(this._debug(r,"error",n),Zt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),ps()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Bl(this.storage,this.storageKey);if(s&&this.userStorage){let A=await Bl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!A&&(A={user:s.user},await Fc(this.userStorage,this.storageKey+"-user",A)),s.user=(e=A==null?void 0:A.user)!==null&&e!==void 0?e:tg()}else if(s&&!s.user&&!s.user){const A=await Bl(this.storage,this.storageKey+"-user");A&&(A!=null&&A.user)?(s.user=A.user,await hs(this.storage,this.storageKey+"-user"),await Fc(this.storage,this.storageKey,s)):s.user=tg()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const a=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Xp;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${Xp}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:A}=await this._callRefreshToken(s.refresh_token);A&&(console.error(A),Zp(A)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",A),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:A,error:o}=await this._getUser(s.access_token);!o&&(A!=null&&A.user)?(s.user=A.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(A){console.error("Error getting user data:",A),this._debug(n,"error getting user data, skipping SIGNED_IN notification",A)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Bi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Y0;const{data:a,error:A}=await this._refreshAccessToken(e);if(A)throw A;if(!a.session)throw new Bi;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={data:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(s,"error",a),Zt(a)){const A={data:null,error:a};return Zp(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(A),A}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const a=[],A=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,r)}catch(l){a.push(l)}});if(await Promise.all(A),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await hs(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Fc(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const a=Nw(s);await Fc(this.storage,this.storageKey,a)}else{const s=Nw(r);await Fc(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await hs(this.storage,this.storageKey),await hs(this.storage,this.storageKey+"-code-verifier"),await hs(this.storage,this.storageKey+"-user"),this.userStorage&&await hs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ps()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ec);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Ec);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ec}ms, refresh threshold is ${Vm} ticks`),s<=Vm&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof xB)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ps()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,A]=await fc(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(A)}`});s.push(o.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?this._returnResult({data:null,error:a}):await ir(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Zt(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:a,error:A}=r;if(A)return this._returnResult({data:null,error:A});const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await ir(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(Zt(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});const A=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?dE(e.webauthn.credential_response):hE(e.webauthn.credential_response)})}:{code:e.code}),{data:o,error:l}=await ir(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:A,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:l}))})}catch(r){if(Zt(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});const A=await ir(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(A.error)return A;const{data:o}=A;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:cE(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:uE(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Zt(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=eg(n.access_token);let A=null;a.aal&&(A=a.aal);let o=A;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(o="aal2");const c=a.amr||[];return{data:{currentLevel:A,nextLevel:o,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await ir(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Bi})})}catch(r){if(Zt(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new Bi});const A=await ir(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return A.data&&A.data.redirect_url&&ps()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(A.data.redirect_url),A})}catch(n){if(Zt(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new Bi});const A=await ir(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return A.data&&A.data.redirect_url&&ps()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(A.data.redirect_url),A})}catch(n){if(Zt(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await ir(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Bi})})}catch(e){if(Zt(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await ir(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Bi})})}catch(r){if(Zt(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(o=>o.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+wj>s)return n;const{data:a,error:A}=await ir(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(A)throw A;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,n=a.keys.find(o=>o.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:h,error:b}=await this.getSession();if(b||!h.session)return this._returnResult({data:null,error:b});n=h.session.access_token}const{header:s,payload:a,signature:A,raw:{header:o,payload:l}}=eg(n);r!=null&&r.allowExpired||$j(a.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:h}=await this.getUser(n);if(h)throw h;return{data:{claims:a,header:s,signature:A},error:null}}const d=Kj(s.alg),p=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,p,A,_j(`${o}.${l}`)))throw new Wm("Invalid JWT signature");return{data:{claims:a,header:s,signature:A},error:null}}catch(n){if(Zt(n))return this._returnResult({data:null,error:n});throw n}}}zd.nextInstanceID={};const bE=zd,BE="2.89.0";let ed="";typeof Deno<"u"?ed="deno":typeof document<"u"?ed="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ed="react-native":ed="node";const CE={"X-Client-Info":`supabase-js-${ed}/${BE}`},NE={headers:CE},SE={schema:"public"},jE={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},EE={};function qd(t){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qd(t)}function FE(t,e){if(qd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(qd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _E(t){var e=FE(t,"string");return qd(e)=="symbol"?e:e+""}function kE(t,e,r){return(e=_E(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Uw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function En(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Uw(Object(r),!0).forEach(function(n){kE(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Uw(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const UE=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),IE=()=>Headers,QE=(t,e,r)=>{const n=UE(r),s=IE();return async(a,A)=>{var o;const l=(o=await e())!==null&&o!==void 0?o:t;let c=new s(A==null?void 0:A.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(a,En(En({},A),{},{headers:c}))}};function TE(t){return t.endsWith("/")?t:t+"/"}function LE(t,e){var r,n;const{db:s,auth:a,realtime:A,global:o}=t,{db:l,auth:c,realtime:d,global:p}=e,g={db:En(En({},l),s),auth:En(En({},c),a),realtime:En(En({},d),A),storage:{},global:En(En(En({},p),o),{},{headers:En(En({},(r=p==null?void 0:p.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?g.accessToken=t.accessToken:delete g.accessToken,g}function PE(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(TE(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var OE=class extends bE{constructor(t){super(t)}},DE=class{constructor(t,e,r){var n,s;this.supabaseUrl=t,this.supabaseKey=e;const a=PE(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const A=`sb-${a.hostname.split(".")[0]}-auth-token`,o={db:SE,realtime:EE,auth:En(En({},jE),{},{storageKey:A}),global:NE},l=LE(r??{},o);if(this.storageKey=(n=l.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=l.global.headers)!==null&&s!==void 0?s:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(d,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=QE(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(En({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new x3(new URL("rest/v1",a).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new pj(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new h3(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,r;if(t.accessToken)return await t.accessToken();const{data:n}=await t.auth.getSession();return(e=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:a,flowType:A,lock:o,debug:l,throwOnError:c},d,p){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new OE({url:this.authUrl.href,headers:En(En({},g),d),storageKey:a,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:s,flowType:A,lock:o,debug:l,throwOnError:c,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(h=>h.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new T3(this.realtimeUrl.href,En(En({},t),{},{params:En(En({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const RE=(t,e,r)=>new DE(t,e,r);function HE(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}HE()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ME="https://gwgldtaezvzjiwwwsyoi.supabase.co",$E="sb_publishable_r1PELSYxd1MzpMK6uOvwUg_wnLzHtTT",fs=!0,rr=RE(ME,$E,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),Mu={signUp:async(t,e)=>{if(!rr)throw new Error("Supabase is not configured");const{data:r,error:n}=await rr.auth.signUp({email:t,password:e});if(n)throw n;return r},signIn:async(t,e)=>{if(!rr)throw new Error("Supabase is not configured");const{data:r,error:n}=await rr.auth.signInWithPassword({email:t,password:e});if(n)throw n;return r},signOut:async()=>{if(!rr)throw new Error("Supabase is not configured");const{error:t}=await rr.auth.signOut();if(t)throw t},getUser:async()=>{if(!rr)return null;const{data:{user:t}}=await rr.auth.getUser();return t},getSession:async()=>{if(!rr)return null;const{data:{session:t}}=await rr.auth.getSession();return t},onAuthStateChange:t=>rr?rr.auth.onAuthStateChange(t):{data:{subscription:{unsubscribe:()=>{}}}}},yB=V.createContext(null);function KE({children:t}){const[e,r]=V.useState(null),[n,s]=V.useState(!0);V.useEffect(()=>{(async()=>{try{const p=await Mu.getSession();r((p==null?void 0:p.user)??null)}catch(p){console.error("Auth init error:",p)}finally{s(!1)}})();const{data:{subscription:d}}=Mu.onAuthStateChange((p,g)=>{r((g==null?void 0:g.user)??null)});return()=>d.unsubscribe()},[]);const l={user:e,loading:n,signIn:async(c,d)=>{try{return{data:await Mu.signIn(c,d),error:null}}catch(p){return{data:null,error:p}}},signUp:async(c,d)=>{try{return{data:await Mu.signUp(c,d),error:null}}catch(p){return{data:null,error:p}}},signOut:async()=>{try{return await Mu.signOut(),{error:null}}catch(c){return{error:c}}},isSupabaseConfigured:fs};return i.jsx(yB.Provider,{value:l,children:t})}function ah(){const t=V.useContext(yB);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}const ht={get:(t,e)=>{try{const r=window.localStorage.getItem(`lifedash_${t}`);return r?JSON.parse(r):e}catch{return e}},set:(t,e)=>{try{window.localStorage.setItem(`lifedash_${t}`,JSON.stringify(e))}catch(r){console.error("Storage error:",r)}},remove:t=>{window.localStorage.removeItem(`lifedash_${t}`)}},zi={getAll:async t=>{if(!t)return ht.get("tasks",[]);const{data:e,error:r}=await rr.from("tasks").select("*").eq("user_id",t).order("date",{ascending:!0});return r?(console.error("Error fetching tasks:",r),ht.get("tasks",[])):e.map(n=>({id:n.id,title:n.title,date:n.date,time:n.time,endTime:n.end_time,allDay:n.all_day||!1,tag:n.tag,progress:n.progress,color:n.color,colorId:n.color_id||"blue",linkedType:n.linked_type||"",linkedId:n.linked_id||""}))},create:async(t,e)=>{if(!t){const s=ht.get("tasks",[]),a={...e,id:Date.now()};return ht.set("tasks",[...s,a]),a}const{data:r,error:n}=await rr.from("tasks").insert({user_id:t,title:e.title,date:e.date,time:e.time||null,end_time:e.endTime||null,all_day:e.allDay||!1,tag:e.tag,progress:e.progress||0,color:e.color,color_id:e.colorId||"blue",linked_type:e.linkedType||null,linked_id:e.linkedId||null}).select().single();if(n)throw console.error("Error creating task:",n),n;return{id:r.id,title:r.title,date:r.date,time:r.time,endTime:r.end_time,allDay:r.all_day||!1,tag:r.tag,progress:r.progress,color:r.color,colorId:r.color_id||"blue",linkedType:r.linked_type||"",linkedId:r.linked_id||""}},update:async(t,e,r)=>{if(!t){const A=ht.get("tasks",[]).map(o=>o.id===e?{...o,...r}:o);return ht.set("tasks",A),r}const{data:n,error:s}=await rr.from("tasks").update({title:r.title,date:r.date,time:r.time,end_time:r.endTime,all_day:r.allDay||!1,tag:r.tag,progress:r.progress,color:r.color,color_id:r.colorId,linked_type:r.linkedType||null,linked_id:r.linkedId||null}).eq("id",e).eq("user_id",t).select().single();if(s)throw console.error("Error updating task:",s),s;return n},delete:async(t,e)=>{if(!t){const n=ht.get("tasks",[]);ht.set("tasks",n.filter(s=>s.id!==e));return}const{error:r}=await rr.from("tasks").delete().eq("id",e).eq("user_id",t);if(r)throw console.error("Error deleting task:",r),r},deleteAll:async t=>{if(!t){ht.set("tasks",[]);return}const{error:e}=await rr.from("tasks").delete().eq("user_id",t);if(e)throw console.error("Error deleting all tasks:",e),e},bulkCreate:async(t,e)=>{if(!t||!e.length)return[];const r=e.map(a=>({user_id:t,title:a.title,date:a.date,time:a.time||null,end_time:a.endTime||a.end_time||null,all_day:a.allDay||a.all_day||!1,tag:a.tag,progress:a.progress||0,color:a.color,color_id:a.colorId||a.color_id||"blue",linked_type:a.linkedType||a.linked_type||null,linked_id:a.linkedId||a.linked_id||null})),{data:n,error:s}=await rr.from("tasks").insert(r).select();if(s)throw console.error("Error bulk creating tasks:",s),s;return n.map(a=>({id:a.id,title:a.title,date:a.date,time:a.time,endTime:a.end_time,allDay:a.all_day||!1,tag:a.tag,progress:a.progress,color:a.color,colorId:a.color_id||"blue",linkedType:a.linked_type||"",linkedId:a.linked_id||""}))}},tA={getAll:async t=>{if(!t)return ht.get("events",[]);const{data:e,error:r}=await rr.from("events").select("*").eq("user_id",t).order("date",{ascending:!0});return r?(console.error("Error fetching events:",r),ht.get("events",[])):e.map(n=>({id:n.id,title:n.title,date:n.date,time:n.time,endTime:n.end_time,allDay:n.all_day||!1,type:n.type,color:n.color,colorId:n.color_id||"emerald"}))},create:async(t,e)=>{if(!t){const s=ht.get("events",[]),a={...e,id:Date.now()};return ht.set("events",[...s,a]),a}const{data:r,error:n}=await rr.from("events").insert({user_id:t,title:e.title,date:e.date,time:e.time||null,end_time:e.endTime||null,all_day:e.allDay||!1,type:e.type,color:e.color,color_id:e.colorId||"emerald"}).select().single();if(n)throw console.error("Error creating event:",n),n;return{id:r.id,title:r.title,date:r.date,time:r.time,endTime:r.end_time,allDay:r.all_day||!1,type:r.type,color:r.color,colorId:r.color_id||"emerald"}},update:async(t,e,r)=>{if(!t){const A=ht.get("events",[]).map(o=>o.id===e?{...o,...r}:o);return ht.set("events",A),r}const{data:n,error:s}=await rr.from("events").update({title:r.title,date:r.date,time:r.time,end_time:r.endTime,all_day:r.allDay||!1,type:r.type,color:r.color,color_id:r.colorId}).eq("id",e).eq("user_id",t).select().single();if(s)throw console.error("Error updating event:",s),s;return n},delete:async(t,e)=>{if(!t){const n=ht.get("events",[]);ht.set("events",n.filter(s=>s.id!==e));return}const{error:r}=await rr.from("events").delete().eq("id",e).eq("user_id",t);if(r)throw console.error("Error deleting event:",r),r},deleteAll:async t=>{if(!t){ht.set("events",[]);return}const{error:e}=await rr.from("events").delete().eq("user_id",t);if(e)throw console.error("Error deleting all events:",e),e},bulkCreate:async(t,e)=>{if(!t||!e.length)return[];const r=e.map(a=>({user_id:t,title:a.title,date:a.date,time:a.time||null,end_time:a.endTime||a.end_time||null,all_day:a.allDay||a.all_day||!1,type:a.type,color:a.color,color_id:a.colorId||a.color_id||"emerald"})),{data:n,error:s}=await rr.from("events").insert(r).select();if(s)throw console.error("Error bulk creating events:",s),s;return n.map(a=>({id:a.id,title:a.title,date:a.date,time:a.time,endTime:a.end_time,allDay:a.all_day||!1,type:a.type,color:a.color,colorId:a.color_id||"emerald"}))}},rA={getAll:async t=>{if(!t)return ht.get("goals",[]);const{data:e,error:r}=await rr.from("goals").select("*").eq("user_id",t).order("date",{ascending:!0});return r?(console.error("Error fetching goals:",r),ht.get("goals",[])):e.map(n=>({id:n.id,title:n.title,date:n.date,time:n.time,endTime:n.end_time,allDay:n.all_day||!1,progress:n.progress,color:n.color,colorId:n.color_id||"purple"}))},create:async(t,e)=>{if(!t){const s=ht.get("goals",[]),a={...e,id:Date.now()};return ht.set("goals",[...s,a]),a}const{data:r,error:n}=await rr.from("goals").insert({user_id:t,title:e.title,date:e.date,time:e.time||null,end_time:e.endTime||null,all_day:e.allDay||!1,progress:e.progress||0,color:e.color,color_id:e.colorId||"purple"}).select().single();if(n)throw console.error("Error creating goal:",n),n;return{id:r.id,title:r.title,date:r.date,time:r.time,endTime:r.end_time,allDay:r.all_day||!1,progress:r.progress,color:r.color,colorId:r.color_id||"purple"}},update:async(t,e,r)=>{if(!t){const A=ht.get("goals",[]).map(o=>o.id===e?{...o,...r}:o);return ht.set("goals",A),r}const{data:n,error:s}=await rr.from("goals").update({title:r.title,date:r.date,time:r.time,end_time:r.endTime,all_day:r.allDay||!1,progress:r.progress,color:r.color,color_id:r.colorId}).eq("id",e).eq("user_id",t).select().single();if(s)throw console.error("Error updating goal:",s),s;return n},delete:async(t,e)=>{if(!t){const n=ht.get("goals",[]);ht.set("goals",n.filter(s=>s.id!==e));return}const{error:r}=await rr.from("goals").delete().eq("id",e).eq("user_id",t);if(r)throw console.error("Error deleting goal:",r),r},deleteAll:async t=>{if(!t){ht.set("goals",[]);return}const{error:e}=await rr.from("goals").delete().eq("user_id",t);if(e)throw console.error("Error deleting all goals:",e),e},bulkCreate:async(t,e)=>{if(!t||!e.length)return[];const r=e.map(a=>({user_id:t,title:a.title,date:a.date,time:a.time||null,end_time:a.endTime||a.end_time||null,all_day:a.allDay||a.all_day||!1,progress:a.progress||0,color:a.color,color_id:a.colorId||a.color_id||"purple"})),{data:n,error:s}=await rr.from("goals").insert(r).select();if(s)throw console.error("Error bulk creating goals:",s),s;return n.map(a=>({id:a.id,title:a.title,date:a.date,time:a.time,endTime:a.end_time,allDay:a.all_day||!1,progress:a.progress,color:a.color,colorId:a.color_id||"purple"}))}},nA={getAll:async t=>{if(!t)return ht.get("transactions",[]);const{data:e,error:r}=await rr.from("transactions").select("*").eq("user_id",t).order("date",{ascending:!1});return r?(console.error("Error fetching transactions:",r),ht.get("transactions",[])):e.map(n=>({id:n.id,title:n.title,amount:parseFloat(n.amount),type:n.type,category:n.category,date:n.date,originalDate:n.original_date||n.date,paymentTiming:n.payment_timing||"immediate",linkedType:n.linked_type||"",linkedId:n.linked_id||""}))},create:async(t,e)=>{if(!t){const s=ht.get("transactions",[]),a={...e,id:Date.now()};return ht.set("transactions",[...s,a]),a}const{data:r,error:n}=await rr.from("transactions").insert({user_id:t,title:e.title,amount:e.amount,type:e.type,category:e.category,date:e.date,original_date:e.originalDate||e.date,payment_timing:e.paymentTiming||"immediate",linked_type:e.linkedType||null,linked_id:e.linkedId||null}).select().single();if(n)throw console.error("Error creating transaction:",n),n;return{id:r.id,title:r.title,amount:parseFloat(r.amount),type:r.type,category:r.category,date:r.date,originalDate:r.original_date||r.date,paymentTiming:r.payment_timing||"immediate",linkedType:r.linked_type||"",linkedId:r.linked_id||""}},update:async(t,e,r)=>{if(!t){const A=ht.get("transactions",[]).map(o=>o.id===e?{...o,...r}:o);return ht.set("transactions",A),r}const{data:n,error:s}=await rr.from("transactions").update({title:r.title,amount:r.amount,type:r.type,category:r.category,date:r.date,original_date:r.originalDate,payment_timing:r.paymentTiming,linked_type:r.linkedType||null,linked_id:r.linkedId||null}).eq("id",e).eq("user_id",t).select().single();if(s)throw console.error("Error updating transaction:",s),s;return n},delete:async(t,e)=>{if(!t){const n=ht.get("transactions",[]);ht.set("transactions",n.filter(s=>s.id!==e));return}const{error:r}=await rr.from("transactions").delete().eq("id",e).eq("user_id",t);if(r)throw console.error("Error deleting transaction:",r),r},deleteAll:async t=>{if(!t){ht.set("transactions",[]);return}const{error:e}=await rr.from("transactions").delete().eq("user_id",t);if(e)throw console.error("Error deleting all transactions:",e),e},bulkCreate:async(t,e)=>{if(!t||!e.length)return[];const r=e.map(a=>({user_id:t,title:a.title,amount:a.amount,type:a.type,category:a.category,date:a.date,original_date:a.originalDate||a.date,payment_timing:a.paymentTiming||"immediate",linked_type:a.linkedType||a.linked_type||null,linked_id:a.linkedId||a.linked_id||null})),{data:n,error:s}=await rr.from("transactions").insert(r).select();if(s)throw console.error("Error bulk creating transactions:",s),s;return n.map(a=>({id:a.id,title:a.title,amount:parseFloat(a.amount),type:a.type,category:a.category,date:a.date,originalDate:a.original_date||a.date,paymentTiming:a.payment_timing||"immediate",linkedType:a.linked_type||"",linkedId:a.linked_id||""}))}},sA={getAll:async t=>{if(!t)return ht.get("scripts",[]);try{const{data:e,error:r}=await rr.from("scripts").select("*").eq("user_id",t).order("created_at",{ascending:!1});return r?(console.error("Error fetching scripts:",r),ht.get("scripts",[])):e.map(n=>({id:n.id,title:n.title,content:n.content,category:n.category,variables:n.variables||[],isFavorite:n.is_favorite||!1,useCount:n.use_count||0,createdAt:n.created_at,updatedAt:n.updated_at}))}catch{return ht.get("scripts",[])}},create:async(t,e)=>{const r=new Date().toISOString();if(!t){const n=ht.get("scripts",[]),s={...e,id:Date.now(),createdAt:r,updatedAt:r,useCount:0};return ht.set("scripts",[...n,s]),s}try{const{data:n,error:s}=await rr.from("scripts").insert({user_id:t,title:e.title,content:e.content,category:e.category,variables:e.variables||[],is_favorite:e.isFavorite||!1,use_count:0}).select().single();if(s){const a=ht.get("scripts",[]),A={...e,id:Date.now(),createdAt:r,updatedAt:r,useCount:0};return ht.set("scripts",[...a,A]),A}return{id:n.id,title:n.title,content:n.content,category:n.category,variables:n.variables||[],isFavorite:n.is_favorite||!1,useCount:n.use_count||0,createdAt:n.created_at,updatedAt:n.updated_at}}catch{const n=ht.get("scripts",[]),s={...e,id:Date.now(),createdAt:r,updatedAt:r,useCount:0};return ht.set("scripts",[...n,s]),s}},update:async(t,e,r)=>{const n=new Date().toISOString();if(!t){const a=ht.get("scripts",[]).map(A=>A.id===e?{...A,...r,updatedAt:n}:A);return ht.set("scripts",a),r}try{const{data:s,error:a}=await rr.from("scripts").update({title:r.title,content:r.content,category:r.category,variables:r.variables,is_favorite:r.isFavorite,use_count:r.useCount,updated_at:n}).eq("id",e).eq("user_id",t).select().single();if(a){const o=ht.get("scripts",[]).map(l=>l.id===e?{...l,...r,updatedAt:n}:l);return ht.set("scripts",o),r}return s}catch{const a=ht.get("scripts",[]).map(A=>A.id===e?{...A,...r,updatedAt:n}:A);return ht.set("scripts",a),r}},delete:async(t,e)=>{if(!t){const r=ht.get("scripts",[]);ht.set("scripts",r.filter(n=>n.id!==e));return}try{const{error:r}=await rr.from("scripts").delete().eq("id",e).eq("user_id",t);if(r){const n=ht.get("scripts",[]);ht.set("scripts",n.filter(s=>s.id!==e))}}catch{const r=ht.get("scripts",[]);ht.set("scripts",r.filter(n=>n.id!==e))}},deleteAll:async t=>{if(!t){ht.set("scripts",[]);return}try{const{error:e}=await rr.from("scripts").delete().eq("user_id",t);e&&console.error("Error deleting all scripts:",e)}catch(e){console.error("Error deleting all scripts:",e)}},bulkCreate:async(t,e)=>{if(!t||!e.length)return[];try{const r=e.map(a=>({user_id:t,title:a.title,content:a.content,category:a.category,variables:a.variables||[],is_favorite:a.isFavorite||a.is_favorite||!1,use_count:a.useCount||a.use_count||0})),{data:n,error:s}=await rr.from("scripts").insert(r).select();return s?(console.error("Error bulk creating scripts:",s),[]):n.map(a=>({id:a.id,title:a.title,content:a.content,category:a.category,variables:a.variables||[],isFavorite:a.is_favorite||!1,useCount:a.use_count||0,createdAt:a.created_at,updatedAt:a.updated_at}))}catch(r){return console.error("Error bulk creating scripts:",r),[]}}},iA={getAll:async t=>{if(!t)return ht.get("shoppingItems",[]);try{const{data:e,error:r}=await rr.from("shopping_items").select("*").eq("user_id",t).order("created_at",{ascending:!1});return r?(console.error("Error fetching shopping items:",r),ht.get("shoppingItems",[])):e.map(n=>({id:n.id,title:n.title,store:n.store,estimatedPrice:parseFloat(n.estimated_price)||0,timing:n.timing,purchased:n.purchased||!1,linkedType:n.linked_type||"",linkedId:n.linked_id||"",createdAt:n.created_at}))}catch{return ht.get("shoppingItems",[])}},create:async(t,e)=>{if(!t){const r=ht.get("shoppingItems",[]),n={...e,id:Date.now(),createdAt:new Date().toISOString()};return ht.set("shoppingItems",[...r,n]),n}try{const{data:r,error:n}=await rr.from("shopping_items").insert({user_id:t,title:e.title,store:e.store,estimated_price:e.estimatedPrice||0,timing:e.timing,purchased:e.purchased||!1,linked_type:e.linkedType||null,linked_id:e.linkedId||null}).select().single();if(n){console.error("Error creating shopping item:",n);const s=ht.get("shoppingItems",[]),a={...e,id:Date.now(),createdAt:new Date().toISOString()};return ht.set("shoppingItems",[...s,a]),a}return{id:r.id,title:r.title,store:r.store,estimatedPrice:parseFloat(r.estimated_price)||0,timing:r.timing,purchased:r.purchased||!1,linkedType:r.linked_type||"",linkedId:r.linked_id||"",createdAt:r.created_at}}catch{const r=ht.get("shoppingItems",[]),n={...e,id:Date.now(),createdAt:new Date().toISOString()};return ht.set("shoppingItems",[...r,n]),n}},update:async(t,e,r)=>{if(!t){const s=ht.get("shoppingItems",[]).map(a=>a.id===e?{...a,...r}:a);return ht.set("shoppingItems",s),r}try{const{data:n,error:s}=await rr.from("shopping_items").update({title:r.title,store:r.store,estimated_price:r.estimatedPrice,timing:r.timing,purchased:r.purchased,linked_type:r.linkedType||null,linked_id:r.linkedId||null}).eq("id",e).eq("user_id",t).select().single();if(s){const A=ht.get("shoppingItems",[]).map(o=>o.id===e?{...o,...r}:o);return ht.set("shoppingItems",A),r}return n}catch{const s=ht.get("shoppingItems",[]).map(a=>a.id===e?{...a,...r}:a);return ht.set("shoppingItems",s),r}},delete:async(t,e)=>{if(!t){const r=ht.get("shoppingItems",[]);ht.set("shoppingItems",r.filter(n=>n.id!==e));return}try{const{error:r}=await rr.from("shopping_items").delete().eq("id",e).eq("user_id",t);if(r){const n=ht.get("shoppingItems",[]);ht.set("shoppingItems",n.filter(s=>s.id!==e))}}catch{const r=ht.get("shoppingItems",[]);ht.set("shoppingItems",r.filter(n=>n.id!==e))}},deleteAll:async t=>{if(!t){ht.set("shoppingItems",[]);return}try{const{error:e}=await rr.from("shopping_items").delete().eq("user_id",t);e&&console.error("Error deleting all shopping items:",e)}catch(e){console.error("Error deleting all shopping items:",e)}},bulkCreate:async(t,e)=>{if(!t||!e.length)return[];try{const r=e.map(a=>({user_id:t,title:a.title,store:a.store,estimated_price:a.estimatedPrice||a.estimated_price||0,timing:a.timing,purchased:a.purchased||!1,linked_type:a.linkedType||a.linked_type||null,linked_id:a.linkedId||a.linked_id||null})),{data:n,error:s}=await rr.from("shopping_items").insert(r).select();return s?(console.error("Error bulk creating shopping items:",s),[]):n.map(a=>({id:a.id,title:a.title,store:a.store,estimatedPrice:parseFloat(a.estimated_price)||0,timing:a.timing,purchased:a.purchased||!1,linkedType:a.linked_type||"",linkedId:a.linked_id||"",createdAt:a.created_at}))}catch(r){return console.error("Error bulk creating shopping items:",r),[]}}},aA={getAll:async t=>{if(!t)return ht.get("diary",[]);try{const{data:e,error:r}=await rr.from("diary").select("*").eq("user_id",t).order("date",{ascending:!1});return r?(console.error("Error fetching diary:",r),ht.get("diary",[])):e.map(n=>({id:n.id,date:n.date,content:n.content,isFavorite:n.is_favorite||!1,createdAt:n.created_at,updatedAt:n.updated_at}))}catch{return ht.get("diary",[])}},create:async(t,e)=>{const r=new Date().toISOString();if(!t){const n=ht.get("diary",[]),s={...e,id:Date.now(),createdAt:r,updatedAt:r};return ht.set("diary",[...n,s]),s}try{const{data:n,error:s}=await rr.from("diary").insert({user_id:t,date:e.date,content:e.content,is_favorite:e.isFavorite||!1}).select().single();if(s){console.error("Error creating diary entry:",s);const a=ht.get("diary",[]),A={...e,id:Date.now(),createdAt:r,updatedAt:r};return ht.set("diary",[...a,A]),A}return{id:n.id,date:n.date,content:n.content,isFavorite:n.is_favorite||!1,createdAt:n.created_at,updatedAt:n.updated_at}}catch{const n=ht.get("diary",[]),s={...e,id:Date.now(),createdAt:r,updatedAt:r};return ht.set("diary",[...n,s]),s}},update:async(t,e,r)=>{const n=new Date().toISOString();if(!t){const a=ht.get("diary",[]).map(A=>A.id===e?{...A,...r,updatedAt:n}:A);return ht.set("diary",a),r}try{const{data:s,error:a}=await rr.from("diary").update({content:r.content,is_favorite:r.isFavorite,updated_at:n}).eq("id",e).eq("user_id",t).select().single();if(a){console.error("Error updating diary entry:",a);const o=ht.get("diary",[]).map(l=>l.id===e?{...l,...r,updatedAt:n}:l);return ht.set("diary",o),r}return s}catch{const a=ht.get("diary",[]).map(A=>A.id===e?{...A,...r,updatedAt:n}:A);return ht.set("diary",a),r}},delete:async(t,e)=>{if(!t){const r=ht.get("diary",[]);ht.set("diary",r.filter(n=>n.id!==e));return}try{const{error:r}=await rr.from("diary").delete().eq("id",e).eq("user_id",t);if(r){const n=ht.get("diary",[]);ht.set("diary",n.filter(s=>s.id!==e))}}catch{const r=ht.get("diary",[]);ht.set("diary",r.filter(n=>n.id!==e))}},deleteAll:async t=>{if(!t){ht.set("diary",[]);return}try{const{error:e}=await rr.from("diary").delete().eq("user_id",t);e&&console.error("Error deleting all diary entries:",e)}catch(e){console.error("Error deleting all diary entries:",e)}},bulkCreate:async(t,e)=>{if(!t||!e.length)return[];try{const r=e.map(a=>({user_id:t,date:a.date,content:a.content,is_favorite:a.isFavorite||a.is_favorite||!1})),{data:n,error:s}=await rr.from("diary").insert(r).select();return s?(console.error("Error bulk creating diary entries:",s),[]):n.map(a=>({id:a.id,date:a.date,content:a.content,isFavorite:a.is_favorite||!1,createdAt:a.created_at,updatedAt:a.updated_at}))}catch(r){return console.error("Error bulk creating diary entries:",r),[]}}},$u={get:async t=>{const e={username:"User",theme:"dark",notifications:{tasks:!0,goals:!0,finance:!0}};if(!t)return ht.get("settings",e);const{data:r,error:n}=await rr.from("user_settings").select("*").eq("user_id",t).single();return n?n.code==="PGRST116"?e:(console.error("Error fetching settings:",n),ht.get("settings",e)):{username:r.username,theme:r.theme,notifications:r.notifications}},update:async(t,e)=>{if(!t)return ht.set("settings",e),e;const{data:r,error:n}=await rr.from("user_settings").upsert({user_id:t,username:e.username,theme:e.theme,notifications:e.notifications},{onConflict:"user_id"}).select().single();if(n)throw console.error("Error updating settings:",n),n;return e}},Ca={tasks:[{id:1,title:"",date:"2026-01-10",tag:"",progress:0,color:"bg-cyan-900/50 text-cyan-400"},{id:2,title:"KBT",date:"2026-01-09",tag:"",progress:0,color:"bg-blue-900/50 text-blue-400"},{id:3,title:"KBT",date:"2026-01-08",tag:"",progress:0,color:"bg-blue-900/50 text-blue-400"},{id:4,title:"KBT",date:"2026-01-07",tag:"",progress:0,color:"bg-blue-900/50 text-blue-400"},{id:5,title:"Stripchat",date:"2026-01-06",tag:"",progress:100,color:"bg-cyan-900/50 text-cyan-400"},{id:6,title:"KBT",date:"2026-01-06",tag:"",progress:0,color:"bg-blue-900/50 text-blue-400"}],goals:[{id:1,title:"",date:"2026-01-31",progress:30},{id:2,title:"",date:"2026-02-28",progress:10}],events:[],transactions:[{id:1,title:"",amount:25e4,type:"income",category:"",date:"2026-01-05"},{id:2,title:"",amount:8e4,type:"expense",category:"",date:"2026-01-05"},{id:3,title:"",amount:5e3,type:"expense",category:"",date:"2026-01-06"},{id:4,title:"",amount:3e4,type:"income",category:"",date:"2026-01-04"}],settings:{username:"User",theme:"dark",notifications:{tasks:!0,goals:!0,finance:!0}}},Tt=ht;function GE(){const{user:t,loading:e}=ah(),r=t==null?void 0:t.id,[n,s]=V.useState([]),[a,A]=V.useState([]),[o,l]=V.useState([]),[c,d]=V.useState([]),[p,g]=V.useState([]),[h,b]=V.useState([]),[w,j]=V.useState([]),[x,y]=V.useState(Ca.settings),[B,E]=V.useState(!0),[L,U]=V.useState(null);V.useEffect(()=>{if(e)return;(async()=>{E(!0),U(null);try{if(!fs||!r||r==="local-user")s(Tt.get("tasks",Ca.tasks)),A(Tt.get("events",Ca.events)),l(Tt.get("goals",Ca.goals)),d(Tt.get("transactions",Ca.transactions)),g(Tt.get("shoppingItems",[])),b(Tt.get("scripts",[])),j(Tt.get("diary",[])),y(Tt.get("settings",Ca.settings));else{console.log("Loading data from Supabase for user:",r);const[ne,je,J,$e,Ve,ze,We,lt]=await Promise.all([zi.getAll(r),tA.getAll(r),rA.getAll(r),nA.getAll(r),iA.getAll(r),sA.getAll(r),aA.getAll(r),$u.get(r)]);console.log("Supabase data loaded:",{tasks:ne.length,events:je.length,goals:J.length,transactions:$e.length}),s(ne),A(je),l(J),d($e),g(Ve),b(ze),j(We),y(lt)}}catch(ne){console.error("Error loading data:",ne),U(ne.message),s(Tt.get("tasks",Ca.tasks)),A(Tt.get("events",Ca.events)),l(Tt.get("goals",Ca.goals)),d(Tt.get("transactions",Ca.transactions)),g(Tt.get("shoppingItems",[])),b(Tt.get("scripts",[])),j(Tt.get("diary",[])),y(Tt.get("settings",Ca.settings))}finally{E(!1)}})()},[r,e]);const M=V.useCallback(async X=>{try{const ne=await zi.create(r,X);return s(je=>[...je,ne]),ne}catch(ne){throw U(ne.message),ne}},[r]),G=V.useCallback(async(X,ne)=>{try{if(await zi.update(r,X,ne),s(je=>je.map(J=>J.id===X?{...J,...ne}:J)),!fs||r==="local-user"){const je=n.map(J=>J.id===X?{...J,...ne}:J);Tt.set("tasks",je)}}catch(je){throw U(je.message),je}},[r,n]),N=V.useCallback(async X=>{try{await zi.delete(r,X),s(ne=>ne.filter(je=>je.id!==X)),(!fs||r==="local-user")&&Tt.set("tasks",n.filter(ne=>ne.id!==X))}catch(ne){throw U(ne.message),ne}},[r,n]),$=V.useCallback(async X=>{try{const ne=await tA.create(r,X);return A(je=>[...je,ne]),ne}catch(ne){throw U(ne.message),ne}},[r]),k=V.useCallback(async(X,ne)=>{try{if(await tA.update(r,X,ne),A(je=>je.map(J=>J.id===X?{...J,...ne}:J)),!fs||r==="local-user"){const je=a.map(J=>J.id===X?{...J,...ne}:J);Tt.set("events",je)}}catch(je){throw U(je.message),je}},[r,a]),_=V.useCallback(async X=>{try{await tA.delete(r,X),A(ne=>ne.filter(je=>je.id!==X)),(!fs||r==="local-user")&&Tt.set("events",a.filter(ne=>ne.id!==X))}catch(ne){throw U(ne.message),ne}},[r,a]),z=V.useCallback(async X=>{try{const ne=await rA.create(r,X);return l(je=>[...je,ne]),ne}catch(ne){throw U(ne.message),ne}},[r]),O=V.useCallback(async(X,ne)=>{try{if(await rA.update(r,X,ne),l(je=>je.map(J=>J.id===X?{...J,...ne}:J)),!fs||r==="local-user"){const je=o.map(J=>J.id===X?{...J,...ne}:J);Tt.set("goals",je)}}catch(je){throw U(je.message),je}},[r,o]),te=V.useCallback(async X=>{try{await rA.delete(r,X),l(ne=>ne.filter(je=>je.id!==X)),(!fs||r==="local-user")&&Tt.set("goals",o.filter(ne=>ne.id!==X))}catch(ne){throw U(ne.message),ne}},[r,o]),ue=V.useCallback(async X=>{try{const ne=await nA.create(r,X);return d(je=>[...je,ne]),ne}catch(ne){throw U(ne.message),ne}},[r]),fe=V.useCallback(async(X,ne)=>{try{if(await nA.update(r,X,ne),d(je=>je.map(J=>J.id===X?{...J,...ne}:J)),!fs||r==="local-user"){const je=c.map(J=>J.id===X?{...J,...ne}:J);Tt.set("transactions",je)}}catch(je){throw U(je.message),je}},[r,c]),ie=V.useCallback(async X=>{try{await nA.delete(r,X),d(ne=>ne.filter(je=>je.id!==X)),(!fs||r==="local-user")&&Tt.set("transactions",c.filter(ne=>ne.id!==X))}catch(ne){throw U(ne.message),ne}},[r,c]),de=V.useCallback(async X=>{try{const ne=await iA.create(r,X);return g(je=>[...je,ne]),ne}catch(ne){throw U(ne.message),ne}},[r]),ge=V.useCallback(async(X,ne)=>{try{if(await iA.update(r,X,ne),g(je=>je.map(J=>J.id===X?{...J,...ne}:J)),!fs||r==="local-user"){const je=p.map(J=>J.id===X?{...J,...ne}:J);Tt.set("shoppingItems",je)}}catch(je){throw U(je.message),je}},[r,p]),ve=V.useCallback(async X=>{try{await iA.delete(r,X),g(ne=>ne.filter(je=>je.id!==X)),(!fs||r==="local-user")&&Tt.set("shoppingItems",p.filter(ne=>ne.id!==X))}catch(ne){throw U(ne.message),ne}},[r,p]),I=V.useCallback(async X=>{try{const ne=await sA.create(r,X);return b(je=>[...je,ne]),ne}catch(ne){throw U(ne.message),ne}},[r]),H=V.useCallback(async(X,ne)=>{try{if(await sA.update(r,X,ne),b(je=>je.map(J=>J.id===X?{...J,...ne}:J)),!fs||r==="local-user"){const je=h.map(J=>J.id===X?{...J,...ne}:J);Tt.set("scripts",je)}}catch(je){throw U(je.message),je}},[r,h]),re=V.useCallback(async X=>{try{await sA.delete(r,X),b(ne=>ne.filter(je=>je.id!==X)),(!fs||r==="local-user")&&Tt.set("scripts",h.filter(ne=>ne.id!==X))}catch(ne){throw U(ne.message),ne}},[r,h]),Y=V.useCallback(async X=>{try{const ne=await aA.create(r,X);return j(je=>[...je,ne]),ne}catch(ne){throw U(ne.message),ne}},[r]),le=V.useCallback(async(X,ne)=>{try{if(await aA.update(r,X,ne),j(je=>je.map(J=>J.id===X?{...J,...ne}:J)),!fs||r==="local-user"){const je=w.map(J=>J.id===X?{...J,...ne}:J);Tt.set("diary",je)}}catch(je){throw U(je.message),je}},[r,w]),me=V.useCallback(async X=>{try{await aA.delete(r,X),j(ne=>ne.filter(je=>je.id!==X)),(!fs||r==="local-user")&&Tt.set("diary",w.filter(ne=>ne.id!==X))}catch(ne){throw U(ne.message),ne}},[r,w]),ke=V.useCallback(async X=>{try{await $u.update(r,X),y(X),(!fs||r==="local-user")&&Tt.set("settings",X)}catch(ne){throw U(ne.message),ne}},[r]),Ee=V.useCallback(()=>({tasks:n,goals:o,events:a,transactions:c,shoppingItems:p,scripts:h,diaryEntries:w,settings:x,exportDate:new Date().toISOString()}),[n,o,a,c,p,h,w,x]),Pe=V.useCallback(()=>{const X=Ee();Tt.set("auto_backup",X);const ne=Tt.get("backup_history",[]),J=[{timestamp:new Date().toISOString(),data:X},...ne].slice(0,5);return Tt.set("backup_history",J),console.log(`Auto backup completed at ${new Date().toLocaleTimeString()}`),X},[Ee]);V.useEffect(()=>{if(B)return;const X=setTimeout(()=>{Pe()},5e3),ne=setInterval(()=>{Pe()},30*60*1e3);return()=>{clearTimeout(X),clearInterval(ne)}},[B,Pe]);const nt=V.useCallback(()=>Tt.get("auto_backup",null),[]),ut=V.useCallback(()=>Tt.get("backup_history",[]),[]),he=V.useCallback(async X=>{var ne,je,J,$e,Ve;if(!X)return!1;if(r&&r!=="local-user")try{console.log("Restoring backup to Supabase..."),await Promise.all([zi.deleteAll(r),tA.deleteAll(r),rA.deleteAll(r),nA.deleteAll(r),iA.deleteAll(r),sA.deleteAll(r),aA.deleteAll(r)]);const[ze,We,lt]=await Promise.all([(ne=X.tasks)!=null&&ne.length?zi.bulkCreate(r,X.tasks):Promise.resolve([]),(je=X.events)!=null&&je.length?tA.bulkCreate(r,X.events):Promise.resolve([]),(J=X.goals)!=null&&J.length?rA.bulkCreate(r,X.goals):Promise.resolve([])]),be={task:{},event:{},goal:{}};X.tasks&&ze.length===X.tasks.length&&X.tasks.forEach((Le,ft)=>{be.task[Le.id]=ze[ft].id}),X.events&&We.length===X.events.length&&X.events.forEach((Le,ft)=>{be.event[Le.id]=We[ft].id}),X.goals&&lt.length===X.goals.length&&X.goals.forEach((Le,ft)=>{be.goal[Le.id]=lt[ft].id});const Se=[];for(let Le=0;Le<ze.length;Le++){const ft=X.tasks[Le],At=ze[Le],wt=ft.linkedType||ft.linked_type||"",pt=ft.linkedId||ft.linked_id||"";if(wt&&pt){const xt=be[wt];if(xt&&xt[pt]){const yt=xt[pt];Se.push(zi.update(r,At.id,{linkedType:wt,linkedId:yt})),ze[Le]={...At,linkedType:wt,linkedId:yt}}}}Se.length>0&&await Promise.all(Se);const ee=(X.transactions||[]).map(Le=>{var pt;const ft=Le.linkedType||Le.linked_type||"",At=Le.linkedId||Le.linked_id||"";let wt=At;return ft&&At&&((pt=be[ft])!=null&&pt[At])&&(wt=be[ft][At]),{...Le,linkedType:ft,linkedId:wt}}),we=(X.shoppingItems||[]).map(Le=>{var pt;const ft=Le.linkedType||Le.linked_type||"",At=Le.linkedId||Le.linked_id||"";let wt=At;return ft&&At&&((pt=be[ft])!=null&&pt[At])&&(wt=be[ft][At]),{...Le,linkedType:ft,linkedId:wt}}),[_e,Je,Xe,ye]=await Promise.all([ee.length?nA.bulkCreate(r,ee):Promise.resolve([]),we.length?iA.bulkCreate(r,we):Promise.resolve([]),($e=X.scripts)!=null&&$e.length?sA.bulkCreate(r,X.scripts):Promise.resolve([]),(Ve=X.diary||X.diaryEntries)!=null&&Ve.length?aA.bulkCreate(r,X.diary||X.diaryEntries):Promise.resolve([])]);return X.settings&&await $u.update(r,X.settings),s(ze),A(We),l(lt),d(_e),g(Je),b(Xe),j(ye),X.settings&&y(X.settings),Tt.set("tasks",ze),Tt.set("events",We),Tt.set("goals",lt),Tt.set("transactions",_e),Tt.set("shoppingItems",Je),Tt.set("scripts",Xe),Tt.set("diary",ye),X.settings&&Tt.set("settings",X.settings),console.log("Restore from backup completed!"),!0}catch(ze){return console.error("Restore error:",ze),!1}else{if(X.tasks&&(s(X.tasks),Tt.set("tasks",X.tasks)),X.goals&&(l(X.goals),Tt.set("goals",X.goals)),X.events&&(A(X.events),Tt.set("events",X.events)),X.transactions&&(d(X.transactions),Tt.set("transactions",X.transactions)),X.shoppingItems&&(g(X.shoppingItems),Tt.set("shoppingItems",X.shoppingItems)),X.scripts&&(b(X.scripts),Tt.set("scripts",X.scripts)),X.diaryEntries||X.diary){const ze=X.diaryEntries||X.diary;j(ze),Tt.set("diary",ze)}return X.settings&&(y(X.settings),Tt.set("settings",X.settings)),!0}},[r]),Ze=V.useCallback(()=>{const X=Ee(),ne=new Blob([JSON.stringify(X,null,2)],{type:"application/json"}),je=URL.createObjectURL(ne),J=document.createElement("a");J.href=je,J.download=`life-dashboard-backup-${new Date().toISOString().split("T")[0]}.json`,J.click(),URL.revokeObjectURL(je)},[Ee]),F=V.useCallback(async X=>{var ne,je,J,$e,Ve;if(r&&r!=="local-user"){console.log("Importing data to Supabase..."),console.log("Step 1: Deleting existing data from Supabase...");try{await Promise.all([zi.deleteAll(r),tA.deleteAll(r),rA.deleteAll(r),nA.deleteAll(r),iA.deleteAll(r),sA.deleteAll(r),aA.deleteAll(r)]),console.log("Step 2: Inserting tasks, events, goals first...");const[ze,We,lt]=await Promise.all([(ne=X.tasks)!=null&&ne.length?zi.bulkCreate(r,X.tasks):Promise.resolve([]),(je=X.events)!=null&&je.length?tA.bulkCreate(r,X.events):Promise.resolve([]),(J=X.goals)!=null&&J.length?rA.bulkCreate(r,X.goals):Promise.resolve([])]),be={task:{},event:{},goal:{}};X.tasks&&ze.length===X.tasks.length&&X.tasks.forEach((Le,ft)=>{const At=Le.id,wt=ze[ft].id;be.task[At]=wt,console.log(`Task ID mapping: ${At} -> ${wt}`)}),X.events&&We.length===X.events.length&&X.events.forEach((Le,ft)=>{const At=Le.id,wt=We[ft].id;be.event[At]=wt,console.log(`Event ID mapping: ${At} -> ${wt}`)}),X.goals&&lt.length===X.goals.length&&X.goals.forEach((Le,ft)=>{const At=Le.id,wt=lt[ft].id;be.goal[At]=wt,console.log(`Goal ID mapping: ${At} -> ${wt}`)}),console.log("ID Mappings created:",be),console.log("Step 2.5: Updating task linked references...");const Se=[];for(let Le=0;Le<ze.length;Le++){const ft=X.tasks[Le],At=ze[Le],wt=ft.linkedType||ft.linked_type||"",pt=ft.linkedId||ft.linked_id||"";if(wt&&pt){const xt=be[wt];if(xt&&xt[pt]){const yt=xt[pt];console.log(`Task "${At.title}": ${wt} ID ${pt} -> ${yt}`),Se.push(zi.update(r,At.id,{linkedType:wt,linkedId:yt})),ze[Le]={...At,linkedType:wt,linkedId:yt}}}}Se.length>0&&(await Promise.all(Se),console.log(`Updated ${Se.length} task linked references`));const ee=(X.transactions||[]).map(Le=>{const ft=Le.linkedType||Le.linked_type||"",At=Le.linkedId||Le.linked_id||"";let wt=At;if(ft&&At){const pt=be[ft];pt&&pt[At]&&(wt=pt[At],console.log(`Transaction "${Le.title}": ${ft} ID ${At} -> ${wt}`))}return{...Le,linkedType:ft,linkedId:wt}}),we=(X.shoppingItems||[]).map(Le=>{const ft=Le.linkedType||Le.linked_type||"",At=Le.linkedId||Le.linked_id||"";let wt=At;if(ft&&At){const pt=be[ft];pt&&pt[At]&&(wt=pt[At])}return{...Le,linkedType:ft,linkedId:wt}});console.log("Step 3: Inserting transactions, shopping items, scripts, diary...");const[_e,Je,Xe,ye]=await Promise.all([ee.length?nA.bulkCreate(r,ee):Promise.resolve([]),we.length?iA.bulkCreate(r,we):Promise.resolve([]),($e=X.scripts)!=null&&$e.length?sA.bulkCreate(r,X.scripts):Promise.resolve([]),(Ve=X.diary||X.diaryEntries)!=null&&Ve.length?aA.bulkCreate(r,X.diary||X.diaryEntries):Promise.resolve([])]);X.settings&&await $u.update(r,X.settings),console.log("Step 4: Updating local state with Supabase data..."),console.log("Inserted counts:",{tasks:ze.length,events:We.length,goals:lt.length,transactions:_e.length,shoppingItems:Je.length,scripts:Xe.length,diary:ye.length}),s(ze),A(We),l(lt),d(_e),g(Je),b(Xe),j(ye),X.settings&&y(X.settings),Tt.set("tasks",ze),Tt.set("events",We),Tt.set("goals",lt),Tt.set("transactions",_e),Tt.set("shoppingItems",Je),Tt.set("scripts",Xe),Tt.set("diary",ye),X.settings&&Tt.set("settings",X.settings),console.log("Import to Supabase completed successfully!")}catch(ze){throw console.error("Import error:",ze),ze}}else if(X.tasks&&(s(X.tasks),Tt.set("tasks",X.tasks)),X.goals&&(l(X.goals),Tt.set("goals",X.goals)),X.events&&(A(X.events),Tt.set("events",X.events)),X.transactions&&(d(X.transactions),Tt.set("transactions",X.transactions)),X.shoppingItems&&(g(X.shoppingItems),Tt.set("shoppingItems",X.shoppingItems)),X.scripts&&(b(X.scripts),Tt.set("scripts",X.scripts)),X.settings&&(y(X.settings),Tt.set("settings",X.settings)),X.diary||X.diaryEntries){const ze=X.diary||X.diaryEntries;j(ze),Tt.set("diary",ze)}},[r]),se=V.useCallback(()=>{localStorage.clear(),window.location.reload()},[]),qe=V.useCallback(async()=>{if(!r||r==="local-user")throw new Error("");const X={tasks:{success:0,failed:0},events:{success:0,failed:0},goals:{success:0,failed:0},transactions:{success:0,failed:0},shoppingItems:{success:0,failed:0},scripts:{success:0,failed:0},diary:{success:0,failed:0}};console.log("Deleting existing data from Supabase..."),await Promise.all([zi.deleteAll(r),tA.deleteAll(r),rA.deleteAll(r),nA.deleteAll(r),iA.deleteAll(r),sA.deleteAll(r),aA.deleteAll(r)]),console.log("Existing data deleted. Bulk inserting new data...");try{const[ne,je,J,$e,Ve,ze,We]=await Promise.all([n.length?zi.bulkCreate(r,n):Promise.resolve([]),a.length?tA.bulkCreate(r,a):Promise.resolve([]),o.length?rA.bulkCreate(r,o):Promise.resolve([]),c.length?nA.bulkCreate(r,c):Promise.resolve([]),p.length?iA.bulkCreate(r,p):Promise.resolve([]),h.length?sA.bulkCreate(r,h):Promise.resolve([]),w.length?aA.bulkCreate(r,w):Promise.resolve([])]);X.tasks.success=ne.length,X.events.success=je.length,X.goals.success=J.length,X.transactions.success=$e.length,X.shoppingItems.success=Ve.length,X.scripts.success=ze.length,X.diary.success=We.length,s(ne),A(je),l(J),d($e),g(Ve),b(ze),j(We),Tt.set("tasks",ne),Tt.set("events",je),Tt.set("goals",J),Tt.set("transactions",$e),Tt.set("shoppingItems",Ve),Tt.set("scripts",ze),Tt.set("diary",We),await $u.update(r,x),console.log("Sync completed:",X)}catch(ne){throw console.error("Sync error:",ne),ne}return X},[r,n,a,o,c,p,h,w,x]);return{tasks:n,events:a,goals:o,transactions:c,shoppingItems:p,scripts:h,settings:x,loading:B,error:L,addTask:M,updateTask:G,deleteTask:N,setTasks:s,addEvent:$,updateEvent:k,deleteEvent:_,setEvents:A,addGoal:z,updateGoal:O,deleteGoal:te,setGoals:l,addTransaction:ue,updateTransaction:fe,deleteTransaction:ie,setTransactions:d,addShoppingItem:de,updateShoppingItem:ge,deleteShoppingItem:ve,setShoppingItems:g,addScript:I,updateScript:H,deleteScript:re,setScripts:b,diaryEntries:w,addDiaryEntry:Y,updateDiaryEntry:le,deleteDiaryEntry:me,setDiaryEntries:j,updateSettings:ke,setSettings:y,exportData:Ze,importData:F,clearAllData:se,syncToSupabase:qe,autoBackup:Pe,getLastAutoBackup:nt,getBackupHistory:ut,restoreFromBackup:he}}function bt({name:t,size:e=24,className:r=""}){const n={calendar:i.jsx("path",{d:"M8 2v4M16 2v4M3 10h18M5 4h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Z"}),roadmap:i.jsx("path",{d:"M3 3v18h18 M18 17V9 M13 17V5 M8 17v-3"}),network:i.jsxs(i.Fragment,{children:[i.jsx("rect",{x:"16",y:"16",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"2",y:"16",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"9",y:"2",width:"6",height:"6",rx:"1"}),i.jsx("path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3"}),i.jsx("path",{d:"M12 12V8"})]}),tasks:i.jsxs(i.Fragment,{children:[i.jsx("rect",{x:"3",y:"5",width:"6",height:"6",rx:"1"}),i.jsx("path",{d:"m3 17 2 2 4-4"}),i.jsx("path",{d:"M13 6h8"}),i.jsx("path",{d:"M13 12h8"}),i.jsx("path",{d:"M13 18h8"})]}),analytics:i.jsxs(i.Fragment,{children:[i.jsx("rect",{width:"7",height:"9",x:"3",y:"3",rx:"1"}),i.jsx("rect",{width:"7",height:"5",x:"14",y:"3",rx:"1"}),i.jsx("rect",{width:"7",height:"9",x:"14",y:"12",rx:"1"}),i.jsx("rect",{width:"7",height:"5",x:"3",y:"16",rx:"1"})]}),ai:i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}),i.jsx("line",{x1:"9",y1:"9",x2:"9.01",y2:"9"}),i.jsx("line",{x1:"15",y1:"9",x2:"15.01",y2:"9"})]}),finance:i.jsxs(i.Fragment,{children:[i.jsx("rect",{width:"20",height:"12",x:"2",y:"6",rx:"2"}),i.jsx("circle",{cx:"12",cy:"12",r:"2"}),i.jsx("path",{d:"M6 12h.01M18 12h.01"})]}),system:i.jsxs(i.Fragment,{children:[i.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),i.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),plus:i.jsxs(i.Fragment,{children:[i.jsx("path",{d:"M5 12h14"}),i.jsx("path",{d:"M12 5v14"})]}),cloud:i.jsx("path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"}),search:i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:"11",cy:"11",r:"8"}),i.jsx("path",{d:"m21 21-4.3-4.3"})]}),send:i.jsxs(i.Fragment,{children:[i.jsx("path",{d:"m22 2-7 20-4-9-9-4Z"}),i.jsx("path",{d:"M22 2 11 13"})]}),box:i.jsxs(i.Fragment,{children:[i.jsx("path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}),i.jsx("path",{d:"m3.3 7 8.7 5 8.7-5"}),i.jsx("path",{d:"M12 22v-9"})]}),trash:i.jsxs(i.Fragment,{children:[i.jsx("path",{d:"M3 6h18"}),i.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),i.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),edit:i.jsxs(i.Fragment,{children:[i.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),i.jsx("path",{d:"m15 5 4 4"})]}),check:i.jsx("path",{d:"M20 6 9 17l-5-5"}),x:i.jsxs(i.Fragment,{children:[i.jsx("path",{d:"M18 6 6 18"}),i.jsx("path",{d:"m6 6 12 12"})]}),chevronLeft:i.jsx("path",{d:"m15 18-6-6 6-6"}),chevronRight:i.jsx("path",{d:"m9 18 6-6-6-6"}),trendingUp:i.jsxs(i.Fragment,{children:[i.jsx("polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17"}),i.jsx("polyline",{points:"16 7 22 7 22 13"})]}),trendingDown:i.jsxs(i.Fragment,{children:[i.jsx("polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7"}),i.jsx("polyline",{points:"16 17 22 17 22 11"})]}),wallet:i.jsxs(i.Fragment,{children:[i.jsx("path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4"}),i.jsx("path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5"}),i.jsx("path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z"})]}),piggyBank:i.jsxs(i.Fragment,{children:[i.jsx("path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z"}),i.jsx("path",{d:"M2 9v1c0 1.1.9 2 2 2h1"}),i.jsx("path",{d:"M16 11h0"})]}),creditCard:i.jsxs(i.Fragment,{children:[i.jsx("rect",{width:"20",height:"14",x:"2",y:"5",rx:"2"}),i.jsx("line",{x1:"2",x2:"22",y1:"10",y2:"10"})]}),moon:i.jsx("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"}),sun:i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:"12",cy:"12",r:"4"}),i.jsx("path",{d:"M12 2v2"}),i.jsx("path",{d:"M12 20v2"}),i.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),i.jsx("path",{d:"m17.66 17.66 1.41 1.41"}),i.jsx("path",{d:"M2 12h2"}),i.jsx("path",{d:"M20 12h2"}),i.jsx("path",{d:"m6.34 17.66-1.41 1.41"}),i.jsx("path",{d:"m19.07 4.93-1.41 1.41"})]}),bell:i.jsxs(i.Fragment,{children:[i.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),i.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),user:i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:"12",cy:"8",r:"5"}),i.jsx("path",{d:"M20 21a8 8 0 1 0-16 0"})]}),target:i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("circle",{cx:"12",cy:"12",r:"6"}),i.jsx("circle",{cx:"12",cy:"12",r:"2"})]}),flag:i.jsxs(i.Fragment,{children:[i.jsx("path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"}),i.jsx("line",{x1:"4",x2:"4",y1:"22",y2:"15"})]}),clock:i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("polyline",{points:"12 6 12 12 16 14"})]}),star:i.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"}),link:i.jsxs(i.Fragment,{children:[i.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),i.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]}),download:i.jsxs(i.Fragment,{children:[i.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),i.jsx("polyline",{points:"7 10 12 15 17 10"}),i.jsx("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]}),upload:i.jsxs(i.Fragment,{children:[i.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),i.jsx("polyline",{points:"17 8 12 3 7 8"}),i.jsx("line",{x1:"12",x2:"12",y1:"3",y2:"15"})]}),logout:i.jsxs(i.Fragment,{children:[i.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),i.jsx("polyline",{points:"16 17 21 12 16 7"}),i.jsx("line",{x1:"21",x2:"9",y1:"12",y2:"12"})]}),login:i.jsxs(i.Fragment,{children:[i.jsx("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}),i.jsx("polyline",{points:"10 17 15 12 10 7"}),i.jsx("line",{x1:"15",x2:"3",y1:"12",y2:"12"})]}),tracking:i.jsxs(i.Fragment,{children:[i.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2"}),i.jsx("path",{d:"M8 21h8"}),i.jsx("path",{d:"M12 17v4"}),i.jsx("path",{d:"M7 8h2"}),i.jsx("path",{d:"M7 12h4"}),i.jsx("circle",{cx:"16",cy:"10",r:"2"})]}),menu:i.jsxs(i.Fragment,{children:[i.jsx("line",{x1:"4",x2:"20",y1:"6",y2:"6"}),i.jsx("line",{x1:"4",x2:"20",y1:"12",y2:"12"}),i.jsx("line",{x1:"4",x2:"20",y1:"18",y2:"18"})]}),gripVertical:i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:"9",cy:"5",r:"1"}),i.jsx("circle",{cx:"9",cy:"12",r:"1"}),i.jsx("circle",{cx:"9",cy:"19",r:"1"}),i.jsx("circle",{cx:"15",cy:"5",r:"1"}),i.jsx("circle",{cx:"15",cy:"12",r:"1"}),i.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),shopping:i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:"8",cy:"21",r:"1"}),i.jsx("circle",{cx:"19",cy:"21",r:"1"}),i.jsx("path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"})]}),scripts:i.jsxs(i.Fragment,{children:[i.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),i.jsx("polyline",{points:"14 2 14 8 20 8"}),i.jsx("path",{d:"m10 13-2 2 2 2"}),i.jsx("path",{d:"m14 17 2-2-2-2"})]}),diary:i.jsxs(i.Fragment,{children:[i.jsx("path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"}),i.jsx("path",{d:"M8 7h6"}),i.jsx("path",{d:"M8 11h8"})]}),morning:i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:"12",cy:"12",r:"4"}),i.jsx("path",{d:"M12 2v2"}),i.jsx("path",{d:"M12 20v2"}),i.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),i.jsx("path",{d:"m17.66 17.66 1.41 1.41"}),i.jsx("path",{d:"M2 12h2"}),i.jsx("path",{d:"M20 12h2"}),i.jsx("path",{d:"m6.34 17.66-1.41 1.41"}),i.jsx("path",{d:"m19.07 4.93-1.41 1.41"}),i.jsx("path",{d:"M9 16h6"})]}),copy:i.jsxs(i.Fragment,{children:[i.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),i.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),starFilled:i.jsx("polygon",{fill:"currentColor",points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"}),twin:i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:"12",cy:"8",r:"4"}),i.jsx("path",{d:"M12 12v2"}),i.jsx("path",{d:"M8 20h8"}),i.jsx("path",{d:"M10 20v-4a2 2 0 0 1 4 0v4"}),i.jsx("circle",{cx:"6",cy:"6",r:"2",strokeDasharray:"2 2"}),i.jsx("circle",{cx:"18",cy:"6",r:"2",strokeDasharray:"2 2"}),i.jsx("path",{d:"M6 8v2a2 2 0 0 0 2 2",strokeDasharray:"2 2"}),i.jsx("path",{d:"M18 8v2a2 2 0 0 1-2 2",strokeDasharray:"2 2"})]}),brain:i.jsxs(i.Fragment,{children:[i.jsx("path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z"}),i.jsx("path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z"}),i.jsx("path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4"}),i.jsx("path",{d:"M12 18v4"})]}),save:i.jsxs(i.Fragment,{children:[i.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),i.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),i.jsx("polyline",{points:"7 3 7 8 15 8"})]}),refreshCw:i.jsxs(i.Fragment,{children:[i.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),i.jsx("path",{d:"M21 3v5h-5"}),i.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),i.jsx("path",{d:"M3 21v-5h5"})]}),mtg:i.jsxs(i.Fragment,{children:[i.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),i.jsx("circle",{cx:"9",cy:"7",r:"4"}),i.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),i.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),trade:i.jsxs(i.Fragment,{children:[i.jsx("path",{d:"M3 3v18h18"}),i.jsx("path",{d:"m19 9-5 5-4-4-3 3"}),i.jsx("circle",{cx:"19",cy:"9",r:"2"}),i.jsx("circle",{cx:"14",cy:"14",r:"2"}),i.jsx("circle",{cx:"10",cy:"10",r:"2"}),i.jsx("circle",{cx:"7",cy:"13",r:"2"})]})};return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:n[t]||i.jsx("circle",{cx:"12",cy:"12",r:"10"})})}function VE(){const{signIn:t,signUp:e,isSupabaseConfigured:r}=ah(),[n,s]=V.useState("login");V.useEffect(()=>{document.documentElement.setAttribute("data-theme","dark")},[]);const[a,A]=V.useState(""),[o,l]=V.useState(""),[c,d]=V.useState(!1),[p,g]=V.useState(null),[h,b]=V.useState(null),w=async j=>{j.preventDefault(),d(!0),g(null),b(null);try{if(n==="login"){const{error:x}=await t(a,o);if(x)throw x}else{const{error:x,data:y}=await e(a,o);if(x)throw x;b("")}}catch(x){g(x.message)}finally{d(!1)}};return r?i.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{backgroundColor:"#0a0a0a"},children:i.jsxs("div",{className:"rounded-2xl p-8 w-full max-w-md",style:{backgroundColor:"#141414",border:"1px solid #27272a"},children:[i.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-2xl mx-auto mb-6 flex items-center justify-center",children:i.jsx(bt,{name:"box",size:32,className:"text-white"})}),i.jsx("h1",{className:"text-2xl font-bold text-center mb-2",style:{color:"#fafafa"},children:"Life Dashboard"}),i.jsx("p",{className:"text-center mb-8",style:{color:"#a1a1aa"},children:n==="login"?"":""}),i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm mb-1 block",style:{color:"#a1a1aa"},children:""}),i.jsx("input",{type:"email",value:a,onChange:j=>A(j.target.value),className:"w-full rounded-lg px-4 py-3 outline-none focus:border-blue-500 transition-colors",style:{backgroundColor:"#1a1a1a",border:"1px solid #3f3f46",color:"#fafafa"},placeholder:"email@example.com",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm mb-1 block",style:{color:"#a1a1aa"},children:""}),i.jsx("input",{type:"password",value:o,onChange:j=>l(j.target.value),className:"w-full rounded-lg px-4 py-3 outline-none focus:border-blue-500 transition-colors",style:{backgroundColor:"#1a1a1a",border:"1px solid #3f3f46",color:"#fafafa"},placeholder:"",required:!0,minLength:6})]}),p&&i.jsx("div",{className:"bg-red-900/30 border border-red-700 rounded-lg p-3 text-sm text-red-300",children:p}),h&&i.jsx("div",{className:"bg-emerald-900/30 border border-emerald-700 rounded-lg p-3 text-sm text-emerald-300",children:h}),i.jsx("button",{type:"submit",disabled:c,className:"w-full py-3 bg-blue-600 hover:bg-blue-500 disabled:bg-blue-600/50 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:c?i.jsx("span",{className:"animate-pulse",children:"..."}):i.jsxs(i.Fragment,{children:[i.jsx(bt,{name:n==="login"?"login":"user",size:20}),n==="login"?"":""]})})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsx("button",{onClick:()=>{s(n==="login"?"signup":"login"),g(null),b(null)},className:"text-blue-400 hover:text-blue-300 text-sm transition-colors",children:n==="login"?"":""})})]})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{backgroundColor:"#0a0a0a"},children:i.jsxs("div",{className:"rounded-2xl p-8 w-full max-w-md text-center",style:{backgroundColor:"#141414",border:"1px solid #27272a"},children:[i.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-2xl mx-auto mb-6 flex items-center justify-center",children:i.jsx(bt,{name:"box",size:32,className:"text-white"})}),i.jsx("h1",{className:"text-2xl font-bold mb-2",style:{color:"#fafafa"},children:"Life Dashboard"}),i.jsxs("p",{className:"mb-6",style:{color:"#a1a1aa"},children:["Supabase",i.jsx("br",{}),""]}),i.jsxs("div",{className:"rounded-lg p-4 text-sm",style:{backgroundColor:"rgba(234, 179, 8, 0.1)",border:"1px solid #ca8a04",color:"#fde047"},children:[i.jsx("p",{className:"font-bold mb-2",children:""}),i.jsx("p",{children:"localStorage"})]})]})})}function zE({activeTab:t,setActiveTab:e}){const[r,n]=V.useState(!1),s=[{id:"ai",label:"AI ",icon:"ai"},{id:"shopping",label:"Shopping",icon:"shopping"},{id:"tasks",label:"Tasks",icon:"tasks"},{id:"finance",label:"Finance",icon:"finance"},{id:"trade",label:"Trade",icon:"trade"},{id:"twin",label:"Digital Twin",icon:"twin"},{id:"calendar",label:"Schedule",icon:"calendar"},{id:"roadmap",label:"Roadmap",icon:"roadmap"},{id:"scripts",label:"Scripts",icon:"scripts"},{id:"morning",label:"Morning Note",icon:"morning"},{id:"diary",label:"Diary",icon:"diary"},{id:"tracking",label:"Tracking",icon:"tracking"},{id:"analytics",label:"Analytics",icon:"analytics"},{id:"system",label:"Settings",icon:"system"}],a=[{id:"ai",label:"",icon:"user",primary:!0},{id:"shopping",label:"",icon:"shopping"},{id:"tasks",label:"",icon:"tasks"},{id:"finance",label:"",icon:"finance"},{id:"twin",label:"",icon:"twin"}],A=[{id:"calendar",label:"",icon:"calendar"},{id:"trade",label:"",icon:"trade"},{id:"morning",label:"",icon:"morning"},{id:"diary",label:"",icon:"diary"},{id:"roadmap",label:"",icon:"roadmap"},{id:"scripts",label:"",icon:"scripts"},{id:"tracking",label:"",icon:"tracking"},{id:"analytics",label:"",icon:"analytics"},{id:"system",label:"",icon:"system"}];return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"hidden md:flex w-[72px] min-h-screen flex-col items-center py-5 fixed left-0 top-0 z-50 transition-theme",style:{backgroundColor:"var(--sidebar-bg)",borderRight:"1px solid var(--border-primary)"},children:[i.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center mb-6",style:{backgroundColor:"var(--accent-secondary)"},children:i.jsx(bt,{name:"box",className:"text-white",size:20})}),i.jsx("nav",{className:"flex-1 flex flex-col items-center gap-1 w-full px-3",children:s.map(o=>i.jsxs("button",{onClick:()=>e(o.id),className:"w-full p-2.5 rounded-lg transition-all duration-200 group relative flex items-center justify-center",style:{backgroundColor:t===o.id?"var(--sidebar-hover)":"transparent",color:t===o.id?"var(--accent-secondary)":"var(--sidebar-text)"},onMouseEnter:l=>{t!==o.id&&(l.currentTarget.style.backgroundColor="var(--sidebar-hover)",l.currentTarget.style.color="var(--text-primary)")},onMouseLeave:l=>{t!==o.id&&(l.currentTarget.style.backgroundColor="transparent",l.currentTarget.style.color="var(--sidebar-text)")},children:[i.jsx(bt,{name:o.id,size:20}),t===o.id&&i.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-0.5 h-5 rounded-r",style:{backgroundColor:"var(--accent-secondary)"}}),i.jsx("span",{className:"absolute left-full ml-3 px-2.5 py-1.5 rounded-md text-xs font-medium opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity whitespace-nowrap z-50",style:{backgroundColor:"var(--bg-card)",color:"var(--text-primary)",border:"1px solid var(--border-primary)"},children:o.label})]},o.id))})]}),i.jsxs("div",{className:"md:hidden fixed bottom-0 left-0 right-0 z-50",style:{backgroundColor:"var(--bg-card)",borderTop:"2px solid var(--border-primary)",paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:[r&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 bg-black/40 z-40",onClick:()=>n(!1)}),i.jsxs("div",{className:"absolute bottom-full left-0 right-0 z-50 p-4 shadow-2xl rounded-t-2xl",style:{backgroundColor:"var(--bg-card)",borderTop:"2px solid var(--border-primary)"},children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("span",{className:"font-bold text-lg",style:{color:"var(--text-primary)"},children:""}),i.jsx("button",{onClick:()=>n(!1),className:"p-2 rounded-full",style:{backgroundColor:"var(--bg-tertiary)"},children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsx("div",{className:"grid grid-cols-4 gap-3",children:A.map(o=>i.jsxs("button",{onClick:()=>{e(o.id),n(!1)},className:"flex flex-col items-center gap-2 p-3 rounded-xl transition-all",style:{backgroundColor:t===o.id?"var(--accent-secondary)":"var(--bg-tertiary)",color:t===o.id?"white":"var(--text-primary)"},children:[i.jsx(bt,{name:o.icon,size:24}),i.jsx("span",{className:"text-xs font-medium",children:o.label})]},o.id))})]})]}),i.jsxs("nav",{className:"flex items-center justify-around py-2",children:[a.map(o=>i.jsxs("button",{onClick:()=>{e(o.id),n(!1)},className:"flex flex-col items-center justify-center transition-all",style:{minWidth:o.primary?"56px":"48px"},children:[o.primary?i.jsx("div",{className:`-mt-5 w-14 h-14 rounded-full flex items-center justify-center shadow-xl transition-transform ${t===o.id?"scale-110":""}`,style:{background:t===o.id?"linear-gradient(135deg, #06b6d4 0%, #0284c7 100%)":"linear-gradient(135deg, #0ea5e9 0%, #0369a1 100%)",boxShadow:"0 4px 15px rgba(6, 182, 212, 0.4)"},children:i.jsx(bt,{name:"user",size:28,className:"text-white"})}):i.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center transition-all ${t===o.id?"scale-105":""}`,style:{backgroundColor:t===o.id?"var(--accent-secondary)":"transparent",color:t===o.id?"white":"var(--text-secondary)"},children:i.jsx(bt,{name:o.icon,size:22})}),o.label&&i.jsx("span",{className:"text-[10px] font-semibold mt-1",style:{color:t===o.id?o.primary?"#0ea5e9":"var(--accent-secondary)":"var(--text-tertiary)"},children:o.label})]},o.id)),i.jsxs("button",{onClick:()=>n(!r),className:"flex flex-col items-center justify-center",style:{minWidth:"48px"},children:[i.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center transition-all",style:{backgroundColor:r?"var(--bg-tertiary)":"transparent",color:r?"var(--text-primary)":"var(--text-secondary)"},children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),i.jsx("span",{className:"text-[10px] font-semibold mt-1",style:{color:"var(--text-tertiary)"},children:""})]})]})]})]})}function qE({title:t,tasks:e,goals:r,events:n,theme:s,setTheme:a}){const{user:A,signOut:o,isSupabaseConfigured:l}=ah(),c=e.filter(h=>{const b=new Date().toISOString().split("T")[0];return h.date===b}),d=c.filter(h=>h.progress===100).length,p=async()=>{confirm("")&&await o()},g=()=>{const h=s==="dark"?"light":"dark";a(h),document.documentElement.setAttribute("data-theme",h),localStorage.setItem("theme",h)};return i.jsxs("header",{className:"flex justify-between items-center mb-2 md:mb-6 pb-2 md:pb-4 transition-theme",style:{borderBottom:"1px solid var(--border-primary)"},children:[i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("h1",{className:"text-base md:text-xl font-semibold tracking-tight",style:{color:"var(--text-primary)"},children:t})}),i.jsxs("div",{className:"flex gap-1 md:gap-2 items-center",children:[i.jsxs("div",{className:"hidden md:flex items-center gap-2 px-3 py-1.5 rounded-lg transition-theme",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-primary)"},children:[i.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"var(--accent-secondary)"}}),i.jsxs("span",{className:"text-sm font-medium",style:{color:"var(--text-secondary)"},children:[r.length," Goals"]})]}),i.jsxs("div",{className:"hidden md:flex items-center gap-2 px-3 py-1.5 rounded-lg transition-theme",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-primary)"},children:[i.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"var(--accent-primary)"}}),i.jsxs("span",{className:"text-sm font-medium",style:{color:"var(--text-secondary)"},children:[e.length," Tasks"]})]}),i.jsx("div",{className:"flex items-center gap-1 md:gap-2 px-2 md:px-3 py-1 md:py-1.5 rounded-lg transition-theme",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-primary)"},children:i.jsxs("span",{className:"text-xs md:text-sm font-medium",style:{color:"var(--text-secondary)"},children:["Today: ",d,"/",c.length]})}),i.jsx("button",{onClick:g,className:"flex items-center justify-center w-7 h-7 md:w-9 md:h-9 rounded-lg transition-all",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-secondary)",border:"1px solid var(--border-primary)"},onMouseEnter:h=>{h.currentTarget.style.backgroundColor="var(--bg-hover)",h.currentTarget.style.color="var(--accent-secondary)"},onMouseLeave:h=>{h.currentTarget.style.backgroundColor="var(--bg-secondary)",h.currentTarget.style.color="var(--text-secondary)"},title:s==="dark"?"":"",children:s==="dark"?i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),i.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),i.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),i.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),i.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),i.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),i.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),i.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}):i.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),l&&A&&A.id!=="local-user"&&i.jsxs("button",{onClick:p,className:"hidden md:flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium transition-all",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-secondary)",border:"1px solid var(--border-primary)"},onMouseEnter:h=>{h.currentTarget.style.backgroundColor="var(--bg-hover)",h.currentTarget.style.color="var(--accent-secondary)"},onMouseLeave:h=>{h.currentTarget.style.backgroundColor="var(--bg-secondary)",h.currentTarget.style.color="var(--text-secondary)"},children:[i.jsx(bt,{name:"logout",size:16}),""]})]})]})}const Kh=[{id:"calendar",name:"",icon:"calendar",items:[{id:"event_reminder_1h",label:"1",default:!0},{id:"event_reminder_1d",label:"1",default:!0},{id:"event_reminder_1w",label:"1",default:!1},{id:"event_start",label:"",default:!0}]},{id:"tasks",name:"",icon:"tasks",items:[{id:"task_due_1h",label:"1",default:!0},{id:"task_due_1d",label:"1",default:!0},{id:"task_due_overdue",label:"",default:!0},{id:"task_completed",label:"",default:!1}]},{id:"goals",name:"",icon:"target",items:[{id:"goal_deadline_1w",label:"1",default:!0},{id:"goal_deadline_1d",label:"1",default:!0},{id:"goal_progress_50",label:"50%",default:!1},{id:"goal_completed",label:"",default:!0}]},{id:"finance",name:"",icon:"finance",items:[{id:"finance_daily_summary",label:"",default:!1},{id:"finance_weekly_summary",label:"",default:!0},{id:"finance_monthly_summary",label:"",default:!0},{id:"finance_budget_alert",label:"",default:!0},{id:"finance_large_expense",label:"1",default:!0}]},{id:"shopping",name:"",icon:"shopping",items:[{id:"shopping_reminder",label:"",default:!1},{id:"shopping_pending_items",label:"",default:!1}]},{id:"morning",name:"",icon:"morning",items:[{id:"morning_reminder",label:"",default:!0,time:"06:00"},{id:"morning_not_written",label:"",default:!1,time:"10:00"}]},{id:"diary",name:"",icon:"diary",items:[{id:"diary_reminder",label:"",default:!0,time:"21:00"},{id:"diary_not_written",label:"",default:!1,time:"23:00"}]},{id:"ai",name:"AI",icon:"ai",items:[{id:"ai_daily_greeting",label:"",default:!1,time:"08:00"},{id:"ai_daily_summary",label:"1",default:!0,time:"22:00"},{id:"ai_weekly_insight",label:"",default:!0}]},{id:"twin",name:"",icon:"twin",items:[{id:"twin_reflection_reminder",label:"",default:!1},{id:"twin_weekly_summary",label:"",default:!1}]},{id:"tracking",name:"",icon:"tracking",items:[{id:"tracking_reminder",label:"",default:!1,time:"20:00"},{id:"tracking_streak",label:"",default:!0}]},{id:"system",name:"",icon:"system",items:[{id:"system_backup_reminder",label:"1",default:!1},{id:"system_update",label:"",default:!0}]}];function WE({onClose:t}){const[e,r]=V.useState({}),[n,s]=V.useState("default"),[a,A]=V.useState(["calendar","tasks"]),[o,l]=V.useState(!0),[c,d]=V.useState({enabled:!1,start:"22:00",end:"07:00"});V.useEffect(()=>{const E=localStorage.getItem("notification_settings");if(E){const L=JSON.parse(E);r(L.items||{}),l(L.globalEnabled!==!1),d(L.quietHours||{enabled:!1,start:"22:00",end:"07:00"})}else{const L={};Kh.forEach(U=>{U.items.forEach(M=>{L[M.id]={enabled:M.default,time:M.time||null}})}),r(L)}"Notification"in window&&s(Notification.permission)},[]);const p=(E,L=o,U=c)=>{const M={items:E,globalEnabled:L,quietHours:U,updatedAt:new Date().toISOString()};localStorage.setItem("notification_settings",JSON.stringify(M))},g=async()=>{if("Notification"in window){const E=await Notification.requestPermission();s(E),E==="granted"&&new Notification("Life Dashboard",{body:"",icon:"/icon-192.png"})}},h=E=>{var U;const L={...e,[E]:{...e[E],enabled:!((U=e[E])!=null&&U.enabled)}};r(L),p(L)},b=(E,L)=>{const U={...e,[E]:{...e[E],time:L}};r(U),p(U)},w=E=>{A(L=>L.includes(E)?L.filter(U=>U!==E):[...L,E])},j=(E,L)=>{const U=Kh.find(G=>G.id===E);if(!U)return;const M={...e};U.items.forEach(G=>{M[G.id]={...M[G.id],enabled:L}}),r(M),p(M)},x=()=>{const E=!o;l(E),p(e,E,c)},y=E=>{const L={...c,...E};d(L),p(e,o,L)},B=E=>{const L=Kh.find(U=>U.id===E);return L?L.items.filter(U=>{var M;return(M=e[U.id])==null?void 0:M.enabled}).length:0};return i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0,0,0,0.6)"},children:i.jsxs("div",{className:"w-full max-w-2xl max-h-[90vh] overflow-hidden rounded-2xl shadow-2xl flex flex-col",style:{backgroundColor:"var(--bg-card)",border:"1px solid var(--border-primary)"},children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b",style:{borderColor:"var(--border-primary)"},children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{backgroundColor:"var(--accent-primary)"},children:i.jsx(bt,{name:"bell",size:20,className:"text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-bold",style:{color:"var(--text-primary)"},children:""}),i.jsx("p",{className:"text-xs",style:{color:"var(--text-tertiary)"},children:""})]})]}),i.jsx("button",{onClick:t,className:"p-2 rounded-lg transition-colors hover:bg-opacity-80",style:{backgroundColor:"var(--bg-tertiary)"},children:i.jsx(bt,{name:"x",size:20,style:{color:"var(--text-secondary)"}})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[n!=="granted"&&i.jsxs("div",{className:"p-4 rounded-xl flex items-center justify-between",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-primary)"},children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:""}),i.jsx("p",{className:"text-sm",style:{color:"var(--text-tertiary)"},children:""})]}),i.jsx("button",{onClick:g,className:"px-4 py-2 rounded-lg font-medium text-white",style:{backgroundColor:"var(--accent-primary)"},children:""})]}),i.jsxs("div",{className:"p-4 rounded-xl",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-primary)"},children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:""}),i.jsx("p",{className:"text-sm",style:{color:"var(--text-tertiary)"},children:"/"})]}),i.jsx("button",{onClick:x,className:`w-14 h-8 rounded-full transition-colors relative ${o?"bg-green-500":"bg-gray-500"}`,children:i.jsx("span",{className:`absolute top-1 w-6 h-6 rounded-full bg-white shadow transition-transform ${o?"right-1":"left-1"}`})})]}),i.jsxs("div",{className:"pt-4 border-t",style:{borderColor:"var(--border-primary)"},children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:""}),i.jsx("p",{className:"text-sm",style:{color:"var(--text-tertiary)"},children:""})]}),i.jsx("button",{onClick:()=>y({enabled:!c.enabled}),className:`w-14 h-8 rounded-full transition-colors relative ${c.enabled?"bg-purple-500":"bg-gray-500"}`,children:i.jsx("span",{className:`absolute top-1 w-6 h-6 rounded-full bg-white shadow transition-transform ${c.enabled?"right-1":"left-1"}`})})]}),c.enabled&&i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[i.jsx("input",{type:"time",value:c.start,onChange:E=>y({start:E.target.value}),className:"px-3 py-2 rounded-lg text-sm",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-primary)"}}),i.jsx("span",{style:{color:"var(--text-tertiary)"},children:""}),i.jsx("input",{type:"time",value:c.end,onChange:E=>y({end:E.target.value}),className:"px-3 py-2 rounded-lg text-sm",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-primary)"}})]})]})]}),Kh.map(E=>{const L=a.includes(E.id),U=B(E.id),M=E.items.length;return i.jsxs("div",{className:"rounded-xl overflow-hidden",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-primary)"},children:[i.jsxs("button",{onClick:()=>w(E.id),className:"w-full p-4 flex items-center justify-between hover:bg-opacity-80 transition-colors",style:{backgroundColor:"var(--bg-secondary)"},children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:"var(--bg-tertiary)"},children:i.jsx(bt,{name:E.icon,size:18,style:{color:"var(--text-secondary)"}})}),i.jsxs("div",{className:"text-left",children:[i.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:E.name}),i.jsxs("p",{className:"text-xs",style:{color:"var(--text-tertiary)"},children:[U,"/",M," "]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${U>0?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"}`,children:U>0?"ON":"OFF"}),i.jsx(bt,{name:"chevronRight",size:18,className:`transition-transform ${L?"rotate-90":""}`,style:{color:"var(--text-tertiary)"}})]})]}),L&&i.jsxs("div",{className:"border-t",style:{borderColor:"var(--border-primary)"},children:[i.jsxs("div",{className:"p-3 flex gap-2 border-b",style:{borderColor:"var(--border-primary)",backgroundColor:"var(--bg-tertiary)"},children:[i.jsx("button",{onClick:()=>j(E.id,!0),className:"px-3 py-1 rounded-lg text-xs font-medium",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-secondary)",border:"1px solid var(--border-primary)"},children:"ON"}),i.jsx("button",{onClick:()=>j(E.id,!1),className:"px-3 py-1 rounded-lg text-xs font-medium",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-secondary)",border:"1px solid var(--border-primary)"},children:"OFF"})]}),i.jsx("div",{className:"divide-y",style:{borderColor:"var(--border-primary)"},children:E.items.map(G=>{const N=e[G.id]||{enabled:G.default,time:G.time};return i.jsxs("div",{className:"p-4 flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:G.label}),G.time&&N.enabled&&i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[i.jsx("span",{className:"text-xs",style:{color:"var(--text-tertiary)"},children:":"}),i.jsx("input",{type:"time",value:N.time||G.time,onChange:$=>b(G.id,$.target.value),className:"px-2 py-1 rounded text-xs",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--border-primary)"}})]})]}),i.jsx("button",{onClick:()=>h(G.id),className:`w-12 h-7 rounded-full transition-colors relative ${N.enabled?"bg-green-500":"bg-gray-500"}`,children:i.jsx("span",{className:`absolute top-0.5 w-6 h-6 rounded-full bg-white shadow transition-transform ${N.enabled?"right-0.5":"left-0.5"}`})})]},G.id)})})]})]},E.id)})]}),i.jsx("div",{className:"p-4 border-t flex justify-end gap-2",style:{borderColor:"var(--border-primary)"},children:i.jsx("button",{onClick:t,className:"px-6 py-2 rounded-lg font-medium transition-colors",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"},children:""})})]})})}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Jm=function(t,e){return Jm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},Jm(t,e)};function Pa(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Jm(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Ym=function(){return Ym=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ym.apply(this,arguments)};function zs(t,e,r,n){function s(a){return a instanceof r?a:new r(function(A){A(a)})}return new(r||(r=Promise))(function(a,A){function o(d){try{c(n.next(d))}catch(p){A(p)}}function l(d){try{c(n.throw(d))}catch(p){A(p)}}function c(d){d.done?a(d.value):s(d.value).then(o,l)}c((n=n.apply(t,[])).next())})}function Is(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,s,a,A;return A={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(a=c[0]&2?s.return:c[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,c[1])).done)return a;switch(s=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(d){c=[6,d],s=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Gh(t,e,r){if(arguments.length===2)for(var n=0,s=e.length,a;n<s;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||e)}var zA=function(){function t(e,r,n,s){this.left=e,this.top=r,this.width=n,this.height=s}return t.prototype.add=function(e,r,n,s){return new t(this.left+e,this.top+r,this.width+n,this.height+s)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(s){return s.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),X0=function(t,e){return zA.fromClientRect(t,e.getBoundingClientRect())},JE=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),s=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new zA(0,0,n,s)},Z0=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var a=t.charCodeAt(r++);(a&64512)===56320?e.push(((s&1023)<<10)+(a&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},Qn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,a="";++s<r;){var A=t[s];A<=65535?n.push(A):(A-=65536,n.push((A>>10)+55296,A%1024+56320)),(s+1===r||n.length>16384)&&(a+=String.fromCharCode.apply(String,n),n.length=0)}return a},Iw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",YE=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Vh=0;Vh<Iw.length;Vh++)YE[Iw.charCodeAt(Vh)]=Vh;var Qw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",td=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var zh=0;zh<Qw.length;zh++)td[Qw.charCodeAt(zh)]=zh;var XE=function(t){var e=t.length*.75,r=t.length,n,s=0,a,A,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)a=td[t.charCodeAt(n)],A=td[t.charCodeAt(n+1)],o=td[t.charCodeAt(n+2)],l=td[t.charCodeAt(n+3)],d[s++]=a<<2|A>>4,d[s++]=(A&15)<<4|o>>2,d[s++]=(o&3)<<6|l&63;return c},ZE=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},eF=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Rl=5,_1=11,ng=2,tF=_1-Rl,bB=65536>>Rl,rF=1<<Rl,sg=rF-1,nF=1024>>Rl,sF=bB+nF,iF=sF,aF=32,AF=iF+aF,oF=65536>>_1,lF=1<<tF,cF=lF-1,Tw=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},uF=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},dF=function(t,e){var r=XE(t),n=Array.isArray(r)?eF(r):new Uint32Array(r),s=Array.isArray(r)?ZE(r):new Uint16Array(r),a=24,A=Tw(s,a/2,n[4]/2),o=n[5]===2?Tw(s,(a+n[4])/2):uF(n,Math.ceil((a+n[4])/4));return new hF(n[0],n[1],n[2],n[3],A,o)},hF=function(){function t(e,r,n,s,a,A){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=a,this.data=A}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Rl],r=(r<<ng)+(e&sg),this.data[r];if(e<=65535)return r=this.index[bB+(e-55296>>Rl)],r=(r<<ng)+(e&sg),this.data[r];if(e<this.highStart)return r=AF-oF+(e>>_1),r=this.index[r],r+=e>>Rl&cF,r=this.index[r],r=(r<<ng)+(e&sg),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),Lw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fF=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var qh=0;qh<Lw.length;qh++)fF[Lw.charCodeAt(qh)]=qh;var pF="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Pw=50,gF=1,BB=2,CB=3,mF=4,xF=5,Ow=7,NB=8,Dw=9,To=10,Xm=11,Rw=12,Zm=13,vF=14,rd=15,ex=16,Wh=17,Ku=18,wF=19,Hw=20,tx=21,Gu=22,ig=23,xc=24,Ci=25,nd=26,sd=27,vc=28,yF=29,kl=30,bF=31,Jh=32,Yh=33,rx=34,nx=35,sx=36,Wd=37,ix=38,Tf=39,Lf=40,ag=41,SB=42,BF=43,CF=[9001,65288],jB="!",jr="",Xh="",ax=dF(pF),kA=[kl,sx],Ax=[gF,BB,CB,xF],EB=[To,NB],Mw=[sd,nd],NF=Ax.concat(EB),$w=[ix,Tf,Lf,rx,nx],SF=[rd,Zm],jF=function(t,e){e===void 0&&(e="strict");var r=[],n=[],s=[];return t.forEach(function(a,A){var o=ax.get(a);if(o>Pw?(s.push(!0),o-=Pw):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(a)!==-1)return n.push(A),r.push(ex);if(o===mF||o===Xm){if(A===0)return n.push(A),r.push(kl);var l=r[A-1];return NF.indexOf(l)===-1?(n.push(n[A-1]),r.push(l)):(n.push(A),r.push(kl))}if(n.push(A),o===bF)return r.push(e==="strict"?tx:Wd);if(o===SB||o===yF)return r.push(kl);if(o===BF)return a>=131072&&a<=196605||a>=196608&&a<=262141?r.push(Wd):r.push(kl);r.push(o)}),[n,r,s]},Ag=function(t,e,r,n){var s=n[r];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var a=r;a<=n.length;){a++;var A=n[a];if(A===e)return!0;if(A!==To)break}if(s===To)for(var a=r;a>0;){a--;var o=n[a];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var l=r;l<=n.length;){l++;var A=n[l];if(A===e)return!0;if(A!==To)break}if(o!==To)break}return!1},Kw=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===To)r--;else return n}return 0},EF=function(t,e,r,n,s){if(r[n]===0)return jr;var a=n-1;if(Array.isArray(s)&&s[a]===!0)return jr;var A=a-1,o=a+1,l=e[a],c=A>=0?e[A]:0,d=e[o];if(l===BB&&d===CB)return jr;if(Ax.indexOf(l)!==-1)return jB;if(Ax.indexOf(d)!==-1||EB.indexOf(d)!==-1)return jr;if(Kw(a,e)===NB)return Xh;if(ax.get(t[a])===Xm||(l===Jh||l===Yh)&&ax.get(t[o])===Xm||l===Ow||d===Ow||l===Dw||[To,Zm,rd].indexOf(l)===-1&&d===Dw||[Wh,Ku,wF,xc,vc].indexOf(d)!==-1||Kw(a,e)===Gu||Ag(ig,Gu,a,e)||Ag([Wh,Ku],tx,a,e)||Ag(Rw,Rw,a,e))return jr;if(l===To)return Xh;if(l===ig||d===ig)return jr;if(d===ex||l===ex)return Xh;if([Zm,rd,tx].indexOf(d)!==-1||l===vF||c===sx&&SF.indexOf(l)!==-1||l===vc&&d===sx||d===Hw||kA.indexOf(d)!==-1&&l===Ci||kA.indexOf(l)!==-1&&d===Ci||l===sd&&[Wd,Jh,Yh].indexOf(d)!==-1||[Wd,Jh,Yh].indexOf(l)!==-1&&d===nd||kA.indexOf(l)!==-1&&Mw.indexOf(d)!==-1||Mw.indexOf(l)!==-1&&kA.indexOf(d)!==-1||[sd,nd].indexOf(l)!==-1&&(d===Ci||[Gu,rd].indexOf(d)!==-1&&e[o+1]===Ci)||[Gu,rd].indexOf(l)!==-1&&d===Ci||l===Ci&&[Ci,vc,xc].indexOf(d)!==-1)return jr;if([Ci,vc,xc,Wh,Ku].indexOf(d)!==-1)for(var p=a;p>=0;){var g=e[p];if(g===Ci)return jr;if([vc,xc].indexOf(g)!==-1)p--;else break}if([sd,nd].indexOf(d)!==-1)for(var p=[Wh,Ku].indexOf(l)!==-1?A:a;p>=0;){var g=e[p];if(g===Ci)return jr;if([vc,xc].indexOf(g)!==-1)p--;else break}if(ix===l&&[ix,Tf,rx,nx].indexOf(d)!==-1||[Tf,rx].indexOf(l)!==-1&&[Tf,Lf].indexOf(d)!==-1||[Lf,nx].indexOf(l)!==-1&&d===Lf||$w.indexOf(l)!==-1&&[Hw,nd].indexOf(d)!==-1||$w.indexOf(d)!==-1&&l===sd||kA.indexOf(l)!==-1&&kA.indexOf(d)!==-1||l===xc&&kA.indexOf(d)!==-1||kA.concat(Ci).indexOf(l)!==-1&&d===Gu&&CF.indexOf(t[o])===-1||kA.concat(Ci).indexOf(d)!==-1&&l===Ku)return jr;if(l===ag&&d===ag){for(var h=r[a],b=1;h>0&&(h--,e[h]===ag);)b++;if(b%2!==0)return jr}return l===Jh&&d===Yh?jr:Xh},FF=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=jF(t,e.lineBreak),n=r[0],s=r[1],a=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(o){return[Ci,kl,SB].indexOf(o)!==-1?Wd:o}));var A=e.wordBreak==="keep-all"?a.map(function(o,l){return o&&t[l]>=19968&&t[l]<=40959}):void 0;return[n,s,A]},_F=function(){function t(e,r,n,s){this.codePoints=e,this.required=r===jB,this.start=n,this.end=s}return t.prototype.slice=function(){return Qn.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),kF=function(t,e){var r=Z0(t),n=FF(r,e),s=n[0],a=n[1],A=n[2],o=r.length,l=0,c=0;return{next:function(){if(c>=o)return{done:!0,value:null};for(var d=jr;c<o&&(d=EF(r,a,s,++c,A))===jr;);if(d!==jr||c===o){var p=new _F(r,d,l,c);return l=c,{value:p,done:!1}}return{done:!0,value:null}}}},UF=1,IF=2,Ah=4,Gw=8,x0=10,Vw=47,vd=92,QF=9,TF=32,Zh=34,Vu=61,LF=35,PF=36,OF=37,ef=39,tf=40,zu=41,DF=95,ii=45,RF=33,HF=60,MF=62,$F=64,KF=91,GF=93,VF=61,zF=123,rf=63,qF=125,zw=124,WF=126,JF=128,qw=65533,og=42,Pl=43,YF=44,XF=58,ZF=59,Jd=46,e_=0,t_=8,r_=11,n_=14,s_=31,i_=127,AA=-1,FB=48,_B=97,kB=101,a_=102,A_=117,o_=122,UB=65,IB=69,QB=70,l_=85,c_=90,Qs=function(t){return t>=FB&&t<=57},u_=function(t){return t>=55296&&t<=57343},wc=function(t){return Qs(t)||t>=UB&&t<=QB||t>=_B&&t<=a_},d_=function(t){return t>=_B&&t<=o_},h_=function(t){return t>=UB&&t<=c_},f_=function(t){return d_(t)||h_(t)},p_=function(t){return t>=JF},nf=function(t){return t===x0||t===QF||t===TF},v0=function(t){return f_(t)||p_(t)||t===DF},Ww=function(t){return v0(t)||Qs(t)||t===ii},g_=function(t){return t>=e_&&t<=t_||t===r_||t>=n_&&t<=s_||t===i_},Fo=function(t,e){return t!==vd?!1:e!==x0},sf=function(t,e,r){return t===ii?v0(e)||Fo(e,r):v0(t)?!0:!!(t===vd&&Fo(t,e))},lg=function(t,e,r){return t===Pl||t===ii?Qs(e)?!0:e===Jd&&Qs(r):Qs(t===Jd?e:t)},m_=function(t){var e=0,r=1;(t[e]===Pl||t[e]===ii)&&(t[e]===ii&&(r=-1),e++);for(var n=[];Qs(t[e]);)n.push(t[e++]);var s=n.length?parseInt(Qn.apply(void 0,n),10):0;t[e]===Jd&&e++;for(var a=[];Qs(t[e]);)a.push(t[e++]);var A=a.length,o=A?parseInt(Qn.apply(void 0,a),10):0;(t[e]===IB||t[e]===kB)&&e++;var l=1;(t[e]===Pl||t[e]===ii)&&(t[e]===ii&&(l=-1),e++);for(var c=[];Qs(t[e]);)c.push(t[e++]);var d=c.length?parseInt(Qn.apply(void 0,c),10):0;return r*(s+o*Math.pow(10,-A))*Math.pow(10,l*d)},x_={type:2},v_={type:3},w_={type:4},y_={type:13},b_={type:8},B_={type:21},C_={type:9},N_={type:10},S_={type:11},j_={type:12},E_={type:14},af={type:23},F_={type:1},__={type:25},k_={type:24},U_={type:26},I_={type:27},Q_={type:28},T_={type:29},L_={type:31},ox={type:32},TB=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Z0(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==ox;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Zh:return this.consumeStringToken(Zh);case LF:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),s=this.peekCodePoint(2);if(Ww(r)||Fo(n,s)){var a=sf(r,n,s)?IF:UF,A=this.consumeName();return{type:5,value:A,flags:a}}break;case PF:if(this.peekCodePoint(0)===Vu)return this.consumeCodePoint(),y_;break;case ef:return this.consumeStringToken(ef);case tf:return x_;case zu:return v_;case og:if(this.peekCodePoint(0)===Vu)return this.consumeCodePoint(),E_;break;case Pl:if(lg(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case YF:return w_;case ii:var o=e,l=this.peekCodePoint(0),c=this.peekCodePoint(1);if(lg(o,l,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(sf(o,l,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===ii&&c===MF)return this.consumeCodePoint(),this.consumeCodePoint(),k_;break;case Jd:if(lg(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Vw:if(this.peekCodePoint(0)===og)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===og&&(d=this.consumeCodePoint(),d===Vw))return this.consumeToken();if(d===AA)return this.consumeToken()}break;case XF:return U_;case ZF:return I_;case HF:if(this.peekCodePoint(0)===RF&&this.peekCodePoint(1)===ii&&this.peekCodePoint(2)===ii)return this.consumeCodePoint(),this.consumeCodePoint(),__;break;case $F:var p=this.peekCodePoint(0),g=this.peekCodePoint(1),h=this.peekCodePoint(2);if(sf(p,g,h)){var A=this.consumeName();return{type:7,value:A}}break;case KF:return Q_;case vd:if(Fo(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case GF:return T_;case VF:if(this.peekCodePoint(0)===Vu)return this.consumeCodePoint(),b_;break;case zF:return S_;case qF:return j_;case A_:case l_:var b=this.peekCodePoint(0),w=this.peekCodePoint(1);return b===Pl&&(wc(w)||w===rf)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case zw:if(this.peekCodePoint(0)===Vu)return this.consumeCodePoint(),C_;if(this.peekCodePoint(0)===zw)return this.consumeCodePoint(),B_;break;case WF:if(this.peekCodePoint(0)===Vu)return this.consumeCodePoint(),N_;break;case AA:return ox}return nf(e)?(this.consumeWhiteSpace(),L_):Qs(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):v0(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Qn(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();wc(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===rf&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var s=parseInt(Qn.apply(void 0,e.map(function(l){return l===rf?FB:l})),16),a=parseInt(Qn.apply(void 0,e.map(function(l){return l===rf?QB:l})),16);return{type:30,start:s,end:a}}var A=parseInt(Qn.apply(void 0,e),16);if(this.peekCodePoint(0)===ii&&wc(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];wc(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var a=parseInt(Qn.apply(void 0,o),16);return{type:30,start:A,end:a}}else return{type:30,start:A,end:A}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===tf?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===tf?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===AA)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===ef||r===Zh){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===AA||this.peekCodePoint(0)===zu)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),af)}for(;;){var s=this.consumeCodePoint();if(s===AA||s===zu)return{type:22,value:Qn.apply(void 0,e)};if(nf(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===AA||this.peekCodePoint(0)===zu?(this.consumeCodePoint(),{type:22,value:Qn.apply(void 0,e)}):(this.consumeBadUrlRemnants(),af);if(s===Zh||s===ef||s===tf||g_(s))return this.consumeBadUrlRemnants(),af;if(s===vd)if(Fo(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),af;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;nf(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===zu||e===AA)return;Fo(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var s=Math.min(r,e);n+=Qn.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var s=this._value[n];if(s===AA||s===void 0||s===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(s===x0)return this._value.splice(0,n),F_;if(s===vd){var a=this._value[n+1];a!==AA&&a!==void 0&&(a===x0?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):Fo(s,a)&&(r+=this.consumeStringSlice(n),r+=Qn(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=Ah,n=this.peekCodePoint(0);for((n===Pl||n===ii)&&e.push(this.consumeCodePoint());Qs(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(n===Jd&&Qs(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=Gw;Qs(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),s=this.peekCodePoint(1);var a=this.peekCodePoint(2);if((n===IB||n===kB)&&((s===Pl||s===ii)&&Qs(a)||Qs(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=Gw;Qs(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[m_(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],s=this.peekCodePoint(0),a=this.peekCodePoint(1),A=this.peekCodePoint(2);if(sf(s,a,A)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return s===OF?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(wc(e)){for(var r=Qn(e);wc(this.peekCodePoint(0))&&r.length<6;)r+=Qn(this.consumeCodePoint());nf(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||u_(n)||n>1114111?qw:n}return e===AA?qw:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(Ww(r))e+=Qn(r);else if(Fo(r,this.peekCodePoint(0)))e+=Qn(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),LB=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new TB;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||O_(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?ox:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),oh=function(t){return t.type===15},wu=function(t){return t.type===17},qr=function(t){return t.type===20},P_=function(t){return t.type===0},lx=function(t,e){return qr(t)&&t.value===e},PB=function(t){return t.type!==31},fu=function(t){return t.type!==31&&t.type!==4},pA=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},O_=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Yo=function(t){return t.type===17||t.type===15},Vn=function(t){return t.type===16||Yo(t)},OB=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},xs={type:17,number:0,flags:Ah},k1={type:16,number:50,flags:Ah},Lo={type:16,number:100,flags:Ah},id=function(t,e,r){var n=t[0],s=t[1];return[sn(n,e),sn(typeof s<"u"?s:n,r)]},sn=function(t,e){if(t.type===16)return t.number/100*e;if(oh(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},DB="deg",RB="grad",HB="rad",MB="turn",ep={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case DB:return Math.PI*e.number/180;case RB:return Math.PI/200*e.number;case HB:return e.number;case MB:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},$B=function(t){return t.type===15&&(t.unit===DB||t.unit===RB||t.unit===HB||t.unit===MB)},KB=function(t){var e=t.filter(qr).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[xs,xs];case"to top":case"bottom":return Zi(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[xs,Lo];case"to right":case"left":return Zi(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Lo,Lo];case"to bottom":case"top":return Zi(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Lo,xs];case"to left":case"right":return Zi(270)}return 0},Zi=function(t){return Math.PI*t/180},zo={name:"color",parse:function(t,e){if(e.type===18){var r=D_[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),s=e.value.substring(1,2),a=e.value.substring(2,3);return Po(parseInt(n+n,16),parseInt(s+s,16),parseInt(a+a,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),s=e.value.substring(1,2),a=e.value.substring(2,3),A=e.value.substring(3,4);return Po(parseInt(n+n,16),parseInt(s+s,16),parseInt(a+a,16),parseInt(A+A,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),s=e.value.substring(2,4),a=e.value.substring(4,6);return Po(parseInt(n,16),parseInt(s,16),parseInt(a,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),s=e.value.substring(2,4),a=e.value.substring(4,6),A=e.value.substring(6,8);return Po(parseInt(n,16),parseInt(s,16),parseInt(a,16),parseInt(A,16)/255)}}if(e.type===20){var o=MA[e.value.toUpperCase()];if(typeof o<"u")return o}return MA.TRANSPARENT}},qo=function(t){return(255&t)===0},ss=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+n+","+r+","+e/255+")":"rgb("+s+","+n+","+r+")"},Po=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},Jw=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},Yw=function(t,e){var r=e.filter(fu);if(r.length===3){var n=r.map(Jw),s=n[0],a=n[1],A=n[2];return Po(s,a,A,1)}if(r.length===4){var o=r.map(Jw),s=o[0],a=o[1],A=o[2],l=o[3];return Po(s,a,A,l)}return 0};function cg(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var Xw=function(t,e){var r=e.filter(fu),n=r[0],s=r[1],a=r[2],A=r[3],o=(n.type===17?Zi(n.number):ep.parse(t,n))/(Math.PI*2),l=Vn(s)?s.number/100:0,c=Vn(a)?a.number/100:0,d=typeof A<"u"&&Vn(A)?sn(A,1):1;if(l===0)return Po(c*255,c*255,c*255,1);var p=c<=.5?c*(l+1):c+l-c*l,g=c*2-p,h=cg(g,p,o+1/3),b=cg(g,p,o),w=cg(g,p,o-1/3);return Po(h*255,b*255,w*255,d)},D_={hsl:Xw,hsla:Xw,rgb:Yw,rgba:Yw},wd=function(t,e){return zo.parse(t,LB.create(e).parseComponentValue())},MA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},R_={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(qr(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},H_={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},tp=function(t,e){var r=zo.parse(t,e[0]),n=e[1];return n&&Vn(n)?{color:r,stop:n}:{color:r,stop:null}},Zw=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=xs),n.stop===null&&(n.stop=Lo);for(var s=[],a=0,A=0;A<t.length;A++){var o=t[A].stop;if(o!==null){var l=sn(o,e);l>a?s.push(l):s.push(a),a=l}else s.push(null)}for(var c=null,A=0;A<s.length;A++){var d=s[A];if(d===null)c===null&&(c=A);else if(c!==null){for(var p=A-c,g=s[c-1],h=(d-g)/(p+1),b=1;b<=p;b++)s[c+b-1]=h*b;c=null}}return t.map(function(w,j){var x=w.color;return{color:x,stop:Math.max(Math.min(1,s[j]/e),0)}})},M_=function(t,e,r){var n=e/2,s=r/2,a=sn(t[0],e)-n,A=s-sn(t[1],r);return(Math.atan2(A,a)+Math.PI*2)%(Math.PI*2)},$_=function(t,e,r){var n=typeof t=="number"?t:M_(t,e,r),s=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),a=e/2,A=r/2,o=s/2,l=Math.sin(n-Math.PI/2)*o,c=Math.cos(n-Math.PI/2)*o;return[s,a-c,a+c,A-l,A+l]},ja=function(t,e){return Math.sqrt(t*t+e*e)},ey=function(t,e,r,n,s){var a=[[0,0],[0,e],[t,0],[t,e]];return a.reduce(function(A,o){var l=o[0],c=o[1],d=ja(r-l,n-c);return(s?d<A.optimumDistance:d>A.optimumDistance)?{optimumCorner:o,optimumDistance:d}:A},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},K_=function(t,e,r,n,s){var a=0,A=0;switch(t.size){case 0:t.shape===0?a=A=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(a=Math.min(Math.abs(e),Math.abs(e-n)),A=Math.min(Math.abs(r),Math.abs(r-s)));break;case 2:if(t.shape===0)a=A=Math.min(ja(e,r),ja(e,r-s),ja(e-n,r),ja(e-n,r-s));else if(t.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-s))/Math.min(Math.abs(e),Math.abs(e-n)),l=ey(n,s,e,r,!0),c=l[0],d=l[1];a=ja(c-e,(d-r)/o),A=o*a}break;case 1:t.shape===0?a=A=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(a=Math.max(Math.abs(e),Math.abs(e-n)),A=Math.max(Math.abs(r),Math.abs(r-s)));break;case 3:if(t.shape===0)a=A=Math.max(ja(e,r),ja(e,r-s),ja(e-n,r),ja(e-n,r-s));else if(t.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-s))/Math.max(Math.abs(e),Math.abs(e-n)),p=ey(n,s,e,r,!1),c=p[0],d=p[1];a=ja(c-e,(d-r)/o),A=o*a}break}return Array.isArray(t.size)&&(a=sn(t.size[0],n),A=t.size.length===2?sn(t.size[1],s):a),[a,A]},G_=function(t,e){var r=Zi(180),n=[];return pA(e).forEach(function(s,a){if(a===0){var A=s[0];if(A.type===20&&A.value==="to"){r=KB(s);return}else if($B(A)){r=ep.parse(t,A);return}}var o=tp(t,s);n.push(o)}),{angle:r,stops:n,type:1}},Af=function(t,e){var r=Zi(180),n=[];return pA(e).forEach(function(s,a){if(a===0){var A=s[0];if(A.type===20&&["top","left","right","bottom"].indexOf(A.value)!==-1){r=KB(s);return}else if($B(A)){r=(ep.parse(t,A)+Zi(270))%Zi(360);return}}var o=tp(t,s);n.push(o)}),{angle:r,stops:n,type:1}},V_=function(t,e){var r=Zi(180),n=[],s=1,a=0,A=3,o=[];return pA(e).forEach(function(l,c){var d=l[0];if(c===0){if(qr(d)&&d.value==="linear"){s=1;return}else if(qr(d)&&d.value==="radial"){s=2;return}}if(d.type===18){if(d.name==="from"){var p=zo.parse(t,d.values[0]);n.push({stop:xs,color:p})}else if(d.name==="to"){var p=zo.parse(t,d.values[0]);n.push({stop:Lo,color:p})}else if(d.name==="color-stop"){var g=d.values.filter(fu);if(g.length===2){var p=zo.parse(t,g[1]),h=g[0];wu(h)&&n.push({stop:{type:16,number:h.number*100,flags:h.flags},color:p})}}}}),s===1?{angle:(r+Zi(180))%Zi(360),stops:n,type:s}:{size:A,shape:a,stops:n,position:o,type:s}},GB="closest-side",VB="farthest-side",zB="closest-corner",qB="farthest-corner",WB="circle",JB="ellipse",YB="cover",XB="contain",z_=function(t,e){var r=0,n=3,s=[],a=[];return pA(e).forEach(function(A,o){var l=!0;if(o===0){var c=!1;l=A.reduce(function(p,g){if(c)if(qr(g))switch(g.value){case"center":return a.push(k1),p;case"top":case"left":return a.push(xs),p;case"right":case"bottom":return a.push(Lo),p}else(Vn(g)||Yo(g))&&a.push(g);else if(qr(g))switch(g.value){case WB:return r=0,!1;case JB:return r=1,!1;case"at":return c=!0,!1;case GB:return n=0,!1;case YB:case VB:return n=1,!1;case XB:case zB:return n=2,!1;case qB:return n=3,!1}else if(Yo(g)||Vn(g))return Array.isArray(n)||(n=[]),n.push(g),!1;return p},l)}if(l){var d=tp(t,A);s.push(d)}}),{size:n,shape:r,stops:s,position:a,type:2}},of=function(t,e){var r=0,n=3,s=[],a=[];return pA(e).forEach(function(A,o){var l=!0;if(o===0?l=A.reduce(function(d,p){if(qr(p))switch(p.value){case"center":return a.push(k1),!1;case"top":case"left":return a.push(xs),!1;case"right":case"bottom":return a.push(Lo),!1}else if(Vn(p)||Yo(p))return a.push(p),!1;return d},l):o===1&&(l=A.reduce(function(d,p){if(qr(p))switch(p.value){case WB:return r=0,!1;case JB:return r=1,!1;case XB:case GB:return n=0,!1;case VB:return n=1,!1;case zB:return n=2,!1;case YB:case qB:return n=3,!1}else if(Yo(p)||Vn(p))return Array.isArray(n)||(n=[]),n.push(p),!1;return d},l)),l){var c=tp(t,A);s.push(c)}}),{size:n,shape:r,stops:s,position:a,type:2}},q_=function(t){return t.type===1},W_=function(t){return t.type===2},U1={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=ZB[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function J_(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!ZB[t.name])}var ZB={"linear-gradient":G_,"-moz-linear-gradient":Af,"-ms-linear-gradient":Af,"-o-linear-gradient":Af,"-webkit-linear-gradient":Af,"radial-gradient":z_,"-moz-radial-gradient":of,"-ms-radial-gradient":of,"-o-radial-gradient":of,"-webkit-radial-gradient":of,"-webkit-gradient":V_},Y_={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return fu(n)&&J_(n)}).map(function(n){return U1.parse(t,n)})}},X_={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(qr(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Z_={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return pA(e).map(function(r){return r.filter(Vn)}).map(OB)}},ek={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return pA(e).map(function(r){return r.filter(qr).map(function(n){return n.value}).join(" ")}).map(tk)}},tk=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},ru;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(ru||(ru={}));var rk={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return pA(e).map(function(r){return r.filter(nk)})}},nk=function(t){return qr(t)||Vn(t)},rp=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},sk=rp("top"),ik=rp("right"),ak=rp("bottom"),Ak=rp("left"),np=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return OB(r.filter(Vn))}}},ok=np("top-left"),lk=np("top-right"),ck=np("bottom-right"),uk=np("bottom-left"),sp=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},dk=sp("top"),hk=sp("right"),fk=sp("bottom"),pk=sp("left"),ip=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return oh(r)?r.number:0}}},gk=ip("top"),mk=ip("right"),xk=ip("bottom"),vk=ip("left"),wk={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},yk={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},bk={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(qr).reduce(function(r,n){return r|Bk(n.value)},0)}},Bk=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Ck={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Nk={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},w0;(function(t){t.NORMAL="normal",t.STRICT="strict"})(w0||(w0={}));var Sk={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return w0.STRICT;case"normal":default:return w0.NORMAL}}},jk={name:"line-height",initialValue:"normal",prefix:!1,type:4},ty=function(t,e){return qr(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Vn(t)?sn(t,e):e},Ek={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:U1.parse(t,e)}},Fk={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},cx={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},ap=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},_k=ap("top"),kk=ap("right"),Uk=ap("bottom"),Ik=ap("left"),Qk={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(qr).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Tk={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Ap=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Lk=Ap("top"),Pk=Ap("right"),Ok=Ap("bottom"),Dk=Ap("left"),Rk={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Hk={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Mk={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&lx(e[0],"none")?[]:pA(e).map(function(r){for(var n={color:MA.TRANSPARENT,offsetX:xs,offsetY:xs,blur:xs},s=0,a=0;a<r.length;a++){var A=r[a];Yo(A)?(s===0?n.offsetX=A:s===1?n.offsetY=A:n.blur=A,s++):n.color=zo.parse(t,A)}return n})}},$k={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Kk={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=zk[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},Gk=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},Vk=function(t){var e=t.filter(function(l){return l.type===17}).map(function(l){return l.number}),r=e[0],n=e[1];e[2],e[3];var s=e[4],a=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var A=e[12],o=e[13];return e[14],e[15],e.length===16?[r,n,s,a,A,o]:null},zk={matrix:Gk,matrix3d:Vk},ry={type:16,number:50,flags:Ah},qk=[ry,ry],Wk={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(Vn);return r.length!==2?qk:[r[0],r[1]]}},Jk={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},yd;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(yd||(yd={}));var Yk={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return yd.BREAK_ALL;case"keep-all":return yd.KEEP_ALL;case"normal":default:return yd.NORMAL}}},Xk={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(wu(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},e4={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},Zk={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return wu(e)?e.number:1}},eU={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},tU={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(qr).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},rU={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(s){switch(s.type){case 20:case 0:r.push(s.value);break;case 17:r.push(s.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},nU={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},sU={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(wu(e))return e.number;if(qr(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},iU={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(qr).map(function(r){return r.value})}},aU={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},es=function(t,e){return(t&e)!==0},AU={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},oU={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],s=e.filter(PB),a=0;a<s.length;a++){var A=s[a],o=s[a+1];if(A.type===20){var l=o&&wu(o)?o.number:1;n.push({counter:A.value,increment:l})}}return n}},lU={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(PB),s=0;s<n.length;s++){var a=n[s],A=n[s+1];if(qr(a)&&a.value!=="none"){var o=A&&wu(A)?A.number:0;r.push({counter:a.value,reset:o})}}return r}},cU={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(oh).map(function(r){return e4.parse(t,r)})}},uU={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],s=e.filter(P_);if(s.length%2!==0)return null;for(var a=0;a<s.length;a+=2){var A=s[a].value,o=s[a+1].value;n.push({open:A,close:o})}return n}},ny=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},dU={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&lx(e[0],"none")?[]:pA(e).map(function(r){for(var n={color:255,offsetX:xs,offsetY:xs,blur:xs,spread:xs,inset:!1},s=0,a=0;a<r.length;a++){var A=r[a];lx(A,"inset")?n.inset=!0:Yo(A)?(s===0?n.offsetX=A:s===1?n.offsetY=A:s===2?n.blur=A:n.spread=A,s++):n.color=zo.parse(t,A)}return n})}},hU={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(qr).forEach(function(s){switch(s.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(s){n.indexOf(s)===-1&&n.push(s)}),n}},fU={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},pU={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return oh(e)?e.number:0}},gU=function(){function t(e,r){var n,s;this.animationDuration=Ht(e,cU,r.animationDuration),this.backgroundClip=Ht(e,R_,r.backgroundClip),this.backgroundColor=Ht(e,H_,r.backgroundColor),this.backgroundImage=Ht(e,Y_,r.backgroundImage),this.backgroundOrigin=Ht(e,X_,r.backgroundOrigin),this.backgroundPosition=Ht(e,Z_,r.backgroundPosition),this.backgroundRepeat=Ht(e,ek,r.backgroundRepeat),this.backgroundSize=Ht(e,rk,r.backgroundSize),this.borderTopColor=Ht(e,sk,r.borderTopColor),this.borderRightColor=Ht(e,ik,r.borderRightColor),this.borderBottomColor=Ht(e,ak,r.borderBottomColor),this.borderLeftColor=Ht(e,Ak,r.borderLeftColor),this.borderTopLeftRadius=Ht(e,ok,r.borderTopLeftRadius),this.borderTopRightRadius=Ht(e,lk,r.borderTopRightRadius),this.borderBottomRightRadius=Ht(e,ck,r.borderBottomRightRadius),this.borderBottomLeftRadius=Ht(e,uk,r.borderBottomLeftRadius),this.borderTopStyle=Ht(e,dk,r.borderTopStyle),this.borderRightStyle=Ht(e,hk,r.borderRightStyle),this.borderBottomStyle=Ht(e,fk,r.borderBottomStyle),this.borderLeftStyle=Ht(e,pk,r.borderLeftStyle),this.borderTopWidth=Ht(e,gk,r.borderTopWidth),this.borderRightWidth=Ht(e,mk,r.borderRightWidth),this.borderBottomWidth=Ht(e,xk,r.borderBottomWidth),this.borderLeftWidth=Ht(e,vk,r.borderLeftWidth),this.boxShadow=Ht(e,dU,r.boxShadow),this.color=Ht(e,wk,r.color),this.direction=Ht(e,yk,r.direction),this.display=Ht(e,bk,r.display),this.float=Ht(e,Ck,r.cssFloat),this.fontFamily=Ht(e,rU,r.fontFamily),this.fontSize=Ht(e,nU,r.fontSize),this.fontStyle=Ht(e,aU,r.fontStyle),this.fontVariant=Ht(e,iU,r.fontVariant),this.fontWeight=Ht(e,sU,r.fontWeight),this.letterSpacing=Ht(e,Nk,r.letterSpacing),this.lineBreak=Ht(e,Sk,r.lineBreak),this.lineHeight=Ht(e,jk,r.lineHeight),this.listStyleImage=Ht(e,Ek,r.listStyleImage),this.listStylePosition=Ht(e,Fk,r.listStylePosition),this.listStyleType=Ht(e,cx,r.listStyleType),this.marginTop=Ht(e,_k,r.marginTop),this.marginRight=Ht(e,kk,r.marginRight),this.marginBottom=Ht(e,Uk,r.marginBottom),this.marginLeft=Ht(e,Ik,r.marginLeft),this.opacity=Ht(e,Zk,r.opacity);var a=Ht(e,Qk,r.overflow);this.overflowX=a[0],this.overflowY=a[a.length>1?1:0],this.overflowWrap=Ht(e,Tk,r.overflowWrap),this.paddingTop=Ht(e,Lk,r.paddingTop),this.paddingRight=Ht(e,Pk,r.paddingRight),this.paddingBottom=Ht(e,Ok,r.paddingBottom),this.paddingLeft=Ht(e,Dk,r.paddingLeft),this.paintOrder=Ht(e,hU,r.paintOrder),this.position=Ht(e,Hk,r.position),this.textAlign=Ht(e,Rk,r.textAlign),this.textDecorationColor=Ht(e,eU,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=Ht(e,tU,(s=r.textDecorationLine)!==null&&s!==void 0?s:r.textDecoration),this.textShadow=Ht(e,Mk,r.textShadow),this.textTransform=Ht(e,$k,r.textTransform),this.transform=Ht(e,Kk,r.transform),this.transformOrigin=Ht(e,Wk,r.transformOrigin),this.visibility=Ht(e,Jk,r.visibility),this.webkitTextStrokeColor=Ht(e,fU,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Ht(e,pU,r.webkitTextStrokeWidth),this.wordBreak=Ht(e,Yk,r.wordBreak),this.zIndex=Ht(e,Xk,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return qo(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return es(this.display,4)||es(this.display,33554432)||es(this.display,268435456)||es(this.display,536870912)||es(this.display,67108864)||es(this.display,134217728)},t}(),mU=function(){function t(e,r){this.content=Ht(e,AU,r.content),this.quotes=Ht(e,uU,r.quotes)}return t}(),sy=function(){function t(e,r){this.counterIncrement=Ht(e,oU,r.counterIncrement),this.counterReset=Ht(e,lU,r.counterReset)}return t}(),Ht=function(t,e,r){var n=new TB,s=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(s);var a=new LB(n.read());switch(e.type){case 2:var A=a.parseComponentValue();return e.parse(t,qr(A)?A.value:e.initialValue);case 0:return e.parse(t,a.parseComponentValue());case 1:return e.parse(t,a.parseComponentValues());case 4:return a.parseComponentValue();case 3:switch(e.format){case"angle":return ep.parse(t,a.parseComponentValue());case"color":return zo.parse(t,a.parseComponentValue());case"image":return U1.parse(t,a.parseComponentValue());case"length":var o=a.parseComponentValue();return Yo(o)?o:xs;case"length-percentage":var l=a.parseComponentValue();return Vn(l)?l:xs;case"time":return e4.parse(t,a.parseComponentValue())}break}},xU="data-html2canvas-debug",vU=function(t){var e=t.getAttribute(xU);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},ux=function(t,e){var r=vU(t);return r===1||e===r},gA=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,ux(r,3))debugger;this.styles=new gU(e,window.getComputedStyle(r,null)),fx(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=X0(this.context,r),ux(r,4)&&(this.flags|=16)}return t}(),wU="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",iy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ad=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var lf=0;lf<iy.length;lf++)ad[iy.charCodeAt(lf)]=lf;var yU=function(t){var e=t.length*.75,r=t.length,n,s=0,a,A,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)a=ad[t.charCodeAt(n)],A=ad[t.charCodeAt(n+1)],o=ad[t.charCodeAt(n+2)],l=ad[t.charCodeAt(n+3)],d[s++]=a<<2|A>>4,d[s++]=(A&15)<<4|o>>2,d[s++]=(o&3)<<6|l&63;return c},bU=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},BU=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Hl=5,I1=11,ug=2,CU=I1-Hl,t4=65536>>Hl,NU=1<<Hl,dg=NU-1,SU=1024>>Hl,jU=t4+SU,EU=jU,FU=32,_U=EU+FU,kU=65536>>I1,UU=1<<CU,IU=UU-1,ay=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},QU=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},TU=function(t,e){var r=yU(t),n=Array.isArray(r)?BU(r):new Uint32Array(r),s=Array.isArray(r)?bU(r):new Uint16Array(r),a=24,A=ay(s,a/2,n[4]/2),o=n[5]===2?ay(s,(a+n[4])/2):QU(n,Math.ceil((a+n[4])/4));return new LU(n[0],n[1],n[2],n[3],A,o)},LU=function(){function t(e,r,n,s,a,A){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=a,this.data=A}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Hl],r=(r<<ug)+(e&dg),this.data[r];if(e<=65535)return r=this.index[t4+(e-55296>>Hl)],r=(r<<ug)+(e&dg),this.data[r];if(e<this.highStart)return r=_U-kU+(e>>I1),r=this.index[r],r+=e>>Hl&IU,r=this.index[r],r=(r<<ug)+(e&dg),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),Ay="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",PU=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var cf=0;cf<Ay.length;cf++)PU[Ay.charCodeAt(cf)]=cf;var OU=1,hg=2,fg=3,oy=4,ly=5,DU=7,cy=8,pg=9,gg=10,uy=11,dy=12,hy=13,fy=14,mg=15,RU=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var a=t.charCodeAt(r++);(a&64512)===56320?e.push(((s&1023)<<10)+(a&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},HU=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,a="";++s<r;){var A=t[s];A<=65535?n.push(A):(A-=65536,n.push((A>>10)+55296,A%1024+56320)),(s+1===r||n.length>16384)&&(a+=String.fromCharCode.apply(String,n),n.length=0)}return a},MU=TU(wU),qi="",xg="",$U=function(t){return MU.get(t)},KU=function(t,e,r){var n=r-2,s=e[n],a=e[r-1],A=e[r];if(a===hg&&A===fg)return qi;if(a===hg||a===fg||a===oy||A===hg||A===fg||A===oy)return xg;if(a===cy&&[cy,pg,uy,dy].indexOf(A)!==-1||(a===uy||a===pg)&&(A===pg||A===gg)||(a===dy||a===gg)&&A===gg||A===hy||A===ly||A===DU||a===OU)return qi;if(a===hy&&A===fy){for(;s===ly;)s=e[--n];if(s===fy)return qi}if(a===mg&&A===mg){for(var o=0;s===mg;)o++,s=e[--n];if(o%2===0)return qi}return xg},GU=function(t){var e=RU(t),r=e.length,n=0,s=0,a=e.map($U);return{next:function(){if(n>=r)return{done:!0,value:null};for(var A=qi;n<r&&(A=KU(e,a,++n))===qi;);if(A!==qi||n===r){var o=HU.apply(null,e.slice(s,n));return s=n,{value:o,done:!1}}return{done:!0,value:null}}}},VU=function(t){for(var e=GU(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},zU=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var s=r.getBoundingClientRect(),a=Math.round(s.height);if(t.body.removeChild(n),a===e)return!0}}return!1},qU=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,s=Z0(n.data).map(function(l){return Qn(l)}),a=0,A={},o=s.every(function(l,c){r.setStart(n,a),r.setEnd(n,a+l.length);var d=r.getBoundingClientRect();a+=l.length;var p=d.x>A.x||d.y>A.y;return A=d,c===0?!0:p});return t.body.removeChild(e),o},WU=function(){return typeof new Image().crossOrigin<"u"},JU=function(){return typeof new XMLHttpRequest().responseType=="string"},YU=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},py=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},XU=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var s=new Image,a=e.toDataURL();s.src=a;var A=dx(r,r,0,0,s);return n.fillStyle="red",n.fillRect(0,0,r,r),gy(A).then(function(o){n.drawImage(o,0,0);var l=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var c=t.createElement("div");return c.style.backgroundImage="url("+a+")",c.style.height=r+"px",py(l)?gy(dx(r,r,0,0,c)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),py(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},dx=function(t,e,r,n,s){var a="http://www.w3.org/2000/svg",A=document.createElementNS(a,"svg"),o=document.createElementNS(a,"foreignObject");return A.setAttributeNS(null,"width",t.toString()),A.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),A.appendChild(o),o.appendChild(s),A},gy=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},ms={get SUPPORT_RANGE_BOUNDS(){var t=zU(document);return Object.defineProperty(ms,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=ms.SUPPORT_RANGE_BOUNDS&&qU(document);return Object.defineProperty(ms,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=YU(document);return Object.defineProperty(ms,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?XU(document):Promise.resolve(!1);return Object.defineProperty(ms,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=WU();return Object.defineProperty(ms,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=JU();return Object.defineProperty(ms,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ms,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ms,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},bd=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),ZU=function(t,e,r,n){var s=rI(e,r),a=[],A=0;return s.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(ms.SUPPORT_RANGE_BOUNDS){var l=my(n,A,o.length).getClientRects();if(l.length>1){var c=Q1(o),d=0;c.forEach(function(g){a.push(new bd(g,zA.fromDOMRectList(t,my(n,d+A,g.length).getClientRects()))),d+=g.length})}else a.push(new bd(o,zA.fromDOMRectList(t,l)))}else{var p=n.splitText(o.length);a.push(new bd(o,eI(t,n))),n=p}else ms.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));A+=o.length}),a},eI=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(n,e);var a=X0(t,n);return n.firstChild&&s.replaceChild(n.firstChild,n),a}}return zA.EMPTY},my=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var s=n.createRange();return s.setStart(t,e),s.setEnd(t,e+r),s},Q1=function(t){if(ms.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return VU(t)},tI=function(t,e){if(ms.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return sI(t,e)},rI=function(t,e){return e.letterSpacing!==0?Q1(t):tI(t,e)},nI=[32,160,4961,65792,65793,4153,4241],sI=function(t,e){for(var r=kF(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],s,a=function(){if(s.value){var A=s.value.slice(),o=Z0(A),l="";o.forEach(function(c){nI.indexOf(c)===-1?l+=Qn(c):(l.length&&n.push(l),n.push(Qn(c)),l="")}),l.length&&n.push(l)}};!(s=r.next()).done;)a();return n},iI=function(){function t(e,r,n){this.text=aI(r.data,n.textTransform),this.textBounds=ZU(e,this.text,n,r)}return t}(),aI=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(AI,oI);case 2:return t.toUpperCase();default:return t}},AI=/(^|\s|:|-|\(|\))([a-z])/g,oI=function(t,e,r){return t.length>0?e+r.toUpperCase():t},r4=function(t){Pa(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.src=n.currentSrc||n.src,s.intrinsicWidth=n.naturalWidth,s.intrinsicHeight=n.naturalHeight,s.context.cache.addImage(s.src),s}return e}(gA),n4=function(t){Pa(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n,s.intrinsicWidth=n.width,s.intrinsicHeight=n.height,s}return e}(gA),s4=function(t){Pa(e,t);function e(r,n){var s=t.call(this,r,n)||this,a=new XMLSerializer,A=X0(r,n);return n.setAttribute("width",A.width+"px"),n.setAttribute("height",A.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(a.serializeToString(n)),s.intrinsicWidth=n.width.baseVal.value,s.intrinsicHeight=n.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(gA),i4=function(t){Pa(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(gA),hx=function(t){Pa(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.start=n.start,s.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,s}return e}(gA),lI=[{type:15,flags:0,unit:"px",number:3}],cI=[{type:16,flags:0,number:50}],uI=function(t){return t.width>t.height?new zA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new zA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},dI=function(t){var e=t.type===hI?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},y0="checkbox",b0="radio",hI="password",xy=707406591,T1=function(t){Pa(e,t);function e(r,n){var s=t.call(this,r,n)||this;switch(s.type=n.type.toLowerCase(),s.checked=n.checked,s.value=dI(n),(s.type===y0||s.type===b0)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=uI(s.bounds)),s.type){case y0:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=lI;break;case b0:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=cI;break}return s}return e}(gA),a4=function(t){Pa(e,t);function e(r,n){var s=t.call(this,r,n)||this,a=n.options[n.selectedIndex||0];return s.value=a&&a.text||"",s}return e}(gA),A4=function(t){Pa(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(gA),o4=function(t){Pa(e,t);function e(r,n){var s=t.call(this,r,n)||this;s.src=n.src,s.width=parseInt(n.width,10)||0,s.height=parseInt(n.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){s.tree=c4(r,n.contentWindow.document.documentElement);var a=n.contentWindow.document.documentElement?wd(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):MA.TRANSPARENT,A=n.contentWindow.document.body?wd(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):MA.TRANSPARENT;s.backgroundColor=qo(a)?qo(A)?s.styles.backgroundColor:A:a}}catch{}return s}return e}(gA),fI=["OL","UL","MENU"],Pf=function(t,e,r,n){for(var s=e.firstChild,a=void 0;s;s=a)if(a=s.nextSibling,u4(s)&&s.data.trim().length>0)r.textNodes.push(new iI(t,s,r.styles));else if(zc(s))if(p4(s)&&s.assignedNodes)s.assignedNodes().forEach(function(o){return Pf(t,o,r,n)});else{var A=l4(t,s);A.styles.isVisible()&&(pI(s,A,n)?A.flags|=4:gI(A.styles)&&(A.flags|=2),fI.indexOf(s.tagName)!==-1&&(A.flags|=8),r.elements.push(A),s.slot,s.shadowRoot?Pf(t,s.shadowRoot,A,n):!B0(s)&&!d4(s)&&!C0(s)&&Pf(t,s,A,n))}},l4=function(t,e){return px(e)?new r4(t,e):h4(e)?new n4(t,e):d4(e)?new s4(t,e):mI(e)?new i4(t,e):xI(e)?new hx(t,e):vI(e)?new T1(t,e):C0(e)?new a4(t,e):B0(e)?new A4(t,e):f4(e)?new o4(t,e):new gA(t,e)},c4=function(t,e){var r=l4(t,e);return r.flags|=4,Pf(t,e,r,r),r},pI=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||L1(t)&&r.styles.isTransparent()},gI=function(t){return t.isPositioned()||t.isFloating()},u4=function(t){return t.nodeType===Node.TEXT_NODE},zc=function(t){return t.nodeType===Node.ELEMENT_NODE},fx=function(t){return zc(t)&&typeof t.style<"u"&&!Of(t)},Of=function(t){return typeof t.className=="object"},mI=function(t){return t.tagName==="LI"},xI=function(t){return t.tagName==="OL"},vI=function(t){return t.tagName==="INPUT"},wI=function(t){return t.tagName==="HTML"},d4=function(t){return t.tagName==="svg"},L1=function(t){return t.tagName==="BODY"},h4=function(t){return t.tagName==="CANVAS"},vy=function(t){return t.tagName==="VIDEO"},px=function(t){return t.tagName==="IMG"},f4=function(t){return t.tagName==="IFRAME"},wy=function(t){return t.tagName==="STYLE"},yI=function(t){return t.tagName==="SCRIPT"},B0=function(t){return t.tagName==="TEXTAREA"},C0=function(t){return t.tagName==="SELECT"},p4=function(t){return t.tagName==="SLOT"},yy=function(t){return t.tagName.indexOf("-")>0},bI=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,s=e.counterReset,a=!0;n!==null&&n.forEach(function(o){var l=r.counters[o.counter];l&&o.increment!==0&&(a=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=o.increment)});var A=[];return a&&s.forEach(function(o){var l=r.counters[o.counter];A.push(o.counter),l||(l=r.counters[o.counter]=[]),l.push(o.reset)}),A},t}(),by={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},By={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},BI={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},CI={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},yc=function(t,e,r,n,s,a){return t<e||t>r?Yd(t,s,a.length>0):n.integers.reduce(function(A,o,l){for(;t>=o;)t-=o,A+=n.values[l];return A},"")+a},g4=function(t,e,r,n){var s="";do r||t--,s=n(t)+s,t/=e;while(t*e>=e);return s},In=function(t,e,r,n,s){var a=r-e+1;return(t<0?"-":"")+(g4(Math.abs(t),a,n,function(A){return Qn(Math.floor(A%a)+e)})+s)},Cl=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return g4(Math.abs(t),n,!1,function(s){return e[Math.floor(s%n)]})+r},_c=1,Co=2,No=4,Ad=8,UA=function(t,e,r,n,s,a){if(t<-9999||t>9999)return Yd(t,4,s.length>0);var A=Math.abs(t),o=s;if(A===0)return e[0]+o;for(var l=0;A>0&&l<=4;l++){var c=A%10;c===0&&es(a,_c)&&o!==""?o=e[c]+o:c>1||c===1&&l===0||c===1&&l===1&&es(a,Co)||c===1&&l===1&&es(a,No)&&t>100||c===1&&l>1&&es(a,Ad)?o=e[c]+(l>0?r[l-1]:"")+o:c===1&&l>0&&(o=r[l-1]+o),A=Math.floor(A/10)}return(t<0?n:"")+o},Cy="",Ny="",Sy="",vg="",Yd=function(t,e,r){var n=r?". ":"",s=r?"":"",a=r?", ":"",A=r?" ":"";switch(e){case 0:return""+A;case 1:return""+A;case 2:return""+A;case 5:var o=In(t,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return Cl(t,"",s);case 6:return yc(t,1,3999,by,3,n).toLowerCase();case 7:return yc(t,1,3999,by,3,n);case 8:return In(t,945,969,!1,n);case 9:return In(t,97,122,!1,n);case 10:return In(t,65,90,!1,n);case 11:return In(t,1632,1641,!0,n);case 12:case 49:return yc(t,1,9999,By,3,n);case 35:return yc(t,1,9999,By,3,n).toLowerCase();case 13:return In(t,2534,2543,!0,n);case 14:case 30:return In(t,6112,6121,!0,n);case 15:return Cl(t,"",s);case 16:return Cl(t,"",s);case 17:case 48:return UA(t,"",Cy,"",s,Co|No|Ad);case 47:return UA(t,"",Ny,"",s,_c|Co|No|Ad);case 42:return UA(t,"",Cy,"",s,Co|No|Ad);case 41:return UA(t,"",Ny,"",s,_c|Co|No|Ad);case 26:return UA(t,"","",Sy,s,0);case 25:return UA(t,"","",Sy,s,_c|Co|No);case 31:return UA(t,"","",vg,a,_c|Co|No);case 33:return UA(t,"","",vg,a,0);case 32:return UA(t,"","",vg,a,_c|Co|No);case 18:return In(t,2406,2415,!0,n);case 20:return yc(t,1,19999,CI,3,n);case 21:return In(t,2790,2799,!0,n);case 22:return In(t,2662,2671,!0,n);case 22:return yc(t,1,10999,BI,3,n);case 23:return Cl(t,"");case 24:return Cl(t,"");case 27:return In(t,3302,3311,!0,n);case 28:return Cl(t,"",s);case 29:return Cl(t,"",s);case 34:return In(t,3792,3801,!0,n);case 37:return In(t,6160,6169,!0,n);case 38:return In(t,4160,4169,!0,n);case 39:return In(t,2918,2927,!0,n);case 40:return In(t,1776,1785,!0,n);case 43:return In(t,3046,3055,!0,n);case 44:return In(t,3174,3183,!0,n);case 45:return In(t,3664,3673,!0,n);case 46:return In(t,3872,3881,!0,n);case 3:default:return In(t,48,57,!0,n)}},m4="data-html2canvas-ignore",jy=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new bI,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,s=NI(e,r);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var a=e.defaultView.pageXOffset,A=e.defaultView.pageYOffset,o=s.contentWindow,l=o.document,c=EI(s).then(function(){return zs(n,void 0,void 0,function(){var d,p;return Is(this,function(g){switch(g.label){case 0:return this.scrolledElements.forEach(UI),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),d=this.options.onclone,p=this.clonedReferenceElement,typeof p>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:g.sent(),g.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,jI(l)]:[3,4];case 3:g.sent(),g.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(l,p)}).then(function(){return s})]:[2,s]}})})});return l.open(),l.write(_I(document.doctype)+"<html></html>"),kI(this.referenceElement.ownerDocument,a,A),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),c},t.prototype.createElementClone=function(e){if(ux(e,2))debugger;if(h4(e))return this.createCanvasClone(e);if(vy(e))return this.createVideoClone(e);if(wy(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return px(r)&&(px(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),yy(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return wg(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(a,A){return A&&typeof A.cssText=="string"?a+A.cssText:a},""),s=e.cloneNode(!1);return s.textContent=n,s}}catch(a){if(this.context.logger.error("Unable to access cssRules property",a),a.name!=="SecurityError")throw a}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var a=e.getContext("2d"),A=s.getContext("2d");if(A)if(!this.options.allowTaint&&a)A.putImageData(a.getImageData(0,0,e.width,e.height),0,0);else{var o=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(o){var l=o.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}A.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,r,n){(!zc(r)||!yI(r)&&!r.hasAttribute(m4)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!zc(r)||!wy(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var s=this,a=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;a;a=a.nextSibling)if(zc(a)&&p4(a)&&typeof a.assignedNodes=="function"){var A=a.assignedNodes();A.length&&A.forEach(function(o){return s.appendChildNode(r,o,n)})}else this.appendChildNode(r,a,n)},t.prototype.cloneNode=function(e,r){if(u4(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&zc(e)&&(fx(e)||Of(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var a=n.getComputedStyle(e),A=n.getComputedStyle(e,":before"),o=n.getComputedStyle(e,":after");this.referenceElement===e&&fx(s)&&(this.clonedReferenceElement=s),L1(s)&&TI(s);var l=this.counters.parse(new sy(this.context,a)),c=this.resolvePseudoContent(e,s,A,Bd.BEFORE);yy(e)&&(r=!0),vy(e)||this.cloneChildNodes(e,s,r),c&&s.insertBefore(c,s.firstChild);var d=this.resolvePseudoContent(e,s,o,Bd.AFTER);return d&&s.appendChild(d),this.counters.pop(l),(a&&(this.options.copyStyles||Of(e))&&!f4(e)||r)&&wg(a,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(B0(e)||C0(e))&&(B0(s)||C0(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,s){var a=this;if(n){var A=n.content,o=r.ownerDocument;if(!(!o||!A||A==="none"||A==="-moz-alt-content"||n.display==="none")){this.counters.parse(new sy(this.context,n));var l=new mU(this.context,n),c=o.createElement("html2canvaspseudoelement");wg(n,c),l.content.forEach(function(p){if(p.type===0)c.appendChild(o.createTextNode(p.value));else if(p.type===22){var g=o.createElement("img");g.src=p.value,g.style.opacity="1",c.appendChild(g)}else if(p.type===18){if(p.name==="attr"){var h=p.values.filter(qr);h.length&&c.appendChild(o.createTextNode(e.getAttribute(h[0].value)||""))}else if(p.name==="counter"){var b=p.values.filter(fu),w=b[0],j=b[1];if(w&&qr(w)){var x=a.counters.getCounterValue(w.value),y=j&&qr(j)?cx.parse(a.context,j.value):3;c.appendChild(o.createTextNode(Yd(x,y,!1)))}}else if(p.name==="counters"){var B=p.values.filter(fu),w=B[0],E=B[1],j=B[2];if(w&&qr(w)){var L=a.counters.getCounterValues(w.value),U=j&&qr(j)?cx.parse(a.context,j.value):3,M=E&&E.type===0?E.value:"",G=L.map(function(k){return Yd(k,U,!1)}).join(M);c.appendChild(o.createTextNode(G))}}}else if(p.type===20)switch(p.value){case"open-quote":c.appendChild(o.createTextNode(ny(l.quotes,a.quoteDepth++,!0)));break;case"close-quote":c.appendChild(o.createTextNode(ny(l.quotes,--a.quoteDepth,!1)));break;default:c.appendChild(o.createTextNode(p.value))}}),c.className=gx+" "+mx;var d=s===Bd.BEFORE?" "+gx:" "+mx;return Of(r)?r.className.baseValue+=d:r.className+=d,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Bd;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Bd||(Bd={}));var NI=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(m4,"true"),t.body.appendChild(r),r},SI=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},jI=function(t){return Promise.all([].slice.call(t.images,0).map(SI))},EI=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var s=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var a=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(a),e(t))},50)}})},FI=["all","d","content"],wg=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);FI.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},_I=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},kI=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},UI=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},II=":before",QI=":after",gx="___html2canvas___pseudoelement_before",mx="___html2canvas___pseudoelement_after",Ey=`{
    content: "" !important;
    display: none !important;
}`,TI=function(t){LI(t,"."+gx+II+Ey+`
         .`+mx+QI+Ey)},LI=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},x4=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),PI=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(bg(e)||HI(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return zs(this,void 0,void 0,function(){var r,n,s,a,A=this;return Is(this,function(o){switch(o.label){case 0:return r=x4.isSameOrigin(e),n=!yg(e)&&this._options.useCORS===!0&&ms.SUPPORT_CORS_IMAGES&&!r,s=!yg(e)&&!r&&!bg(e)&&typeof this._options.proxy=="string"&&ms.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!yg(e)&&!bg(e)&&!s&&!n?[2]:(a=e,s?[4,this.proxy(a)]:[3,2]);case 1:a=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(l,c){var d=new Image;d.onload=function(){return l(d)},d.onerror=c,(MI(a)||n)&&(d.crossOrigin="anonymous"),d.src=a,d.complete===!0&&setTimeout(function(){return l(d)},500),A._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+A._options.imageTimeout+"ms) loading image")},A._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(a,A){var o=ms.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(o==="text")a(l.response);else{var p=new FileReader;p.addEventListener("load",function(){return a(p.result)},!1),p.addEventListener("error",function(g){return A(g)},!1),p.readAsDataURL(l.response)}else A("Failed to proxy resource "+s+" with status code "+l.status)},l.onerror=A;var c=n.indexOf("?")>-1?"&":"?";if(l.open("GET",""+n+c+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=o),r._options.imageTimeout){var d=r._options.imageTimeout;l.timeout=d,l.ontimeout=function(){return A("Timed out ("+d+"ms) proxying "+s)}}l.send()})},t}(),OI=/^data:image\/svg\+xml/i,DI=/^data:image\/.*;base64,/i,RI=/^data:image\/.*/i,HI=function(t){return ms.SUPPORT_SVG_DRAWING||!$I(t)},yg=function(t){return RI.test(t)},MI=function(t){return DI.test(t)},bg=function(t){return t.substr(0,4)==="blob"},$I=function(t){return t.substr(-3).toLowerCase()==="svg"||OI.test(t)},Ot=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),bc=function(t,e,r){return new Ot(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},uf=function(){function t(e,r,n,s){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=s}return t.prototype.subdivide=function(e,r){var n=bc(this.start,this.startControl,e),s=bc(this.startControl,this.endControl,e),a=bc(this.endControl,this.end,e),A=bc(n,s,e),o=bc(s,a,e),l=bc(A,o,e);return r?new t(this.start,n,A,l):new t(l,o,a,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Yi=function(t){return t.type===1},KI=function(){function t(e){var r=e.styles,n=e.bounds,s=id(r.borderTopLeftRadius,n.width,n.height),a=s[0],A=s[1],o=id(r.borderTopRightRadius,n.width,n.height),l=o[0],c=o[1],d=id(r.borderBottomRightRadius,n.width,n.height),p=d[0],g=d[1],h=id(r.borderBottomLeftRadius,n.width,n.height),b=h[0],w=h[1],j=[];j.push((a+l)/n.width),j.push((b+p)/n.width),j.push((A+w)/n.height),j.push((c+g)/n.height);var x=Math.max.apply(Math,j);x>1&&(a/=x,A/=x,l/=x,c/=x,p/=x,g/=x,b/=x,w/=x);var y=n.width-l,B=n.height-g,E=n.width-p,L=n.height-w,U=r.borderTopWidth,M=r.borderRightWidth,G=r.borderBottomWidth,N=r.borderLeftWidth,$=sn(r.paddingTop,e.bounds.width),k=sn(r.paddingRight,e.bounds.width),_=sn(r.paddingBottom,e.bounds.width),z=sn(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=a>0||A>0?hn(n.left+N/3,n.top+U/3,a-N/3,A-U/3,Rr.TOP_LEFT):new Ot(n.left+N/3,n.top+U/3),this.topRightBorderDoubleOuterBox=a>0||A>0?hn(n.left+y,n.top+U/3,l-M/3,c-U/3,Rr.TOP_RIGHT):new Ot(n.left+n.width-M/3,n.top+U/3),this.bottomRightBorderDoubleOuterBox=p>0||g>0?hn(n.left+E,n.top+B,p-M/3,g-G/3,Rr.BOTTOM_RIGHT):new Ot(n.left+n.width-M/3,n.top+n.height-G/3),this.bottomLeftBorderDoubleOuterBox=b>0||w>0?hn(n.left+N/3,n.top+L,b-N/3,w-G/3,Rr.BOTTOM_LEFT):new Ot(n.left+N/3,n.top+n.height-G/3),this.topLeftBorderDoubleInnerBox=a>0||A>0?hn(n.left+N*2/3,n.top+U*2/3,a-N*2/3,A-U*2/3,Rr.TOP_LEFT):new Ot(n.left+N*2/3,n.top+U*2/3),this.topRightBorderDoubleInnerBox=a>0||A>0?hn(n.left+y,n.top+U*2/3,l-M*2/3,c-U*2/3,Rr.TOP_RIGHT):new Ot(n.left+n.width-M*2/3,n.top+U*2/3),this.bottomRightBorderDoubleInnerBox=p>0||g>0?hn(n.left+E,n.top+B,p-M*2/3,g-G*2/3,Rr.BOTTOM_RIGHT):new Ot(n.left+n.width-M*2/3,n.top+n.height-G*2/3),this.bottomLeftBorderDoubleInnerBox=b>0||w>0?hn(n.left+N*2/3,n.top+L,b-N*2/3,w-G*2/3,Rr.BOTTOM_LEFT):new Ot(n.left+N*2/3,n.top+n.height-G*2/3),this.topLeftBorderStroke=a>0||A>0?hn(n.left+N/2,n.top+U/2,a-N/2,A-U/2,Rr.TOP_LEFT):new Ot(n.left+N/2,n.top+U/2),this.topRightBorderStroke=a>0||A>0?hn(n.left+y,n.top+U/2,l-M/2,c-U/2,Rr.TOP_RIGHT):new Ot(n.left+n.width-M/2,n.top+U/2),this.bottomRightBorderStroke=p>0||g>0?hn(n.left+E,n.top+B,p-M/2,g-G/2,Rr.BOTTOM_RIGHT):new Ot(n.left+n.width-M/2,n.top+n.height-G/2),this.bottomLeftBorderStroke=b>0||w>0?hn(n.left+N/2,n.top+L,b-N/2,w-G/2,Rr.BOTTOM_LEFT):new Ot(n.left+N/2,n.top+n.height-G/2),this.topLeftBorderBox=a>0||A>0?hn(n.left,n.top,a,A,Rr.TOP_LEFT):new Ot(n.left,n.top),this.topRightBorderBox=l>0||c>0?hn(n.left+y,n.top,l,c,Rr.TOP_RIGHT):new Ot(n.left+n.width,n.top),this.bottomRightBorderBox=p>0||g>0?hn(n.left+E,n.top+B,p,g,Rr.BOTTOM_RIGHT):new Ot(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=b>0||w>0?hn(n.left,n.top+L,b,w,Rr.BOTTOM_LEFT):new Ot(n.left,n.top+n.height),this.topLeftPaddingBox=a>0||A>0?hn(n.left+N,n.top+U,Math.max(0,a-N),Math.max(0,A-U),Rr.TOP_LEFT):new Ot(n.left+N,n.top+U),this.topRightPaddingBox=l>0||c>0?hn(n.left+Math.min(y,n.width-M),n.top+U,y>n.width+M?0:Math.max(0,l-M),Math.max(0,c-U),Rr.TOP_RIGHT):new Ot(n.left+n.width-M,n.top+U),this.bottomRightPaddingBox=p>0||g>0?hn(n.left+Math.min(E,n.width-N),n.top+Math.min(B,n.height-G),Math.max(0,p-M),Math.max(0,g-G),Rr.BOTTOM_RIGHT):new Ot(n.left+n.width-M,n.top+n.height-G),this.bottomLeftPaddingBox=b>0||w>0?hn(n.left+N,n.top+Math.min(L,n.height-G),Math.max(0,b-N),Math.max(0,w-G),Rr.BOTTOM_LEFT):new Ot(n.left+N,n.top+n.height-G),this.topLeftContentBox=a>0||A>0?hn(n.left+N+z,n.top+U+$,Math.max(0,a-(N+z)),Math.max(0,A-(U+$)),Rr.TOP_LEFT):new Ot(n.left+N+z,n.top+U+$),this.topRightContentBox=l>0||c>0?hn(n.left+Math.min(y,n.width+N+z),n.top+U+$,y>n.width+N+z?0:l-N+z,c-(U+$),Rr.TOP_RIGHT):new Ot(n.left+n.width-(M+k),n.top+U+$),this.bottomRightContentBox=p>0||g>0?hn(n.left+Math.min(E,n.width-(N+z)),n.top+Math.min(B,n.height+U+$),Math.max(0,p-(M+k)),g-(G+_),Rr.BOTTOM_RIGHT):new Ot(n.left+n.width-(M+k),n.top+n.height-(G+_)),this.bottomLeftContentBox=b>0||w>0?hn(n.left+N+z,n.top+L,Math.max(0,b-(N+z)),w-(G+_),Rr.BOTTOM_LEFT):new Ot(n.left+N+z,n.top+n.height-(G+_))}return t}(),Rr;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Rr||(Rr={}));var hn=function(t,e,r,n,s){var a=4*((Math.sqrt(2)-1)/3),A=r*a,o=n*a,l=t+r,c=e+n;switch(s){case Rr.TOP_LEFT:return new uf(new Ot(t,c),new Ot(t,c-o),new Ot(l-A,e),new Ot(l,e));case Rr.TOP_RIGHT:return new uf(new Ot(t,e),new Ot(t+A,e),new Ot(l,c-o),new Ot(l,c));case Rr.BOTTOM_RIGHT:return new uf(new Ot(l,e),new Ot(l,e+o),new Ot(t+A,c),new Ot(t,c));case Rr.BOTTOM_LEFT:default:return new uf(new Ot(l,c),new Ot(l-A,c),new Ot(t,e+o),new Ot(t,e))}},N0=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},GI=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},S0=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},VI=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),df=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),zI=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),qI=function(t){return t.type===0},v4=function(t){return t.type===1},WI=function(t){return t.type===2},Fy=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},JI=function(t,e,r,n,s){return t.map(function(a,A){switch(A){case 0:return a.add(e,r);case 1:return a.add(e+n,r);case 2:return a.add(e+n,r+s);case 3:return a.add(e,r+s)}return a})},w4=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),y4=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new KI(this.container),this.container.styles.opacity<1&&this.effects.push(new zI(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,a=this.container.styles.transform;this.effects.push(new VI(n,s,a))}if(this.container.styles.overflowX!==0){var A=N0(this.curves),o=S0(this.curves);Fy(A,o)?this.effects.push(new df(A,6)):(this.effects.push(new df(A,2)),this.effects.push(new df(o,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,s=this.effects.slice(0);n;){var a=n.effects.filter(function(l){return!v4(l)});if(r||n.container.styles.position!==0||!n.parent){if(s.unshift.apply(s,a),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var A=N0(n.curves),o=S0(n.curves);Fy(A,o)||s.unshift(new df(o,6))}}else s.unshift.apply(s,a);n=n.parent}return s.filter(function(l){return es(l.target,e)})},t}(),xx=function(t,e,r,n){t.container.elements.forEach(function(s){var a=es(s.flags,4),A=es(s.flags,2),o=new y4(s,t);es(s.styles.display,2048)&&n.push(o);var l=es(s.flags,8)?[]:n;if(a||A){var c=a||s.styles.isPositioned()?r:e,d=new w4(o);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var p=s.styles.zIndex.order;if(p<0){var g=0;c.negativeZIndex.some(function(b,w){return p>b.element.container.styles.zIndex.order?(g=w,!1):g>0}),c.negativeZIndex.splice(g,0,d)}else if(p>0){var h=0;c.positiveZIndex.some(function(b,w){return p>=b.element.container.styles.zIndex.order?(h=w+1,!1):h>0}),c.positiveZIndex.splice(h,0,d)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else s.styles.isFloating()?c.nonPositionedFloats.push(d):c.nonPositionedInlineLevel.push(d);xx(o,d,a?d:r,l)}else s.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),xx(o,e,r,l);es(s.flags,8)&&b4(s,l)})},b4=function(t,e){for(var r=t instanceof hx?t.start:1,n=t instanceof hx?t.reversed:!1,s=0;s<e.length;s++){var a=e[s];a.container instanceof i4&&typeof a.container.value=="number"&&a.container.value!==0&&(r=a.container.value),a.listValue=Yd(r,a.container.styles.listStyleType,!0),r+=n?-1:1}},YI=function(t){var e=new y4(t,null),r=new w4(e),n=[];return xx(e,r,r,n),b4(e.container,n),r},_y=function(t,e){switch(e){case 0:return ea(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return ea(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return ea(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return ea(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},XI=function(t,e){switch(e){case 0:return ea(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return ea(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return ea(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return ea(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},ZI=function(t,e){switch(e){case 0:return ea(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return ea(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return ea(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return ea(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},eQ=function(t,e){switch(e){case 0:return hf(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return hf(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return hf(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return hf(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},hf=function(t,e){var r=[];return Yi(t)?r.push(t.subdivide(.5,!1)):r.push(t),Yi(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},ea=function(t,e,r,n){var s=[];return Yi(t)?s.push(t.subdivide(.5,!1)):s.push(t),Yi(r)?s.push(r.subdivide(.5,!0)):s.push(r),Yi(n)?s.push(n.subdivide(.5,!0).reverse()):s.push(n),Yi(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},B4=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},j0=function(t){var e=t.styles,r=t.bounds,n=sn(e.paddingLeft,r.width),s=sn(e.paddingRight,r.width),a=sn(e.paddingTop,r.width),A=sn(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,a+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+s),-(e.borderTopWidth+e.borderBottomWidth+a+A))},tQ=function(t,e){return t===0?e.bounds:t===2?j0(e):B4(e)},rQ=function(t,e){return t===0?e.bounds:t===2?j0(e):B4(e)},Bg=function(t,e,r){var n=tQ(kc(t.styles.backgroundOrigin,e),t),s=rQ(kc(t.styles.backgroundClip,e),t),a=nQ(kc(t.styles.backgroundSize,e),r,n),A=a[0],o=a[1],l=id(kc(t.styles.backgroundPosition,e),n.width-A,n.height-o),c=sQ(kc(t.styles.backgroundRepeat,e),l,a,n,s),d=Math.round(n.left+l[0]),p=Math.round(n.top+l[1]);return[c,d,p,A,o]},Bc=function(t){return qr(t)&&t.value===ru.AUTO},ff=function(t){return typeof t=="number"},nQ=function(t,e,r){var n=e[0],s=e[1],a=e[2],A=t[0],o=t[1];if(!A)return[0,0];if(Vn(A)&&o&&Vn(o))return[sn(A,r.width),sn(o,r.height)];var l=ff(a);if(qr(A)&&(A.value===ru.CONTAIN||A.value===ru.COVER)){if(ff(a)){var c=r.width/r.height;return c<a!=(A.value===ru.COVER)?[r.width,r.width/a]:[r.height*a,r.height]}return[r.width,r.height]}var d=ff(n),p=ff(s),g=d||p;if(Bc(A)&&(!o||Bc(o))){if(d&&p)return[n,s];if(!l&&!g)return[r.width,r.height];if(g&&l){var h=d?n:s*a,b=p?s:n/a;return[h,b]}var w=d?n:r.width,j=p?s:r.height;return[w,j]}if(l){var x=0,y=0;return Vn(A)?x=sn(A,r.width):Vn(o)&&(y=sn(o,r.height)),Bc(A)?x=y*a:(!o||Bc(o))&&(y=x/a),[x,y]}var B=null,E=null;if(Vn(A)?B=sn(A,r.width):o&&Vn(o)&&(E=sn(o,r.height)),B!==null&&(!o||Bc(o))&&(E=d&&p?B/n*s:r.height),E!==null&&Bc(A)&&(B=d&&p?E/s*n:r.width),B!==null&&E!==null)return[B,E];throw new Error("Unable to calculate background-size for element")},kc=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},sQ=function(t,e,r,n,s){var a=e[0],A=e[1],o=r[0],l=r[1];switch(t){case 2:return[new Ot(Math.round(n.left),Math.round(n.top+A)),new Ot(Math.round(n.left+n.width),Math.round(n.top+A)),new Ot(Math.round(n.left+n.width),Math.round(l+n.top+A)),new Ot(Math.round(n.left),Math.round(l+n.top+A))];case 3:return[new Ot(Math.round(n.left+a),Math.round(n.top)),new Ot(Math.round(n.left+a+o),Math.round(n.top)),new Ot(Math.round(n.left+a+o),Math.round(n.height+n.top)),new Ot(Math.round(n.left+a),Math.round(n.height+n.top))];case 1:return[new Ot(Math.round(n.left+a),Math.round(n.top+A)),new Ot(Math.round(n.left+a+o),Math.round(n.top+A)),new Ot(Math.round(n.left+a+o),Math.round(n.top+A+l)),new Ot(Math.round(n.left+a),Math.round(n.top+A+l))];default:return[new Ot(Math.round(s.left),Math.round(s.top)),new Ot(Math.round(s.left+s.width),Math.round(s.top)),new Ot(Math.round(s.left+s.width),Math.round(s.height+s.top)),new Ot(Math.round(s.left),Math.round(s.height+s.top))]}},iQ="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",ky="Hidden Text",aQ=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),s=this._document.createElement("img"),a=this._document.createElement("span"),A=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",A.appendChild(n),s.src=iQ,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",a.style.fontFamily=e,a.style.fontSize=r,a.style.margin="0",a.style.padding="0",a.appendChild(this._document.createTextNode(ky)),n.appendChild(a),n.appendChild(s);var o=s.offsetTop-a.offsetTop+2;n.removeChild(a),n.appendChild(this._document.createTextNode(ky)),n.style.lineHeight="normal",s.style.verticalAlign="super";var l=s.offsetTop-n.offsetTop+2;return A.removeChild(n),{baseline:o,middle:l}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),C4=function(){function t(e,r){this.context=e,this.options=r}return t}(),AQ=1e4,oQ=function(t){Pa(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s._activeEffects=[],s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),n.canvas||(s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px"),s.fontMetrics=new aQ(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),s}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(s){return n.applyEffect(s)})},e.prototype.applyEffect=function(r){this.ctx.save(),WI(r)&&(this.ctx.globalAlpha=r.opacity),qI(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),v4(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return zs(this,void 0,void 0,function(){var n;return Is(this,function(s){switch(s.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return zs(this,void 0,void 0,function(){return Is(this,function(n){switch(n.label){case 0:if(es(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,s){var a=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+s);else{var A=Q1(r.text);A.reduce(function(o,l){return a.ctx.fillText(l,o,r.bounds.top+s),o+a.ctx.measureText(l).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(A){return A==="normal"||A==="small-caps"}).join(""),s=hQ(r.fontFamily).join(", "),a=oh(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,a,s].join(" "),s,a]},e.prototype.renderTextNode=function(r,n){return zs(this,void 0,void 0,function(){var s,a,A,o,l,c,d,p,g=this;return Is(this,function(h){return s=this.createFontStyle(n),a=s[0],A=s[1],o=s[2],this.ctx.font=a,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(A,o),c=l.baseline,d=l.middle,p=n.paintOrder,r.textBounds.forEach(function(b){p.forEach(function(w){switch(w){case 0:g.ctx.fillStyle=ss(n.color),g.renderTextWithLetterSpacing(b,n.letterSpacing,c);var j=n.textShadow;j.length&&b.text.trim().length&&(j.slice(0).reverse().forEach(function(x){g.ctx.shadowColor=ss(x.color),g.ctx.shadowOffsetX=x.offsetX.number*g.options.scale,g.ctx.shadowOffsetY=x.offsetY.number*g.options.scale,g.ctx.shadowBlur=x.blur.number,g.renderTextWithLetterSpacing(b,n.letterSpacing,c)}),g.ctx.shadowColor="",g.ctx.shadowOffsetX=0,g.ctx.shadowOffsetY=0,g.ctx.shadowBlur=0),n.textDecorationLine.length&&(g.ctx.fillStyle=ss(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(x){switch(x){case 1:g.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top+c),b.bounds.width,1);break;case 2:g.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top),b.bounds.width,1);break;case 3:g.ctx.fillRect(b.bounds.left,Math.ceil(b.bounds.top+d),b.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&b.text.trim().length&&(g.ctx.strokeStyle=ss(n.webkitTextStrokeColor),g.ctx.lineWidth=n.webkitTextStrokeWidth,g.ctx.lineJoin=window.chrome?"miter":"round",g.ctx.strokeText(b.text,b.bounds.left,b.bounds.top+c)),g.ctx.strokeStyle="",g.ctx.lineWidth=0,g.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,s){if(s&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var a=j0(r),A=S0(n);this.path(A),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,r.intrinsicWidth,r.intrinsicHeight,a.left,a.top,a.width,a.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return zs(this,void 0,void 0,function(){var n,s,a,A,o,l,y,y,c,d,p,g,E,h,b,L,w,j,x,y,B,E,L;return Is(this,function(U){switch(U.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,s=r.curves,a=n.styles,A=0,o=n.textNodes,U.label=1;case 1:return A<o.length?(l=o[A],[4,this.renderTextNode(l,a)]):[3,4];case 2:U.sent(),U.label=3;case 3:return A++,[3,1];case 4:if(!(n instanceof r4))return[3,8];U.label=5;case 5:return U.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return y=U.sent(),this.renderReplacedElement(n,s,y),[3,8];case 7:return U.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof n4&&this.renderReplacedElement(n,s,n.canvas),!(n instanceof s4))return[3,12];U.label=9;case 9:return U.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return y=U.sent(),this.renderReplacedElement(n,s,y),[3,12];case 11:return U.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof o4&&n.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,c.render(n.tree)]):[3,14];case 13:d=U.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),U.label=14;case 14:if(n instanceof T1&&(p=Math.min(n.bounds.width,n.bounds.height),n.type===y0?n.checked&&(this.ctx.save(),this.path([new Ot(n.bounds.left+p*.39363,n.bounds.top+p*.79),new Ot(n.bounds.left+p*.16,n.bounds.top+p*.5549),new Ot(n.bounds.left+p*.27347,n.bounds.top+p*.44071),new Ot(n.bounds.left+p*.39694,n.bounds.top+p*.5649),new Ot(n.bounds.left+p*.72983,n.bounds.top+p*.23),new Ot(n.bounds.left+p*.84,n.bounds.top+p*.34085),new Ot(n.bounds.left+p*.39363,n.bounds.top+p*.79)]),this.ctx.fillStyle=ss(xy),this.ctx.fill(),this.ctx.restore()):n.type===b0&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+p/2,n.bounds.top+p/2,p/4,0,Math.PI*2,!0),this.ctx.fillStyle=ss(xy),this.ctx.fill(),this.ctx.restore())),lQ(n)&&n.value.length){switch(g=this.createFontStyle(a),E=g[0],h=g[1],b=this.fontMetrics.getMetrics(E,h).baseline,this.ctx.font=E,this.ctx.fillStyle=ss(a.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=uQ(n.styles.textAlign),L=j0(n),w=0,n.styles.textAlign){case 1:w+=L.width/2;break;case 2:w+=L.width;break}j=L.add(w,0,0,-L.height/2+1),this.ctx.save(),this.path([new Ot(L.left,L.top),new Ot(L.left+L.width,L.top),new Ot(L.left+L.width,L.top+L.height),new Ot(L.left,L.top+L.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new bd(n.value,j),a.letterSpacing,b),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!es(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(x=n.styles.listStyleImage,x.type!==0)return[3,18];y=void 0,B=x.url,U.label=15;case 15:return U.trys.push([15,17,,18]),[4,this.context.cache.match(B)];case 16:return y=U.sent(),this.ctx.drawImage(y,n.bounds.left-(y.width+10),n.bounds.top),[3,18];case 17:return U.sent(),this.context.logger.error("Error loading list-style-image "+B),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(E=this.createFontStyle(a)[0],this.ctx.font=E,this.ctx.fillStyle=ss(a.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",L=new zA(n.bounds.left,n.bounds.top+sn(n.styles.paddingTop,n.bounds.width),n.bounds.width,ty(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new bd(r.listValue,L),a.letterSpacing,ty(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),U.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return zs(this,void 0,void 0,function(){var n,s,x,a,A,x,o,l,x,c,d,x,p,g,x,h,b,x,w,j,x;return Is(this,function(y){switch(y.label){case 0:if(es(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:y.sent(),n=0,s=r.negativeZIndex,y.label=2;case 2:return n<s.length?(x=s[n],[4,this.renderStack(x)]):[3,5];case 3:y.sent(),y.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:y.sent(),a=0,A=r.nonInlineLevel,y.label=7;case 7:return a<A.length?(x=A[a],[4,this.renderNode(x)]):[3,10];case 8:y.sent(),y.label=9;case 9:return a++,[3,7];case 10:o=0,l=r.nonPositionedFloats,y.label=11;case 11:return o<l.length?(x=l[o],[4,this.renderStack(x)]):[3,14];case 12:y.sent(),y.label=13;case 13:return o++,[3,11];case 14:c=0,d=r.nonPositionedInlineLevel,y.label=15;case 15:return c<d.length?(x=d[c],[4,this.renderStack(x)]):[3,18];case 16:y.sent(),y.label=17;case 17:return c++,[3,15];case 18:p=0,g=r.inlineLevel,y.label=19;case 19:return p<g.length?(x=g[p],[4,this.renderNode(x)]):[3,22];case 20:y.sent(),y.label=21;case 21:return p++,[3,19];case 22:h=0,b=r.zeroOrAutoZIndexOrTransformedOrOpacity,y.label=23;case 23:return h<b.length?(x=b[h],[4,this.renderStack(x)]):[3,26];case 24:y.sent(),y.label=25;case 25:return h++,[3,23];case 26:w=0,j=r.positiveZIndex,y.label=27;case 27:return w<j.length?(x=j[w],[4,this.renderStack(x)]):[3,30];case 28:y.sent(),y.label=29;case 29:return w++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(s,a){var A=Yi(s)?s.start:s;a===0?n.ctx.moveTo(A.x,A.y):n.ctx.lineTo(A.x,A.y),Yi(s)&&n.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(r,n,s,a){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(s,a),this.ctx.fill(),this.ctx.translate(-s,-a)},e.prototype.resizeImage=function(r,n,s){var a;if(r.width===n&&r.height===s)return r;var A=(a=this.canvas.ownerDocument)!==null&&a!==void 0?a:document,o=A.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,s);var l=o.getContext("2d");return l.drawImage(r,0,0,r.width,r.height,0,0,n,s),o},e.prototype.renderBackgroundImage=function(r){return zs(this,void 0,void 0,function(){var n,s,a,A,o,l;return Is(this,function(c){switch(c.label){case 0:n=r.styles.backgroundImage.length-1,s=function(d){var p,g,h,$,ue,fe,z,O,G,b,$,ue,fe,z,O,w,j,x,y,B,E,L,U,M,G,N,$,k,_,z,O,te,ue,fe,ie,de,ge,ve,I,H,re,Y;return Is(this,function(le){switch(le.label){case 0:if(d.type!==0)return[3,5];p=void 0,g=d.url,le.label=1;case 1:return le.trys.push([1,3,,4]),[4,a.context.cache.match(g)];case 2:return p=le.sent(),[3,4];case 3:return le.sent(),a.context.logger.error("Error loading background-image "+g),[3,4];case 4:return p&&(h=Bg(r,n,[p.width,p.height,p.width/p.height]),$=h[0],ue=h[1],fe=h[2],z=h[3],O=h[4],G=a.ctx.createPattern(a.resizeImage(p,z,O),"repeat"),a.renderRepeat($,G,ue,fe)),[3,6];case 5:q_(d)?(b=Bg(r,n,[null,null,null]),$=b[0],ue=b[1],fe=b[2],z=b[3],O=b[4],w=$_(d.angle,z,O),j=w[0],x=w[1],y=w[2],B=w[3],E=w[4],L=document.createElement("canvas"),L.width=z,L.height=O,U=L.getContext("2d"),M=U.createLinearGradient(x,B,y,E),Zw(d.stops,j).forEach(function(me){return M.addColorStop(me.stop,ss(me.color))}),U.fillStyle=M,U.fillRect(0,0,z,O),z>0&&O>0&&(G=a.ctx.createPattern(L,"repeat"),a.renderRepeat($,G,ue,fe))):W_(d)&&(N=Bg(r,n,[null,null,null]),$=N[0],k=N[1],_=N[2],z=N[3],O=N[4],te=d.position.length===0?[k1]:d.position,ue=sn(te[0],z),fe=sn(te[te.length-1],O),ie=K_(d,ue,fe,z,O),de=ie[0],ge=ie[1],de>0&&ge>0&&(ve=a.ctx.createRadialGradient(k+ue,_+fe,0,k+ue,_+fe,de),Zw(d.stops,de*2).forEach(function(me){return ve.addColorStop(me.stop,ss(me.color))}),a.path($),a.ctx.fillStyle=ve,de!==ge?(I=r.bounds.left+.5*r.bounds.width,H=r.bounds.top+.5*r.bounds.height,re=ge/de,Y=1/re,a.ctx.save(),a.ctx.translate(I,H),a.ctx.transform(1,0,0,re,0,0),a.ctx.translate(-I,-H),a.ctx.fillRect(k,Y*(_-H)+H,z,O*Y),a.ctx.restore()):a.ctx.fill())),le.label=6;case 6:return n--,[2]}})},a=this,A=0,o=r.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return A<o.length?(l=o[A],[5,s(l)]):[3,4];case 2:c.sent(),c.label=3;case 3:return A++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,s){return zs(this,void 0,void 0,function(){return Is(this,function(a){return this.path(_y(s,n)),this.ctx.fillStyle=ss(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,s,a){return zs(this,void 0,void 0,function(){var A,o;return Is(this,function(l){switch(l.label){case 0:return n<3?[4,this.renderSolidBorder(r,s,a)]:[3,2];case 1:return l.sent(),[2];case 2:return A=XI(a,s),this.path(A),this.ctx.fillStyle=ss(r),this.ctx.fill(),o=ZI(a,s),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return zs(this,void 0,void 0,function(){var n,s,a,A,o,l,c,d,p=this;return Is(this,function(g){switch(g.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,s=!qo(n.backgroundColor)||n.backgroundImage.length,a=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],A=cQ(kc(n.backgroundClip,0),r.curves),s||n.boxShadow.length?(this.ctx.save(),this.path(A),this.ctx.clip(),qo(n.backgroundColor)||(this.ctx.fillStyle=ss(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:g.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(h){p.ctx.save();var b=N0(r.curves),w=h.inset?0:AQ,j=JI(b,-w+(h.inset?1:-1)*h.spread.number,(h.inset?1:-1)*h.spread.number,h.spread.number*(h.inset?-2:2),h.spread.number*(h.inset?-2:2));h.inset?(p.path(b),p.ctx.clip(),p.mask(j)):(p.mask(b),p.ctx.clip(),p.path(j)),p.ctx.shadowOffsetX=h.offsetX.number+w,p.ctx.shadowOffsetY=h.offsetY.number,p.ctx.shadowColor=ss(h.color),p.ctx.shadowBlur=h.blur.number,p.ctx.fillStyle=h.inset?ss(h.color):"rgba(0,0,0,1)",p.ctx.fill(),p.ctx.restore()}),g.label=2;case 2:o=0,l=0,c=a,g.label=3;case 3:return l<c.length?(d=c[l],d.style!==0&&!qo(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return g.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,3)];case 6:return g.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,r.curves)];case 8:return g.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,r.curves)];case 10:g.sent(),g.label=11;case 11:o++,g.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,s,a,A){return zs(this,void 0,void 0,function(){var o,l,c,d,p,g,h,b,w,j,x,y,B,E,L,U,L,U;return Is(this,function(M){return this.ctx.save(),o=eQ(a,s),l=_y(a,s),A===2&&(this.path(l),this.ctx.clip()),Yi(l[0])?(c=l[0].start.x,d=l[0].start.y):(c=l[0].x,d=l[0].y),Yi(l[1])?(p=l[1].end.x,g=l[1].end.y):(p=l[1].x,g=l[1].y),s===0||s===2?h=Math.abs(c-p):h=Math.abs(d-g),this.ctx.beginPath(),A===3?this.formatPath(o):this.formatPath(l.slice(0,2)),b=n<3?n*3:n*2,w=n<3?n*2:n,A===3&&(b=n,w=n),j=!0,h<=b*2?j=!1:h<=b*2+w?(x=h/(2*b+w),b*=x,w*=x):(y=Math.floor((h+w)/(b+w)),B=(h-y*b)/(y-1),E=(h-(y+1)*b)/y,w=E<=0||Math.abs(w-B)<Math.abs(w-E)?B:E),j&&(A===3?this.ctx.setLineDash([0,b+w]):this.ctx.setLineDash([b,w])),A===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=ss(r),this.ctx.stroke(),this.ctx.setLineDash([]),A===2&&(Yi(l[0])&&(L=l[3],U=l[0],this.ctx.beginPath(),this.formatPath([new Ot(L.end.x,L.end.y),new Ot(U.start.x,U.start.y)]),this.ctx.stroke()),Yi(l[1])&&(L=l[1],U=l[2],this.ctx.beginPath(),this.formatPath([new Ot(L.end.x,L.end.y),new Ot(U.start.x,U.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return zs(this,void 0,void 0,function(){var n;return Is(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ss(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=YI(r),[4,this.renderStack(n)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(C4),lQ=function(t){return t instanceof A4||t instanceof a4?!0:t instanceof T1&&t.type!==b0&&t.type!==y0},cQ=function(t,e){switch(t){case 0:return N0(e);case 2:return GI(e);case 1:default:return S0(e)}},uQ=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},dQ=["-apple-system","system-ui"],hQ=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return dQ.indexOf(e)===-1}):t},fQ=function(t){Pa(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=n,s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),s}return e.prototype.render=function(r){return zs(this,void 0,void 0,function(){var n,s;return Is(this,function(a){switch(a.label){case 0:return n=dx(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,pQ(n)];case 1:return s=a.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ss(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(C4),pQ=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},gQ=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Gh([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Gh([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Gh([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Gh([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),mQ=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new gQ({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new PI(this,e)}return t.instanceCount=1,t}(),xQ=function(t,e){return e===void 0&&(e={}),vQ(t,e)};typeof window<"u"&&x4.setContext(window);var vQ=function(t,e){return zs(void 0,void 0,void 0,function(){var r,n,s,a,A,o,l,c,d,p,g,h,b,w,j,x,y,B,E,L,M,U,M,G,N,$,k,_,z,O,te,ue,fe,ie,de,ge,ve,I,H,re;return Is(this,function(Y){switch(Y.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return s={allowTaint:(G=e.allowTaint)!==null&&G!==void 0?G:!1,imageTimeout:(N=e.imageTimeout)!==null&&N!==void 0?N:15e3,proxy:e.proxy,useCORS:($=e.useCORS)!==null&&$!==void 0?$:!1},a=Ym({logging:(k=e.logging)!==null&&k!==void 0?k:!0,cache:e.cache},s),A={windowWidth:(_=e.windowWidth)!==null&&_!==void 0?_:n.innerWidth,windowHeight:(z=e.windowHeight)!==null&&z!==void 0?z:n.innerHeight,scrollX:(O=e.scrollX)!==null&&O!==void 0?O:n.pageXOffset,scrollY:(te=e.scrollY)!==null&&te!==void 0?te:n.pageYOffset},o=new zA(A.scrollX,A.scrollY,A.windowWidth,A.windowHeight),l=new mQ(a,o),c=(ue=e.foreignObjectRendering)!==null&&ue!==void 0?ue:!1,d={allowTaint:(fe=e.allowTaint)!==null&&fe!==void 0?fe:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},l.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),p=new jy(l,t,d),g=p.clonedReferenceElement,g?[4,p.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return h=Y.sent(),b=L1(g)||wI(g)?JE(g.ownerDocument):X0(l,g),w=b.width,j=b.height,x=b.left,y=b.top,B=wQ(l,g,e.backgroundColor),E={canvas:e.canvas,backgroundColor:B,scale:(de=(ie=e.scale)!==null&&ie!==void 0?ie:n.devicePixelRatio)!==null&&de!==void 0?de:1,x:((ge=e.x)!==null&&ge!==void 0?ge:0)+x,y:((ve=e.y)!==null&&ve!==void 0?ve:0)+y,width:(I=e.width)!==null&&I!==void 0?I:Math.ceil(w),height:(H=e.height)!==null&&H!==void 0?H:Math.ceil(j)},c?(l.logger.debug("Document cloned, using foreign object rendering"),M=new fQ(l,E),[4,M.render(g)]):[3,3];case 2:return L=Y.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+x+","+y+" with size "+w+"x"+j+" using computed rendering"),l.logger.debug("Starting DOM parsing"),U=c4(l,g),B===U.styles.backgroundColor&&(U.styles.backgroundColor=MA.TRANSPARENT),l.logger.debug("Starting renderer for element at "+E.x+","+E.y+" with size "+E.width+"x"+E.height),M=new oQ(l,E),[4,M.render(U)];case 4:L=Y.sent(),Y.label=5;case 5:return(!((re=e.removeContainer)!==null&&re!==void 0)||re)&&(jy.destroy(h)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,L]}})})},wQ=function(t,e,r){var n=e.ownerDocument,s=n.documentElement?wd(t,getComputedStyle(n.documentElement).backgroundColor):MA.TRANSPARENT,a=n.body?wd(t,getComputedStyle(n.body).backgroundColor):MA.TRANSPARENT,A=typeof r=="string"?wd(t,r):r===null?MA.TRANSPARENT:4294967295;return e===n.documentElement?qo(s)?qo(a)?A:a:s:A};const yQ=Object.freeze(Object.defineProperty({__proto__:null,default:xQ},Symbol.toStringTag,{value:"Module"})),bQ="modulepreload",BQ=function(t){return"/"+t},Uy={},Cg=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const A=document.querySelector("meta[property=csp-nonce]"),o=(A==null?void 0:A.nonce)||(A==null?void 0:A.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=BQ(l),l in Uy)return;Uy[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":bQ,c||(p.as="script"),p.crossOrigin="",p.href=l,o&&p.setAttribute("nonce",o),document.head.appendChild(p),c)return new Promise((g,h)=>{p.addEventListener("load",g),p.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(A){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=A,window.dispatchEvent(o),!o.defaultPrevented)throw A}return s.then(A=>{for(const o of A||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function Gr(t){"@babel/helpers - typeof";return Gr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gr(t)}var La=Uint8Array,Fi=Uint16Array,P1=Int32Array,O1=new La([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),D1=new La([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Iy=new La([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),N4=function(t,e){for(var r=new Fi(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var s=new P1(r[30]),n=1;n<30;++n)for(var a=r[n];a<r[n+1];++a)s[a]=a-r[n]<<5|n;return{b:r,r:s}},S4=N4(O1,2),CQ=S4.b,vx=S4.r;CQ[28]=258,vx[258]=28;var NQ=N4(D1,0),Qy=NQ.r,wx=new Fi(32768);for(var ln=0;ln<32768;++ln){var bo=(ln&43690)>>1|(ln&21845)<<1;bo=(bo&52428)>>2|(bo&13107)<<2,bo=(bo&61680)>>4|(bo&3855)<<4,wx[ln]=((bo&65280)>>8|(bo&255)<<8)>>1}var Cd=function(t,e,r){for(var n=t.length,s=0,a=new Fi(e);s<n;++s)t[s]&&++a[t[s]-1];var A=new Fi(e);for(s=1;s<e;++s)A[s]=A[s-1]+a[s-1]<<1;var o;if(r){o=new Fi(1<<e);var l=15-e;for(s=0;s<n;++s)if(t[s])for(var c=s<<4|t[s],d=e-t[s],p=A[t[s]-1]++<<d,g=p|(1<<d)-1;p<=g;++p)o[wx[p]>>l]=c}else for(o=new Fi(n),s=0;s<n;++s)t[s]&&(o[s]=wx[A[t[s]-1]++]>>15-t[s]);return o},ql=new La(288);for(var ln=0;ln<144;++ln)ql[ln]=8;for(var ln=144;ln<256;++ln)ql[ln]=9;for(var ln=256;ln<280;++ln)ql[ln]=7;for(var ln=280;ln<288;++ln)ql[ln]=8;var E0=new La(32);for(var ln=0;ln<32;++ln)E0[ln]=5;var SQ=Cd(ql,9,0),jQ=Cd(E0,5,0),j4=function(t){return(t+7)/8|0},EQ=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new La(t.subarray(e,r))},IA=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},qu=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},Ng=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var s=r.length,a=r.slice();if(!s)return{t:F4,l:0};if(s==1){var A=new La(r[0].s+1);return A[r[0].s]=1,{t:A,l:1}}r.sort(function(L,U){return L.f-U.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],c=0,d=1,p=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=s-1;)o=r[r[c].f<r[p].f?c++:p++],l=r[c!=d&&r[c].f<r[p].f?c++:p++],r[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var g=a[0].s,n=1;n<s;++n)a[n].s>g&&(g=a[n].s);var h=new Fi(g+1),b=yx(r[d-1],h,0);if(b>e){var n=0,w=0,j=b-e,x=1<<j;for(a.sort(function(U,M){return h[M.s]-h[U.s]||U.f-M.f});n<s;++n){var y=a[n].s;if(h[y]>e)w+=x-(1<<b-h[y]),h[y]=e;else break}for(w>>=j;w>0;){var B=a[n].s;h[B]<e?w-=1<<e-h[B]++-1:++n}for(;n>=0&&w;--n){var E=a[n].s;h[E]==e&&(--h[E],++w)}b=e}return{t:new La(h),l:b}},yx=function(t,e,r){return t.s==-1?Math.max(yx(t.l,e,r+1),yx(t.r,e,r+1)):e[t.s]=r},Ty=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new Fi(++e),n=0,s=t[0],a=1,A=function(l){r[n++]=l},o=1;o<=e;++o)if(t[o]==s&&o!=e)++a;else{if(!s&&a>2){for(;a>138;a-=138)A(32754);a>2&&(A(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(A(s),--a;a>6;a-=6)A(8304);a>2&&(A(a-3<<5|8208),a=0)}for(;a--;)A(s);a=1,s=t[o]}return{c:r.subarray(0,n),n:e}},Wu=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},E4=function(t,e,r){var n=r.length,s=j4(e+2);t[s]=n&255,t[s+1]=n>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var a=0;a<n;++a)t[s+a+4]=r[a];return(s+4+n)*8},Ly=function(t,e,r,n,s,a,A,o,l,c,d){IA(e,d++,r),++s[256];for(var p=Ng(s,15),g=p.t,h=p.l,b=Ng(a,15),w=b.t,j=b.l,x=Ty(g),y=x.c,B=x.n,E=Ty(w),L=E.c,U=E.n,M=new Fi(19),G=0;G<y.length;++G)++M[y[G]&31];for(var G=0;G<L.length;++G)++M[L[G]&31];for(var N=Ng(M,7),$=N.t,k=N.l,_=19;_>4&&!$[Iy[_-1]];--_);var z=c+5<<3,O=Wu(s,ql)+Wu(a,E0)+A,te=Wu(s,g)+Wu(a,w)+A+14+3*_+Wu(M,$)+2*M[16]+3*M[17]+7*M[18];if(l>=0&&z<=O&&z<=te)return E4(e,d,t.subarray(l,l+c));var ue,fe,ie,de;if(IA(e,d,1+(te<O)),d+=2,te<O){ue=Cd(g,h,0),fe=g,ie=Cd(w,j,0),de=w;var ge=Cd($,k,0);IA(e,d,B-257),IA(e,d+5,U-1),IA(e,d+10,_-4),d+=14;for(var G=0;G<_;++G)IA(e,d+3*G,$[Iy[G]]);d+=3*_;for(var ve=[y,L],I=0;I<2;++I)for(var H=ve[I],G=0;G<H.length;++G){var re=H[G]&31;IA(e,d,ge[re]),d+=$[re],re>15&&(IA(e,d,H[G]>>5&127),d+=H[G]>>12)}}else ue=SQ,fe=ql,ie=jQ,de=E0;for(var G=0;G<o;++G){var Y=n[G];if(Y>255){var re=Y>>18&31;qu(e,d,ue[re+257]),d+=fe[re+257],re>7&&(IA(e,d,Y>>23&31),d+=O1[re]);var le=Y&31;qu(e,d,ie[le]),d+=de[le],le>3&&(qu(e,d,Y>>5&8191),d+=D1[le])}else qu(e,d,ue[Y]),d+=fe[Y]}return qu(e,d,ue[256]),d+fe[256]},FQ=new P1([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F4=new La(0),_Q=function(t,e,r,n,s,a){var A=a.z||t.length,o=new La(n+A+5*(1+Math.ceil(A/7e3))+s),l=o.subarray(n,o.length-s),c=a.l,d=(a.r||0)&7;if(e){d&&(l[0]=a.r>>3);for(var p=FQ[e-1],g=p>>13,h=p&8191,b=(1<<r)-1,w=a.p||new Fi(32768),j=a.h||new Fi(b+1),x=Math.ceil(r/3),y=2*x,B=function(Ze){return(t[Ze]^t[Ze+1]<<x^t[Ze+2]<<y)&b},E=new P1(25e3),L=new Fi(288),U=new Fi(32),M=0,G=0,N=a.i||0,$=0,k=a.w||0,_=0;N+2<A;++N){var z=B(N),O=N&32767,te=j[z];if(w[O]=te,j[z]=O,k<=N){var ue=A-N;if((M>7e3||$>24576)&&(ue>423||!c)){d=Ly(t,l,0,E,L,U,G,$,_,N-_,d),$=M=G=0,_=N;for(var fe=0;fe<286;++fe)L[fe]=0;for(var fe=0;fe<30;++fe)U[fe]=0}var ie=2,de=0,ge=h,ve=O-te&32767;if(ue>2&&z==B(N-ve))for(var I=Math.min(g,ue)-1,H=Math.min(32767,N),re=Math.min(258,ue);ve<=H&&--ge&&O!=te;){if(t[N+ie]==t[N+ie-ve]){for(var Y=0;Y<re&&t[N+Y]==t[N+Y-ve];++Y);if(Y>ie){if(ie=Y,de=ve,Y>I)break;for(var le=Math.min(ve,Y-2),me=0,fe=0;fe<le;++fe){var ke=N-ve+fe&32767,Ee=w[ke],Pe=ke-Ee&32767;Pe>me&&(me=Pe,te=ke)}}}O=te,te=w[O],ve+=O-te&32767}if(de){E[$++]=268435456|vx[ie]<<18|Qy[de];var nt=vx[ie]&31,ut=Qy[de]&31;G+=O1[nt]+D1[ut],++L[257+nt],++U[ut],k=N+ie,++M}else E[$++]=t[N],++L[t[N]]}}for(N=Math.max(N,k);N<A;++N)E[$++]=t[N],++L[t[N]];d=Ly(t,l,c,E,L,U,G,$,_,N-_,d),c||(a.r=d&7|l[d/8|0]<<3,d-=7,a.h=j,a.p=w,a.i=N,a.w=k)}else{for(var N=a.w||0;N<A+c;N+=65535){var he=N+65535;he>=A&&(l[d/8|0]=c,he=A),d=E4(l,d+1,t.subarray(N,he))}a.i=A}return EQ(o,0,n+j4(d)+s)},_4=function(){var t=1,e=0;return{p:function(r){for(var n=t,s=e,a=r.length|0,A=0;A!=a;){for(var o=Math.min(A+2655,a);A<o;++A)s+=n+=r[A];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}t=n,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},kQ=function(t,e,r,n,s){if(!s&&(s={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),A=new La(a.length+t.length);A.set(a),A.set(t,a.length),t=A,s.w=a.length}return _Q(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,s)},k4=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},UQ=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=_4();s.p(e.dictionary),k4(t,2,s.d())}};function bx(t,e){e||(e={});var r=_4();r.p(t);var n=kQ(t,e,e.dictionary?6:2,4);return UQ(n,e),k4(n,n.length-4,r.d()),n}var IQ=typeof TextDecoder<"u"&&new TextDecoder,QQ=0;try{IQ.decode(F4,{stream:!0}),QQ=1}catch{}function TQ(t){if(Array.isArray(t))return t}function LQ(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,a,A,o=[],l=!0,c=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&r.return!=null&&(A=r.return(),Object(A)!==A))return}finally{if(c)throw s}}return o}}function Py(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function PQ(t,e){if(t){if(typeof t=="string")return Py(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Py(t,e):void 0}}function OQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oy(t,e){return TQ(t)||LQ(t,e)||PQ(t,e)||OQ()}function Dy(t,e="utf8"){return new TextDecoder(e).decode(t)}const DQ=new TextEncoder;function RQ(t){return DQ.encode(t)}const HQ=1024*8,MQ=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),Sg={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class R1{constructor(e=HQ,r={}){Kr(this,"buffer");Kr(this,"byteLength");Kr(this,"byteOffset");Kr(this,"length");Kr(this,"offset");Kr(this,"lastWrittenByte");Kr(this,"littleEndian");Kr(this,"_data");Kr(this,"_mark");Kr(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const s=r.offset?r.offset>>>0:0,a=e.byteLength-s;let A=s;(ArrayBuffer.isView(e)||e instanceof R1)&&(e.byteLength!==e.buffer.byteLength&&(A=e.byteOffset+s),e=e.buffer),n?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=e,this.length=a,this.byteLength=a,this.byteOffset=A,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,A,a),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,s=new Uint8Array(n);s.set(new Uint8Array(this.buffer)),this.buffer=s.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=Sg[r].BYTES_PER_ELEMENT*e,s=this.byteOffset+this.offset,a=this.buffer.slice(s,s+n);if(this.littleEndian===MQ&&r!=="uint8"&&r!=="int8"){const o=new Uint8Array(this.buffer.slice(s,s+n));o.reverse();const l=new Sg[r](o.buffer);return this.offset+=n,l.reverse(),l}const A=new Sg[r](a);return this.offset+=n,A}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return Dy(this.readBytes(e))}decodeText(e=1,r="utf8"){return Dy(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(RQ(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function yu(t){let e=t.length;for(;--e>=0;)t[e]=0}const $Q=3,KQ=258,U4=29,GQ=256,VQ=GQ+1+U4,I4=30,zQ=512,qQ=new Array((VQ+2)*2);yu(qQ);const WQ=new Array(I4*2);yu(WQ);const JQ=new Array(zQ);yu(JQ);const YQ=new Array(KQ-$Q+1);yu(YQ);const XQ=new Array(U4);yu(XQ);const ZQ=new Array(I4);yu(ZQ);const eT=(t,e,r,n)=>{let s=t&65535|0,a=t>>>16&65535|0,A=0;for(;r!==0;){A=r>2e3?2e3:r,r-=A;do s=s+e[n++]|0,a=a+s|0;while(--A);s%=65521,a%=65521}return s|a<<16|0};var Bx=eT;const tT=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},rT=new Uint32Array(tT()),nT=(t,e,r,n)=>{const s=rT,a=n+r;t^=-1;for(let A=n;A<a;A++)t=t>>>8^s[(t^e[A])&255];return t^-1};var oA=nT,Cx={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Q4={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const sT=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var iT=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)sT(r,n)&&(t[n]=r[n])}}return t},aT=t=>{let e=0;for(let n=0,s=t.length;n<s;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,s=0,a=t.length;n<a;n++){let A=t[n];r.set(A,s),s+=A.length}return r},T4={assign:iT,flattenChunks:aT};let L4=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{L4=!1}const Xd=new Uint8Array(256);for(let t=0;t<256;t++)Xd[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Xd[254]=Xd[254]=1;var AT=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,s,a,A=t.length,o=0;for(s=0;s<A;s++)r=t.charCodeAt(s),(r&64512)===55296&&s+1<A&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(o),a=0,s=0;a<o;s++)r=t.charCodeAt(s),(r&64512)===55296&&s+1<A&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),r<128?e[a++]=r:r<2048?(e[a++]=192|r>>>6,e[a++]=128|r&63):r<65536?(e[a++]=224|r>>>12,e[a++]=128|r>>>6&63,e[a++]=128|r&63):(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63,e[a++]=128|r>>>6&63,e[a++]=128|r&63);return e};const oT=(t,e)=>{if(e<65534&&t.subarray&&L4)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var lT=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,s;const a=new Array(r*2);for(s=0,n=0;n<r;){let A=t[n++];if(A<128){a[s++]=A;continue}let o=Xd[A];if(o>4){a[s++]=65533,n+=o-1;continue}for(A&=o===2?31:o===3?15:7;o>1&&n<r;)A=A<<6|t[n++]&63,o--;if(o>1){a[s++]=65533;continue}A<65536?a[s++]=A:(A-=65536,a[s++]=55296|A>>10&1023,a[s++]=56320|A&1023)}return oT(a,s)},cT=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+Xd[t[r]]>e?r:e},Nx={string2buf:AT,buf2string:lT,utf8border:cT};function uT(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var dT=uT;const pf=16209,hT=16191;var fT=function(e,r){let n,s,a,A,o,l,c,d,p,g,h,b,w,j,x,y,B,E,L,U,M,G,N,$;const k=e.state;n=e.next_in,N=e.input,s=n+(e.avail_in-5),a=e.next_out,$=e.output,A=a-(r-e.avail_out),o=a+(e.avail_out-257),l=k.dmax,c=k.wsize,d=k.whave,p=k.wnext,g=k.window,h=k.hold,b=k.bits,w=k.lencode,j=k.distcode,x=(1<<k.lenbits)-1,y=(1<<k.distbits)-1;e:do{b<15&&(h+=N[n++]<<b,b+=8,h+=N[n++]<<b,b+=8),B=w[h&x];t:for(;;){if(E=B>>>24,h>>>=E,b-=E,E=B>>>16&255,E===0)$[a++]=B&65535;else if(E&16){L=B&65535,E&=15,E&&(b<E&&(h+=N[n++]<<b,b+=8),L+=h&(1<<E)-1,h>>>=E,b-=E),b<15&&(h+=N[n++]<<b,b+=8,h+=N[n++]<<b,b+=8),B=j[h&y];r:for(;;){if(E=B>>>24,h>>>=E,b-=E,E=B>>>16&255,E&16){if(U=B&65535,E&=15,b<E&&(h+=N[n++]<<b,b+=8,b<E&&(h+=N[n++]<<b,b+=8)),U+=h&(1<<E)-1,U>l){e.msg="invalid distance too far back",k.mode=pf;break e}if(h>>>=E,b-=E,E=a-A,U>E){if(E=U-E,E>d&&k.sane){e.msg="invalid distance too far back",k.mode=pf;break e}if(M=0,G=g,p===0){if(M+=c-E,E<L){L-=E;do $[a++]=g[M++];while(--E);M=a-U,G=$}}else if(p<E){if(M+=c+p-E,E-=p,E<L){L-=E;do $[a++]=g[M++];while(--E);if(M=0,p<L){E=p,L-=E;do $[a++]=g[M++];while(--E);M=a-U,G=$}}}else if(M+=p-E,E<L){L-=E;do $[a++]=g[M++];while(--E);M=a-U,G=$}for(;L>2;)$[a++]=G[M++],$[a++]=G[M++],$[a++]=G[M++],L-=3;L&&($[a++]=G[M++],L>1&&($[a++]=G[M++]))}else{M=a-U;do $[a++]=$[M++],$[a++]=$[M++],$[a++]=$[M++],L-=3;while(L>2);L&&($[a++]=$[M++],L>1&&($[a++]=$[M++]))}}else if(E&64){e.msg="invalid distance code",k.mode=pf;break e}else{B=j[(B&65535)+(h&(1<<E)-1)];continue r}break}}else if(E&64)if(E&32){k.mode=hT;break e}else{e.msg="invalid literal/length code",k.mode=pf;break e}else{B=w[(B&65535)+(h&(1<<E)-1)];continue t}break}}while(n<s&&a<o);L=b>>3,n-=L,b-=L<<3,h&=(1<<b)-1,e.next_in=n,e.next_out=a,e.avail_in=n<s?5+(s-n):5-(n-s),e.avail_out=a<o?257+(o-a):257-(a-o),k.hold=h,k.bits=b};const Cc=15,Ry=852,Hy=592,My=0,jg=1,$y=2,pT=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),gT=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),mT=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),xT=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),vT=(t,e,r,n,s,a,A,o)=>{const l=o.bits;let c=0,d=0,p=0,g=0,h=0,b=0,w=0,j=0,x=0,y=0,B,E,L,U,M,G=null,N;const $=new Uint16Array(Cc+1),k=new Uint16Array(Cc+1);let _=null,z,O,te;for(c=0;c<=Cc;c++)$[c]=0;for(d=0;d<n;d++)$[e[r+d]]++;for(h=l,g=Cc;g>=1&&$[g]===0;g--);if(h>g&&(h=g),g===0)return s[a++]=1<<24|64<<16|0,s[a++]=1<<24|64<<16|0,o.bits=1,0;for(p=1;p<g&&$[p]===0;p++);for(h<p&&(h=p),j=1,c=1;c<=Cc;c++)if(j<<=1,j-=$[c],j<0)return-1;if(j>0&&(t===My||g!==1))return-1;for(k[1]=0,c=1;c<Cc;c++)k[c+1]=k[c]+$[c];for(d=0;d<n;d++)e[r+d]!==0&&(A[k[e[r+d]]++]=d);if(t===My?(G=_=A,N=20):t===jg?(G=pT,_=gT,N=257):(G=mT,_=xT,N=0),y=0,d=0,c=p,M=a,b=h,w=0,L=-1,x=1<<h,U=x-1,t===jg&&x>Ry||t===$y&&x>Hy)return 1;for(;;){z=c-w,A[d]+1<N?(O=0,te=A[d]):A[d]>=N?(O=_[A[d]-N],te=G[A[d]-N]):(O=96,te=0),B=1<<c-w,E=1<<b,p=E;do E-=B,s[M+(y>>w)+E]=z<<24|O<<16|te|0;while(E!==0);for(B=1<<c-1;y&B;)B>>=1;if(B!==0?(y&=B-1,y+=B):y=0,d++,--$[c]===0){if(c===g)break;c=e[r+A[d]]}if(c>h&&(y&U)!==L){for(w===0&&(w=h),M+=p,b=c-w,j=1<<b;b+w<g&&(j-=$[b+w],!(j<=0));)b++,j<<=1;if(x+=1<<b,t===jg&&x>Ry||t===$y&&x>Hy)return 1;L=y&U,s[L]=h<<24|b<<16|M-a|0}}return y!==0&&(s[M+y]=c-w<<24|64<<16|0),o.bits=h,0};var Nd=vT;const wT=0,P4=1,O4=2,{Z_FINISH:Ky,Z_BLOCK:yT,Z_TREES:gf,Z_OK:Wl,Z_STREAM_END:bT,Z_NEED_DICT:BT,Z_STREAM_ERROR:sa,Z_DATA_ERROR:D4,Z_MEM_ERROR:R4,Z_BUF_ERROR:CT,Z_DEFLATED:Gy}=Q4,op=16180,Vy=16181,zy=16182,qy=16183,Wy=16184,Jy=16185,Yy=16186,Xy=16187,Zy=16188,e2=16189,F0=16190,QA=16191,Eg=16192,t2=16193,Fg=16194,r2=16195,n2=16196,s2=16197,i2=16198,mf=16199,xf=16200,a2=16201,A2=16202,o2=16203,l2=16204,c2=16205,_g=16206,u2=16207,d2=16208,fn=16209,H4=16210,M4=16211,NT=852,ST=592,jT=15,ET=jT,h2=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function FT(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Xl=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<op||e.mode>M4?1:0},$4=t=>{if(Xl(t))return sa;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=op,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(NT),e.distcode=e.distdyn=new Int32Array(ST),e.sane=1,e.back=-1,Wl},K4=t=>{if(Xl(t))return sa;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,$4(t)},G4=(t,e)=>{let r;if(Xl(t))return sa;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?sa:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,K4(t))},V4=(t,e)=>{if(!t)return sa;const r=new FT;t.state=r,r.strm=t,r.window=null,r.mode=op;const n=G4(t,e);return n!==Wl&&(t.state=null),n},_T=t=>V4(t,ET);let f2=!0,kg,Ug;const kT=t=>{if(f2){kg=new Int32Array(512),Ug=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Nd(P4,t.lens,0,288,kg,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Nd(O4,t.lens,0,32,Ug,0,t.work,{bits:5}),f2=!1}t.lencode=kg,t.lenbits=9,t.distcode=Ug,t.distbits=5},z4=(t,e,r,n)=>{let s;const a=t.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(e.subarray(r-a.wsize,r),0),a.wnext=0,a.whave=a.wsize):(s=a.wsize-a.wnext,s>n&&(s=n),a.window.set(e.subarray(r-n,r-n+s),a.wnext),n-=s,n?(a.window.set(e.subarray(r-n,r),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=s,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=s))),0},UT=(t,e)=>{let r,n,s,a,A,o,l,c,d,p,g,h,b,w,j=0,x,y,B,E,L,U,M,G;const N=new Uint8Array(4);let $,k;const _=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Xl(t)||!t.output||!t.input&&t.avail_in!==0)return sa;r=t.state,r.mode===QA&&(r.mode=Eg),A=t.next_out,s=t.output,l=t.avail_out,a=t.next_in,n=t.input,o=t.avail_in,c=r.hold,d=r.bits,p=o,g=l,G=Wl;e:for(;;)switch(r.mode){case op:if(r.wrap===0){r.mode=Eg;break}for(;d<16;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}if(r.wrap&2&&c===35615){r.wbits===0&&(r.wbits=15),r.check=0,N[0]=c&255,N[1]=c>>>8&255,r.check=oA(r.check,N,2,0),c=0,d=0,r.mode=Vy;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",r.mode=fn;break}if((c&15)!==Gy){t.msg="unknown compression method",r.mode=fn;break}if(c>>>=4,d-=4,M=(c&15)+8,r.wbits===0&&(r.wbits=M),M>15||M>r.wbits){t.msg="invalid window size",r.mode=fn;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=c&512?e2:QA,c=0,d=0;break;case Vy:for(;d<16;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}if(r.flags=c,(r.flags&255)!==Gy){t.msg="unknown compression method",r.mode=fn;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=fn;break}r.head&&(r.head.text=c>>8&1),r.flags&512&&r.wrap&4&&(N[0]=c&255,N[1]=c>>>8&255,r.check=oA(r.check,N,2,0)),c=0,d=0,r.mode=zy;case zy:for(;d<32;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}r.head&&(r.head.time=c),r.flags&512&&r.wrap&4&&(N[0]=c&255,N[1]=c>>>8&255,N[2]=c>>>16&255,N[3]=c>>>24&255,r.check=oA(r.check,N,4,0)),c=0,d=0,r.mode=qy;case qy:for(;d<16;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}r.head&&(r.head.xflags=c&255,r.head.os=c>>8),r.flags&512&&r.wrap&4&&(N[0]=c&255,N[1]=c>>>8&255,r.check=oA(r.check,N,2,0)),c=0,d=0,r.mode=Wy;case Wy:if(r.flags&1024){for(;d<16;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}r.length=c,r.head&&(r.head.extra_len=c),r.flags&512&&r.wrap&4&&(N[0]=c&255,N[1]=c>>>8&255,r.check=oA(r.check,N,2,0)),c=0,d=0}else r.head&&(r.head.extra=null);r.mode=Jy;case Jy:if(r.flags&1024&&(h=r.length,h>o&&(h=o),h&&(r.head&&(M=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(a,a+h),M)),r.flags&512&&r.wrap&4&&(r.check=oA(r.check,n,h,a)),o-=h,a+=h,r.length-=h),r.length))break e;r.length=0,r.mode=Yy;case Yy:if(r.flags&2048){if(o===0)break e;h=0;do M=n[a+h++],r.head&&M&&r.length<65536&&(r.head.name+=String.fromCharCode(M));while(M&&h<o);if(r.flags&512&&r.wrap&4&&(r.check=oA(r.check,n,h,a)),o-=h,a+=h,M)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=Xy;case Xy:if(r.flags&4096){if(o===0)break e;h=0;do M=n[a+h++],r.head&&M&&r.length<65536&&(r.head.comment+=String.fromCharCode(M));while(M&&h<o);if(r.flags&512&&r.wrap&4&&(r.check=oA(r.check,n,h,a)),o-=h,a+=h,M)break e}else r.head&&(r.head.comment=null);r.mode=Zy;case Zy:if(r.flags&512){for(;d<16;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}if(r.wrap&4&&c!==(r.check&65535)){t.msg="header crc mismatch",r.mode=fn;break}c=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=QA;break;case e2:for(;d<32;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}t.adler=r.check=h2(c),c=0,d=0,r.mode=F0;case F0:if(r.havedict===0)return t.next_out=A,t.avail_out=l,t.next_in=a,t.avail_in=o,r.hold=c,r.bits=d,BT;t.adler=r.check=1,r.mode=QA;case QA:if(e===yT||e===gf)break e;case Eg:if(r.last){c>>>=d&7,d-=d&7,r.mode=_g;break}for(;d<3;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}switch(r.last=c&1,c>>>=1,d-=1,c&3){case 0:r.mode=t2;break;case 1:if(kT(r),r.mode=mf,e===gf){c>>>=2,d-=2;break e}break;case 2:r.mode=n2;break;case 3:t.msg="invalid block type",r.mode=fn}c>>>=2,d-=2;break;case t2:for(c>>>=d&7,d-=d&7;d<32;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",r.mode=fn;break}if(r.length=c&65535,c=0,d=0,r.mode=Fg,e===gf)break e;case Fg:r.mode=r2;case r2:if(h=r.length,h){if(h>o&&(h=o),h>l&&(h=l),h===0)break e;s.set(n.subarray(a,a+h),A),o-=h,a+=h,l-=h,A+=h,r.length-=h;break}r.mode=QA;break;case n2:for(;d<14;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}if(r.nlen=(c&31)+257,c>>>=5,d-=5,r.ndist=(c&31)+1,c>>>=5,d-=5,r.ncode=(c&15)+4,c>>>=4,d-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=fn;break}r.have=0,r.mode=s2;case s2:for(;r.have<r.ncode;){for(;d<3;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}r.lens[_[r.have++]]=c&7,c>>>=3,d-=3}for(;r.have<19;)r.lens[_[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,$={bits:r.lenbits},G=Nd(wT,r.lens,0,19,r.lencode,0,r.work,$),r.lenbits=$.bits,G){t.msg="invalid code lengths set",r.mode=fn;break}r.have=0,r.mode=i2;case i2:for(;r.have<r.nlen+r.ndist;){for(;j=r.lencode[c&(1<<r.lenbits)-1],x=j>>>24,y=j>>>16&255,B=j&65535,!(x<=d);){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}if(B<16)c>>>=x,d-=x,r.lens[r.have++]=B;else{if(B===16){for(k=x+2;d<k;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}if(c>>>=x,d-=x,r.have===0){t.msg="invalid bit length repeat",r.mode=fn;break}M=r.lens[r.have-1],h=3+(c&3),c>>>=2,d-=2}else if(B===17){for(k=x+3;d<k;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}c>>>=x,d-=x,M=0,h=3+(c&7),c>>>=3,d-=3}else{for(k=x+7;d<k;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}c>>>=x,d-=x,M=0,h=11+(c&127),c>>>=7,d-=7}if(r.have+h>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=fn;break}for(;h--;)r.lens[r.have++]=M}}if(r.mode===fn)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=fn;break}if(r.lenbits=9,$={bits:r.lenbits},G=Nd(P4,r.lens,0,r.nlen,r.lencode,0,r.work,$),r.lenbits=$.bits,G){t.msg="invalid literal/lengths set",r.mode=fn;break}if(r.distbits=6,r.distcode=r.distdyn,$={bits:r.distbits},G=Nd(O4,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,$),r.distbits=$.bits,G){t.msg="invalid distances set",r.mode=fn;break}if(r.mode=mf,e===gf)break e;case mf:r.mode=xf;case xf:if(o>=6&&l>=258){t.next_out=A,t.avail_out=l,t.next_in=a,t.avail_in=o,r.hold=c,r.bits=d,fT(t,g),A=t.next_out,s=t.output,l=t.avail_out,a=t.next_in,n=t.input,o=t.avail_in,c=r.hold,d=r.bits,r.mode===QA&&(r.back=-1);break}for(r.back=0;j=r.lencode[c&(1<<r.lenbits)-1],x=j>>>24,y=j>>>16&255,B=j&65535,!(x<=d);){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}if(y&&!(y&240)){for(E=x,L=y,U=B;j=r.lencode[U+((c&(1<<E+L)-1)>>E)],x=j>>>24,y=j>>>16&255,B=j&65535,!(E+x<=d);){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}c>>>=E,d-=E,r.back+=E}if(c>>>=x,d-=x,r.back+=x,r.length=B,y===0){r.mode=c2;break}if(y&32){r.back=-1,r.mode=QA;break}if(y&64){t.msg="invalid literal/length code",r.mode=fn;break}r.extra=y&15,r.mode=a2;case a2:if(r.extra){for(k=r.extra;d<k;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=A2;case A2:for(;j=r.distcode[c&(1<<r.distbits)-1],x=j>>>24,y=j>>>16&255,B=j&65535,!(x<=d);){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}if(!(y&240)){for(E=x,L=y,U=B;j=r.distcode[U+((c&(1<<E+L)-1)>>E)],x=j>>>24,y=j>>>16&255,B=j&65535,!(E+x<=d);){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}c>>>=E,d-=E,r.back+=E}if(c>>>=x,d-=x,r.back+=x,y&64){t.msg="invalid distance code",r.mode=fn;break}r.offset=B,r.extra=y&15,r.mode=o2;case o2:if(r.extra){for(k=r.extra;d<k;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=fn;break}r.mode=l2;case l2:if(l===0)break e;if(h=g-l,r.offset>h){if(h=r.offset-h,h>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=fn;break}h>r.wnext?(h-=r.wnext,b=r.wsize-h):b=r.wnext-h,h>r.length&&(h=r.length),w=r.window}else w=s,b=A-r.offset,h=r.length;h>l&&(h=l),l-=h,r.length-=h;do s[A++]=w[b++];while(--h);r.length===0&&(r.mode=xf);break;case c2:if(l===0)break e;s[A++]=r.length,l--,r.mode=xf;break;case _g:if(r.wrap){for(;d<32;){if(o===0)break e;o--,c|=n[a++]<<d,d+=8}if(g-=l,t.total_out+=g,r.total+=g,r.wrap&4&&g&&(t.adler=r.check=r.flags?oA(r.check,s,g,A-g):Bx(r.check,s,g,A-g)),g=l,r.wrap&4&&(r.flags?c:h2(c))!==r.check){t.msg="incorrect data check",r.mode=fn;break}c=0,d=0}r.mode=u2;case u2:if(r.wrap&&r.flags){for(;d<32;){if(o===0)break e;o--,c+=n[a++]<<d,d+=8}if(r.wrap&4&&c!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=fn;break}c=0,d=0}r.mode=d2;case d2:G=bT;break e;case fn:G=D4;break e;case H4:return R4;case M4:default:return sa}return t.next_out=A,t.avail_out=l,t.next_in=a,t.avail_in=o,r.hold=c,r.bits=d,(r.wsize||g!==t.avail_out&&r.mode<fn&&(r.mode<_g||e!==Ky))&&z4(t,t.output,t.next_out,g-t.avail_out),p-=t.avail_in,g-=t.avail_out,t.total_in+=p,t.total_out+=g,r.total+=g,r.wrap&4&&g&&(t.adler=r.check=r.flags?oA(r.check,s,g,t.next_out-g):Bx(r.check,s,g,t.next_out-g)),t.data_type=r.bits+(r.last?64:0)+(r.mode===QA?128:0)+(r.mode===mf||r.mode===Fg?256:0),(p===0&&g===0||e===Ky)&&G===Wl&&(G=CT),G},IT=t=>{if(Xl(t))return sa;let e=t.state;return e.window&&(e.window=null),t.state=null,Wl},QT=(t,e)=>{if(Xl(t))return sa;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,Wl):sa},TT=(t,e)=>{const r=e.length;let n,s,a;return Xl(t)||(n=t.state,n.wrap!==0&&n.mode!==F0)?sa:n.mode===F0&&(s=1,s=Bx(s,e,r,0),s!==n.check)?D4:(a=z4(t,e,r,r),a?(n.mode=H4,R4):(n.havedict=1,Wl))};var LT=K4,PT=G4,OT=$4,DT=_T,RT=V4,HT=UT,MT=IT,$T=QT,KT=TT,GT="pako inflate (from Nodeca project)",OA={inflateReset:LT,inflateReset2:PT,inflateResetKeep:OT,inflateInit:DT,inflateInit2:RT,inflate:HT,inflateEnd:MT,inflateGetHeader:$T,inflateSetDictionary:KT,inflateInfo:GT};function VT(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var zT=VT;const q4=Object.prototype.toString,{Z_NO_FLUSH:qT,Z_FINISH:WT,Z_OK:Zd,Z_STREAM_END:Ig,Z_NEED_DICT:Qg,Z_STREAM_ERROR:JT,Z_DATA_ERROR:p2,Z_MEM_ERROR:YT}=Q4;function lh(t){this.options=T4.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new dT,this.strm.avail_out=0;let r=OA.inflateInit2(this.strm,e.windowBits);if(r!==Zd)throw new Error(Cx[r]);if(this.header=new zT,OA.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Nx.string2buf(e.dictionary):q4.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=OA.inflateSetDictionary(this.strm,e.dictionary),r!==Zd)))throw new Error(Cx[r])}lh.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,s=this.options.dictionary;let a,A,o;if(this.ended)return!1;for(e===~~e?A=e:A=e===!0?WT:qT,q4.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),a=OA.inflate(r,A),a===Qg&&s&&(a=OA.inflateSetDictionary(r,s),a===Zd?a=OA.inflate(r,A):a===p2&&(a=Qg));r.avail_in>0&&a===Ig&&r.state.wrap>0&&t[r.next_in]!==0;)OA.inflateReset(r),a=OA.inflate(r,A);switch(a){case JT:case p2:case Qg:case YT:return this.onEnd(a),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(r.avail_out===0||a===Ig))if(this.options.to==="string"){let l=Nx.utf8border(r.output,r.next_out),c=r.next_out-l,d=Nx.buf2string(r.output,l);r.next_out=c,r.avail_out=n-c,c&&r.output.set(r.output.subarray(l,l+c),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(a===Zd&&o===0)){if(a===Ig)return a=OA.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};lh.prototype.onData=function(t){this.chunks.push(t)};lh.prototype.onEnd=function(t){t===Zd&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=T4.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function XT(t,e){const r=new lh(e);if(r.push(t),r.err)throw r.msg||Cx[r.err];return r.result}var ZT=lh,eL=XT,tL={Inflate:ZT,inflate:eL};const{Inflate:rL,inflate:nL}=tL;var g2=rL,sL=nL;const W4=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;W4[t]=e}const m2=4294967295;function iL(t,e,r){let n=t;for(let s=0;s<r;s++)n=W4[(n^e[s])&255]^n>>>8;return n}function aL(t,e){return(iL(m2,t,e)^m2)>>>0}function x2(t,e,r){const n=t.readUint32(),s=aL(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(s!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${s}`)}function J4(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function Y4(t,e,r,n){let s=0;for(;s<n;s++)e[s]=t[s];for(;s<r;s++)e[s]=t[s]+e[s-n]&255}function X4(t,e,r,n){let s=0;if(r.length===0)for(;s<n;s++)e[s]=t[s];else for(;s<n;s++)e[s]=t[s]+r[s]&255}function Z4(t,e,r,n,s){let a=0;if(r.length===0){for(;a<s;a++)e[a]=t[a];for(;a<n;a++)e[a]=t[a]+(e[a-s]>>1)&255}else{for(;a<s;a++)e[a]=t[a]+(r[a]>>1)&255;for(;a<n;a++)e[a]=t[a]+(e[a-s]+r[a]>>1)&255}}function eC(t,e,r,n,s){let a=0;if(r.length===0){for(;a<s;a++)e[a]=t[a];for(;a<n;a++)e[a]=t[a]+e[a-s]&255}else{for(;a<s;a++)e[a]=t[a]+r[a]&255;for(;a<n;a++)e[a]=t[a]+AL(e[a-s],r[a],r[a-s])&255}}function AL(t,e,r){const n=t+e-r,s=Math.abs(n-t),a=Math.abs(n-e),A=Math.abs(n-r);return s<=a&&s<=A?t:a<=A?e:r}function oL(t,e,r,n,s,a){switch(t){case 0:J4(e,r,s);break;case 1:Y4(e,r,s,a);break;case 2:X4(e,r,n,s);break;case 3:Z4(e,r,n,s,a);break;case 4:eC(e,r,n,s,a);break;default:throw new Error(`Unsupported filter: ${t}`)}}const lL=new Uint16Array([255]),cL=new Uint8Array(lL.buffer),uL=cL[0]===255;function dL(t){const{data:e,width:r,height:n,channels:s,depth:a}=t,A=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(a/8)*s,l=new Uint8Array(n*r*o);let c=0;for(let d=0;d<7;d++){const p=A[d],g=Math.ceil((r-p.x)/p.xStep),h=Math.ceil((n-p.y)/p.yStep);if(g<=0||h<=0)continue;const b=g*o,w=new Uint8Array(b);for(let j=0;j<h;j++){const x=e[c++],y=e.subarray(c,c+b);c+=b;const B=new Uint8Array(b);oL(x,y,B,w,b,o),w.set(B);for(let E=0;E<g;E++){const L=p.x+E*p.xStep,U=p.y+j*p.yStep;if(!(L>=r||U>=n))for(let M=0;M<o;M++)l[(U*r+L)*o+M]=B[E*o+M]}}}if(a===16){const d=new Uint16Array(l.buffer);if(uL)for(let p=0;p<d.length;p++)d[p]=hL(d[p]);return d}else return l}function hL(t){return(t&255)<<8|t>>8&255}const fL=new Uint16Array([255]),pL=new Uint8Array(fL.buffer),gL=pL[0]===255,mL=new Uint8Array(0);function v2(t){const{data:e,width:r,height:n,channels:s,depth:a}=t,A=Math.ceil(a/8)*s,o=Math.ceil(a/8*s*r),l=new Uint8Array(n*o);let c=mL,d=0,p,g;for(let h=0;h<n;h++){switch(p=e.subarray(d+1,d+1+o),g=l.subarray(h*o,(h+1)*o),e[d]){case 0:J4(p,g,o);break;case 1:Y4(p,g,o,A);break;case 2:X4(p,g,c,o);break;case 3:Z4(p,g,c,o,A);break;case 4:eC(p,g,c,o,A);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}c=g,d+=o+1}if(a===16){const h=new Uint16Array(l.buffer);if(gL)for(let b=0;b<h.length;b++)h[b]=xL(h[b]);return h}else return l}function xL(t){return(t&255)<<8|t>>8&255}const Df=Uint8Array.of(137,80,78,71,13,10,26,10);function w2(t){if(!vL(t.readBytes(Df.length)))throw new Error("wrong PNG signature")}function vL(t){if(t.length<Df.length)return!1;for(let e=0;e<Df.length;e++)if(t[e]!==Df[e])return!1;return!0}const wL="tEXt",yL=0,tC=new TextDecoder("latin1");function bL(t){if(CL(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const BL=/^[\u0000-\u00FF]*$/;function CL(t){if(!BL.test(t))throw new Error("invalid latin1 text")}function NL(t,e,r){const n=rC(e);t[n]=SL(e,r-n.length-1)}function rC(t){for(t.mark();t.readByte()!==yL;);const e=t.offset;t.reset();const r=tC.decode(t.readBytes(e-t.offset-1));return t.skip(1),bL(r),r}function SL(t,e){return tC.decode(t.readBytes(e))}const bi={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Tg={UNKNOWN:-1,DEFLATE:0},y2={UNKNOWN:-1,ADAPTIVE:0},Lg={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},vf={NONE:0,BACKGROUND:1,PREVIOUS:2},Pg={SOURCE:0,OVER:1};class jL extends R1{constructor(r,n={}){super(r);Kr(this,"_checkCrc");Kr(this,"_inflator");Kr(this,"_png");Kr(this,"_apng");Kr(this,"_end");Kr(this,"_hasPalette");Kr(this,"_palette");Kr(this,"_hasTransparency");Kr(this,"_transparency");Kr(this,"_compressionMethod");Kr(this,"_filterMethod");Kr(this,"_interlaceMethod");Kr(this,"_colorType");Kr(this,"_isAnimated");Kr(this,"_numberOfFrames");Kr(this,"_numberOfPlays");Kr(this,"_frames");Kr(this,"_writingDataChunks");const{checkCrc:s=!1}=n;this._checkCrc=s,this._inflator=new g2,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Tg.UNKNOWN,this._filterMethod=y2.UNKNOWN,this._interlaceMethod=Lg.UNKNOWN,this._colorType=bi.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(w2(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(w2(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const s=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case wL:NL(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-s!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?x2(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const s=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=s+r;break}if(this.offset-s!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?x2(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=EL(this.readUint8());const n=this.readUint8();this._colorType=n;let s;switch(n){case bi.GREYSCALE:s=1;break;case bi.TRUECOLOUR:s=3;break;case bi.INDEXED_COLOUR:s=1;break;case bi.GREYSCALE_ALPHA:s=2;break;case bi.TRUECOLOUR_ALPHA:s=4;break;case bi.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==Tg.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const s=[];this._palette=s;for(let a=0;a<n;a++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,s=this.offset+this.byteOffset;if(s+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,s,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case bi.GREYSCALE:case bi.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case bi.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const s=this.readByte();this._palette[n].push(s)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case bi.UNKNOWN:case bi.GREYSCALE_ALPHA:case bi.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=rC(this),s=this.readUint8();if(s!==Tg.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const a=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:sL(a)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),s=this.readByte();this._png.resolution={x:r,y:n,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(r);if(s){if(s.data=v2({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)n.data=s.data;else{const a=this._apng.frames.at(r-1);this.disposeFrame(s,a,n),this.addFrameDataToCanvas(n,s)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,s){switch(r.disposeOp){case vf.NONE:break;case vf.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let A=0;A<this._png.width;A++){const o=(a*r.width+A)*this._png.channels;for(let l=0;l<this._png.channels;l++)s.data[o+l]=0}break;case vf.PREVIOUS:s.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const s=1<<this._png.depth,a=(A,o)=>{const l=((A+n.yOffset)*this._png.width+n.xOffset+o)*this._png.channels,c=(A*n.width+o)*this._png.channels;return{index:l,frameIndex:c}};switch(n.blendOp){case Pg.SOURCE:for(let A=0;A<n.height;A++)for(let o=0;o<n.width;o++){const{index:l,frameIndex:c}=a(A,o);for(let d=0;d<this._png.channels;d++)r.data[l+d]=n.data[c+d]}break;case Pg.OVER:for(let A=0;A<n.height;A++)for(let o=0;o<n.width;o++){const{index:l,frameIndex:c}=a(A,o);for(let d=0;d<this._png.channels;d++){const p=n.data[c+this._png.channels-1]/s,g=d%(this._png.channels-1)===0?1:n.data[c+d],h=Math.floor(p*g+(1-p)*r.data[l+d]);r.data[l+d]+=h}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==y2.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Lg.NO_INTERLACE)this._png.data=v2({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Lg.ADAM7)this._png.data=dL({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:vf.NONE,blendOp:Pg.SOURCE,data:r}),this._inflator=new g2,this._writingDataChunks=!1}}function EL(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var b2;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(b2||(b2={}));function FL(t,e){return new jL(t,e).decode()}var cr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Og(){cr.console&&typeof cr.console.log=="function"&&cr.console.log.apply(cr.console,arguments)}var Xr={log:Og,warn:function(t){cr.console&&(typeof cr.console.warn=="function"?cr.console.warn.apply(cr.console,arguments):Og.call(null,arguments))},error:function(t){cr.console&&(typeof cr.console.error=="function"?cr.console.error.apply(cr.console,arguments):Og(t))}};function Dg(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){El(n.response,e,r)},n.onerror=function(){Xr.error("could not download file")},n.send()}function B2(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function wf(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var El=cr.saveAs||((typeof window>"u"?"undefined":Gr(window))!=="object"||window!==cr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=cr.URL||cr.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?B2(s.href)?Dg(t,e,r):wf(s,s.target="_blank"):wf(s)):(s.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){wf(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(B2(t))Dg(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){wf(n)})}else navigator.msSaveOrOpenBlob(function(s,a){return a===void 0?a={autoBom:!1}:Gr(a)!=="object"&&(Xr.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return Dg(t,e,r);var s=t.type==="application/octet-stream",a=/constructor/i.test(cr.HTMLElement)||cr.safari,A=/CriOS\/[\d]+/.test(navigator.userAgent);if((A||s&&a)&&(typeof FileReader>"u"?"undefined":Gr(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=A?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(t)}else{var l=cr.URL||cr.webkitURL,c=l.createObjectURL(t);n?n.location=c:location.href=c,n=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function nC(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,a=r[n].process,A=s.exec(t);A&&(e=a(A),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+o+l+c}}var Rf=cr.atob.bind(cr),C2=cr.btoa.bind(cr);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Rg(t,e){var r=t[0],n=t[1],s=t[2],a=t[3];r=Fs(r,n,s,a,e[0],7,-680876936),a=Fs(a,r,n,s,e[1],12,-389564586),s=Fs(s,a,r,n,e[2],17,606105819),n=Fs(n,s,a,r,e[3],22,-1044525330),r=Fs(r,n,s,a,e[4],7,-176418897),a=Fs(a,r,n,s,e[5],12,1200080426),s=Fs(s,a,r,n,e[6],17,-1473231341),n=Fs(n,s,a,r,e[7],22,-45705983),r=Fs(r,n,s,a,e[8],7,1770035416),a=Fs(a,r,n,s,e[9],12,-1958414417),s=Fs(s,a,r,n,e[10],17,-42063),n=Fs(n,s,a,r,e[11],22,-1990404162),r=Fs(r,n,s,a,e[12],7,1804603682),a=Fs(a,r,n,s,e[13],12,-40341101),s=Fs(s,a,r,n,e[14],17,-1502002290),r=_s(r,n=Fs(n,s,a,r,e[15],22,1236535329),s,a,e[1],5,-165796510),a=_s(a,r,n,s,e[6],9,-1069501632),s=_s(s,a,r,n,e[11],14,643717713),n=_s(n,s,a,r,e[0],20,-373897302),r=_s(r,n,s,a,e[5],5,-701558691),a=_s(a,r,n,s,e[10],9,38016083),s=_s(s,a,r,n,e[15],14,-660478335),n=_s(n,s,a,r,e[4],20,-405537848),r=_s(r,n,s,a,e[9],5,568446438),a=_s(a,r,n,s,e[14],9,-1019803690),s=_s(s,a,r,n,e[3],14,-187363961),n=_s(n,s,a,r,e[8],20,1163531501),r=_s(r,n,s,a,e[13],5,-1444681467),a=_s(a,r,n,s,e[2],9,-51403784),s=_s(s,a,r,n,e[7],14,1735328473),r=ks(r,n=_s(n,s,a,r,e[12],20,-1926607734),s,a,e[5],4,-378558),a=ks(a,r,n,s,e[8],11,-2022574463),s=ks(s,a,r,n,e[11],16,1839030562),n=ks(n,s,a,r,e[14],23,-35309556),r=ks(r,n,s,a,e[1],4,-1530992060),a=ks(a,r,n,s,e[4],11,1272893353),s=ks(s,a,r,n,e[7],16,-155497632),n=ks(n,s,a,r,e[10],23,-1094730640),r=ks(r,n,s,a,e[13],4,681279174),a=ks(a,r,n,s,e[0],11,-358537222),s=ks(s,a,r,n,e[3],16,-722521979),n=ks(n,s,a,r,e[6],23,76029189),r=ks(r,n,s,a,e[9],4,-640364487),a=ks(a,r,n,s,e[12],11,-421815835),s=ks(s,a,r,n,e[15],16,530742520),r=Us(r,n=ks(n,s,a,r,e[2],23,-995338651),s,a,e[0],6,-198630844),a=Us(a,r,n,s,e[7],10,1126891415),s=Us(s,a,r,n,e[14],15,-1416354905),n=Us(n,s,a,r,e[5],21,-57434055),r=Us(r,n,s,a,e[12],6,1700485571),a=Us(a,r,n,s,e[3],10,-1894986606),s=Us(s,a,r,n,e[10],15,-1051523),n=Us(n,s,a,r,e[1],21,-2054922799),r=Us(r,n,s,a,e[8],6,1873313359),a=Us(a,r,n,s,e[15],10,-30611744),s=Us(s,a,r,n,e[6],15,-1560198380),n=Us(n,s,a,r,e[13],21,1309151649),r=Us(r,n,s,a,e[4],6,-145523070),a=Us(a,r,n,s,e[11],10,-1120210379),s=Us(s,a,r,n,e[2],15,718787259),n=Us(n,s,a,r,e[9],21,-343485551),t[0]=Oo(r,t[0]),t[1]=Oo(n,t[1]),t[2]=Oo(s,t[2]),t[3]=Oo(a,t[3])}function lp(t,e,r,n,s,a){return e=Oo(Oo(e,t),Oo(n,a)),Oo(e<<s|e>>>32-s,r)}function Fs(t,e,r,n,s,a,A){return lp(e&r|~e&n,t,e,s,a,A)}function _s(t,e,r,n,s,a,A){return lp(e&n|r&~n,t,e,s,a,A)}function ks(t,e,r,n,s,a,A){return lp(e^r^n,t,e,s,a,A)}function Us(t,e,r,n,s,a,A){return lp(r^(e|~n),t,e,s,a,A)}function sC(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Rg(n,_L(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(Rg(n,s),e=0;e<16;e++)s[e]=0;return s[14]=8*r,Rg(n,s),n}function _L(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var N2="0123456789abcdef".split("");function kL(t){for(var e="",r=0;r<4;r++)e+=N2[t>>8*r+4&15]+N2[t>>8*r&15];return e}function UL(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Sx(t){return sC(t).map(UL).join("")}var IL=function(t){for(var e=0;e<t.length;e++)t[e]=kL(t[e]);return t.join("")}(sC("hello"))!="5d41402abc4b2a76b9719d911017c592";function Oo(t,e){if(IL){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function jx(t,e){var r,n,s,a;if(t!==r){for(var A=(s=t,a=1+(256/t.length|0),new Array(a+1).join(s)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var d=o[l];c=(c+d+A.charCodeAt(l))%256,o[l]=o[c],o[c]=d}r=t,n=o}else o=n;var p=e.length,g=0,h=0,b="";for(l=0;l<p;l++)h=(h+(d=o[g=(g+1)%256]))%256,o[g]=o[h],o[h]=d,A=o[(o[g]+o[h])%256],b+=String.fromCharCode(e.charCodeAt(l)^A);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var S2={print:4,modify:8,copy:16,"annot-forms":32};function Uc(t,e,r,n){this.v=1,this.r=2;var s=192;t.forEach(function(o){if(S2.perm!==void 0)throw new Error("Invalid permission: "+o);s+=S2[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(e+this.padding).substr(0,32),A=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,A),this.P=-(1+(255^s)),this.encryptionKey=Sx(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=jx(this.encryptionKey,this.padding)}function Ic(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var s=t.charCodeAt(n);e+=s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?"#"+("0"+s.toString(16)).slice(-2):t[n]}return e}function j2(t){if(Gr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var a=Math.random().toString(35);return e[r][a]=[n,!!s],a},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var a in e[r]){var A=e[r][a];try{A[0].apply(t,n)}catch(o){cr.console&&Xr.error("jsPDF PubSub Error",o.message,o)}A[1]&&s.push(a)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function _0(t){if(!(this instanceof _0))return new _0(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function iC(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Ul(t,e,r,n,s){if(!(this instanceof Ul))return new Ul(t,e,r,n,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,iC.call(this,n,s)}function qc(t,e,r,n,s){if(!(this instanceof qc))return new qc(t,e,r,n,s);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,iC.call(this,n,s)}function tr(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],a=arguments[3],A=[],o=1,l=16,c="S",d=null;Gr(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,s=t.format||s,a=t.compress||t.compressPdf||a,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),A=t.filters||(a===!0?["FlateEncode"]:A),n=n||"mm",r=(""+(r||"P")).toLowerCase();var p=t.putOnlyUsedFonts||!1,g={},h={internal:{},__private__:{}};h.__private__.PubSub=j2;var b="1.3",w=h.__private__.getPdfVersion=function(){return b};h.__private__.setPdfVersion=function(m){b=m};var j={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return j};var x=h.__private__.getPageFormat=function(m){return j[m]};s=s||"a4";var y="compat",B="advanced",E=y;function L(){this.saveGraphicsState(),F(new Ge(we,0,0,-we,0,$a()*we).toString()+" cm"),this.setFontSize(this.getFontSize()/we),c="n",E=B}function U(){this.restoreGraphicsState(),c="S",E=y}var M=h.__private__.combineFontStyleAndFontWeight=function(m,T){if(m=="bold"&&T=="normal"||m=="bold"&&T==400||m=="normal"&&T=="italic"||m=="bold"&&T=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return T&&(m=T==400||T==="normal"?m==="italic"?"italic":"normal":T!=700&&T!=="bold"||m!=="normal"?(T==700?"bold":T)+""+m:"bold"),m};h.advancedAPI=function(m){var T=E===y;return T&&L.call(this),typeof m!="function"||(m(this),T&&U.call(this)),this},h.compatAPI=function(m){var T=E===B;return T&&U.call(this),typeof m!="function"||(m(this),T&&L.call(this)),this},h.isAdvancedAPI=function(){return E===B};var G,N=function(m){if(E!==B)throw new Error(m+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},$=h.roundToPrecision=h.__private__.roundToPrecision=function(m,T){var ae=e||T;if(isNaN(m)||isNaN(ae))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return m.toFixed(ae).replace(/0+$/,"")};G=h.hpf=h.__private__.hpf=typeof l=="number"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return $(m,l)}:l==="smart"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return $(m,m>-1&&m<1?16:5)}:function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return $(m,16)};var k=h.f2=h.__private__.f2=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f2");return $(m,2)},_=h.__private__.f3=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f3");return $(m,3)},z=h.scale=h.__private__.scale=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.scale");return E===y?m*we:E===B?m:void 0},O=function(m){return z(function(T){return E===y?$a()-T:E===B?T:void 0}(m))};h.__private__.setPrecision=h.setPrecision=function(m){typeof parseInt(m,10)=="number"&&(e=parseInt(m,10))};var te,ue="00000000000000000000000000000000",fe=h.__private__.getFileId=function(){return ue},ie=h.__private__.setFileId=function(m){return ue=m!==void 0&&/^[a-fA-F0-9]{32}$/.test(m)?m.toUpperCase():ue.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(_n=new Uc(d.userPermissions,d.userPassword,d.ownerPassword,ue)),ue};h.setFileId=function(m){return ie(m),this},h.getFileId=function(){return fe()};var de=h.__private__.convertDateToPDFDate=function(m){var T=m.getTimezoneOffset(),ae=T<0?"+":"-",xe=Math.floor(Math.abs(T/60)),Qe=Math.abs(T%60),tt=[ae,re(xe),"'",re(Qe),"'"].join("");return["D:",m.getFullYear(),re(m.getMonth()+1),re(m.getDate()),re(m.getHours()),re(m.getMinutes()),re(m.getSeconds()),tt].join("")},ge=h.__private__.convertPDFDateToDate=function(m){var T=parseInt(m.substr(2,4),10),ae=parseInt(m.substr(6,2),10)-1,xe=parseInt(m.substr(8,2),10),Qe=parseInt(m.substr(10,2),10),tt=parseInt(m.substr(12,2),10),ct=parseInt(m.substr(14,2),10);return new Date(T,ae,xe,Qe,tt,ct,0)},ve=h.__private__.setCreationDate=function(m){var T;if(m===void 0&&(m=new Date),m instanceof Date)T=de(m);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(m))throw new Error("Invalid argument passed to jsPDF.setCreationDate");T=m}return te=T},I=h.__private__.getCreationDate=function(m){var T=te;return m==="jsDate"&&(T=ge(te)),T};h.setCreationDate=function(m){return ve(m),this},h.getCreationDate=function(m){return I(m)};var H,re=h.__private__.padd2=function(m){return("0"+parseInt(m)).slice(-2)},Y=h.__private__.padd2Hex=function(m){return("00"+(m=m.toString())).substr(m.length)},le=0,me=[],ke=[],Ee=0,Pe=[],nt=[],ut=!1,he=ke;h.__private__.setCustomOutputDestination=function(m){ut=!0,he=m};var Ze=function(m){ut||(he=m)};h.__private__.resetCustomOutputDestination=function(){ut=!1,he=ke};var F=h.__private__.out=function(m){return m=m.toString(),Ee+=m.length+1,he.push(m),he},se=h.__private__.write=function(m){return F(arguments.length===1?m.toString():Array.prototype.join.call(arguments," "))},qe=h.__private__.getArrayBuffer=function(m){for(var T=m.length,ae=new ArrayBuffer(T),xe=new Uint8Array(ae);T--;)xe[T]=m.charCodeAt(T);return ae},X=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return X};var ne=t.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(m){return ne=E===B?m/we:m,this};var je,J=h.__private__.getFontSize=h.getFontSize=function(){return E===y?ne:ne*we},$e=t.R2L||!1;h.__private__.setR2L=h.setR2L=function(m){return $e=m,this},h.__private__.getR2L=h.getR2L=function(){return $e};var Ve,ze=h.__private__.setZoomMode=function(m){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(m))je=m;else if(isNaN(m)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(m)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+m+'" is not recognized.');je=m}else je=parseInt(m,10)};h.__private__.getZoomMode=function(){return je};var We,lt=h.__private__.setPageMode=function(m){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(m)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+m+'" is not recognized.');Ve=m};h.__private__.getPageMode=function(){return Ve};var be=h.__private__.setLayoutMode=function(m){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(m)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+m+'" is not recognized.');We=m};h.__private__.getLayoutMode=function(){return We},h.__private__.setDisplayMode=h.setDisplayMode=function(m,T,ae){return ze(m),be(T),lt(ae),this};var Se={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(m){if(Object.keys(Se).indexOf(m)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Se[m]},h.__private__.getDocumentProperties=function(){return Se},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(m){for(var T in Se)Se.hasOwnProperty(T)&&m[T]&&(Se[T]=m[T]);return this},h.__private__.setDocumentProperty=function(m,T){if(Object.keys(Se).indexOf(m)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Se[m]=T};var ee,we,_e,Je,Xe,ye={},Le={},ft=[],At={},wt={},pt={},xt={},yt=null,zt=0,kt=[],Ut=new j2(h),br=t.hotfixes||[],Q={},Te={},st=[],Ge=function m(T,ae,xe,Qe,tt,ct){if(!(this instanceof m))return new m(T,ae,xe,Qe,tt,ct);isNaN(T)&&(T=1),isNaN(ae)&&(ae=0),isNaN(xe)&&(xe=0),isNaN(Qe)&&(Qe=1),isNaN(tt)&&(tt=0),isNaN(ct)&&(ct=0),this._matrix=[T,ae,xe,Qe,tt,ct]};Object.defineProperty(Ge.prototype,"sx",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(Ge.prototype,"shy",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(Ge.prototype,"shx",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(Ge.prototype,"sy",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(Ge.prototype,"tx",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(Ge.prototype,"ty",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(Ge.prototype,"a",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(Ge.prototype,"b",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(Ge.prototype,"c",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(Ge.prototype,"d",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(Ge.prototype,"e",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(Ge.prototype,"f",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(Ge.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ge.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ge.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ge.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ge.prototype.join=function(m){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(G).join(m)},Ge.prototype.multiply=function(m){var T=m.sx*this.sx+m.shy*this.shx,ae=m.sx*this.shy+m.shy*this.sy,xe=m.shx*this.sx+m.sy*this.shx,Qe=m.shx*this.shy+m.sy*this.sy,tt=m.tx*this.sx+m.ty*this.shx+this.tx,ct=m.tx*this.shy+m.ty*this.sy+this.ty;return new Ge(T,ae,xe,Qe,tt,ct)},Ge.prototype.decompose=function(){var m=this.sx,T=this.shy,ae=this.shx,xe=this.sy,Qe=this.tx,tt=this.ty,ct=Math.sqrt(m*m+T*T),Mt=(m/=ct)*ae+(T/=ct)*xe;ae-=m*Mt,xe-=T*Mt;var Vt=Math.sqrt(ae*ae+xe*xe);return Mt/=Vt,m*(xe/=Vt)<T*(ae/=Vt)&&(m=-m,T=-T,Mt=-Mt,ct=-ct),{scale:new Ge(ct,0,0,Vt,0,0),translate:new Ge(1,0,0,1,Qe,tt),rotate:new Ge(m,T,-T,m,0,0),skew:new Ge(1,0,Mt,1,0,0)}},Ge.prototype.toString=function(m){return this.join(" ")},Ge.prototype.inversed=function(){var m=this.sx,T=this.shy,ae=this.shx,xe=this.sy,Qe=this.tx,tt=this.ty,ct=1/(m*xe-T*ae),Mt=xe*ct,Vt=-T*ct,or=-ae*ct,hr=m*ct;return new Ge(Mt,Vt,or,hr,-Mt*Qe-or*tt,-Vt*Qe-hr*tt)},Ge.prototype.applyToPoint=function(m){var T=m.x*this.sx+m.y*this.shx+this.tx,ae=m.x*this.shy+m.y*this.sy+this.ty;return new Ti(T,ae)},Ge.prototype.applyToRectangle=function(m){var T=this.applyToPoint(m),ae=this.applyToPoint(new Ti(m.x+m.w,m.y+m.h));return new to(T.x,T.y,ae.x-T.x,ae.y-T.y)},Ge.prototype.clone=function(){var m=this.sx,T=this.shy,ae=this.shx,xe=this.sy,Qe=this.tx,tt=this.ty;return new Ge(m,T,ae,xe,Qe,tt)},h.Matrix=Ge;var Dt=h.matrixMult=function(m,T){return T.multiply(m)},ur=new Ge(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=ur;var Lt=function(m,T){if(!wt[m]){var ae=(T instanceof Ul?"Sh":"P")+(Object.keys(At).length+1).toString(10);T.id=ae,wt[m]=ae,At[ae]=T,Ut.publish("addPattern",T)}};h.ShadingPattern=Ul,h.TilingPattern=qc,h.addShadingPattern=function(m,T){return N("addShadingPattern()"),Lt(m,T),this},h.beginTilingPattern=function(m){N("beginTilingPattern()"),ro(m.boundingBox[0],m.boundingBox[1],m.boundingBox[2]-m.boundingBox[0],m.boundingBox[3]-m.boundingBox[1],m.matrix)},h.endTilingPattern=function(m,T){N("endTilingPattern()"),T.stream=nt[H].join(`
`),Lt(m,T),Ut.publish("endTilingPattern",T),st.pop().restore()};var gr,Jt=h.__private__.newObject=function(){var m=ot();return nr(m,!0),m},ot=h.__private__.newObjectDeferred=function(){return le++,me[le]=function(){return Ee},le},nr=function(m,T){return T=typeof T=="boolean"&&T,me[m]=Ee,T&&F(m+" 0 obj"),m},Wr=h.__private__.newAdditionalObject=function(){var m={objId:ot(),content:""};return Pe.push(m),m},gn=ot(),Lr=ot(),rs=h.__private__.decodeColorString=function(m){var T=m.split(" ");if(T.length!==2||T[1]!=="g"&&T[1]!=="G")T.length!==5||T[4]!=="k"&&T[4]!=="K"||(T=[(1-T[0])*(1-T[3]),(1-T[1])*(1-T[3]),(1-T[2])*(1-T[3]),"r"]);else{var ae=parseFloat(T[0]);T=[ae,ae,ae,"r"]}for(var xe="#",Qe=0;Qe<3;Qe++)xe+=("0"+Math.floor(255*parseFloat(T[Qe])).toString(16)).slice(-2);return xe},xr=h.__private__.encodeColorString=function(m){var T;typeof m=="string"&&(m={ch1:m});var ae=m.ch1,xe=m.ch2,Qe=m.ch3,tt=m.ch4,ct=m.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ae=="string"&&ae.charAt(0)!=="#"){var Mt=new nC(ae);if(Mt.ok)ae=Mt.toHex();else if(!/^\d*\.?\d*$/.test(ae))throw new Error('Invalid color "'+ae+'" passed to jsPDF.encodeColorString.')}if(typeof ae=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ae)&&(ae="#"+ae[1]+ae[1]+ae[2]+ae[2]+ae[3]+ae[3]),typeof ae=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ae)){var Vt=parseInt(ae.substr(1),16);ae=Vt>>16&255,xe=Vt>>8&255,Qe=255&Vt}if(xe===void 0||tt===void 0&&ae===xe&&xe===Qe)T=typeof ae=="string"?ae+" "+ct[0]:m.precision===2?k(ae/255)+" "+ct[0]:_(ae/255)+" "+ct[0];else if(tt===void 0||Gr(tt)==="object"){if(tt&&!isNaN(tt.a)&&tt.a===0)return["1.","1.","1.",ct[1]].join(" ");T=typeof ae=="string"?[ae,xe,Qe,ct[1]].join(" "):m.precision===2?[k(ae/255),k(xe/255),k(Qe/255),ct[1]].join(" "):[_(ae/255),_(xe/255),_(Qe/255),ct[1]].join(" ")}else T=typeof ae=="string"?[ae,xe,Qe,tt,ct[2]].join(" "):m.precision===2?[k(ae),k(xe),k(Qe),k(tt),ct[2]].join(" "):[_(ae),_(xe),_(Qe),_(tt),ct[2]].join(" ");return T},qn=h.__private__.getFilters=function(){return A},ys=h.__private__.putStream=function(m){var T=(m=m||{}).data||"",ae=m.filters||qn(),xe=m.alreadyAppliedFilters||[],Qe=m.addLength1||!1,tt=T.length,ct=m.objectId,Mt=function(Bn){return Bn};if(d!==null&&ct===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Mt=_n.encryptor(ct,0));var Vt={};ae===!0&&(ae=["FlateEncode"]);var or=m.additionalKeyValues||[],hr=(Vt=tr.API.processDataByFilters!==void 0?tr.API.processDataByFilters(T,ae):{data:T,reverseChain:[]}).reverseChain+(Array.isArray(xe)?xe.join(" "):xe.toString());if(Vt.data.length!==0&&(or.push({key:"Length",value:Vt.data.length}),Qe===!0&&or.push({key:"Length1",value:tt})),hr.length!=0)if(hr.split("/").length-1==1)or.push({key:"Filter",value:hr});else{or.push({key:"Filter",value:"["+hr+"]"});for(var Sr=0;Sr<or.length;Sr+=1)if(or[Sr].key==="DecodeParms"){for(var en=[],mn=0;mn<Vt.reverseChain.split("/").length-1;mn+=1)en.push("null");en.push(or[Sr].value),or[Sr].value="["+en.join(" ")+"]"}}F("<<");for(var Hr=0;Hr<or.length;Hr++)F("/"+or[Hr].key+" "+or[Hr].value);F(">>"),Vt.data.length!==0&&(F("stream"),F(Mt(Vt.data)),F("endstream"))},ia=h.__private__.putPage=function(m){var T=m.number,ae=m.data,xe=m.objId,Qe=m.contentsObjId;nr(xe,!0),F("<</Type /Page"),F("/Parent "+m.rootDictionaryObjId+" 0 R"),F("/Resources "+m.resourceDictionaryObjId+" 0 R"),F("/MediaBox ["+parseFloat(G(m.mediaBox.bottomLeftX))+" "+parseFloat(G(m.mediaBox.bottomLeftY))+" "+G(m.mediaBox.topRightX)+" "+G(m.mediaBox.topRightY)+"]"),m.cropBox!==null&&F("/CropBox ["+G(m.cropBox.bottomLeftX)+" "+G(m.cropBox.bottomLeftY)+" "+G(m.cropBox.topRightX)+" "+G(m.cropBox.topRightY)+"]"),m.bleedBox!==null&&F("/BleedBox ["+G(m.bleedBox.bottomLeftX)+" "+G(m.bleedBox.bottomLeftY)+" "+G(m.bleedBox.topRightX)+" "+G(m.bleedBox.topRightY)+"]"),m.trimBox!==null&&F("/TrimBox ["+G(m.trimBox.bottomLeftX)+" "+G(m.trimBox.bottomLeftY)+" "+G(m.trimBox.topRightX)+" "+G(m.trimBox.topRightY)+"]"),m.artBox!==null&&F("/ArtBox ["+G(m.artBox.bottomLeftX)+" "+G(m.artBox.bottomLeftY)+" "+G(m.artBox.topRightX)+" "+G(m.artBox.topRightY)+"]"),typeof m.userUnit=="number"&&m.userUnit!==1&&F("/UserUnit "+m.userUnit),Ut.publish("putPage",{objId:xe,pageContext:kt[T],pageNumber:T,page:ae}),F("/Contents "+Qe+" 0 R"),F(">>"),F("endobj");var tt=ae.join(`
`);return E===B&&(tt+=`
Q`),nr(Qe,!0),ys({data:tt,filters:qn(),objectId:Qe}),F("endobj"),xe},yr=h.__private__.putPages=function(){var m,T,ae=[];for(m=1;m<=zt;m++)kt[m].objId=ot(),kt[m].contentsObjId=ot();for(m=1;m<=zt;m++)ae.push(ia({number:m,data:nt[m],objId:kt[m].objId,contentsObjId:kt[m].contentsObjId,mediaBox:kt[m].mediaBox,cropBox:kt[m].cropBox,bleedBox:kt[m].bleedBox,trimBox:kt[m].trimBox,artBox:kt[m].artBox,userUnit:kt[m].userUnit,rootDictionaryObjId:gn,resourceDictionaryObjId:Lr}));nr(gn,!0),F("<</Type /Pages");var xe="/Kids [";for(T=0;T<zt;T++)xe+=ae[T]+" 0 R ";F(xe+"]"),F("/Count "+zt),F(">>"),F("endobj"),Ut.publish("postPutPages")},xA=function(m){Ut.publish("putFont",{font:m,out:F,newObject:Jt,putStream:ys}),m.isAlreadyPutted!==!0&&(m.objectNumber=Jt(),F("<<"),F("/Type /Font"),F("/BaseFont /"+Ic(m.postScriptName)),F("/Subtype /Type1"),typeof m.encoding=="string"&&F("/Encoding /"+m.encoding),F("/FirstChar 32"),F("/LastChar 255"),F(">>"),F("endobj"))},Rn=function(m){m.objectNumber=Jt();var T=[];T.push({key:"Type",value:"/XObject"}),T.push({key:"Subtype",value:"/Form"}),T.push({key:"BBox",value:"["+[G(m.x),G(m.y),G(m.x+m.width),G(m.y+m.height)].join(" ")+"]"}),T.push({key:"Matrix",value:"["+m.matrix.toString()+"]"});var ae=m.pages[1].join(`
`);ys({data:ae,additionalKeyValues:T,objectId:m.objectNumber}),F("endobj")},aa=function(m,T){T||(T=21);var ae=Jt(),xe=function(ct,Mt){var Vt,or=[],hr=1/(Mt-1);for(Vt=0;Vt<1;Vt+=hr)or.push(Vt);if(or.push(1),ct[0].offset!=0){var Sr={offset:0,color:ct[0].color};ct.unshift(Sr)}if(ct[ct.length-1].offset!=1){var en={offset:1,color:ct[ct.length-1].color};ct.push(en)}for(var mn="",Hr=0,Bn=0;Bn<or.length;Bn++){for(Vt=or[Bn];Vt>ct[Hr+1].offset;)Hr++;var xn=ct[Hr].offset,Hn=(Vt-xn)/(ct[Hr+1].offset-xn),Oi=ct[Hr].color,ri=ct[Hr+1].color;mn+=Y(Math.round((1-Hn)*Oi[0]+Hn*ri[0]).toString(16))+Y(Math.round((1-Hn)*Oi[1]+Hn*ri[1]).toString(16))+Y(Math.round((1-Hn)*Oi[2]+Hn*ri[2]).toString(16))}return mn.trim()}(m.colors,T),Qe=[];Qe.push({key:"FunctionType",value:"0"}),Qe.push({key:"Domain",value:"[0.0 1.0]"}),Qe.push({key:"Size",value:"["+T+"]"}),Qe.push({key:"BitsPerSample",value:"8"}),Qe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Qe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ys({data:xe,additionalKeyValues:Qe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ae}),F("endobj"),m.objectNumber=Jt(),F("<< /ShadingType "+m.type),F("/ColorSpace /DeviceRGB");var tt="/Coords ["+G(parseFloat(m.coords[0]))+" "+G(parseFloat(m.coords[1]))+" ";m.type===2?tt+=G(parseFloat(m.coords[2]))+" "+G(parseFloat(m.coords[3])):tt+=G(parseFloat(m.coords[2]))+" "+G(parseFloat(m.coords[3]))+" "+G(parseFloat(m.coords[4]))+" "+G(parseFloat(m.coords[5])),F(tt+="]"),m.matrix&&F("/Matrix ["+m.matrix.toString()+"]"),F("/Function "+ae+" 0 R"),F("/Extend [true true]"),F(">>"),F("endobj")},vA=function(m,T){var ae=ot(),xe=Jt();T.push({resourcesOid:ae,objectOid:xe}),m.objectNumber=xe;var Qe=[];Qe.push({key:"Type",value:"/Pattern"}),Qe.push({key:"PatternType",value:"1"}),Qe.push({key:"PaintType",value:"1"}),Qe.push({key:"TilingType",value:"1"}),Qe.push({key:"BBox",value:"["+m.boundingBox.map(G).join(" ")+"]"}),Qe.push({key:"XStep",value:G(m.xStep)}),Qe.push({key:"YStep",value:G(m.yStep)}),Qe.push({key:"Resources",value:ae+" 0 R"}),m.matrix&&Qe.push({key:"Matrix",value:"["+m.matrix.toString()+"]"}),ys({data:m.stream,additionalKeyValues:Qe,objectId:m.objectNumber}),F("endobj")},rl=function(m){for(var T in m.objectNumber=Jt(),F("<<"),m)switch(T){case"opacity":F("/ca "+k(m[T]));break;case"stroke-opacity":F("/CA "+k(m[T]))}F(">>"),F("endobj")},Aa=function(m){nr(m.resourcesOid,!0),F("<<"),F("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var T in F("/Font <<"),ye)ye.hasOwnProperty(T)&&(p===!1||p===!0&&g.hasOwnProperty(T))&&F("/"+T+" "+ye[T].objectNumber+" 0 R");F(">>")}(),function(){if(Object.keys(At).length>0){for(var T in F("/Shading <<"),At)At.hasOwnProperty(T)&&At[T]instanceof Ul&&At[T].objectNumber>=0&&F("/"+T+" "+At[T].objectNumber+" 0 R");Ut.publish("putShadingPatternDict"),F(">>")}}(),function(T){if(Object.keys(At).length>0){for(var ae in F("/Pattern <<"),At)At.hasOwnProperty(ae)&&At[ae]instanceof h.TilingPattern&&At[ae].objectNumber>=0&&At[ae].objectNumber<T&&F("/"+ae+" "+At[ae].objectNumber+" 0 R");Ut.publish("putTilingPatternDict"),F(">>")}}(m.objectOid),function(){if(Object.keys(pt).length>0){var T;for(T in F("/ExtGState <<"),pt)pt.hasOwnProperty(T)&&pt[T].objectNumber>=0&&F("/"+T+" "+pt[T].objectNumber+" 0 R");Ut.publish("putGStateDict"),F(">>")}}(),function(){for(var T in F("/XObject <<"),Q)Q.hasOwnProperty(T)&&Q[T].objectNumber>=0&&F("/"+T+" "+Q[T].objectNumber+" 0 R");Ut.publish("putXobjectDict"),F(">>")}(),F(">>"),F("endobj")},ec=function(m){Le[m.fontName]=Le[m.fontName]||{},Le[m.fontName][m.fontStyle]=m.id},nl=function(m,T,ae,xe,Qe){var tt={id:"F"+(Object.keys(ye).length+1).toString(10),postScriptName:m,fontName:T,fontStyle:ae,encoding:xe,isStandardFont:Qe||!1,metadata:{}};return Ut.publish("addFont",{font:tt,instance:this}),ye[tt.id]=tt,ec(tt),tt.id},Xs=h.__private__.pdfEscape=h.pdfEscape=function(m,T){return function(ae,xe){var Qe,tt,ct,Mt,Vt,or,hr,Sr,en;if(ct=(xe=xe||{}).sourceEncoding||"Unicode",Vt=xe.outputEncoding,(xe.autoencode||Vt)&&ye[ee].metadata&&ye[ee].metadata[ct]&&ye[ee].metadata[ct].encoding&&(Mt=ye[ee].metadata[ct].encoding,!Vt&&ye[ee].encoding&&(Vt=ye[ee].encoding),!Vt&&Mt.codePages&&(Vt=Mt.codePages[0]),typeof Vt=="string"&&(Vt=Mt[Vt]),Vt)){for(hr=!1,or=[],Qe=0,tt=ae.length;Qe<tt;Qe++)(Sr=Vt[ae.charCodeAt(Qe)])?or.push(String.fromCharCode(Sr)):or.push(ae[Qe]),or[Qe].charCodeAt(0)>>8&&(hr=!0);ae=or.join("")}for(Qe=ae.length;hr===void 0&&Qe!==0;)ae.charCodeAt(Qe-1)>>8&&(hr=!0),Qe--;if(!hr)return ae;for(or=xe.noBOM?[]:[254,255],Qe=0,tt=ae.length;Qe<tt;Qe++){if((en=(Sr=ae.charCodeAt(Qe))>>8)>>8)throw new Error("Character at position "+Qe+" of string '"+ae+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");or.push(en),or.push(Sr-(en<<8))}return String.fromCharCode.apply(void 0,or)}(m,T).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},sl=h.__private__.beginPage=function(m){nt[++zt]=[],kt[zt]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(m[0]),topRightY:Number(m[1])}},tc(zt),Ze(nt[H])},il=function(m,T){var ae,xe,Qe;switch(r=T||r,typeof m=="string"&&(ae=x(m.toLowerCase()),Array.isArray(ae)&&(xe=ae[0],Qe=ae[1])),Array.isArray(m)&&(xe=m[0]*we,Qe=m[1]*we),isNaN(xe)&&(xe=s[0],Qe=s[1]),(xe>14400||Qe>14400)&&(Xr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),xe=Math.min(14400,xe),Qe=Math.min(14400,Qe)),s=[xe,Qe],r.substr(0,1)){case"l":Qe>xe&&(s=[Qe,xe]);break;case"p":xe>Qe&&(s=[Qe,xe])}sl(s),Ar(dr),F(eo),sr!==0&&F(sr+" J"),bs!==0&&F(bs+" j"),Ut.publish("addPage",{pageNumber:zt})},Ra=function(m){m>0&&m<=zt&&(nt.splice(m,1),kt.splice(m,1),zt--,H>zt&&(H=zt),this.setPage(H))},tc=function(m){m>0&&m<=zt&&(H=m)},rc=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return nt.length-1},al=function(m,T,ae){var xe,Qe=void 0;return ae=ae||{},m=m!==void 0?m:ye[ee].fontName,T=T!==void 0?T:ye[ee].fontStyle,xe=m.toLowerCase(),Le[xe]!==void 0&&Le[xe][T]!==void 0?Qe=Le[xe][T]:Le[m]!==void 0&&Le[m][T]!==void 0?Qe=Le[m][T]:ae.disableWarning===!1&&Xr.warn("Unable to look up font label for font '"+m+"', '"+T+"'. Refer to getFontList() for available fonts."),Qe||ae.noFallback||(Qe=Le.times[T])==null&&(Qe=Le.times.normal),Qe},di=h.__private__.putInfo=function(){var m=Jt(),T=function(xe){return xe};for(var ae in d!==null&&(T=_n.encryptor(m,0)),F("<<"),F("/Producer ("+Xs(T("jsPDF "+tr.version))+")"),Se)Se.hasOwnProperty(ae)&&Se[ae]&&F("/"+ae.substr(0,1).toUpperCase()+ae.substr(1)+" ("+Xs(T(Se[ae]))+")");F("/CreationDate ("+Xs(T(te))+")"),F(">>"),F("endobj")},JA=h.__private__.putCatalog=function(m){var T=(m=m||{}).rootDictionaryObjId||gn;switch(Jt(),F("<<"),F("/Type /Catalog"),F("/Pages "+T+" 0 R"),je||(je="fullwidth"),je){case"fullwidth":F("/OpenAction [3 0 R /FitH null]");break;case"fullheight":F("/OpenAction [3 0 R /FitV null]");break;case"fullpage":F("/OpenAction [3 0 R /Fit]");break;case"original":F("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ae=""+je;ae.substr(ae.length-1)==="%"&&(je=parseInt(je)/100),typeof je=="number"&&F("/OpenAction [3 0 R /XYZ null null "+k(je)+"]")}switch(We||(We="continuous"),We){case"continuous":F("/PageLayout /OneColumn");break;case"single":F("/PageLayout /SinglePage");break;case"two":case"twoleft":F("/PageLayout /TwoColumnLeft");break;case"tworight":F("/PageLayout /TwoColumnRight")}Ve&&F("/PageMode /"+Ve),Ut.publish("putCatalog"),F(">>"),F("endobj")},wA=h.__private__.putTrailer=function(){F("trailer"),F("<<"),F("/Size "+(le+1)),F("/Root "+le+" 0 R"),F("/Info "+(le-1)+" 0 R"),d!==null&&F("/Encrypt "+_n.oid+" 0 R"),F("/ID [ <"+ue+"> <"+ue+"> ]"),F(">>")},_t=h.__private__.putHeader=function(){F("%PDF-"+b),F("%")},Al=h.__private__.putXRef=function(){var m="0000000000";F("xref"),F("0 "+(le+1)),F("0000000000 65535 f ");for(var T=1;T<=le;T++)typeof me[T]=="function"?F((m+me[T]()).slice(-10)+" 00000 n "):me[T]!==void 0?F((m+me[T]).slice(-10)+" 00000 n "):F("0000000000 00000 n ")},Zs=h.__private__.buildDocument=function(){var m;le=0,Ee=0,ke=[],me=[],Pe=[],gn=ot(),Lr=ot(),Ze(ke),Ut.publish("buildDocument"),_t(),yr(),function(){Ut.publish("putAdditionalObjects");for(var ae=0;ae<Pe.length;ae++){var xe=Pe[ae];nr(xe.objId,!0),F(xe.content),F("endobj")}Ut.publish("postPutAdditionalObjects")}(),m=[],function(){for(var ae in ye)ye.hasOwnProperty(ae)&&(p===!1||p===!0&&g.hasOwnProperty(ae))&&xA(ye[ae])}(),function(){var ae;for(ae in pt)pt.hasOwnProperty(ae)&&rl(pt[ae])}(),function(){for(var ae in Q)Q.hasOwnProperty(ae)&&Rn(Q[ae])}(),function(ae){var xe;for(xe in At)At.hasOwnProperty(xe)&&(At[xe]instanceof Ul?aa(At[xe]):At[xe]instanceof qc&&vA(At[xe],ae))}(m),Ut.publish("putResources"),m.forEach(Aa),Aa({resourcesOid:Lr,objectOid:Number.MAX_SAFE_INTEGER}),Ut.publish("postPutResources"),d!==null&&(_n.oid=Jt(),F("<<"),F("/Filter /Standard"),F("/V "+_n.v),F("/R "+_n.r),F("/U <"+_n.toHexString(_n.U)+">"),F("/O <"+_n.toHexString(_n.O)+">"),F("/P "+_n.P),F(">>"),F("endobj")),di(),JA();var T=Ee;return Al(),wA(),F("startxref"),F(""+T),F("%%EOF"),Ze(nt[H]),ke.join(`
`)},yA=h.__private__.getBlob=function(m){return new Blob([qe(m)],{type:"application/pdf"})},Zr=h.output=h.__private__.output=(gr=function(m,T){switch(typeof(T=T||{})=="string"?T={filename:T}:T.filename=T.filename||"generated.pdf",m){case void 0:return Zs();case"save":h.save(T.filename);break;case"arraybuffer":return qe(Zs());case"blob":return yA(Zs());case"bloburi":case"bloburl":if(cr.URL!==void 0&&typeof cr.URL.createObjectURL=="function")return cr.URL&&cr.URL.createObjectURL(yA(Zs()))||void 0;Xr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ae="",xe=Zs();try{ae=C2(xe)}catch{ae=C2(unescape(encodeURIComponent(xe)))}return"data:application/pdf;filename="+T.filename+";base64,"+ae;case"pdfobjectnewwindow":if(Object.prototype.toString.call(cr)==="[object Window]"){var Qe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",tt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';T.pdfObjectUrl&&(Qe=T.pdfObjectUrl,tt="");var ct='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Qe+'"'+tt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(T)+");<\/script></body></html>",Mt=cr.open();return Mt!==null&&Mt.document.write(ct),Mt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(cr)==="[object Window]"){var Vt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(T.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+T.filename+'" width="500px" height="400px" /></body></html>',or=cr.open();if(or!==null){or.document.write(Vt);var hr=this;or.document.documentElement.querySelector("#pdfViewer").onload=function(){or.document.title=T.filename,or.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(hr.output("bloburl"))}}return or}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(cr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Sr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",T)+'"></iframe></body></html>',en=cr.open();if(en!==null&&(en.document.write(Sr),en.document.title=T.filename),en||typeof safari>"u")return en;break;case"datauri":case"dataurl":return cr.document.location.href=this.output("datauristring",T);default:return null}},gr.foo=function(){try{return gr.apply(this,arguments)}catch(ae){var m=ae.stack||"";~m.indexOf(" at ")&&(m=m.split(" at ")[1]);var T="Error in function "+m.split(`
`)[0].split("<")[0]+": "+ae.message;if(!cr.console)throw new Error(T);cr.console.error(T,ae),cr.alert&&alert(T)}},gr.foo.bar=gr,gr.foo),ei=function(m){return Array.isArray(br)===!0&&br.indexOf(m)>-1};switch(n){case"pt":we=1;break;case"mm":we=72/25.4;break;case"cm":we=72/2.54;break;case"in":we=72;break;case"px":we=ei("px_scaling")==1?.75:96/72;break;case"pc":case"em":we=12;break;case"ex":we=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);we=n}var _n=null;ve(),ie();var Ps=h.__private__.getPageInfo=h.getPageInfo=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:kt[m].objId,pageNumber:m,pageContext:kt[m]}},zr=h.__private__.getPageInfoByObjId=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var T in kt)if(kt[T].objId===m)break;return Ps(T)},ol=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:kt[H].objId,pageNumber:H,pageContext:kt[H]}};h.addPage=function(){return il.apply(this,arguments),this},h.setPage=function(){return tc.apply(this,arguments),Ze.call(this,nt[H]),this},h.insertPage=function(m){return this.addPage(),this.movePage(H,m),this},h.movePage=function(m,T){var ae,xe;if(m>T){ae=nt[m],xe=kt[m];for(var Qe=m;Qe>T;Qe--)nt[Qe]=nt[Qe-1],kt[Qe]=kt[Qe-1];nt[T]=ae,kt[T]=xe,this.setPage(T)}else if(m<T){ae=nt[m],xe=kt[m];for(var tt=m;tt<T;tt++)nt[tt]=nt[tt+1],kt[tt]=kt[tt+1];nt[T]=ae,kt[T]=xe,this.setPage(T)}return this},h.deletePage=function(){return Ra.apply(this,arguments),this},h.__private__.text=h.text=function(m,T,ae,xe,Qe){var tt,ct,Mt,Vt,or,hr,Sr,en,mn,Hr=(xe=xe||{}).scope||this;if(typeof m=="number"&&typeof T=="number"&&(typeof ae=="string"||Array.isArray(ae))){var Bn=ae;ae=T,T=m,m=Bn}if(arguments[3]instanceof Ge==0?(Mt=arguments[4],Vt=arguments[5],Gr(Sr=arguments[3])==="object"&&Sr!==null||(typeof Mt=="string"&&(Vt=Mt,Mt=null),typeof Sr=="string"&&(Vt=Sr,Sr=null),typeof Sr=="number"&&(Mt=Sr,Sr=null),xe={flags:Sr,angle:Mt,align:Vt})):(N("The transform parameter of text() with a Matrix value"),mn=Qe),isNaN(T)||isNaN(ae)||m==null)throw new Error("Invalid arguments passed to jsPDF.text");if(m.length===0)return Hr;var xn,Hn="",Oi=typeof xe.lineHeightFactor=="number"?xe.lineHeightFactor:Ha,ri=Hr.internal.scaleFactor;function Di(Ur){return Ur=Ur.split("	").join(Array(xe.TabLen||9).join(" ")),Xs(Ur,Sr)}function so(Ur){for(var Or,dn=Ur.concat(),Cn=[],Mi=dn.length;Mi--;)typeof(Or=dn.shift())=="string"?Cn.push(Or):Array.isArray(Ur)&&(Or.length===1||Or[1]===void 0&&Or[2]===void 0)?Cn.push(Or[0]):Cn.push([Or[0],Or[1],Or[2]]);return Cn}function BA(Ur,Or){var dn;if(typeof Ur=="string")dn=Or(Ur)[0];else if(Array.isArray(Ur)){for(var Cn,Mi,po=Ur.concat(),SA=[],wl=po.length;wl--;)typeof(Cn=po.shift())=="string"?SA.push(Or(Cn)[0]):Array.isArray(Cn)&&typeof Cn[0]=="string"&&(Mi=Or(Cn[0],Cn[1],Cn[2]),SA.push([Mi[0],Mi[1],Mi[2]]));dn=SA}return dn}var ca=!1,Ka=!0;if(typeof m=="string")ca=!0;else if(Array.isArray(m)){var Ga=m.concat();ct=[];for(var ua,Mn=Ga.length;Mn--;)(typeof(ua=Ga.shift())!="string"||Array.isArray(ua)&&typeof ua[0]!="string")&&(Ka=!1);ca=Ka}if(ca===!1)throw new Error('Type of text must be string or Array. "'+m+'" is not recognized.');typeof m=="string"&&(m=m.match(/[\r?\n]/)?m.split(/\r\n|\r|\n/g):[m]);var Va=ne/Hr.internal.scaleFactor,za=Va*(Oi-1);switch(xe.baseline){case"bottom":ae-=za;break;case"top":ae+=Va-za;break;case"hanging":ae+=Va-2*za;break;case"middle":ae+=Va/2-za}if((hr=xe.maxWidth||0)>0&&(typeof m=="string"?m=Hr.splitTextToSize(m,hr):Object.prototype.toString.call(m)==="[object Array]"&&(m=m.reduce(function(Ur,Or){return Ur.concat(Hr.splitTextToSize(Or,hr))},[]))),tt={text:m,x:T,y:ae,options:xe,mutex:{pdfEscape:Xs,activeFontKey:ee,fonts:ye,activeFontSize:ne}},Ut.publish("preProcessText",tt),m=tt.text,Mt=(xe=tt.options).angle,mn instanceof Ge==0&&Mt&&typeof Mt=="number"){Mt*=Math.PI/180,xe.rotationDirection===0&&(Mt=-Mt),E===B&&(Mt=-Mt);var io=Math.cos(Mt),ao=Math.sin(Mt);mn=new Ge(io,ao,-ao,io,0,0)}else Mt&&Mt instanceof Ge&&(mn=Mt);E!==B||mn||(mn=ur),(or=xe.charSpace||hi)!==void 0&&(Hn+=G(z(or))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(en=xe.horizontalScale)!==void 0&&(Hn+=G(100*en)+` Tz
`),xe.lang;var ns=-1,Ri=xe.renderingMode!==void 0?xe.renderingMode:xe.stroke,CA=Hr.internal.getCurrentPageInfo().pageContext;switch(Ri){case 0:case!1:case"fill":ns=0;break;case 1:case!0:case"stroke":ns=1;break;case 2:case"fillThenStroke":ns=2;break;case 3:case"invisible":ns=3;break;case 4:case"fillAndAddForClipping":ns=4;break;case 5:case"strokeAndAddPathForClipping":ns=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ns=6;break;case 7:case"addToPathForClipping":ns=7}var xl=CA.usedRenderingMode!==void 0?CA.usedRenderingMode:-1;ns!==-1?Hn+=ns+` Tr
`:xl!==-1&&(Hn+=`0 Tr
`),ns!==-1&&(CA.usedRenderingMode=ns),Vt=xe.align||"left";var Ds,qa=ne*Oi,Ao=Hr.internal.pageSize.getWidth(),oo=ye[ee];or=xe.charSpace||hi,hr=xe.maxWidth||0,Sr=Object.assign({autoencode:!0,noBOM:!0},xe.flags);var da=[],Wa=function(Ur){return Hr.getStringUnitWidth(Ur,{font:oo,charSpace:or,fontSize:ne,doKerning:!1})*ne/ri};if(Object.prototype.toString.call(m)==="[object Array]"){var Bs;ct=so(m),Vt!=="left"&&(Ds=ct.map(Wa));var Cs,ha=0;if(Vt==="right"){T-=Ds[0],m=[],Mn=ct.length;for(var Hi=0;Hi<Mn;Hi++)Hi===0?(Cs=Nr(T),Bs=Os(ae)):(Cs=z(ha-Ds[Hi]),Bs=-qa),m.push([ct[Hi],Cs,Bs]),ha=Ds[Hi]}else if(Vt==="center"){T-=Ds[0]/2,m=[],Mn=ct.length;for(var fa=0;fa<Mn;fa++)fa===0?(Cs=Nr(T),Bs=Os(ae)):(Cs=z((ha-Ds[fa])/2),Bs=-qa),m.push([ct[fa],Cs,Bs]),ha=Ds[fa]}else if(Vt==="left"){m=[],Mn=ct.length;for(var lo=0;lo<Mn;lo++)m.push(ct[lo])}else if(Vt==="justify"&&oo.encoding==="Identity-H"){m=[],Mn=ct.length,hr=hr!==0?hr:Ao;for(var NA=0,un=0;un<Mn;un++)if(Bs=un===0?Os(ae):-qa,Cs=un===0?Nr(T):NA,un<Mn-1){var vl=z((hr-Ds[un])/(ct[un].split(" ").length-1)),fi=ct[un].split(" ");m.push([fi[0]+" ",Cs,Bs]),NA=0;for(var pi=1;pi<fi.length;pi++){var co=(Wa(fi[pi-1]+" "+fi[pi])-Wa(fi[pi]))*ri+vl;pi==fi.length-1?m.push([fi[pi],co,0]):m.push([fi[pi]+" ",co,0]),NA-=co}}else m.push([ct[un],Cs,Bs]);m.push(["",NA,0])}else{if(Vt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(m=[],Mn=ct.length,hr=hr!==0?hr:Ao,un=0;un<Mn;un++){Bs=un===0?Os(ae):-qa,Cs=un===0?Nr(T):0;var uo=ct[un].split(" ").length-1,ho=uo>0?(hr-Ds[un])/uo:0;un<Mn-1?da.push(G(z(ho))):da.push(0),m.push([ct[un],Cs,Bs])}}}(typeof xe.R2L=="boolean"?xe.R2L:$e)===!0&&(m=BA(m,function(Ur,Or,dn){return[Ur.split("").reverse().join(""),Or,dn]})),tt={text:m,x:T,y:ae,options:xe,mutex:{pdfEscape:Xs,activeFontKey:ee,fonts:ye,activeFontSize:ne}},Ut.publish("postProcessText",tt),m=tt.text,xn=tt.mutex.isHex||!1;var fo=ye[ee].encoding;fo!=="WinAnsiEncoding"&&fo!=="StandardEncoding"||(m=BA(m,function(Ur,Or,dn){return[Di(Ur),Or,dn]})),ct=so(m),m=[];for(var pa,ga,ma,Ja=Array.isArray(ct[0])?1:0,xa="",Ya=function(Ur,Or,dn){var Cn="";return dn instanceof Ge?(dn=typeof xe.angle=="number"?Dt(dn,new Ge(1,0,0,1,Ur,Or)):Dt(new Ge(1,0,0,1,Ur,Or),dn),E===B&&(dn=Dt(new Ge(1,0,0,-1,0,0),dn)),Cn=dn.join(" ")+` Tm
`):Cn=G(Ur)+" "+G(Or)+` Td
`,Cn},Rs=0;Rs<ct.length;Rs++){switch(xa="",Ja){case 1:ma=(xn?"<":"(")+ct[Rs][0]+(xn?">":")"),pa=parseFloat(ct[Rs][1]),ga=parseFloat(ct[Rs][2]);break;case 0:ma=(xn?"<":"(")+ct[Rs]+(xn?">":")"),pa=Nr(T),ga=Os(ae)}da!==void 0&&da[Rs]!==void 0&&(xa=da[Rs]+` Tw
`),Rs===0?m.push(xa+Ya(pa,ga,mn)+ma):Ja===0?m.push(xa+ma):Ja===1&&m.push(xa+Ya(pa,ga,mn)+ma)}m=Ja===0?m.join(` Tj
T* `):m.join(` Tj
`),m+=` Tj
`;var gi=`BT
/`;return gi+=ee+" "+ne+` Tf
`,gi+=G(ne*Oi)+` TL
`,gi+=la+`
`,gi+=Hn,gi+=m,F(gi+="ET"),g[ee]=!0,Hr};var oa=h.__private__.clip=h.clip=function(m){return F(m==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return oa("evenodd")},h.__private__.discardPath=h.discardPath=function(){return F("n"),this};var Qi=h.__private__.isValidStyle=function(m){var T=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(m)!==-1&&(T=!0),T};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(m){return Qi(m)&&(c=m),this};var ll=h.__private__.getStyle=h.getStyle=function(m){var T=c;switch(m){case"D":case"S":T="S";break;case"F":T="f";break;case"FD":case"DF":T="B";break;case"f":case"f*":case"B":case"B*":T=m}return T},nc=h.close=function(){return F("h"),this};h.stroke=function(){return F("S"),this},h.fill=function(m){return cl("f",m),this},h.fillEvenOdd=function(m){return cl("f*",m),this},h.fillStroke=function(m){return cl("B",m),this},h.fillStrokeEvenOdd=function(m){return cl("B*",m),this};var cl=function(m,T){Gr(T)==="object"?sc(T,m):F(m)},YA=function(m){m===null||E===B&&m===void 0||(m=ll(m),F(m))};function XA(m,T,ae,xe,Qe){var tt=new qc(T||this.boundingBox,ae||this.xStep,xe||this.yStep,this.gState,Qe||this.matrix);tt.stream=this.stream;var ct=m+"$$"+this.cloneIndex+++"$$";return Lt(ct,tt),tt}var sc=function(m,T){var ae=wt[m.key],xe=At[ae];if(xe instanceof Ul)F("q"),F(ic(T)),xe.gState&&h.setGState(xe.gState),F(m.matrix.toString()+" cm"),F("/"+ae+" sh"),F("Q");else if(xe instanceof qc){var Qe=new Ge(1,0,0,-1,0,$a());m.matrix&&(Qe=Qe.multiply(m.matrix||ur),ae=XA.call(xe,m.key,m.boundingBox,m.xStep,m.yStep,Qe).id),F("q"),F("/Pattern cs"),F("/"+ae+" scn"),xe.gState&&h.setGState(xe.gState),F(T),F("Q")}},ic=function(m){switch(m){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},ZA=h.moveTo=function(m,T){return F(G(z(m))+" "+G(O(T))+" m"),this},ul=h.lineTo=function(m,T){return F(G(z(m))+" "+G(O(T))+" l"),this},ti=h.curveTo=function(m,T,ae,xe,Qe,tt){return F([G(z(m)),G(O(T)),G(z(ae)),G(O(xe)),G(z(Qe)),G(O(tt)),"c"].join(" ")),this};h.__private__.line=h.line=function(m,T,ae,xe,Qe){if(isNaN(m)||isNaN(T)||isNaN(ae)||isNaN(xe)||!Qi(Qe))throw new Error("Invalid arguments passed to jsPDF.line");return E===y?this.lines([[ae-m,xe-T]],m,T,[1,1],Qe||"S"):this.lines([[ae-m,xe-T]],m,T,[1,1]).stroke()},h.__private__.lines=h.lines=function(m,T,ae,xe,Qe,tt){var ct,Mt,Vt,or,hr,Sr,en,mn,Hr,Bn,xn,Hn;if(typeof m=="number"&&(Hn=ae,ae=T,T=m,m=Hn),xe=xe||[1,1],tt=tt||!1,isNaN(T)||isNaN(ae)||!Array.isArray(m)||!Array.isArray(xe)||!Qi(Qe)||typeof tt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ZA(T,ae),ct=xe[0],Mt=xe[1],or=m.length,Bn=T,xn=ae,Vt=0;Vt<or;Vt++)(hr=m[Vt]).length===2?(Bn=hr[0]*ct+Bn,xn=hr[1]*Mt+xn,ul(Bn,xn)):(Sr=hr[0]*ct+Bn,en=hr[1]*Mt+xn,mn=hr[2]*ct+Bn,Hr=hr[3]*Mt+xn,Bn=hr[4]*ct+Bn,xn=hr[5]*Mt+xn,ti(Sr,en,mn,Hr,Bn,xn));return tt&&nc(),YA(Qe),this},h.path=function(m){for(var T=0;T<m.length;T++){var ae=m[T],xe=ae.c;switch(ae.op){case"m":ZA(xe[0],xe[1]);break;case"l":ul(xe[0],xe[1]);break;case"c":ti.apply(this,xe);break;case"h":nc()}}return this},h.__private__.rect=h.rect=function(m,T,ae,xe,Qe){if(isNaN(m)||isNaN(T)||isNaN(ae)||isNaN(xe)||!Qi(Qe))throw new Error("Invalid arguments passed to jsPDF.rect");return E===y&&(xe=-xe),F([G(z(m)),G(O(T)),G(z(ae)),G(z(xe)),"re"].join(" ")),YA(Qe),this},h.__private__.triangle=h.triangle=function(m,T,ae,xe,Qe,tt,ct){if(isNaN(m)||isNaN(T)||isNaN(ae)||isNaN(xe)||isNaN(Qe)||isNaN(tt)||!Qi(ct))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ae-m,xe-T],[Qe-ae,tt-xe],[m-Qe,T-tt]],m,T,[1,1],ct,!0),this},h.__private__.roundedRect=h.roundedRect=function(m,T,ae,xe,Qe,tt,ct){if(isNaN(m)||isNaN(T)||isNaN(ae)||isNaN(xe)||isNaN(Qe)||isNaN(tt)||!Qi(ct))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Mt=4/3*(Math.SQRT2-1);return Qe=Math.min(Qe,.5*ae),tt=Math.min(tt,.5*xe),this.lines([[ae-2*Qe,0],[Qe*Mt,0,Qe,tt-tt*Mt,Qe,tt],[0,xe-2*tt],[0,tt*Mt,-Qe*Mt,tt,-Qe,tt],[2*Qe-ae,0],[-Qe*Mt,0,-Qe,-tt*Mt,-Qe,-tt],[0,2*tt-xe],[0,-tt*Mt,Qe*Mt,-tt,Qe,-tt]],m+Qe,T,[1,1],ct,!0),this},h.__private__.ellipse=h.ellipse=function(m,T,ae,xe,Qe){if(isNaN(m)||isNaN(T)||isNaN(ae)||isNaN(xe)||!Qi(Qe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var tt=4/3*(Math.SQRT2-1)*ae,ct=4/3*(Math.SQRT2-1)*xe;return ZA(m+ae,T),ti(m+ae,T-ct,m+tt,T-xe,m,T-xe),ti(m-tt,T-xe,m-ae,T-ct,m-ae,T),ti(m-ae,T+ct,m-tt,T+xe,m,T+xe),ti(m+tt,T+xe,m+ae,T+ct,m+ae,T),YA(Qe),this},h.__private__.circle=h.circle=function(m,T,ae,xe){if(isNaN(m)||isNaN(T)||isNaN(ae)||!Qi(xe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(m,T,ae,ae,xe)},h.setFont=function(m,T,ae){return ae&&(T=M(T,ae)),ee=al(m,T,{disableWarning:!1}),this};var bu=h.__private__.getFont=h.getFont=function(){return ye[al.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var m,T,ae={};for(m in Le)if(Le.hasOwnProperty(m))for(T in ae[m]=[],Le[m])Le[m].hasOwnProperty(T)&&ae[m].push(T);return ae},h.addFont=function(m,T,ae,xe,Qe){var tt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&tt.indexOf(arguments[3])!==-1?Qe=arguments[3]:arguments[3]&&tt.indexOf(arguments[3])==-1&&(ae=M(ae,xe)),nl.call(this,m,T,ae,Qe=Qe||"Identity-H")};var Ha,dr=t.lineWidth||.200025,ac=h.__private__.getLineWidth=h.getLineWidth=function(){return dr},Ar=h.__private__.setLineWidth=h.setLineWidth=function(m){return dr=m,F(G(z(m))+" w"),this};h.__private__.setLineDash=tr.API.setLineDash=tr.API.setLineDashPattern=function(m,T){if(m=m||[],T=T||0,isNaN(T)||!Array.isArray(m))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return m=m.map(function(ae){return G(z(ae))}).join(" "),T=G(z(T)),F("["+m+"] "+T+" d"),this};var Ac=h.__private__.getLineHeight=h.getLineHeight=function(){return ne*Ha};h.__private__.getLineHeight=h.getLineHeight=function(){return ne*Ha};var Bu=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(m){return typeof(m=m||1.15)=="number"&&(Ha=m),this},oc=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return Ha};Bu(t.lineHeight);var Nr=h.__private__.getHorizontalCoordinate=function(m){return z(m)},Os=h.__private__.getVerticalCoordinate=function(m){return E===B?m:kt[H].mediaBox.topRightY-kt[H].mediaBox.bottomLeftY-z(m)},Cu=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(m){return G(Nr(m))},Nu=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(m){return G(Os(m))},eo=t.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return rs(eo)},h.__private__.setStrokeColor=h.setDrawColor=function(m,T,ae,xe){return eo=xr({ch1:m,ch2:T,ch3:ae,ch4:xe,pdfColorType:"draw",precision:2}),F(eo),this};var dl=t.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return rs(dl)},h.__private__.setFillColor=h.setFillColor=function(m,T,ae,xe){return dl=xr({ch1:m,ch2:T,ch3:ae,ch4:xe,pdfColorType:"fill",precision:2}),F(dl),this};var la=t.textColor||"0 g",Er=h.__private__.getTextColor=h.getTextColor=function(){return rs(la)};h.__private__.setTextColor=h.setTextColor=function(m,T,ae,xe){return la=xr({ch1:m,ch2:T,ch3:ae,ch4:xe,pdfColorType:"text",precision:3}),this};var hi=t.charSpace,Su=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(hi||0)};h.__private__.setCharSpace=h.setCharSpace=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return hi=m,this};var sr=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(m){var T=h.CapJoinStyles[m];if(T===void 0)throw new Error("Line cap style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return sr=T,F(T+" J"),this};var bs=0;h.__private__.setLineJoin=h.setLineJoin=function(m){var T=h.CapJoinStyles[m];if(T===void 0)throw new Error("Line join style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return bs=T,F(T+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(m){if(m=m||0,isNaN(m))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return F(G(z(m))+" M"),this},h.GState=_0,h.setGState=function(m){(m=typeof m=="string"?pt[xt[m]]:hl(null,m)).equals(yt)||(F("/"+m.id+" gs"),yt=m)};var hl=function(m,T){if(!m||!xt[m]){var ae=!1;for(var xe in pt)if(pt.hasOwnProperty(xe)&&pt[xe].equals(T)){ae=!0;break}if(ae)T=pt[xe];else{var Qe="GS"+(Object.keys(pt).length+1).toString(10);pt[Qe]=T,T.id=Qe}return m&&(xt[m]=T.id),Ut.publish("addGState",T),T}};h.addGState=function(m,T){return hl(m,T),this},h.saveGraphicsState=function(){return F("q"),ft.push({key:ee,size:ne,color:la}),this},h.restoreGraphicsState=function(){F("Q");var m=ft.pop();return ee=m.key,ne=m.size,la=m.color,yt=null,this},h.setCurrentTransformationMatrix=function(m){return F(m.toString()+" cm"),this},h.comment=function(m){return F("#"+m),this};var Ti=function(m,T){var ae=m||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ae},set:function(tt){isNaN(tt)||(ae=parseFloat(tt))}});var xe=T||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return xe},set:function(tt){isNaN(tt)||(xe=parseFloat(tt))}});var Qe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Qe},set:function(tt){Qe=tt.toString()}}),this},to=function(m,T,ae,xe){Ti.call(this,m,T),this.type="rect";var Qe=ae||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Qe},set:function(ct){isNaN(ct)||(Qe=parseFloat(ct))}});var tt=xe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return tt},set:function(ct){isNaN(ct)||(tt=parseFloat(ct))}}),this},bA=function(){this.page=zt,this.currentPage=H,this.pages=nt.slice(0),this.pagesContext=kt.slice(0),this.x=_e,this.y=Je,this.matrix=Xe,this.width=no(H),this.height=pl(H),this.outputDestination=he,this.id="",this.objectNumber=-1};bA.prototype.restore=function(){zt=this.page,H=this.currentPage,kt=this.pagesContext,nt=this.pages,_e=this.x,Je=this.y,Xe=this.matrix,fl(H,this.width),Li(H,this.height),he=this.outputDestination};var ro=function(m,T,ae,xe,Qe){st.push(new bA),zt=H=0,nt=[],_e=m,Je=T,Xe=Qe,sl([ae,xe])};for(var Ma in h.beginFormObject=function(m,T,ae,xe,Qe){return ro(m,T,ae,xe,Qe),this},h.endFormObject=function(m){return function(T){if(Te[T])st.pop().restore();else{var ae=new bA,xe="Xo"+(Object.keys(Q).length+1).toString(10);ae.id=xe,Te[T]=xe,Q[xe]=ae,Ut.publish("addFormObject",ae),st.pop().restore()}}(m),this},h.doFormObject=function(m,T){var ae=Q[Te[m]];return F("q"),F(T.toString()+" cm"),F("/"+ae.id+" Do"),F("Q"),this},h.getFormObject=function(m){var T=Q[Te[m]];return{x:T.x,y:T.y,width:T.width,height:T.height,matrix:T.matrix}},h.save=function(m,T){return m=m||"generated.pdf",(T=T||{}).returnPromise=T.returnPromise||!1,T.returnPromise===!1?(El(yA(Zs()),m),typeof El.unload=="function"&&cr.setTimeout&&setTimeout(El.unload,911),this):new Promise(function(ae,xe){try{var Qe=El(yA(Zs()),m);typeof El.unload=="function"&&cr.setTimeout&&setTimeout(El.unload,911),ae(Qe)}catch(tt){xe(tt.message)}})},tr.API)tr.API.hasOwnProperty(Ma)&&(Ma==="events"&&tr.API.events.length?function(m,T){var ae,xe,Qe;for(Qe=T.length-1;Qe!==-1;Qe--)ae=T[Qe][0],xe=T[Qe][1],m.subscribe.apply(m,[ae].concat(typeof xe=="function"?[xe]:xe))}(Ut,tr.API.events):h[Ma]=tr.API[Ma]);function no(m){return kt[m].mediaBox.topRightX-kt[m].mediaBox.bottomLeftX}function fl(m,T){kt[m].mediaBox.topRightX=T+kt[m].mediaBox.bottomLeftX}function pl(m){return kt[m].mediaBox.topRightY-kt[m].mediaBox.bottomLeftY}function Li(m,T){kt[m].mediaBox.topRightY=T+kt[m].mediaBox.bottomLeftY}var Pi=h.getPageWidth=function(m){return no(m=m||H)/we},gl=h.setPageWidth=function(m,T){fl(m,T*we)},$a=h.getPageHeight=function(m){return pl(m=m||H)/we},ml=h.setPageHeight=function(m,T){Li(m,T*we)};return h.internal={pdfEscape:Xs,getStyle:ll,getFont:bu,getFontSize:J,getCharSpace:Su,getTextColor:Er,getLineHeight:Ac,getLineHeightFactor:oc,getLineWidth:ac,write:se,getHorizontalCoordinate:Nr,getVerticalCoordinate:Os,getCoordinateString:Cu,getVerticalCoordinateString:Nu,collections:{},newObject:Jt,newAdditionalObject:Wr,newObjectDeferred:ot,newObjectDeferredBegin:nr,getFilters:qn,putStream:ys,events:Ut,scaleFactor:we,pageSize:{getWidth:function(){return Pi(H)},setWidth:function(m){gl(H,m)},getHeight:function(){return $a(H)},setHeight:function(m){ml(H,m)}},encryptionOptions:d,encryption:_n,getEncryptor:function(m){return d!==null?_n.encryptor(m,0):function(T){return T}},output:Zr,getNumberOfPages:rc,get pages(){return nt},out:F,f2:k,f3:_,getPageInfo:Ps,getPageInfoByObjId:zr,getCurrentPageInfo:ol,getPDFVersion:w,Point:Ti,Rectangle:to,Matrix:Ge,hasHotfix:ei},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return Pi(H)},set:function(m){gl(H,m)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return $a(H)},set:function(m){ml(H,m)},enumerable:!0,configurable:!0}),(function(m){for(var T=0,ae=X.length;T<ae;T++){var xe=nl.call(this,m[T][0],m[T][1],m[T][2],X[T][3],!0);p===!1&&(g[xe]=!0);var Qe=m[T][0].split("-");ec({id:xe,fontName:Qe[0],fontStyle:Qe[1]||""})}Ut.publish("addFonts",{fonts:ye,dictionary:Le})}).call(h,X),ee="F1",il(s,r),Ut.publish("initialized"),h}Uc.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Uc.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Uc.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},Uc.prototype.processOwnerPassword=function(t,e){return jx(Sx(e).substr(0,5),t)},Uc.prototype.encryptor=function(t,e){var r=Sx(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return jx(r,n)}},_0.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||Gr(t)!==Gr(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},tr.API={events:[]},tr.version="4.1.0";var jn=tr.API,H1=1,Zl=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Nc=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},k0=function(t){return t.toString().replace(/#/g,"#23").replace(/[\s\n\r()<>[\]{}\/%]/g,function(e){var r=e.charCodeAt(0).toString(16).toUpperCase();return"#"+(r.length===1?"0"+r:r)})},pr=function(t){return t.toFixed(2)},Bo=function(t){return t.toFixed(5)};jn.__acroform__={};var ui=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},E2=function(t){return t*H1},lA=function(t){var e=new AC,r=Gt.internal.getHeight(t)||0,n=Gt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(pr(n)),Number(pr(r))],e},QL=jn.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},TL=jn.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},LL=jn.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Pn=jn.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return LL(t,e-1)},On=jn.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return QL(t,e-1)},Dn=jn.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return TL(t,e-1)},PL=jn.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,s=t[0],a=t[1],A=t[2],o=t[3],l={};return l.lowerLeft_X=r(s)||0,l.lowerLeft_Y=n(a+o)||0,l.upperRight_X=r(s+A)||0,l.upperRight_Y=n(a)||0,[Number(pr(l.lowerLeft_X)),Number(pr(l.lowerLeft_Y)),Number(pr(l.upperRight_X)),Number(pr(l.upperRight_Y))]},OL=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=Ex(t,r),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+pr(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=lA(t);return a.scope=t.scope,a.stream=e.join(`
`),a}},Ex=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(k){return k.split(`
`)}):s.map(function(k){return[k]});var a=r,A=Gt.internal.getHeight(t)||0;A=A<0?-A:A;var o=Gt.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(k,_,z){if(k+1<s.length){var O=_+" "+s[k+1][0];return yf(O,t,z).width<=o-4}return!1};a++;e:for(;a>0;){e="",a--;var c,d,p=yf("3",t,a).height,g=t.multiline?A-a:(A-p)/2,h=g+=2,b=0,w=0,j=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+yf(e,t,a=12).width+", FieldWidth:"+o+`
`;break}for(var x="",y=0,B=0;B<s.length;B++)if(s.hasOwnProperty(B)){var E=!1;if(s[B].length!==1&&j!==s[B].length-1){if((p+2)*(y+2)+2>A)continue e;x+=s[B][j],E=!0,w=B,B--}else{x=(x+=s[B][j]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var L=parseInt(B),U=l(L,x,a),M=B>=s.length-1;if(U&&!M){x+=" ",j=0;continue}if(U||M){if(M)w=L;else if(t.multiline&&(p+2)*(y+2)+2>A)continue e}else{if(!t.multiline||(p+2)*(y+2)+2>A)continue e;w=L}}for(var G="",N=b;N<=w;N++){var $=s[N];if(t.multiline){if(N===w){G+=$[j]+" ",j=(j+1)%$.length;continue}if(N===b){G+=$[$.length-1]+" ";continue}}G+=$[0]+" "}switch(G=G.substr(G.length-1)==" "?G.substr(0,G.length-1):G,d=yf(G,t,a).width,t.textAlign){case"right":c=o-d-2;break;case"center":c=(o-d)/2;break;default:c=2}e+=pr(c)+" "+pr(h)+` Td
`,e+="("+Zl(G)+`) Tj
`,e+=-pr(c)+` 0 Td
`,h=-(a+2),d=0,b=E?w:w+1,y++,x=""}break}return n.text=e,n.fontSize=a,n},yf=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},DL={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},RL=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},HL=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Oa.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(DL)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");H1=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new oC,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var a=n[s];a.objId=void 0,a.hasAnnotation&&RL(a,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,s){var a=!n;for(var A in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(A)){var o=n[A],l=[],c=o.Rect;if(o.Rect&&(o.Rect=PL(o.Rect,s)),s.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Gt.createDefaultAppearanceStream(o),Gr(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=OL(o);l.push({key:"AP",value:"<</N "+d+">>"}),s.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var p="";for(var g in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(g)){var h=o.appearanceStreamContent[g];if(p+="/"+g+" ",p+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var A in h)if(h.hasOwnProperty(A)){var b=h[A];typeof b=="function"&&(b=b.call(s,o)),p+="/"+A+" "+b+" ",s.internal.acroformPlugin.xForms.indexOf(b)>=0||s.internal.acroformPlugin.xForms.push(b)}}else typeof(b=h)=="function"&&(b=b.call(s,o)),p+="/"+A+" "+b,s.internal.acroformPlugin.xForms.indexOf(b)>=0||s.internal.acroformPlugin.xForms.push(b);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}s.internal.putStream({additionalKeyValues:l,objectId:o.objId}),s.internal.out("endobj")}a&&function(w,j){for(var x in w)if(w.hasOwnProperty(x)){var y=x,B=w[x];j.internal.newObjectDeferredBegin(B.objId,!0),Gr(B)==="object"&&typeof B.putStream=="function"&&B.putStream(),delete w[y]}}(s.internal.acroformPlugin.xForms,s)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},aC=jn.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(A){return A};if(Array.isArray(t)){for(var s="[",a=0;a<t.length;a++)switch(a!==0&&(s+=" "),Gr(t[a])){case"boolean":case"number":case"object":s+=t[a].toString();break;case"string":t[a].substr(0,1)==="/"?s+="/"+k0(t[a].substr(1)):(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),s+="("+Zl(n(t[a].toString()))+")")}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Hg=function(t,e,r){var n=function(s){return s};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+Zl(n(t))+")"},dA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};dA.prototype.toString=function(){return this.objId+" 0 R"},dA.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},dA.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],s=this[n];s&&(Array.isArray(s)?t.push({key:n,value:aC(s,this.objId,this.scope)}):s instanceof dA?(s.scope=this.scope,t.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:n,value:s}))}return t};var AC=function(){dA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};ui(AC,dA);var oC=function(){dA.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Zl(r(t))+")"}},set:function(r){t=r}})};ui(oC,dA);var Oa=function t(){dA.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Pn(e,3)},set:function(x){x?this.F=On(e,3):this.F=Dn(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');r=x}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(x){n=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(x){n[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(x){n[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(x){n[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(x){n[3]=x}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof U0)return;a="FieldObject"+t.FieldNum++}var x=function(y){return y};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+Zl(x(a))+")"},set:function(x){a=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(x){a=x}});var A="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return A},set:function(x){A=x}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/H1:c},set:function(x){c=x}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(x){d=x}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof U0||this instanceof Ml))return Hg(p,this.objId,this.scope)},set:function(x){x=x.toString(),p=x}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof as==0?Hg(g,this.objId,this.scope):g},set:function(x){x=x.toString(),g=this instanceof as==0?x.substr(0,1)==="("?Nc(x.substr(1,x.length-2)):Nc(x):x}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof as==1?Nc(g.substr(1,g.length-1)):g},set:function(x){x=x.toString(),g=this instanceof as==1?"/"+k0(x):x}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof as==0?Hg(h,this.objId,this.scope):h},set:function(x){x=x.toString(),h=this instanceof as==0?x.substr(0,1)==="("?Nc(x.substr(1,x.length-2)):Nc(x):x}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof as==1?Nc(h.substr(1,h.length-1)):h},set:function(x){x=x.toString(),h=this instanceof as==1?"/"+k0(x):x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(x){x=!!x,w=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(x){b=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,1)},set:function(x){x?this.Ff=On(this.Ff,1):this.Ff=Dn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,2)},set:function(x){x?this.Ff=On(this.Ff,2):this.Ff=Dn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,3)},set:function(x){x?this.Ff=On(this.Ff,3):this.Ff=Dn(this.Ff,3)}});var j=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(j!==null)return j},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');j=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(j){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:j=2;break;case"center":case 1:j=1;break;default:j=0}}})};ui(Oa,dA);var nu=function(){Oa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return aC(e,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=function(a,A,o){o||(o=1);for(var l,c=[];l=A.exec(a);)c.push(l[o]);return c}(n,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,18)},set:function(r){r?this.Ff=On(this.Ff,18):this.Ff=Dn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=On(this.Ff,19):this.Ff=Dn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,20)},set:function(r){r?(this.Ff=On(this.Ff,20),e.sort()):this.Ff=Dn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,22)},set:function(r){r?this.Ff=On(this.Ff,22):this.Ff=Dn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,23)},set:function(r){r?this.Ff=On(this.Ff,23):this.Ff=Dn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,27)},set:function(r){r?this.Ff=On(this.Ff,27):this.Ff=Dn(this.Ff,27)}}),this.hasAppearanceStream=!1};ui(nu,Oa);var su=function(){nu.call(this),this.fontName="helvetica",this.combo=!1};ui(su,nu);var iu=function(){su.call(this),this.combo=!0};ui(iu,su);var Hf=function(){iu.call(this),this.edit=!0};ui(Hf,iu);var as=function(){Oa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,15)},set:function(r){r?this.Ff=On(this.Ff,15):this.Ff=Dn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,16)},set:function(r){r?this.Ff=On(this.Ff,16):this.Ff=Dn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,17)},set:function(r){r?this.Ff=On(this.Ff,17):this.Ff=Dn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,26)},set:function(r){r?this.Ff=On(this.Ff,26):this.Ff=Dn(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(a){return a};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,s=[];for(n in s.push("<<"),e)s.push("/"+n+" ("+Zl(r(e[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){Gr(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+k0(r)}})};ui(as,Oa);var Mf=function(){as.call(this),this.pushButton=!0};ui(Mf,as);var au=function(){as.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};ui(au,as);var U0=function(){var t,e;Oa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var a,A=[];for(a in A.push("<<"),n)A.push("/"+a+" ("+Zl(s(n[a]))+")");return A.push(">>"),A.join(`
`)},set:function(s){Gr(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Gt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ui(U0,Oa),au.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},au.prototype.createOption=function(t){var e=new U0;return e.Parent=this,e.optionName=t,this.Kids.push(e),ML.call(this.scope,e),e};var $f=function(){as.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Gt.CheckBox.createAppearanceStream()};ui($f,as);var Ml=function(){Oa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,13)},set:function(e){e?this.Ff=On(this.Ff,13):this.Ff=Dn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,21)},set:function(e){e?this.Ff=On(this.Ff,21):this.Ff=Dn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,23)},set:function(e){e?this.Ff=On(this.Ff,23):this.Ff=Dn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,24)},set:function(e){e?this.Ff=On(this.Ff,24):this.Ff=Dn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,25)},set:function(e){e?this.Ff=On(this.Ff,25):this.Ff=Dn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,26)},set:function(e){e?this.Ff=On(this.Ff,26):this.Ff=Dn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ui(Ml,Oa);var Kf=function(){Ml.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,14)},set:function(t){t?this.Ff=On(this.Ff,14):this.Ff=Dn(this.Ff,14)}}),this.password=!0};ui(Kf,Ml);var Gt={CheckBox:{createAppearanceStream:function(){return{N:{On:Gt.CheckBox.YesNormal},D:{On:Gt.CheckBox.YesPushDown,Off:Gt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=lA(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),a=Ex(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+pr(Gt.internal.getWidth(t))+" "+pr(Gt.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+pr(a.fontSize)+" Tf "+s),r.push("BT"),r.push(a.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=lA(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),s=[],a=Gt.internal.getHeight(t),A=Gt.internal.getWidth(t),o=Ex(t,t.caption);return s.push("1 g"),s.push("0 0 "+pr(A)+" "+pr(a)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+pr(A-1)+" "+pr(a-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+pr(o.fontSize)+" Tf "+n),s.push(o.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=lA(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+pr(Gt.internal.getWidth(t))+" "+pr(Gt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Gt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Gt.RadioButton.Circle.YesNormal,e.D[t]=Gt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=lA(t);e.scope=t.scope;var r=[],n=Gt.internal.getWidth(t)<=Gt.internal.getHeight(t)?Gt.internal.getWidth(t)/4:Gt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Gt.internal.Bezier_C,a=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Bo(Gt.internal.getWidth(t)/2)+" "+Bo(Gt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=lA(t);e.scope=t.scope;var r=[],n=Gt.internal.getWidth(t)<=Gt.internal.getHeight(t)?Gt.internal.getWidth(t)/4:Gt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),a=Number((s*Gt.internal.Bezier_C).toFixed(5)),A=Number((n*Gt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Bo(Gt.internal.getWidth(t)/2)+" "+Bo(Gt.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),r.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),r.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),r.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Bo(Gt.internal.getWidth(t)/2)+" "+Bo(Gt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+A+" "+A+" "+n+" 0 "+n+" c"),r.push("-"+A+" "+n+" -"+n+" "+A+" -"+n+" 0 c"),r.push("-"+n+" -"+A+" -"+A+" -"+n+" 0 -"+n+" c"),r.push(A+" -"+n+" "+n+" -"+A+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=lA(t);e.scope=t.scope;var r=[],n=Gt.internal.getWidth(t)<=Gt.internal.getHeight(t)?Gt.internal.getWidth(t)/4:Gt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),a=Number((s*Gt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Bo(Gt.internal.getWidth(t)/2)+" "+Bo(Gt.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),r.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),r.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),r.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Gt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Gt.RadioButton.Cross.YesNormal,e.D[t]=Gt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=lA(t);e.scope=t.scope;var r=[],n=Gt.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+pr(Gt.internal.getWidth(t)-2)+" "+pr(Gt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(pr(n.x1.x)+" "+pr(n.x1.y)+" m"),r.push(pr(n.x2.x)+" "+pr(n.x2.y)+" l"),r.push(pr(n.x4.x)+" "+pr(n.x4.y)+" m"),r.push(pr(n.x3.x)+" "+pr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=lA(t);e.scope=t.scope;var r=Gt.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+pr(Gt.internal.getWidth(t))+" "+pr(Gt.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+pr(Gt.internal.getWidth(t)-2)+" "+pr(Gt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(pr(r.x1.x)+" "+pr(r.x1.y)+" m"),n.push(pr(r.x2.x)+" "+pr(r.x2.y)+" l"),n.push(pr(r.x4.x)+" "+pr(r.x4.y)+" m"),n.push(pr(r.x3.x)+" "+pr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=lA(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+pr(Gt.internal.getWidth(t))+" "+pr(Gt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};Gt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Gt.internal.getWidth(t),r=Gt.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},Gt.internal.getWidth=function(t){var e=0;return Gr(t)==="object"&&(e=E2(t.Rect[2])),e},Gt.internal.getHeight=function(t){var e=0;return Gr(t)==="object"&&(e=E2(t.Rect[3])),e};var ML=jn.addField=function(t){if(HL(this,t),!(t instanceof Oa))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};jn.AcroFormChoiceField=nu,jn.AcroFormListBox=su,jn.AcroFormComboBox=iu,jn.AcroFormEditBox=Hf,jn.AcroFormButton=as,jn.AcroFormPushButton=Mf,jn.AcroFormRadioButton=au,jn.AcroFormCheckBox=$f,jn.AcroFormTextField=Ml,jn.AcroFormPasswordField=Kf,jn.AcroFormAppearance=Gt,jn.AcroForm={ChoiceField:nu,ListBox:su,ComboBox:iu,EditBox:Hf,Button:as,PushButton:Mf,RadioButton:au,CheckBox:$f,TextField:Ml,PasswordField:Kf,Appearance:Gt},tr.AcroForm={ChoiceField:nu,ListBox:su,ComboBox:iu,EditBox:Hf,Button:as,PushButton:Mf,RadioButton:au,CheckBox:$f,TextField:Ml,PasswordField:Kf,Appearance:Gt};tr.AcroForm;function lC(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=t.__addimage__.getImageFileTypeByImageData=function(k,_){var z,O,te,ue,fe,ie=r;if((_=_||r)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(U(k))for(fe in n)for(te=n[fe],z=0;z<te.length;z+=1){for(ue=!0,O=0;O<te[z].length;O+=1)if(te[z][O]!==void 0&&te[z][O]!==k[O]){ue=!1;break}if(ue===!0){ie=fe;break}}else for(fe in n)for(te=n[fe],z=0;z<te.length;z+=1){for(ue=!0,O=0;O<te[z].length;O+=1)if(te[z][O]!==void 0&&te[z][O]!==k.charCodeAt(O)){ue=!1;break}if(ue===!0){ie=fe;break}}return ie===r&&_!==r&&(ie=_),ie},a=function k(_){for(var z=this.internal.write,O=this.internal.putStream,te=(0,this.internal.getFilters)();te.indexOf("FlateEncode")!==-1;)te.splice(te.indexOf("FlateEncode"),1);_.objectId=this.internal.newObject();var ue=[];if(ue.push({key:"Type",value:"/XObject"}),ue.push({key:"Subtype",value:"/Image"}),ue.push({key:"Width",value:_.width}),ue.push({key:"Height",value:_.height}),_.colorSpace===x.INDEXED?ue.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(_.palette.length/3-1)+" "+("sMask"in _&&_.sMask!==void 0?_.objectId+2:_.objectId+1)+" 0 R]"}):(ue.push({key:"ColorSpace",value:"/"+_.colorSpace}),_.colorSpace===x.DEVICE_CMYK&&ue.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ue.push({key:"BitsPerComponent",value:_.bitsPerComponent}),"decodeParameters"in _&&_.decodeParameters!==void 0&&ue.push({key:"DecodeParms",value:"<<"+_.decodeParameters+">>"}),"transparency"in _&&Array.isArray(_.transparency)&&_.transparency.length>0){for(var fe="",ie=0,de=_.transparency.length;ie<de;ie++)fe+=_.transparency[ie]+" "+_.transparency[ie]+" ";ue.push({key:"Mask",value:"["+fe+"]"})}_.sMask!==void 0&&ue.push({key:"SMask",value:_.objectId+1+" 0 R"});var ge=_.filter!==void 0?["/"+_.filter]:void 0;if(O({data:_.data,additionalKeyValues:ue,alreadyAppliedFilters:ge,objectId:_.objectId}),z("endobj"),"sMask"in _&&_.sMask!==void 0){var ve,I=(ve=_.sMaskBitsPerComponent)!==null&&ve!==void 0?ve:_.bitsPerComponent,H={width:_.width,height:_.height,colorSpace:"DeviceGray",bitsPerComponent:I,data:_.sMask};"filter"in _&&(H.decodeParameters="/Predictor ".concat(_.predictor," /Colors 1 /BitsPerComponent ").concat(I," /Columns ").concat(_.width),H.filter=_.filter),k.call(this,H)}if(_.colorSpace===x.INDEXED){var re=this.internal.newObject();O({data:G(new Uint8Array(_.palette)),objectId:re}),z("endobj")}},A=function(){var k=this.internal.collections[e+"images"];for(var _ in k)a.call(this,k[_])},o=function(){var k,_=this.internal.collections[e+"images"],z=this.internal.write;for(var O in _)z("/I"+(k=_[O]).index,k.objectId,"0","R")},l=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",A),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var k=this.internal.collections[e+"images"];return l.call(this),k},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},p=function(k){return typeof t["process"+k.toUpperCase()]=="function"},g=function(k){return Gr(k)==="object"&&k.nodeType===1},h=function(k,_){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var z=""+k.getAttribute("src");if(z.indexOf("data:image/")===0)return Rf(unescape(z).split("base64,").pop());var O=t.loadFile(z,!0);if(O!==void 0)return O}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var te;switch(_){case"PNG":te="image/png";break;case"WEBP":te="image/webp";break;default:te="image/jpeg"}return Rf(k.toDataURL(te,1).split("base64,").pop())}},b=function(k){var _=this.internal.collections[e+"images"];if(_){for(var z in _)if(k===_[z].alias)return _[z]}},w=function(k,_,z){return k||_||(k=-96,_=-96),k<0&&(k=-1*z.width*72/k/this.internal.scaleFactor),_<0&&(_=-1*z.height*72/_/this.internal.scaleFactor),k===0&&(k=_*z.width/z.height),_===0&&(_=k*z.height/z.width),[k,_]},j=function(k,_,z,O,te,ue){var fe=w.call(this,z,O,te),ie=this.internal.getCoordinateString,de=this.internal.getVerticalCoordinateString,ge=c.call(this);if(z=fe[0],O=fe[1],ge[te.index]=te,ue){ue*=Math.PI/180;var ve=Math.cos(ue),I=Math.sin(ue),H=function(Y){return Y.toFixed(4)},re=[H(ve),H(I),H(-1*I),H(ve),0,0,"cm"]}this.internal.write("q"),ue?(this.internal.write([1,"0","0",1,ie(k),de(_+O),"cm"].join(" ")),this.internal.write(re.join(" ")),this.internal.write([ie(z),"0","0",ie(O),"0","0","cm"].join(" "))):this.internal.write([ie(z),"0","0",ie(O),ie(k),de(_+O),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+te.index+" Do"),this.internal.write("Q")},x=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},B=t.__addimage__.sHashCode=function(k){var _,z,O=0;if(typeof k=="string")for(z=k.length,_=0;_<z;_++)O=(O<<5)-O+k.charCodeAt(_),O|=0;else if(U(k))for(z=k.byteLength/2,_=0;_<z;_++)O=(O<<5)-O+k[_],O|=0;return O},E=t.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var _=!0;return k.length===0&&(_=!1),k.length%4!=0&&(_=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(_=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(_=!1),_},L=t.__addimage__.extractImageFromDataUrl=function(k){if(k==null||!(k=k.trim()).startsWith("data:"))return null;var _=k.indexOf(",");return _<0?null:k.substring(0,_).trim().endsWith("base64")?k.substring(_+1):null};t.__addimage__.isArrayBuffer=function(k){return k instanceof ArrayBuffer};var U=t.__addimage__.isArrayBufferView=function(k){return k instanceof Int8Array||k instanceof Uint8Array||k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array},M=t.__addimage__.binaryStringToUint8Array=function(k){for(var _=k.length,z=new Uint8Array(_),O=0;O<_;O++)z[O]=k.charCodeAt(O);return z},G=t.__addimage__.arrayBufferToBinaryString=function(k){for(var _="",z=U(k)?k:new Uint8Array(k),O=0;O<z.length;O+=8192)_+=String.fromCharCode.apply(null,z.subarray(O,O+8192));return _};t.addImage=function(){var k,_,z,O,te,ue,fe,ie,de;if(typeof arguments[1]=="number"?(_=r,z=arguments[1],O=arguments[2],te=arguments[3],ue=arguments[4],fe=arguments[5],ie=arguments[6],de=arguments[7]):(_=arguments[1],z=arguments[2],O=arguments[3],te=arguments[4],ue=arguments[5],fe=arguments[6],ie=arguments[7],de=arguments[8]),Gr(k=arguments[0])==="object"&&!g(k)&&"imageData"in k){var ge=k;k=ge.imageData,_=ge.format||_||r,z=ge.x||z||0,O=ge.y||O||0,te=ge.w||ge.width||te,ue=ge.h||ge.height||ue,fe=ge.alias||fe,ie=ge.compression||ie,de=ge.rotation||ge.angle||de}var ve=this.internal.getFilters();if(ie===void 0&&ve.indexOf("FlateEncode")!==-1&&(ie="SLOW"),isNaN(z)||isNaN(O))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var I=N.call(this,k,_,fe,ie);return j.call(this,z,O,te,ue,I,de),this};var N=function(k,_,z,O){var te,ue,fe;if(typeof k=="string"&&s(k)===r){k=unescape(k);var ie=$(k,!1);(ie!==""||(ie=t.loadFile(k,!0))!==void 0)&&(k=ie)}if(g(k)&&(k=h(k,_)),_=s(k,_),!p(_))throw new Error("addImage does not support files of type '"+_+"', please ensure that a plugin for '"+_+"' support is added.");if(((fe=z)==null||fe.length===0)&&(z=function(de){return typeof de=="string"||U(de)?B(de):U(de.data)?B(de.data):null}(k)),(te=b.call(this,z))||(k instanceof Uint8Array||_==="RGBA"||(ue=k,k=M(k)),te=this["process"+_.toUpperCase()](k,d.call(this),z,function(de){return de&&typeof de=="string"&&(de=de.toUpperCase()),de in t.image_compression?de:y.NONE}(O),ue)),!te)throw new Error("An unknown error occurred whilst processing the image.");return te},$=t.__addimage__.convertBase64ToBinaryString=function(k,_){_=typeof _!="boolean"||_;var z,O="";if(typeof k=="string"){var te;z=(te=L(k))!==null&&te!==void 0?te:k;try{O=Rf(z)}catch(ue){if(_)throw E(z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ue.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return O};t.getImageProperties=function(k){var _,z,O="";if(g(k)&&(k=h(k)),typeof k=="string"&&s(k)===r&&((O=$(k,!1))===""&&(O=t.loadFile(k)||""),k=O),z=s(k),!p(z))throw new Error("addImage does not support files of type '"+z+"', please ensure that a plugin for '"+z+"' support is added.");if(k instanceof Uint8Array||(k=M(k)),!(_=this["process"+z.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return _.fileType=z,_}})(tr.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};tr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,s,a,A=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),c=r.pageContext.annotations,d=!1,p=0;p<c.length&&!d;p++)switch((n=c[p]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var g=0;g<c.length;g++){n=c[g];var h=this.internal.pdfEscape,b=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),j=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(w.objId),y=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(s="/Rect ["+A(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+A(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+h(x(n.contents))+")",a+=" /Popup "+j.objId+" 0 R",a+=" /P "+l.objId+" 0 R",a+=" /T ("+h(x(y))+") >>",w.content=a;var B=w.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+A(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+A(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+B,n.open&&(a+=" /Open true"),a+=" >>",j.content=a,this.internal.write(w.objId,"0 R",j.objId,"0 R");break;case"freetext":s="/Rect ["+A(n.bounds.x)+" "+o(n.bounds.y)+" "+A(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var E=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+h(b(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+E+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var L=this.annotations._nameMap[n.options.name];n.options.pageNumber=L.page,n.options.top=L.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+h(b(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;default:var U=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+U+" "+n.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,s,a,A){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(r),y:c(n),w:l(r+s),h:c(n+a)},options:A,type:"link"})},t.textWithLink=function(r,n,s,a){var A,o,l=this.getTextWidth(r),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){o=a.maxWidth;var d=this.splitTextToSize(r,o).length;A=Math.ceil(c*d)}else o=l,A=c;return this.text(r,n,s,a),s+=.2*c,a.align==="center"&&(n-=l/2),a.align==="right"&&(n-=l),this.link(n,s-c,o,A,a),l},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(tr.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var a=t.__arabicParser__.isInArabicSubstitutionA=function(w){return e[w.charCodeAt(0)]!==void 0},A=t.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},o=t.__arabicParser__.isArabicEndLetter=function(w){return A(w)&&a(w)&&e[w.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(w){return A(w)&&s.indexOf(w.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return A(w)&&a(w)&&e[w.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(w){return A(w)&&a(w)&&e[w.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(w){return A(w)&&a(w)&&e[w.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(w){return A(w)&&a(w)&&e[w.charCodeAt(0)].length==4},p=t.__arabicParser__.resolveLigatures=function(w){var j=0,x=r,y="",B=0;for(j=0;j<w.length;j+=1)x[w.charCodeAt(j)]!==void 0?(B++,typeof(x=x[w.charCodeAt(j)])=="number"&&(y+=String.fromCharCode(x),x=r,B=0),j===w.length-1&&(x=r,y+=w.charAt(j-(B-1)),j-=B-1,B=0)):(x=r,y+=w.charAt(j-B),j-=B,B=0);return y};t.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&n[w.charCodeAt(0)]!==void 0};var g=t.__arabicParser__.getCorrectForm=function(w,j,x){return A(w)?a(w)===!1?-1:!c(w)||!A(j)&&!A(x)||!A(x)&&o(j)||o(w)&&!A(j)||o(w)&&l(j)||o(w)&&o(j)?0:d(w)&&A(j)&&!o(j)&&A(x)&&c(x)?3:o(w)||!A(x)?1:2:-1},h=function(w){var j=0,x=0,y=0,B="",E="",L="",U=(w=w||"").split("\\s+"),M=[];for(j=0;j<U.length;j+=1){for(M.push(""),x=0;x<U[j].length;x+=1)B=U[j][x],E=U[j][x-1],L=U[j][x+1],A(B)?(y=g(B,E,L),M[j]+=y!==-1?String.fromCharCode(e[B.charCodeAt(0)][y]):B):M[j]+=B;M[j]=p(M[j])}return M.join(" ")},b=t.__arabicParser__.processArabic=t.processArabic=function(){var w,j=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(j)){var y=0;for(x=[],y=0;y<j.length;y+=1)Array.isArray(j[y])?x.push([h(j[y][0]),j[y][1],j[y][2]]):x.push([h(j[y])]);w=x}else w=h(j);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};t.events.push(["preProcessText",b])}(tr.API),tr.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(o){a=o}});var A={};Object.defineProperty(this,"style",{get:function(){return A},set:function(o){A=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(tr.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(w){l=w}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(w){c=w}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(w){d=w}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(w){g=w}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(w){h=w}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(w){b=w}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){n.call(this);var d=(c=c||{}).fontSize||this.getFontSize(),p=c.font||this.getFont(),g=c.scaleFactor||this.internal.scaleFactor,h=0,b=0,w=0,j=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var x=c.maxWidth;x>0?typeof l=="string"?l=this.splitTextToSize(l,x):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(B,E){return B.concat(j.splitTextToSize(E,x))},[])):l=Array.isArray(l)?l:[l];for(var y=0;y<l.length;y++)h<(w=this.getStringUnitWidth(l[y],{font:p})*d)&&(h=w);return h!==0&&(b=l.length),{w:h/=g,h:Math.max((b*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/g,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var A=t.cell=function(){var l;l=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var c=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,g=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,h&&g&&(this.printHeaderRow(l.lineNumber,!0),l.y+=g[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,d,p,g){if(n.call(this),!d)throw new Error("No data for PDF table.");var h,b,w,j,x=[],y=[],B=[],E={},L={},U=[],M=[],G=(g=g||{}).autoSize||!1,N=g.printHeaders!==!1,$=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,k=g.margins||Object.assign({width:this.getPageWidth()},e),_=typeof g.padding=="number"?g.padding:3,z=g.headerBackgroundColor||"#c8c8c8",O=g.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=N,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=$,this.internal.__cell__.padding=_,this.internal.__cell__.headerBackgroundColor=z,this.internal.__cell__.headerTextColor=O,this.setFontSize($),p==null)y=x=Object.keys(d[0]),B=x.map(function(){return"left"});else if(Array.isArray(p)&&Gr(p[0])==="object")for(x=p.map(function(ge){return ge.name}),y=p.map(function(ge){return ge.prompt||ge.name||""}),B=p.map(function(ge){return ge.align||"left"}),h=0;h<p.length;h+=1)L[p[h].name]=.7499990551181103*p[h].width;else Array.isArray(p)&&typeof p[0]=="string"&&(y=x=p,B=x.map(function(){return"left"}));if(G||Array.isArray(p)&&typeof p[0]=="string")for(h=0;h<x.length;h+=1){for(E[j=x[h]]=d.map(function(ge){return ge[j]}),this.setFont(void 0,"bold"),U.push(this.getTextDimensions(y[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=E[j],this.setFont(void 0,"normal"),w=0;w<b.length;w+=1)U.push(this.getTextDimensions(b[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);L[j]=Math.max.apply(null,U)+_+_,U=[]}if(N){var te={};for(h=0;h<x.length;h+=1)te[x[h]]={},te[x[h]].text=y[h],te[x[h]].align=B[h];var ue=o.call(this,te,L);M=x.map(function(ge){return new a(l,c,L[ge],ue,te[ge].text,void 0,te[ge].align)}),this.setTableHeaderRow(M),this.printHeaderRow(1,!1)}var fe=p.reduce(function(ge,ve){return ge[ve.name]=ve.align,ge},{});for(h=0;h<d.length;h+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:h,data:d[h]},this);var ie=o.call(this,d[h],L);for(w=0;w<x.length;w+=1){var de=d[h][x[w]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:h,col:w,data:de},this),A.call(this,new a(l,c,L[x[w]],ie,de,h+2,fe[x[w]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var o=function(l,c){var d=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(l).map(function(h){var b=l[h];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,c[h]-d-d)},this).map(function(h){return this.getLineHeightFactor()*h.length*p/g+d+d},this).reduce(function(h,b){return Math.max(h,b)},0)};t.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){d=this.internal.__cell__.tableHeaderRow[h].clone(),c&&(d.y=this.internal.__cell__.margins.top||0,g.push(d)),d.lineNumber=l;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),A.call(this,d),this.setTextColor(b)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),r=!1}}(tr.API);var cC={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},uC=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Fx=lC(uC),dC=[100,200,300,400,500,600,700,800,900],$L=lC(dC);function Mg(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(a){return cC[a=a||"normal"]?a:"normal"}(t.style),n=function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400}(t.weight),s=function(a){return typeof Fx[a=a||"normal"]=="number"?a:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,r,n].join(" ")}}}function F2(t,e,r,n){var s;for(s=r;s>=0&&s<e.length;s+=n)if(t[e[s]])return t[e[s]];for(s=r;s>=0&&s<e.length;s-=n)if(t[e[s]])return t[e[s]]}var KL={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},_2={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function k2(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function U2(t){return t.trimLeft()}function GL(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function VL(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Sc,bf,I2,Q2,T2,$g=["times"];function L2(t,e,r,n,s){var a=4,A=O2;switch(s){case tr.API.image_compression.FAST:a=1,A=P2;break;case tr.API.image_compression.MEDIUM:a=6,A=D2;break;case tr.API.image_compression.SLOW:a=9,A=R2}t=function(l,c,d,p){for(var g,h=l.length/c,b=new Uint8Array(l.length+h),w=[zL,P2,O2,D2,R2],j=0;j<h;j+=1){var x=j*c,y=l.subarray(x,x+c);if(p)b.set(p(y,d,g),x+j);else{for(var B=w.length,E=[],L=0;L<B;L+=1)E[L]=w[L](y,d,g);var U=WL(E.concat());b.set(E[U],x+j)}g=y}return b}(t,e,Math.ceil(r*n/8),A);var o=bx(t,{level:a});return tr.API.__addimage__.arrayBufferToBinaryString(o)}function zL(t){var e=Array.apply([],t);return e.unshift(0),e}function P2(t,e){var r=t.length,n=[];n[0]=1;for(var s=0;s<r;s+=1){var a=t[s-e]||0;n[s+1]=t[s]-a+256&255}return n}function O2(t,e,r){var n=t.length,s=[];s[0]=2;for(var a=0;a<n;a+=1){var A=r&&r[a]||0;s[a+1]=t[a]-A+256&255}return s}function D2(t,e,r){var n=t.length,s=[];s[0]=3;for(var a=0;a<n;a+=1){var A=t[a-e]||0,o=r&&r[a]||0;s[a+1]=t[a]+256-(A+o>>>1)&255}return s}function R2(t,e,r){var n=t.length,s=[];s[0]=4;for(var a=0;a<n;a+=1){var A=qL(t[a-e]||0,r&&r[a]||0,r&&r[a-e]||0);s[a+1]=t[a]-A+256&255}return s}function qL(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),s=Math.abs(t-r),a=Math.abs(t+e-r-r);return n<=s&&n<=a?t:s<=a?e:r}function WL(t){var e=t.map(function(r){return r.reduce(function(n,s){return n+Math.abs(s)},0)});return e.indexOf(Math.min.apply(null,e))}function Kg(t,e,r){var n=e*r,s=Math.floor(n/8),a=16-(n-8*s+r),A=(1<<r)-1;return hC(t,s)>>a&A}function H2(t,e,r,n){var s=r*n,a=Math.floor(s/8),A=16-(s-8*a+n),o=(1<<n)-1,l=(e&o)<<A;(function(c,d,p){if(d+1<c.byteLength)c.setUint16(d,p,!1);else{var g=p>>8&255;c.setUint8(d,g)}})(t,a,hC(t,a)&~(o<<A)&65535|l)}function hC(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function JL(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,s=t[e++],a=s>>7,A=1<<1+(7&s);t[e++],t[e++];var o=null,l=null;a&&(o=e,l=A,e+=3*A);var c=!0,d=[],p=0,g=null,h=0,b=null;for(this.width=r,this.height=n;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,b=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var w=t[e++];p=t[e++]|t[e++]<<8,g=t[e++],1&w||(g=null),h=w>>2&7,e++;break;case 254:for(;;){if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var j=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,B=t[e++]|t[e++]<<8,E=t[e++],L=E>>6&1,U=1<<1+(7&E),M=o,G=l,N=!1;E>>7&&(N=!0,M=e,G=U,e+=3*U);var $=e;for(e++;;){var k;if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}d.push({x:j,y:x,width:y,height:B,has_local_palette:N,palette_offset:M,palette_size:G,data_offset:$,data_length:e-$,transparent_index:g,interlaced:!!L,delay:p,disposal:h});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return b},this.frameInfo=function(_){if(_<0||_>=d.length)throw new Error("Frame index out of range.");return d[_]},this.decodeAndBlitFrameBGRA=function(_,z){var O=this.frameInfo(_),te=O.width*O.height,ue=new Uint8Array(te);M2(t,O.data_offset,ue,te);var fe=O.palette_offset,ie=O.transparent_index;ie===null&&(ie=256);var de=O.width,ge=r-de,ve=de,I=4*(O.y*r+O.x),H=4*((O.y+O.height)*r+O.x),re=I,Y=4*ge;O.interlaced===!0&&(Y+=4*r*7);for(var le=8,me=0,ke=ue.length;me<ke;++me){var Ee=ue[me];if(ve===0&&(ve=de,(re+=Y)>=H&&(Y=4*ge+4*r*(le-1),re=I+(de+ge)*(le<<1),le>>=1)),Ee===ie)re+=4;else{var Pe=t[fe+3*Ee],nt=t[fe+3*Ee+1],ut=t[fe+3*Ee+2];z[re++]=ut,z[re++]=nt,z[re++]=Pe,z[re++]=255}--ve}},this.decodeAndBlitFrameRGBA=function(_,z){var O=this.frameInfo(_),te=O.width*O.height,ue=new Uint8Array(te);M2(t,O.data_offset,ue,te);var fe=O.palette_offset,ie=O.transparent_index;ie===null&&(ie=256);var de=O.width,ge=r-de,ve=de,I=4*(O.y*r+O.x),H=4*((O.y+O.height)*r+O.x),re=I,Y=4*ge;O.interlaced===!0&&(Y+=4*r*7);for(var le=8,me=0,ke=ue.length;me<ke;++me){var Ee=ue[me];if(ve===0&&(ve=de,(re+=Y)>=H&&(Y=4*ge+4*r*(le-1),re=I+(de+ge)*(le<<1),le>>=1)),Ee===ie)re+=4;else{var Pe=t[fe+3*Ee],nt=t[fe+3*Ee+1],ut=t[fe+3*Ee+2];z[re++]=Pe,z[re++]=nt,z[re++]=ut,z[re++]=255}--ve}}}function M2(t,e,r,n){for(var s=t[e++],a=1<<s,A=a+1,o=A+1,l=s+1,c=(1<<l)-1,d=0,p=0,g=0,h=t[e++],b=new Int32Array(4096),w=null;;){for(;d<16&&h!==0;)p|=t[e++]<<d,d+=8,h===1?h=t[e++]:--h;if(d<l)break;var j=p&c;if(p>>=l,d-=l,j!==a){if(j===A)break;for(var x=j<o?j:w,y=0,B=x;B>a;)B=b[B]>>8,++y;var E=B;if(g+y+(x!==j?1:0)>n)return void Xr.log("Warning, gif stream longer than expected.");r[g++]=E;var L=g+=y;for(x!==j&&(r[g++]=E),B=x;y--;)B=b[B],r[--L]=255&B,B>>=8;w!==null&&o<4096&&(b[o++]=w<<8|E,o>=c+1&&l<12&&(++l,c=c<<1|1)),w=j}else o=A+1,c=(1<<(l=s+1))-1,w=null}return g!==n&&Xr.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Gg(t){var e,r,n,s,a,A=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),p=new Array(65535),g=new Array(65535),h=new Array(64),b=new Array(64),w=[],j=0,x=7,y=new Array(64),B=new Array(64),E=new Array(64),L=new Array(256),U=new Array(2048),M=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],G=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],$=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],_=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],te=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ue(I,H){for(var re=0,Y=0,le=new Array,me=1;me<=16;me++){for(var ke=1;ke<=I[me];ke++)le[H[Y]]=[],le[H[Y]][0]=re,le[H[Y]][1]=me,Y++,re++;re*=2}return le}function fe(I){for(var H=I[0],re=I[1]-1;re>=0;)H&1<<re&&(j|=1<<x),re--,--x<0&&(j==255?(ie(255),ie(0)):ie(j),x=7,j=0)}function ie(I){w.push(I)}function de(I){ie(I>>8&255),ie(255&I)}function ge(I,H,re,Y,le){for(var me,ke=le[0],Ee=le[240],Pe=function(ne,je){var J,$e,Ve,ze,We,lt,be,Se,ee,we,_e=0;for(ee=0;ee<8;++ee){J=ne[_e],$e=ne[_e+1],Ve=ne[_e+2],ze=ne[_e+3],We=ne[_e+4],lt=ne[_e+5],be=ne[_e+6];var Je=J+(Se=ne[_e+7]),Xe=J-Se,ye=$e+be,Le=$e-be,ft=Ve+lt,At=Ve-lt,wt=ze+We,pt=ze-We,xt=Je+wt,yt=Je-wt,zt=ye+ft,kt=ye-ft;ne[_e]=xt+zt,ne[_e+4]=xt-zt;var Ut=.707106781*(kt+yt);ne[_e+2]=yt+Ut,ne[_e+6]=yt-Ut;var br=.382683433*((xt=pt+At)-(kt=Le+Xe)),Q=.5411961*xt+br,Te=1.306562965*kt+br,st=.707106781*(zt=At+Le),Ge=Xe+st,Dt=Xe-st;ne[_e+5]=Dt+Q,ne[_e+3]=Dt-Q,ne[_e+1]=Ge+Te,ne[_e+7]=Ge-Te,_e+=8}for(_e=0,ee=0;ee<8;++ee){J=ne[_e],$e=ne[_e+8],Ve=ne[_e+16],ze=ne[_e+24],We=ne[_e+32],lt=ne[_e+40],be=ne[_e+48];var ur=J+(Se=ne[_e+56]),Lt=J-Se,gr=$e+be,Jt=$e-be,ot=Ve+lt,nr=Ve-lt,Wr=ze+We,gn=ze-We,Lr=ur+Wr,rs=ur-Wr,xr=gr+ot,qn=gr-ot;ne[_e]=Lr+xr,ne[_e+32]=Lr-xr;var ys=.707106781*(qn+rs);ne[_e+16]=rs+ys,ne[_e+48]=rs-ys;var ia=.382683433*((Lr=gn+nr)-(qn=Jt+Lt)),yr=.5411961*Lr+ia,xA=1.306562965*qn+ia,Rn=.707106781*(xr=nr+Jt),aa=Lt+Rn,vA=Lt-Rn;ne[_e+40]=vA+yr,ne[_e+24]=vA-yr,ne[_e+8]=aa+xA,ne[_e+56]=aa-xA,_e++}for(ee=0;ee<64;++ee)we=ne[ee]*je[ee],h[ee]=we>0?we+.5|0:we-.5|0;return h}(I,H),nt=0;nt<64;++nt)b[M[nt]]=Pe[nt];var ut=b[0]-re;re=b[0],ut==0?fe(Y[0]):(fe(Y[g[me=32767+ut]]),fe(p[me]));for(var he=63;he>0&&b[he]==0;)he--;if(he==0)return fe(ke),re;for(var Ze,F=1;F<=he;){for(var se=F;b[F]==0&&F<=he;)++F;var qe=F-se;if(qe>=16){Ze=qe>>4;for(var X=1;X<=Ze;++X)fe(Ee);qe&=15}me=32767+b[F],fe(le[(qe<<4)+g[me]]),fe(p[me]),F++}return he!=63&&fe(ke),re}function ve(I){I=Math.min(Math.max(I,1),100),a!=I&&(function(H){for(var re=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Y=0;Y<64;Y++){var le=A((re[Y]*H+50)/100);le=Math.min(Math.max(le,1),255),o[M[Y]]=le}for(var me=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ke=0;ke<64;ke++){var Ee=A((me[ke]*H+50)/100);Ee=Math.min(Math.max(Ee,1),255),l[M[ke]]=Ee}for(var Pe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],nt=0,ut=0;ut<8;ut++)for(var he=0;he<8;he++)c[nt]=1/(o[M[nt]]*Pe[ut]*Pe[he]*8),d[nt]=1/(l[M[nt]]*Pe[ut]*Pe[he]*8),nt++}(I<50?Math.floor(5e3/I):Math.floor(200-2*I)),a=I)}this.encode=function(I,H){H&&ve(H),w=new Array,j=0,x=7,de(65496),de(65504),de(16),ie(74),ie(70),ie(73),ie(70),ie(0),ie(1),ie(1),ie(0),de(1),de(1),ie(0),ie(0),function(){de(65499),de(132),ie(0);for(var $e=0;$e<64;$e++)ie(o[$e]);ie(1);for(var Ve=0;Ve<64;Ve++)ie(l[Ve])}(),function($e,Ve){de(65472),de(17),ie(8),de(Ve),de($e),ie(3),ie(1),ie(17),ie(0),ie(2),ie(17),ie(1),ie(3),ie(17),ie(1)}(I.width,I.height),function(){de(65476),de(418),ie(0);for(var $e=0;$e<16;$e++)ie(G[$e+1]);for(var Ve=0;Ve<=11;Ve++)ie(N[Ve]);ie(16);for(var ze=0;ze<16;ze++)ie($[ze+1]);for(var We=0;We<=161;We++)ie(k[We]);ie(1);for(var lt=0;lt<16;lt++)ie(_[lt+1]);for(var be=0;be<=11;be++)ie(z[be]);ie(17);for(var Se=0;Se<16;Se++)ie(O[Se+1]);for(var ee=0;ee<=161;ee++)ie(te[ee])}(),de(65498),de(12),ie(3),ie(1),ie(0),ie(2),ie(17),ie(3),ie(17),ie(0),ie(63),ie(0);var re=0,Y=0,le=0;j=0,x=7,this.encode.displayName="_encode_";for(var me,ke,Ee,Pe,nt,ut,he,Ze,F,se=I.data,qe=I.width,X=I.height,ne=4*qe,je=0;je<X;){for(me=0;me<ne;){for(nt=ne*je+me,he=-1,Ze=0,F=0;F<64;F++)ut=nt+(Ze=F>>3)*ne+(he=4*(7&F)),je+Ze>=X&&(ut-=ne*(je+1+Ze-X)),me+he>=ne&&(ut-=me+he-ne+4),ke=se[ut++],Ee=se[ut++],Pe=se[ut++],y[F]=(U[ke]+U[Ee+256|0]+U[Pe+512|0]>>16)-128,B[F]=(U[ke+768|0]+U[Ee+1024|0]+U[Pe+1280|0]>>16)-128,E[F]=(U[ke+1280|0]+U[Ee+1536|0]+U[Pe+1792|0]>>16)-128;re=ge(y,c,re,e,n),Y=ge(B,d,Y,r,s),le=ge(E,d,le,r,s),me+=32}je+=8}if(x>=0){var J=[];J[1]=x+1,J[0]=(1<<x+1)-1,fe(J)}return de(65497),new Uint8Array(w)},t=t||50,function(){for(var I=String.fromCharCode,H=0;H<256;H++)L[H]=I(H)}(),e=ue(G,N),r=ue(_,z),n=ue($,k),s=ue(O,te),function(){for(var I=1,H=2,re=1;re<=15;re++){for(var Y=I;Y<H;Y++)g[32767+Y]=re,p[32767+Y]=[],p[32767+Y][1]=re,p[32767+Y][0]=Y;for(var le=-(H-1);le<=-I;le++)g[32767+le]=re,p[32767+le]=[],p[32767+le][1]=re,p[32767+le][0]=H-1+le;I<<=1,H<<=1}}(),function(){for(var I=0;I<256;I++)U[I]=19595*I,U[I+256|0]=38470*I,U[I+512|0]=7471*I+32768,U[I+768|0]=-11059*I,U[I+1024|0]=-21709*I,U[I+1280|0]=32768*I+8421375,U[I+1536|0]=-27439*I,U[I+1792|0]=-5329*I}(),ve(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Na(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function $2(t){function e(N){if(!N)throw Error("assert :P")}function r(N,$,k){for(var _=0;4>_;_++)if(N[$+_]!=k.charCodeAt(_))return!0;return!1}function n(N,$,k,_,z){for(var O=0;O<z;O++)N[$+O]=k[_+O]}function s(N,$,k,_){for(var z=0;z<_;z++)N[$+z]=k}function a(N){return new Int32Array(N)}function A(N,$){for(var k=[],_=0;_<N;_++)k.push(new $);return k}function o(N,$){var k=[];return function _(z,O,te){for(var ue=te[O],fe=0;fe<ue&&(z.push(te.length>O+1?[]:new $),!(te.length<O+1));fe++)_(z[fe],O+1,te)}(k,0,N),k}var l=function(){var N=this;function $(u,f){for(var v=1<<f-1>>>0;u&v;)v>>>=1;return v?(u&v-1)+v:u}function k(u,f,v,S,P){e(!(S%v));do u[f+(S-=v)]=P;while(0<S)}function _(u,f,v,S,P){if(e(2328>=P),512>=P)var R=a(512);else if((R=a(P))==null)return 0;return function(K,W,Z,Ae,Ne,Me){var oe,Fe,Oe=W,et=1<<Z,He=a(16),rt=a(16);for(e(Ne!=0),e(Ae!=null),e(K!=null),e(0<Z),Fe=0;Fe<Ne;++Fe){if(15<Ae[Fe])return 0;++He[Ae[Fe]]}if(He[0]==Ne)return 0;for(rt[1]=0,oe=1;15>oe;++oe){if(He[oe]>1<<oe)return 0;rt[oe+1]=rt[oe]+He[oe]}for(Fe=0;Fe<Ne;++Fe)oe=Ae[Fe],0<Ae[Fe]&&(Me[rt[oe]++]=Fe);if(rt[15]==1)return(Ae=new z).g=0,Ae.value=Me[0],k(K,Oe,1,et,Ae),et;var at,gt=-1,dt=et-1,Xt=0,Kt=1,vr=1,qt=1<<Z;for(Fe=0,oe=1,Ne=2;oe<=Z;++oe,Ne<<=1){if(Kt+=vr<<=1,0>(vr-=He[oe]))return 0;for(;0<He[oe];--He[oe])(Ae=new z).g=oe,Ae.value=Me[Fe++],k(K,Oe+Xt,Ne,qt,Ae),Xt=$(Xt,oe)}for(oe=Z+1,Ne=2;15>=oe;++oe,Ne<<=1){if(Kt+=vr<<=1,0>(vr-=He[oe]))return 0;for(;0<He[oe];--He[oe]){if(Ae=new z,(Xt&dt)!=gt){for(Oe+=qt,at=1<<(gt=oe)-Z;15>gt&&!(0>=(at-=He[gt]));)++gt,at<<=1;et+=qt=1<<(at=gt-Z),K[W+(gt=Xt&dt)].g=at+Z,K[W+gt].value=Oe-W-gt}Ae.g=oe-Z,Ae.value=Me[Fe++],k(K,Oe+(Xt>>Z),Ne,qt,Ae),Xt=$(Xt,oe)}}return Kt!=2*rt[15]-1?0:et}(u,f,v,S,P,R)}function z(){this.value=this.g=0}function O(){this.value=this.g=0}function te(){this.G=A(5,z),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=A(Wa,O)}function ue(u,f,v,S){e(u!=null),e(f!=null),e(2147483648>S),u.Ca=254,u.I=0,u.b=-8,u.Ka=0,u.oa=f,u.pa=v,u.Jd=f,u.Yc=v+S,u.Zc=4<=S?v+S-4+1:v,ke(u)}function fe(u,f){for(var v=0;0<f--;)v|=Pe(u,128)<<f;return v}function ie(u,f){var v=fe(u,f);return Ee(u)?-v:v}function de(u,f,v,S){var P,R=0;for(e(u!=null),e(f!=null),e(4294967288>S),u.Sb=S,u.Ra=0,u.u=0,u.h=0,4<S&&(S=4),P=0;P<S;++P)R+=f[v+P]<<8*P;u.Ra=R,u.bb=S,u.oa=f,u.pa=v}function ge(u){for(;8<=u.u&&u.bb<u.Sb;)u.Ra>>>=8,u.Ra+=u.oa[u.pa+u.bb]<<ha-8>>>0,++u.bb,u.u-=8;Y(u)&&(u.h=1,u.u=0)}function ve(u,f){if(e(0<=f),!u.h&&f<=Cs){var v=re(u)&Bs[f];return u.u+=f,ge(u),v}return u.h=1,u.u=0}function I(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function H(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function re(u){return u.Ra>>>(u.u&ha-1)>>>0}function Y(u){return e(u.bb<=u.Sb),u.h||u.bb==u.Sb&&u.u>ha}function le(u,f){u.u=f,u.h=Y(u)}function me(u){u.u>=Hi&&(e(u.u>=Hi),ge(u))}function ke(u){e(u!=null&&u.oa!=null),u.pa<u.Zc?(u.I=(u.oa[u.pa++]|u.I<<8)>>>0,u.b+=8):(e(u!=null&&u.oa!=null),u.pa<u.Yc?(u.b+=8,u.I=u.oa[u.pa++]|u.I<<8):u.Ka?u.b=0:(u.I<<=8,u.b+=8,u.Ka=1))}function Ee(u){return fe(u,1)}function Pe(u,f){var v=u.Ca;0>u.b&&ke(u);var S=u.b,P=v*f>>>8,R=(u.I>>>S>P)+0;for(R?(v-=P,u.I-=P+1<<S>>>0):v=P+1,S=v,P=0;256<=S;)P+=8,S>>=8;return S=7^P+fa[S],u.b-=S,u.Ca=(v<<S)-1,R}function nt(u,f,v){u[f+0]=v>>24&255,u[f+1]=v>>16&255,u[f+2]=v>>8&255,u[f+3]=255&v}function ut(u,f){return u[f+0]|u[f+1]<<8}function he(u,f){return ut(u,f)|u[f+2]<<16}function Ze(u,f){return ut(u,f)|ut(u,f+2)<<16}function F(u,f){var v=1<<f;return e(u!=null),e(0<f),u.X=a(v),u.X==null?0:(u.Mb=32-f,u.Xa=f,1)}function se(u,f){e(u!=null),e(f!=null),e(u.Xa==f.Xa),n(f.X,0,u.X,0,1<<f.Xa)}function qe(){this.X=[],this.Xa=this.Mb=0}function X(u,f,v,S){e(v!=null),e(S!=null);var P=v[0],R=S[0];return P==0&&(P=(u*R+f/2)/f),R==0&&(R=(f*P+u/2)/u),0>=P||0>=R?0:(v[0]=P,S[0]=R,1)}function ne(u,f){return u+(1<<f)-1>>>f}function je(u,f){return((4278255360&u)+(4278255360&f)>>>0&4278255360)+((16711935&u)+(16711935&f)>>>0&16711935)>>>0}function J(u,f){N[f]=function(v,S,P,R,K,W,Z){var Ae;for(Ae=0;Ae<K;++Ae){var Ne=N[u](W[Z+Ae-1],P,R+Ae);W[Z+Ae]=je(v[S+Ae],Ne)}}}function $e(){this.ud=this.hd=this.jd=0}function Ve(u,f){return((4278124286&(u^f))>>>1)+(u&f)>>>0}function ze(u){return 0<=u&&256>u?u:0>u?0:255<u?255:void 0}function We(u,f){return ze(u+(u-f+.5>>1))}function lt(u,f,v){return Math.abs(f-v)-Math.abs(u-v)}function be(u,f,v,S,P,R,K){for(S=R[K-1],v=0;v<P;++v)R[K+v]=S=je(u[f+v],S)}function Se(u,f,v,S,P){var R;for(R=0;R<v;++R){var K=u[f+R],W=K>>8&255,Z=16711935&(Z=(Z=16711935&K)+((W<<16)+W));S[P+R]=(4278255360&K)+Z>>>0}}function ee(u,f){f.jd=255&u,f.hd=u>>8&255,f.ud=u>>16&255}function we(u,f,v,S,P,R){var K;for(K=0;K<S;++K){var W=f[v+K],Z=W>>>8,Ae=W,Ne=255&(Ne=(Ne=W>>>16)+((u.jd<<24>>24)*(Z<<24>>24)>>>5));Ae=255&(Ae=(Ae+=(u.hd<<24>>24)*(Z<<24>>24)>>>5)+((u.ud<<24>>24)*(Ne<<24>>24)>>>5)),P[R+K]=(4278255360&W)+(Ne<<16)+Ae}}function _e(u,f,v,S,P){N[f]=function(R,K,W,Z,Ae,Ne,Me,oe,Fe){for(Z=Me;Z<oe;++Z)for(Me=0;Me<Fe;++Me)Ae[Ne++]=P(W[S(R[K++])])},N[u]=function(R,K,W,Z,Ae,Ne,Me){var oe=8>>R.b,Fe=R.Ea,Oe=R.K[0],et=R.w;if(8>oe)for(R=(1<<R.b)-1,et=(1<<oe)-1;K<W;++K){var He,rt=0;for(He=0;He<Fe;++He)He&R||(rt=S(Z[Ae++])),Ne[Me++]=P(Oe[rt&et]),rt>>=oe}else N["VP8LMapColor"+v](Z,Ae,Oe,et,Ne,Me,K,W,Fe)}}function Je(u,f,v,S,P){for(v=f+v;f<v;){var R=u[f++];S[P++]=R>>16&255,S[P++]=R>>8&255,S[P++]=255&R}}function Xe(u,f,v,S,P){for(v=f+v;f<v;){var R=u[f++];S[P++]=R>>16&255,S[P++]=R>>8&255,S[P++]=255&R,S[P++]=R>>24&255}}function ye(u,f,v,S,P){for(v=f+v;f<v;){var R=(K=u[f++])>>16&240|K>>12&15,K=240&K|K>>28&15;S[P++]=R,S[P++]=K}}function Le(u,f,v,S,P){for(v=f+v;f<v;){var R=(K=u[f++])>>16&248|K>>13&7,K=K>>5&224|K>>3&31;S[P++]=R,S[P++]=K}}function ft(u,f,v,S,P){for(v=f+v;f<v;){var R=u[f++];S[P++]=255&R,S[P++]=R>>8&255,S[P++]=R>>16&255}}function At(u,f,v,S,P,R){if(R==0)for(v=f+v;f<v;)nt(S,((R=u[f++])[0]>>24|R[1]>>8&65280|R[2]<<8&16711680|R[3]<<24)>>>0),P+=32;else n(S,P,u,f,v)}function wt(u,f){N[f][0]=N[u+"0"],N[f][1]=N[u+"1"],N[f][2]=N[u+"2"],N[f][3]=N[u+"3"],N[f][4]=N[u+"4"],N[f][5]=N[u+"5"],N[f][6]=N[u+"6"],N[f][7]=N[u+"7"],N[f][8]=N[u+"8"],N[f][9]=N[u+"9"],N[f][10]=N[u+"10"],N[f][11]=N[u+"11"],N[f][12]=N[u+"12"],N[f][13]=N[u+"13"],N[f][14]=N[u+"0"],N[f][15]=N[u+"0"]}function pt(u){return u==mt||u==Pt||u==er||u==lr}function xt(){this.eb=[],this.size=this.A=this.fb=0}function yt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function zt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new xt,this.f.kb=new yt,this.sd=null}function kt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ut(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function br(u){return alert("todo:WebPSamplerProcessPlane"),u.T}function Q(u,f){var v=u.T,S=f.ba.f.RGBA,P=S.eb,R=S.fb+u.ka*S.A,K=ls[f.ba.S],W=u.y,Z=u.O,Ae=u.f,Ne=u.N,Me=u.ea,oe=u.W,Fe=f.cc,Oe=f.dc,et=f.Mc,He=f.Nc,rt=u.ka,at=u.ka+u.T,gt=u.U,dt=gt+1>>1;for(rt==0?K(W,Z,null,null,Ae,Ne,Me,oe,Ae,Ne,Me,oe,P,R,null,null,gt):(K(f.ec,f.fc,W,Z,Fe,Oe,et,He,Ae,Ne,Me,oe,P,R-S.A,P,R,gt),++v);rt+2<at;rt+=2)Fe=Ae,Oe=Ne,et=Me,He=oe,Ne+=u.Rc,oe+=u.Rc,R+=2*S.A,K(W,(Z+=2*u.fa)-u.fa,W,Z,Fe,Oe,et,He,Ae,Ne,Me,oe,P,R-S.A,P,R,gt);return Z+=u.fa,u.j+at<u.o?(n(f.ec,f.fc,W,Z,gt),n(f.cc,f.dc,Ae,Ne,dt),n(f.Mc,f.Nc,Me,oe,dt),v--):1&at||K(W,Z,null,null,Ae,Ne,Me,oe,Ae,Ne,Me,oe,P,R+S.A,null,null,gt),v}function Te(u,f,v){var S=u.F,P=[u.J];if(S!=null){var R=u.U,K=f.ba.S,W=K==Et||K==er;f=f.ba.f.RGBA;var Z=[0],Ae=u.ka;Z[0]=u.T,u.Kb&&(Ae==0?--Z[0]:(--Ae,P[0]-=u.width),u.j+u.ka+u.T==u.o&&(Z[0]=u.o-u.j-Ae));var Ne=f.eb;Ae=f.fb+Ae*f.A,u=Ie(S,P[0],u.width,R,Z,Ne,Ae+(W?0:3),f.A),e(v==Z),u&&pt(K)&&ce(Ne,Ae,W,R,Z,f.A)}return 0}function st(u){var f=u.ma,v=f.ba.S,S=11>v,P=v==Rt||v==jt||v==Et||v==Qt||v==12||pt(v);if(f.memory=null,f.Ib=null,f.Jb=null,f.Nd=null,!Ao(f.Oa,u,P?11:12))return 0;if(P&&pt(v)&&so(),u.da)alert("todo:use_scaling");else{if(S){if(f.Ib=br,u.Kb){if(v=u.U+1>>1,f.memory=a(u.U+2*v),f.memory==null)return 0;f.ec=f.memory,f.fc=0,f.cc=f.ec,f.dc=f.fc+u.U,f.Mc=f.cc,f.Nc=f.dc+v,f.Ib=Q,so()}}else alert("todo:EmitYUV");P&&(f.Jb=Te,S&&ri())}if(S&&!fh){for(u=0;256>u;++u)hp[u]=89858*(u-128)+lc>>Za,xC[u]=-22014*(u-128)+lc,mC[u]=-45773*(u-128),gC[u]=113618*(u-128)+lc>>Za;for(u=go;u<_u;++u)f=76283*(u-16)+lc>>Za,vC[u-go]=di(f,255),wC[u-go]=di(f+8>>4,15);fh=1}return 1}function Ge(u){var f=u.ma,v=u.U,S=u.T;return e(!(1&u.ka)),0>=v||0>=S?0:(v=f.Ib(u,f),f.Jb!=null&&f.Jb(u,f,v),f.Dc+=v,1)}function Dt(u){u.ma.memory=null}function ur(u,f,v,S){return ve(u,8)!=47?0:(f[0]=ve(u,14)+1,v[0]=ve(u,14)+1,S[0]=ve(u,1),ve(u,3)!=0?0:!u.h)}function Lt(u,f){if(4>u)return u+1;var v=u-2>>1;return(2+(1&u)<<v)+ve(f,v)+1}function gr(u,f){return 120<f?f-120:1<=(v=((v=$n[f-1])>>4)*u+(8-(15&v)))?v:1;var v}function Jt(u,f,v){var S=re(v),P=u[f+=255&S].g-8;return 0<P&&(le(v,v.u+8),S=re(v),f+=u[f].value,f+=S&(1<<P)-1),le(v,v.u+u[f].g),u[f].value}function ot(u,f,v){return v.g+=u.g,v.value+=u.value<<f>>>0,e(8>=v.g),u.g}function nr(u,f,v){var S=u.xc;return e((f=S==0?0:u.vc[u.md*(v>>S)+(f>>S)])<u.Wb),u.Ya[f]}function Wr(u,f,v,S){var P=u.ab,R=u.c*f,K=u.C;f=K+f;var W=v,Z=S;for(S=u.Ta,v=u.Ua;0<P--;){var Ae=u.gc[P],Ne=K,Me=f,oe=W,Fe=Z,Oe=(Z=S,W=v,Ae.Ea);switch(e(Ne<Me),e(Me<=Ae.nc),Ae.hc){case 2:un(oe,Fe,(Me-Ne)*Oe,Z,W);break;case 0:var et=Ne,He=Me,rt=Z,at=W,gt=(qt=Ae).Ea;et==0&&(lo(oe,Fe,null,null,1,rt,at),be(oe,Fe+1,0,0,gt-1,rt,at+1),Fe+=gt,at+=gt,++et);for(var dt=1<<qt.b,Xt=dt-1,Kt=ne(gt,qt.b),vr=qt.K,qt=qt.w+(et>>qt.b)*Kt;et<He;){var _r=vr,Wn=qt,wr=1;for(NA(oe,Fe,rt,at-gt,1,rt,at);wr<gt;){var Wt=(wr&~Xt)+dt;Wt>gt&&(Wt=gt),(0,uo[_r[Wn++]>>8&15])(oe,Fe+ +wr,rt,at+wr-gt,Wt-wr,rt,at+wr),wr=Wt}Fe+=gt,at+=gt,++et&Xt||(qt+=Kt)}Me!=Ae.nc&&n(Z,W-Oe,Z,W+(Me-Ne-1)*Oe,Oe);break;case 1:for(Oe=oe,He=Fe,gt=(oe=Ae.Ea)-(at=oe&~(rt=(Fe=1<<Ae.b)-1)),et=ne(oe,Ae.b),dt=Ae.K,Ae=Ae.w+(Ne>>Ae.b)*et;Ne<Me;){for(Xt=dt,Kt=Ae,vr=new $e,qt=He+at,_r=He+oe;He<qt;)ee(Xt[Kt++],vr),ho(vr,Oe,He,Fe,Z,W),He+=Fe,W+=Fe;He<_r&&(ee(Xt[Kt++],vr),ho(vr,Oe,He,gt,Z,W),He+=gt,W+=gt),++Ne&rt||(Ae+=et)}break;case 3:if(oe==Z&&Fe==W&&0<Ae.b){for(He=Z,oe=Oe=W+(Me-Ne)*Oe-(at=(Me-Ne)*ne(Ae.Ea,Ae.b)),Fe=Z,rt=W,et=[],at=(gt=at)-1;0<=at;--at)et[at]=Fe[rt+at];for(at=gt-1;0<=at;--at)He[oe+at]=et[at];vl(Ae,Ne,Me,Z,Oe,Z,W)}else vl(Ae,Ne,Me,oe,Fe,Z,W)}W=S,Z=v}Z!=v&&n(S,v,W,Z,R)}function gn(u,f){var v=u.V,S=u.Ba+u.c*u.C,P=f-u.C;if(e(f<=u.l.o),e(16>=P),0<P){var R=u.l,K=u.Ta,W=u.Ua,Z=R.width;if(Wr(u,P,v,S),P=W=[W],e((v=u.C)<(S=f)),e(R.v<R.va),S>R.o&&(S=R.o),v<R.j){var Ae=R.j-v;v=R.j,P[0]+=Ae*Z}if(v>=S?v=0:(P[0]+=4*R.v,R.ka=v-R.j,R.U=R.va-R.v,R.T=S-v,v=1),v){if(W=W[0],11>(v=u.ca).S){var Ne=v.f.RGBA,Me=(S=v.S,P=R.U,R=R.T,Ae=Ne.eb,Ne.A),oe=R;for(Ne=Ne.fb+u.Ma*Ne.A;0<oe--;){var Fe=K,Oe=W,et=P,He=Ae,rt=Ne;switch(S){case Nt:fo(Fe,Oe,et,He,rt);break;case Rt:pa(Fe,Oe,et,He,rt);break;case mt:pa(Fe,Oe,et,He,rt),ce(He,rt,0,et,1,0);break;case Ye:Ja(Fe,Oe,et,He,rt);break;case jt:At(Fe,Oe,et,He,rt,1);break;case Pt:At(Fe,Oe,et,He,rt,1),ce(He,rt,0,et,1,0);break;case Et:At(Fe,Oe,et,He,rt,0);break;case er:At(Fe,Oe,et,He,rt,0),ce(He,rt,1,et,1,0);break;case Qt:ga(Fe,Oe,et,He,rt);break;case lr:ga(Fe,Oe,et,He,rt),pe(He,rt,et,1,0);break;case St:ma(Fe,Oe,et,He,rt);break;default:e(0)}W+=Z,Ne+=Me}u.Ma+=R}else alert("todo:EmitRescaledRowsYUVA");e(u.Ma<=v.height)}}u.C=f,e(u.C<=u.i)}function Lr(u){var f;if(0<u.ua)return 0;for(f=0;f<u.Wb;++f){var v=u.Ya[f].G,S=u.Ya[f].H;if(0<v[1][S[1]+0].g||0<v[2][S[2]+0].g||0<v[3][S[3]+0].g)return 0}return 1}function rs(u,f,v,S,P,R){if(u.Z!=0){var K=u.qd,W=u.rd;for(e(Vi[u.Z]!=null);f<v;++f)Vi[u.Z](K,W,S,P,S,P,R),K=S,W=P,P+=R;u.qd=K,u.rd=W}}function xr(u,f){var v=u.l.ma,S=v.Z==0||v.Z==1?u.l.j:u.C;if(S=u.C<S?S:u.C,e(f<=u.l.o),f>S){var P=u.l.width,R=v.ca,K=v.tb+P*S,W=u.V,Z=u.Ba+u.c*S,Ae=u.gc;e(u.ab==1),e(Ae[0].hc==3),pi(Ae[0],S,f,W,Z,R,K),rs(v,S,f,R,K,P)}u.C=u.Ma=f}function qn(u,f,v,S,P,R,K){var W=u.$/S,Z=u.$%S,Ae=u.m,Ne=u.s,Me=v+u.$,oe=Me;P=v+S*P;var Fe=v+S*R,Oe=280+Ne.ua,et=u.Pb?W:16777216,He=0<Ne.ua?Ne.Wa:null,rt=Ne.wc,at=Me<Fe?nr(Ne,Z,W):null;e(u.C<R),e(Fe<=P);var gt=!1;e:for(;;){for(;gt||Me<Fe;){var dt=0;if(W>=et){var Xt=Me-v;e((et=u).Pb),et.wd=et.m,et.xd=Xt,0<et.s.ua&&se(et.s.Wa,et.s.vb),et=W+$i}if(Z&rt||(at=nr(Ne,Z,W)),e(at!=null),at.Qb&&(f[Me]=at.qb,gt=!0),!gt)if(me(Ae),at.jc){dt=Ae,Xt=f;var Kt=Me,vr=at.pd[re(dt)&Wa-1];e(at.jc),256>vr.g?(le(dt,dt.u+vr.g),Xt[Kt]=vr.value,dt=0):(le(dt,dt.u+vr.g-256),e(256<=vr.value),dt=vr.value),dt==0&&(gt=!0)}else dt=Jt(at.G[0],at.H[0],Ae);if(Ae.h)break;if(gt||256>dt){if(!gt)if(at.nd)f[Me]=(at.qb|dt<<8)>>>0;else{if(me(Ae),gt=Jt(at.G[1],at.H[1],Ae),me(Ae),Xt=Jt(at.G[2],at.H[2],Ae),Kt=Jt(at.G[3],at.H[3],Ae),Ae.h)break;f[Me]=(Kt<<24|gt<<16|dt<<8|Xt)>>>0}if(gt=!1,++Me,++Z>=S&&(Z=0,++W,K!=null&&W<=R&&!(W%16)&&K(u,W),He!=null))for(;oe<Me;)dt=f[oe++],He.X[(506832829*dt&4294967295)>>>He.Mb]=dt}else if(280>dt){if(dt=Lt(dt-256,Ae),Xt=Jt(at.G[4],at.H[4],Ae),me(Ae),Xt=gr(S,Xt=Lt(Xt,Ae)),Ae.h)break;if(Me-v<Xt||P-Me<dt)break e;for(Kt=0;Kt<dt;++Kt)f[Me+Kt]=f[Me+Kt-Xt];for(Me+=dt,Z+=dt;Z>=S;)Z-=S,++W,K!=null&&W<=R&&!(W%16)&&K(u,W);if(e(Me<=P),Z&rt&&(at=nr(Ne,Z,W)),He!=null)for(;oe<Me;)dt=f[oe++],He.X[(506832829*dt&4294967295)>>>He.Mb]=dt}else{if(!(dt<Oe))break e;for(gt=dt-280,e(He!=null);oe<Me;)dt=f[oe++],He.X[(506832829*dt&4294967295)>>>He.Mb]=dt;dt=Me,e(!(gt>>>(Xt=He).Xa)),f[dt]=Xt.X[gt],gt=!0}gt||e(Ae.h==Y(Ae))}if(u.Pb&&Ae.h&&Me<P)e(u.m.h),u.a=5,u.m=u.wd,u.$=u.xd,0<u.s.ua&&se(u.s.vb,u.s.Wa);else{if(Ae.h)break e;K!=null&&K(u,W>R?R:W),u.a=0,u.$=Me-v}return 1}return u.a=3,0}function ys(u){e(u!=null),u.vc=null,u.yc=null,u.Ya=null;var f=u.Wa;f!=null&&(f.X=null),u.vb=null,e(u!=null)}function ia(){var u=new or;return u==null?null:(u.a=0,u.xb=Kn,wt("Predictor","VP8LPredictors"),wt("Predictor","VP8LPredictors_C"),wt("PredictorAdd","VP8LPredictorsAdd"),wt("PredictorAdd","VP8LPredictorsAdd_C"),un=Se,ho=we,fo=Je,pa=Xe,ga=ye,ma=Le,Ja=ft,N.VP8LMapColor32b=fi,N.VP8LMapColor8b=co,u)}function yr(u,f,v,S,P){var R=1,K=[u],W=[f],Z=S.m,Ae=S.s,Ne=null,Me=0;e:for(;;){if(v)for(;R&&ve(Z,1);){var oe=K,Fe=W,Oe=S,et=1,He=Oe.m,rt=Oe.gc[Oe.ab],at=ve(He,2);if(Oe.Oc&1<<at)R=0;else{switch(Oe.Oc|=1<<at,rt.hc=at,rt.Ea=oe[0],rt.nc=Fe[0],rt.K=[null],++Oe.ab,e(4>=Oe.ab),at){case 0:case 1:rt.b=ve(He,3)+2,et=yr(ne(rt.Ea,rt.b),ne(rt.nc,rt.b),0,Oe,rt.K),rt.K=rt.K[0];break;case 3:var gt,dt=ve(He,8)+1,Xt=16<dt?0:4<dt?1:2<dt?2:3;if(oe[0]=ne(rt.Ea,Xt),rt.b=Xt,gt=et=yr(dt,1,0,Oe,rt.K)){var Kt,vr=dt,qt=rt,_r=1<<(8>>qt.b),Wn=a(_r);if(Wn==null)gt=0;else{var wr=qt.K[0],Wt=qt.w;for(Wn[0]=qt.K[0][0],Kt=1;Kt<1*vr;++Kt)Wn[Kt]=je(wr[Wt+Kt],Wn[Kt-1]);for(;Kt<4*_r;++Kt)Wn[Kt]=0;qt.K[0]=null,qt.K[0]=Wn,gt=1}}et=gt;break;case 2:break;default:e(0)}R=et}}if(K=K[0],W=W[0],R&&ve(Z,1)&&!(R=1<=(Me=ve(Z,4))&&11>=Me)){S.a=3;break e}var Ft;if(Ft=R)t:{var kn,mr,kr,An=S,cs=K,Ks=W,Nn=Me,Ss=v,Gs=An.m,Jn=An.s,Qr=[null],Mr=1,Sn=0,$r=os[Nn];r:for(;;){if(Ss&&ve(Gs,1)){var us=ve(Gs,3)+2,ya=ne(cs,us),Un=ne(Ks,us),ni=ya*Un;if(!yr(ya,Un,0,An,Qr))break r;for(Qr=Qr[0],Jn.xc=us,kn=0;kn<ni;++kn){var Yr=Qr[kn]>>8&65535;Qr[kn]=Yr,Yr>=Mr&&(Mr=Yr+1)}}if(Gs.h)break r;for(mr=0;5>mr;++mr){var Yn=fr[mr];!mr&&0<Nn&&(Yn+=1<<Nn),Sn<Yn&&(Sn=Yn)}var mi=A(Mr*$r,z),Vs=Mr,xi=A(Vs,te);if(xi==null)var vi=null;else e(65536>=Vs),vi=xi;var si=a(Sn);if(vi==null||si==null||mi==null){An.a=1;break r}var wi=mi;for(kn=kr=0;kn<Mr;++kn){var rn=vi[kn],yi=rn.G,ba=rn.H,yl=0,FA=1,ds=0;for(mr=0;5>mr;++mr){Yn=fr[mr],yi[mr]=wi,ba[mr]=kr,!mr&&0<Nn&&(Yn+=1<<Nn);s:{var gh,fp=Yn,mh=An,ku=si,BC=wi,CC=kr,pp=0,mo=mh.m,NC=ve(mo,1);if(s(ku,0,0,fp),NC){var SC=ve(mo,1)+1,jC=ve(mo,1),K1=ve(mo,jC==0?1:8);ku[K1]=1,SC==2&&(ku[K1=ve(mo,8)]=1);var xh=1}else{var G1=a(19),V1=ve(mo,4)+4;if(19<V1){mh.a=3;var vh=0;break s}for(gh=0;gh<V1;++gh)G1[va[gh]]=ve(mo,3);var gp=void 0,Uu=void 0,z1=mh,EC=G1,wh=fp,q1=ku,mp=0,xo=z1.m,W1=8,J1=A(128,z);n:for(;_(J1,0,7,EC,19);){if(ve(xo,1)){var FC=2+2*ve(xo,3);if((gp=2+ve(xo,FC))>wh)break n}else gp=wh;for(Uu=0;Uu<wh&&gp--;){me(xo);var Y1=J1[0+(127&re(xo))];le(xo,xo.u+Y1.g);var cc=Y1.value;if(16>cc)q1[Uu++]=cc,cc!=0&&(W1=cc);else{var _C=cc==16,X1=cc-16,kC=Yt[X1],Z1=ve(xo,Br[X1])+kC;if(Uu+Z1>wh)break n;for(var UC=_C?W1:0;0<Z1--;)q1[Uu++]=UC}}mp=1;break n}mp||(z1.a=3),xh=mp}(xh=xh&&!mo.h)&&(pp=_(BC,CC,8,ku,fp)),xh&&pp!=0?vh=pp:(mh.a=3,vh=0)}if(vh==0)break r;if(FA&&Jr[mr]==1&&(FA=wi[kr].g==0),yl+=wi[kr].g,kr+=vh,3>=mr){var Iu,xp=si[0];for(Iu=1;Iu<Yn;++Iu)si[Iu]>xp&&(xp=si[Iu]);ds+=xp}}if(rn.nd=FA,rn.Qb=0,FA&&(rn.qb=(yi[3][ba[3]+0].value<<24|yi[1][ba[1]+0].value<<16|yi[2][ba[2]+0].value)>>>0,yl==0&&256>yi[0][ba[0]+0].value&&(rn.Qb=1,rn.qb+=yi[0][ba[0]+0].value<<8)),rn.jc=!rn.Qb&&6>ds,rn.jc){var yh,_A=rn;for(yh=0;yh<Wa;++yh){var vo=yh,wo=_A.pd[vo],bh=_A.G[0][_A.H[0]+vo];256<=bh.value?(wo.g=bh.g+256,wo.value=bh.value):(wo.g=0,wo.value=0,vo>>=ot(bh,8,wo),vo>>=ot(_A.G[1][_A.H[1]+vo],16,wo),vo>>=ot(_A.G[2][_A.H[2]+vo],0,wo),ot(_A.G[3][_A.H[3]+vo],24,wo))}}}Jn.vc=Qr,Jn.Wb=Mr,Jn.Ya=vi,Jn.yc=mi,Ft=1;break t}Ft=0}if(!(R=Ft)){S.a=3;break e}if(0<Me){if(Ae.ua=1<<Me,!F(Ae.Wa,Me)){S.a=1,R=0;break e}}else Ae.ua=0;var vp=S,ev=K,IC=W,wp=vp.s,yp=wp.xc;if(vp.c=ev,vp.i=IC,wp.md=ne(ev,yp),wp.wc=yp==0?-1:(1<<yp)-1,v){S.xb=tn;break e}if((Ne=a(K*W))==null){S.a=1,R=0;break e}R=(R=qn(S,Ne,0,K,W,W,null))&&!Z.h;break e}return R?(P!=null?P[0]=Ne:(e(Ne==null),e(v)),S.$=0,v||ys(Ae)):ys(Ae),R}function xA(u,f){var v=u.c*u.i,S=v+f+16*f;return e(u.c<=f),u.V=a(S),u.V==null?(u.Ta=null,u.Ua=0,u.a=1,0):(u.Ta=u.V,u.Ua=u.Ba+v+f,1)}function Rn(u,f){var v=u.C,S=f-v,P=u.V,R=u.Ba+u.c*v;for(e(f<=u.l.o);0<S;){var K=16<S?16:S,W=u.l.ma,Z=u.l.width,Ae=Z*K,Ne=W.ca,Me=W.tb+Z*v,oe=u.Ta,Fe=u.Ua;Wr(u,K,P,R),Ue(oe,Fe,Ne,Me,Ae),rs(W,v,v+K,Ne,Me,Z),S-=K,P+=K*u.c,v+=K}e(v==f),u.C=u.Ma=f}function aa(){this.ub=this.yd=this.td=this.Rb=0}function vA(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function rl(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Aa(){this.Yb=function(){var u=[];return function f(v,S,P){for(var R=P[S],K=0;K<R&&(v.push(P.length>S+1?[]:0),!(P.length<S+1));K++)f(v[K],S+1,P)}(u,0,[3,11]),u}()}function ec(){this.jb=a(3),this.Wc=o([4,8],Aa),this.Xc=o([4,17],Aa)}function nl(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Xs(){this.ld=this.La=this.dd=this.tc=0}function sl(){this.Na=this.la=0}function il(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ra(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function tc(){this.uc=this.M=this.Nb=0,this.wa=Array(new Xs),this.Y=0,this.ya=Array(new Ra),this.aa=0,this.l=new JA}function rc(){this.y=a(16),this.f=a(8),this.ea=a(8)}function al(){this.cb=this.a=0,this.sc="",this.m=new I,this.Od=new aa,this.Kc=new vA,this.ed=new nl,this.Qa=new rl,this.Ic=this.$c=this.Aa=0,this.D=new tc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=A(8,I),this.ia=0,this.pb=A(4,il),this.Pa=new ec,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new rc),this.Hd=0,this.rb=Array(new sl),this.sb=0,this.wa=Array(new Xs),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ra),this.L=this.aa=0,this.gd=o([4,2],Xs),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function di(u,f){return 0>u?0:u>f?f:u}function JA(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function wA(){var u=new al;return u!=null&&(u.a=0,u.sc="OK",u.cb=0,u.Xb=0,Pr||(Pr=yA)),u}function _t(u,f,v){return u.a==0&&(u.a=f,u.sc=v,u.cb=0),0}function Al(u,f,v){return 3<=v&&u[f+0]==157&&u[f+1]==1&&u[f+2]==42}function Zs(u,f){if(u==null)return 0;if(u.a=0,u.sc="OK",f==null)return _t(u,2,"null VP8Io passed to VP8GetHeaders()");var v=f.data,S=f.w,P=f.ha;if(4>P)return _t(u,7,"Truncated header.");var R=v[S+0]|v[S+1]<<8|v[S+2]<<16,K=u.Od;if(K.Rb=!(1&R),K.td=R>>1&7,K.yd=R>>4&1,K.ub=R>>5,3<K.td)return _t(u,3,"Incorrect keyframe parameters.");if(!K.yd)return _t(u,4,"Frame not displayable.");S+=3,P-=3;var W=u.Kc;if(K.Rb){if(7>P)return _t(u,7,"cannot parse picture header");if(!Al(v,S,P))return _t(u,3,"Bad code word");W.c=16383&(v[S+4]<<8|v[S+3]),W.Td=v[S+4]>>6,W.i=16383&(v[S+6]<<8|v[S+5]),W.Ud=v[S+6]>>6,S+=7,P-=7,u.za=W.c+15>>4,u.Ub=W.i+15>>4,f.width=W.c,f.height=W.i,f.Da=0,f.j=0,f.v=0,f.va=f.width,f.o=f.height,f.da=0,f.ib=f.width,f.hb=f.height,f.U=f.width,f.T=f.height,s((R=u.Pa).jb,0,255,R.jb.length),e((R=u.Qa)!=null),R.Cb=0,R.Bb=0,R.Fb=1,s(R.Zb,0,0,R.Zb.length),s(R.Lb,0,0,R.Lb)}if(K.ub>P)return _t(u,7,"bad partition length");ue(R=u.m,v,S,K.ub),S+=K.ub,P-=K.ub,K.Rb&&(W.Ld=Ee(R),W.Kd=Ee(R)),W=u.Qa;var Z,Ae=u.Pa;if(e(R!=null),e(W!=null),W.Cb=Ee(R),W.Cb){if(W.Bb=Ee(R),Ee(R)){for(W.Fb=Ee(R),Z=0;4>Z;++Z)W.Zb[Z]=Ee(R)?ie(R,7):0;for(Z=0;4>Z;++Z)W.Lb[Z]=Ee(R)?ie(R,6):0}if(W.Bb)for(Z=0;3>Z;++Z)Ae.jb[Z]=Ee(R)?fe(R,8):255}else W.Bb=0;if(R.Ka)return _t(u,3,"cannot parse segment header");if((W=u.ed).zd=Ee(R),W.Tb=fe(R,6),W.wb=fe(R,3),W.Pc=Ee(R),W.Pc&&Ee(R)){for(Ae=0;4>Ae;++Ae)Ee(R)&&(W.vd[Ae]=ie(R,6));for(Ae=0;4>Ae;++Ae)Ee(R)&&(W.od[Ae]=ie(R,6))}if(u.L=W.Tb==0?0:W.zd?1:2,R.Ka)return _t(u,3,"cannot parse filter header");var Ne=P;if(P=Z=S,S=Z+Ne,W=Ne,u.Xb=(1<<fe(u.m,2))-1,Ne<3*(Ae=u.Xb))v=7;else{for(Z+=3*Ae,W-=3*Ae,Ne=0;Ne<Ae;++Ne){var Me=v[P+0]|v[P+1]<<8|v[P+2]<<16;Me>W&&(Me=W),ue(u.Jc[+Ne],v,Z,Me),Z+=Me,W-=Me,P+=3}ue(u.Jc[+Ae],v,Z,W),v=Z<S?0:5}if(v!=0)return _t(u,v,"cannot parse partitions");for(v=fe(Z=u.m,7),P=Ee(Z)?ie(Z,4):0,S=Ee(Z)?ie(Z,4):0,W=Ee(Z)?ie(Z,4):0,Ae=Ee(Z)?ie(Z,4):0,Z=Ee(Z)?ie(Z,4):0,Ne=u.Qa,Me=0;4>Me;++Me){if(Ne.Cb){var oe=Ne.Zb[Me];Ne.Fb||(oe+=v)}else{if(0<Me){u.pb[Me]=u.pb[0];continue}oe=v}var Fe=u.pb[Me];Fe.Sc[0]=Fr[di(oe+P,127)],Fe.Sc[1]=Dr[di(oe+0,127)],Fe.Eb[0]=2*Fr[di(oe+S,127)],Fe.Eb[1]=101581*Dr[di(oe+W,127)]>>16,8>Fe.Eb[1]&&(Fe.Eb[1]=8),Fe.Qc[0]=Fr[di(oe+Ae,117)],Fe.Qc[1]=Dr[di(oe+Z,127)],Fe.lc=oe+Z}if(!K.Rb)return _t(u,4,"Not a key frame.");for(Ee(R),K=u.Pa,v=0;4>v;++v){for(P=0;8>P;++P)for(S=0;3>S;++S)for(W=0;11>W;++W)Ae=Pe(R,cp[v][P][S][W])?fe(R,8):Ns[v][P][S][W],K.Wc[v][P].Yb[S][W]=Ae;for(P=0;17>P;++P)K.Xc[v][P]=K.Wc[v][up[P]]}return u.kc=Ee(R),u.kc&&(u.Bd=fe(R,8)),u.cb=1}function yA(u,f,v,S,P,R,K){var W=f[P].Yb[v];for(v=0;16>P;++P){if(!Pe(u,W[v+0]))return P;for(;!Pe(u,W[v+1]);)if(W=f[++P].Yb[0],v=0,P==16)return 16;var Z=f[P+1].Yb;if(Pe(u,W[v+2])){var Ae=u,Ne=0;if(Pe(Ae,(oe=W)[(Me=v)+3]))if(Pe(Ae,oe[Me+6])){for(W=0,Me=2*(Ne=Pe(Ae,oe[Me+8]))+(oe=Pe(Ae,oe[Me+9+Ne])),Ne=0,oe=Ir[Me];oe[W];++W)Ne+=Ne+Pe(Ae,oe[W]);Ne+=3+(8<<Me)}else Pe(Ae,oe[Me+7])?(Ne=7+2*Pe(Ae,165),Ne+=Pe(Ae,145)):Ne=5+Pe(Ae,159);else Ne=Pe(Ae,oe[Me+4])?3+Pe(Ae,oe[Me+5]):2;W=Z[2]}else Ne=1,W=Z[1];Z=K+Ki[P],0>(Ae=u).b&&ke(Ae);var Me,oe=Ae.b,Fe=(Me=Ae.Ca>>1)-(Ae.I>>oe)>>31;--Ae.b,Ae.Ca+=Fe,Ae.Ca|=1,Ae.I-=(Me+1&Fe)<<oe,R[Z]=((Ne^Fe)-Fe)*S[(0<P)+0]}return 16}function Zr(u){var f=u.rb[u.sb-1];f.la=0,f.Na=0,s(u.zc,0,0,u.zc.length),u.ja=0}function ei(u,f,v,S,P){P=u[f+v+32*S]+(P>>3),u[f+v+32*S]=-256&P?0>P?0:255:P}function _n(u,f,v,S,P,R){ei(u,f,0,v,S+P),ei(u,f,1,v,S+R),ei(u,f,2,v,S-R),ei(u,f,3,v,S-P)}function Ps(u){return(20091*u>>16)+u}function zr(u,f,v,S){var P,R=0,K=a(16);for(P=0;4>P;++P){var W=u[f+0]+u[f+8],Z=u[f+0]-u[f+8],Ae=(35468*u[f+4]>>16)-Ps(u[f+12]),Ne=Ps(u[f+4])+(35468*u[f+12]>>16);K[R+0]=W+Ne,K[R+1]=Z+Ae,K[R+2]=Z-Ae,K[R+3]=W-Ne,R+=4,f++}for(P=R=0;4>P;++P)W=(u=K[R+0]+4)+K[R+8],Z=u-K[R+8],Ae=(35468*K[R+4]>>16)-Ps(K[R+12]),ei(v,S,0,0,W+(Ne=Ps(K[R+4])+(35468*K[R+12]>>16))),ei(v,S,1,0,Z+Ae),ei(v,S,2,0,Z-Ae),ei(v,S,3,0,W-Ne),R++,S+=32}function ol(u,f,v,S){var P=u[f+0]+4,R=35468*u[f+4]>>16,K=Ps(u[f+4]),W=35468*u[f+1]>>16;_n(v,S,0,P+K,u=Ps(u[f+1]),W),_n(v,S,1,P+R,u,W),_n(v,S,2,P-R,u,W),_n(v,S,3,P-K,u,W)}function oa(u,f,v,S,P){zr(u,f,v,S),P&&zr(u,f+16,v,S+4)}function Qi(u,f,v,S){Ya(u,f+0,v,S,1),Ya(u,f+32,v,S+128,1)}function ll(u,f,v,S){var P;for(u=u[f+0]+4,P=0;4>P;++P)for(f=0;4>f;++f)ei(v,S,f,P,u)}function nc(u,f,v,S){u[f+0]&&Ur(u,f+0,v,S),u[f+16]&&Ur(u,f+16,v,S+4),u[f+32]&&Ur(u,f+32,v,S+128),u[f+48]&&Ur(u,f+48,v,S+128+4)}function cl(u,f,v,S){var P,R=a(16);for(P=0;4>P;++P){var K=u[f+0+P]+u[f+12+P],W=u[f+4+P]+u[f+8+P],Z=u[f+4+P]-u[f+8+P],Ae=u[f+0+P]-u[f+12+P];R[0+P]=K+W,R[8+P]=K-W,R[4+P]=Ae+Z,R[12+P]=Ae-Z}for(P=0;4>P;++P)K=(u=R[0+4*P]+3)+R[3+4*P],W=R[1+4*P]+R[2+4*P],Z=R[1+4*P]-R[2+4*P],Ae=u-R[3+4*P],v[S+0]=K+W>>3,v[S+16]=Ae+Z>>3,v[S+32]=K-W>>3,v[S+48]=Ae-Z>>3,S+=64}function YA(u,f,v){var S,P=f-32,R=Ct,K=255-u[P-1];for(S=0;S<v;++S){var W,Z=R,Ae=K+u[f-1];for(W=0;W<v;++W)u[f+W]=Z[Ae+u[P+W]];f+=32}}function XA(u,f){YA(u,f,4)}function sc(u,f){YA(u,f,8)}function ic(u,f){YA(u,f,16)}function ZA(u,f){var v;for(v=0;16>v;++v)n(u,f+32*v,u,f-32,16)}function ul(u,f){var v;for(v=16;0<v;--v)s(u,f,u[f-1],16),f+=32}function ti(u,f,v){var S;for(S=0;16>S;++S)s(f,v+32*S,u,16)}function bu(u,f){var v,S=16;for(v=0;16>v;++v)S+=u[f-1+32*v]+u[f+v-32];ti(S>>5,u,f)}function Ha(u,f){var v,S=8;for(v=0;16>v;++v)S+=u[f-1+32*v];ti(S>>4,u,f)}function dr(u,f){var v,S=8;for(v=0;16>v;++v)S+=u[f+v-32];ti(S>>4,u,f)}function ac(u,f){ti(128,u,f)}function Ar(u,f,v){return u+2*f+v+2>>2}function Ac(u,f){var v,S=f-32;for(S=new Uint8Array([Ar(u[S-1],u[S+0],u[S+1]),Ar(u[S+0],u[S+1],u[S+2]),Ar(u[S+1],u[S+2],u[S+3]),Ar(u[S+2],u[S+3],u[S+4])]),v=0;4>v;++v)n(u,f+32*v,S,0,S.length)}function Bu(u,f){var v=u[f-1],S=u[f-1+32],P=u[f-1+64],R=u[f-1+96];nt(u,f+0,16843009*Ar(u[f-1-32],v,S)),nt(u,f+32,16843009*Ar(v,S,P)),nt(u,f+64,16843009*Ar(S,P,R)),nt(u,f+96,16843009*Ar(P,R,R))}function oc(u,f){var v,S=4;for(v=0;4>v;++v)S+=u[f+v-32]+u[f-1+32*v];for(S>>=3,v=0;4>v;++v)s(u,f+32*v,S,4)}function Nr(u,f){var v=u[f-1+0],S=u[f-1+32],P=u[f-1+64],R=u[f-1-32],K=u[f+0-32],W=u[f+1-32],Z=u[f+2-32],Ae=u[f+3-32];u[f+0+96]=Ar(S,P,u[f-1+96]),u[f+1+96]=u[f+0+64]=Ar(v,S,P),u[f+2+96]=u[f+1+64]=u[f+0+32]=Ar(R,v,S),u[f+3+96]=u[f+2+64]=u[f+1+32]=u[f+0+0]=Ar(K,R,v),u[f+3+64]=u[f+2+32]=u[f+1+0]=Ar(W,K,R),u[f+3+32]=u[f+2+0]=Ar(Z,W,K),u[f+3+0]=Ar(Ae,Z,W)}function Os(u,f){var v=u[f+1-32],S=u[f+2-32],P=u[f+3-32],R=u[f+4-32],K=u[f+5-32],W=u[f+6-32],Z=u[f+7-32];u[f+0+0]=Ar(u[f+0-32],v,S),u[f+1+0]=u[f+0+32]=Ar(v,S,P),u[f+2+0]=u[f+1+32]=u[f+0+64]=Ar(S,P,R),u[f+3+0]=u[f+2+32]=u[f+1+64]=u[f+0+96]=Ar(P,R,K),u[f+3+32]=u[f+2+64]=u[f+1+96]=Ar(R,K,W),u[f+3+64]=u[f+2+96]=Ar(K,W,Z),u[f+3+96]=Ar(W,Z,Z)}function Cu(u,f){var v=u[f-1+0],S=u[f-1+32],P=u[f-1+64],R=u[f-1-32],K=u[f+0-32],W=u[f+1-32],Z=u[f+2-32],Ae=u[f+3-32];u[f+0+0]=u[f+1+64]=R+K+1>>1,u[f+1+0]=u[f+2+64]=K+W+1>>1,u[f+2+0]=u[f+3+64]=W+Z+1>>1,u[f+3+0]=Z+Ae+1>>1,u[f+0+96]=Ar(P,S,v),u[f+0+64]=Ar(S,v,R),u[f+0+32]=u[f+1+96]=Ar(v,R,K),u[f+1+32]=u[f+2+96]=Ar(R,K,W),u[f+2+32]=u[f+3+96]=Ar(K,W,Z),u[f+3+32]=Ar(W,Z,Ae)}function Nu(u,f){var v=u[f+0-32],S=u[f+1-32],P=u[f+2-32],R=u[f+3-32],K=u[f+4-32],W=u[f+5-32],Z=u[f+6-32],Ae=u[f+7-32];u[f+0+0]=v+S+1>>1,u[f+1+0]=u[f+0+64]=S+P+1>>1,u[f+2+0]=u[f+1+64]=P+R+1>>1,u[f+3+0]=u[f+2+64]=R+K+1>>1,u[f+0+32]=Ar(v,S,P),u[f+1+32]=u[f+0+96]=Ar(S,P,R),u[f+2+32]=u[f+1+96]=Ar(P,R,K),u[f+3+32]=u[f+2+96]=Ar(R,K,W),u[f+3+64]=Ar(K,W,Z),u[f+3+96]=Ar(W,Z,Ae)}function eo(u,f){var v=u[f-1+0],S=u[f-1+32],P=u[f-1+64],R=u[f-1+96];u[f+0+0]=v+S+1>>1,u[f+2+0]=u[f+0+32]=S+P+1>>1,u[f+2+32]=u[f+0+64]=P+R+1>>1,u[f+1+0]=Ar(v,S,P),u[f+3+0]=u[f+1+32]=Ar(S,P,R),u[f+3+32]=u[f+1+64]=Ar(P,R,R),u[f+3+64]=u[f+2+64]=u[f+0+96]=u[f+1+96]=u[f+2+96]=u[f+3+96]=R}function dl(u,f){var v=u[f-1+0],S=u[f-1+32],P=u[f-1+64],R=u[f-1+96],K=u[f-1-32],W=u[f+0-32],Z=u[f+1-32],Ae=u[f+2-32];u[f+0+0]=u[f+2+32]=v+K+1>>1,u[f+0+32]=u[f+2+64]=S+v+1>>1,u[f+0+64]=u[f+2+96]=P+S+1>>1,u[f+0+96]=R+P+1>>1,u[f+3+0]=Ar(W,Z,Ae),u[f+2+0]=Ar(K,W,Z),u[f+1+0]=u[f+3+32]=Ar(v,K,W),u[f+1+32]=u[f+3+64]=Ar(S,v,K),u[f+1+64]=u[f+3+96]=Ar(P,S,v),u[f+1+96]=Ar(R,P,S)}function la(u,f){var v;for(v=0;8>v;++v)n(u,f+32*v,u,f-32,8)}function Er(u,f){var v;for(v=0;8>v;++v)s(u,f,u[f-1],8),f+=32}function hi(u,f,v){var S;for(S=0;8>S;++S)s(f,v+32*S,u,8)}function Su(u,f){var v,S=8;for(v=0;8>v;++v)S+=u[f+v-32]+u[f-1+32*v];hi(S>>4,u,f)}function sr(u,f){var v,S=4;for(v=0;8>v;++v)S+=u[f+v-32];hi(S>>3,u,f)}function bs(u,f){var v,S=4;for(v=0;8>v;++v)S+=u[f-1+32*v];hi(S>>3,u,f)}function hl(u,f){hi(128,u,f)}function Ti(u,f,v){var S=u[f-v],P=u[f+0],R=3*(P-S)+It[1020+u[f-2*v]-u[f+v]],K=Bt[112+(R+4>>3)];u[f-v]=Ct[255+S+Bt[112+(R+3>>3)]],u[f+0]=Ct[255+P-K]}function to(u,f,v,S){var P=u[f+0],R=u[f+v];return Ce[255+u[f-2*v]-u[f-v]]>S||Ce[255+R-P]>S}function bA(u,f,v,S){return 4*Ce[255+u[f-v]-u[f+0]]+Ce[255+u[f-2*v]-u[f+v]]<=S}function ro(u,f,v,S,P){var R=u[f-3*v],K=u[f-2*v],W=u[f-v],Z=u[f+0],Ae=u[f+v],Ne=u[f+2*v],Me=u[f+3*v];return 4*Ce[255+W-Z]+Ce[255+K-Ae]>S?0:Ce[255+u[f-4*v]-R]<=P&&Ce[255+R-K]<=P&&Ce[255+K-W]<=P&&Ce[255+Me-Ne]<=P&&Ce[255+Ne-Ae]<=P&&Ce[255+Ae-Z]<=P}function Ma(u,f,v,S){var P=2*S+1;for(S=0;16>S;++S)bA(u,f+S,v,P)&&Ti(u,f+S,v)}function no(u,f,v,S){var P=2*S+1;for(S=0;16>S;++S)bA(u,f+S*v,1,P)&&Ti(u,f+S*v,1)}function fl(u,f,v,S){var P;for(P=3;0<P;--P)Ma(u,f+=4*v,v,S)}function pl(u,f,v,S){var P;for(P=3;0<P;--P)no(u,f+=4,v,S)}function Li(u,f,v,S,P,R,K,W){for(R=2*R+1;0<P--;){if(ro(u,f,v,R,K))if(to(u,f,v,W))Ti(u,f,v);else{var Z=u,Ae=f,Ne=v,Me=Z[Ae-2*Ne],oe=Z[Ae-Ne],Fe=Z[Ae+0],Oe=Z[Ae+Ne],et=Z[Ae+2*Ne],He=27*(at=It[1020+3*(Fe-oe)+It[1020+Me-Oe]])+63>>7,rt=18*at+63>>7,at=9*at+63>>7;Z[Ae-3*Ne]=Ct[255+Z[Ae-3*Ne]+at],Z[Ae-2*Ne]=Ct[255+Me+rt],Z[Ae-Ne]=Ct[255+oe+He],Z[Ae+0]=Ct[255+Fe-He],Z[Ae+Ne]=Ct[255+Oe-rt],Z[Ae+2*Ne]=Ct[255+et-at]}f+=S}}function Pi(u,f,v,S,P,R,K,W){for(R=2*R+1;0<P--;){if(ro(u,f,v,R,K))if(to(u,f,v,W))Ti(u,f,v);else{var Z=u,Ae=f,Ne=v,Me=Z[Ae-Ne],oe=Z[Ae+0],Fe=Z[Ae+Ne],Oe=Bt[112+(4+(et=3*(oe-Me))>>3)],et=Bt[112+(et+3>>3)],He=Oe+1>>1;Z[Ae-2*Ne]=Ct[255+Z[Ae-2*Ne]+He],Z[Ae-Ne]=Ct[255+Me+et],Z[Ae+0]=Ct[255+oe-Oe],Z[Ae+Ne]=Ct[255+Fe-He]}f+=S}}function gl(u,f,v,S,P,R){Li(u,f,v,1,16,S,P,R)}function $a(u,f,v,S,P,R){Li(u,f,1,v,16,S,P,R)}function ml(u,f,v,S,P,R){var K;for(K=3;0<K;--K)Pi(u,f+=4*v,v,1,16,S,P,R)}function m(u,f,v,S,P,R){var K;for(K=3;0<K;--K)Pi(u,f+=4,1,v,16,S,P,R)}function T(u,f,v,S,P,R,K,W){Li(u,f,P,1,8,R,K,W),Li(v,S,P,1,8,R,K,W)}function ae(u,f,v,S,P,R,K,W){Li(u,f,1,P,8,R,K,W),Li(v,S,1,P,8,R,K,W)}function xe(u,f,v,S,P,R,K,W){Pi(u,f+4*P,P,1,8,R,K,W),Pi(v,S+4*P,P,1,8,R,K,W)}function Qe(u,f,v,S,P,R,K,W){Pi(u,f+4,1,P,8,R,K,W),Pi(v,S+4,1,P,8,R,K,W)}function tt(){this.ba=new zt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ut,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ct(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Mt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Vt(){this.ua=0,this.Wa=new qe,this.vb=new qe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new te,this.yc=new z}function or(){this.xb=this.a=0,this.l=new JA,this.ca=new zt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new H,this.Pb=0,this.wd=new H,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Vt,this.ab=0,this.gc=A(4,Mt),this.Oc=0}function hr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new JA,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Sr(u,f,v,S,P,R,K){for(u=u==null?0:u[f+0],f=0;f<K;++f)P[R+f]=u+v[S+f]&255,u=P[R+f]}function en(u,f,v,S,P,R,K){var W;if(u==null)Sr(null,null,v,S,P,R,K);else for(W=0;W<K;++W)P[R+W]=u[f+W]+v[S+W]&255}function mn(u,f,v,S,P,R,K){if(u==null)Sr(null,null,v,S,P,R,K);else{var W,Z=u[f+0],Ae=Z,Ne=Z;for(W=0;W<K;++W)Ae=Ne+(Z=u[f+W])-Ae,Ne=v[S+W]+(-256&Ae?0>Ae?0:255:Ae)&255,Ae=Z,P[R+W]=Ne}}function Hr(u,f,v,S){var P=f.width,R=f.o;if(e(u!=null&&f!=null),0>v||0>=S||v+S>R)return null;if(!u.Cc){if(u.ga==null){var K;if(u.ga=new hr,(K=u.ga==null)||(K=f.width*f.o,e(u.Gb.length==0),u.Gb=a(K),u.Uc=0,u.Gb==null?K=0:(u.mb=u.Gb,u.nb=u.Uc,u.rc=null,K=1),K=!K),!K){K=u.ga;var W=u.Fa,Z=u.P,Ae=u.qc,Ne=u.mb,Me=u.nb,oe=Z+1,Fe=Ae-1,Oe=K.l;if(e(W!=null&&Ne!=null&&f!=null),Vi[0]=null,Vi[1]=Sr,Vi[2]=en,Vi[3]=mn,K.ca=Ne,K.tb=Me,K.c=f.width,K.i=f.height,e(0<K.c&&0<K.i),1>=Ae)f=0;else if(K.$a=3&W[Z+0],K.Z=W[Z+0]>>2&3,K.Lc=W[Z+0]>>4&3,Z=W[Z+0]>>6&3,0>K.$a||1<K.$a||4<=K.Z||1<K.Lc||Z)f=0;else if(Oe.put=Ge,Oe.ac=st,Oe.bc=Dt,Oe.ma=K,Oe.width=f.width,Oe.height=f.height,Oe.Da=f.Da,Oe.v=f.v,Oe.va=f.va,Oe.j=f.j,Oe.o=f.o,K.$a)e:{e(K.$a==1),f=ia();t:for(;;){if(f==null){f=0;break e}if(e(K!=null),K.mc=f,f.c=K.c,f.i=K.i,f.l=K.l,f.l.ma=K,f.l.width=K.c,f.l.height=K.i,f.a=0,de(f.m,W,oe,Fe),!yr(K.c,K.i,1,f,null)||(f.ab==1&&f.gc[0].hc==3&&Lr(f.s)?(K.ic=1,W=f.c*f.i,f.Ta=null,f.Ua=0,f.V=a(W),f.Ba=0,f.V==null?(f.a=1,f=0):f=1):(K.ic=0,f=xA(f,K.c)),!f))break t;f=1;break e}K.mc=null,f=0}else f=Fe>=K.c*K.i;K=!f}if(K)return null;u.ga.Lc!=1?u.Ga=0:S=R-v}e(u.ga!=null),e(v+S<=R);e:{if(f=(W=u.ga).c,R=W.l.o,W.$a==0){if(oe=u.rc,Fe=u.Vc,Oe=u.Fa,Z=u.P+1+v*f,Ae=u.mb,Ne=u.nb+v*f,e(Z<=u.P+u.qc),W.Z!=0)for(e(Vi[W.Z]!=null),K=0;K<S;++K)Vi[W.Z](oe,Fe,Oe,Z,Ae,Ne,f),oe=Ae,Fe=Ne,Ne+=f,Z+=f;else for(K=0;K<S;++K)n(Ae,Ne,Oe,Z,f),oe=Ae,Fe=Ne,Ne+=f,Z+=f;u.rc=oe,u.Vc=Fe}else{if(e(W.mc!=null),f=v+S,e((K=W.mc)!=null),e(f<=K.i),K.C>=f)f=1;else if(W.ic||ri(),W.ic){W=K.V,oe=K.Ba,Fe=K.c;var et=K.i,He=(Oe=1,Z=K.$/Fe,Ae=K.$%Fe,Ne=K.m,Me=K.s,K.$),rt=Fe*et,at=Fe*f,gt=Me.wc,dt=He<at?nr(Me,Ae,Z):null;e(He<=rt),e(f<=et),e(Lr(Me));t:for(;;){for(;!Ne.h&&He<at;){if(Ae&gt||(dt=nr(Me,Ae,Z)),e(dt!=null),me(Ne),256>(et=Jt(dt.G[0],dt.H[0],Ne)))W[oe+He]=et,++He,++Ae>=Fe&&(Ae=0,++Z<=f&&!(Z%16)&&xr(K,Z));else{if(!(280>et)){Oe=0;break t}et=Lt(et-256,Ne);var Xt,Kt=Jt(dt.G[4],dt.H[4],Ne);if(me(Ne),!(He>=(Kt=gr(Fe,Kt=Lt(Kt,Ne)))&&rt-He>=et)){Oe=0;break t}for(Xt=0;Xt<et;++Xt)W[oe+He+Xt]=W[oe+He+Xt-Kt];for(He+=et,Ae+=et;Ae>=Fe;)Ae-=Fe,++Z<=f&&!(Z%16)&&xr(K,Z);He<at&&Ae&gt&&(dt=nr(Me,Ae,Z))}e(Ne.h==Y(Ne))}xr(K,Z>f?f:Z);break t}!Oe||Ne.h&&He<rt?(Oe=0,K.a=Ne.h?5:3):K.$=He,f=Oe}else f=qn(K,K.V,K.Ba,K.c,K.i,f,Rn);if(!f){S=0;break e}}v+S>=R&&(u.Cc=1),S=1}if(!S)return null;if(u.Cc&&((S=u.ga)!=null&&(S.mc=null),u.ga=null,0<u.Ga))return alert("todo:WebPDequantizeLevels"),null}return u.nb+v*P}function Bn(u,f,v,S,P,R){for(;0<P--;){var K,W=u,Z=f+(v?1:0),Ae=u,Ne=f+(v?0:3);for(K=0;K<S;++K){var Me=Ae[Ne+4*K];Me!=255&&(Me*=32897,W[Z+4*K+0]=W[Z+4*K+0]*Me>>23,W[Z+4*K+1]=W[Z+4*K+1]*Me>>23,W[Z+4*K+2]=W[Z+4*K+2]*Me>>23)}f+=R}}function xn(u,f,v,S,P){for(;0<S--;){var R;for(R=0;R<v;++R){var K=u[f+2*R+0],W=15&(Ae=u[f+2*R+1]),Z=4369*W,Ae=(240&Ae|Ae>>4)*Z>>16;u[f+2*R+0]=(240&K|K>>4)*Z>>16&240|(15&K|K<<4)*Z>>16>>4&15,u[f+2*R+1]=240&Ae|W}f+=P}}function Hn(u,f,v,S,P,R,K,W){var Z,Ae,Ne=255;for(Ae=0;Ae<P;++Ae){for(Z=0;Z<S;++Z){var Me=u[f+Z];R[K+4*Z]=Me,Ne&=Me}f+=v,K+=W}return Ne!=255}function Oi(u,f,v,S,P){var R;for(R=0;R<P;++R)v[S+R]=u[f+R]>>8}function ri(){ce=Bn,pe=xn,Ie=Hn,Ue=Oi}function Di(u,f,v){N[u]=function(S,P,R,K,W,Z,Ae,Ne,Me,oe,Fe,Oe,et,He,rt,at,gt){var dt,Xt=gt-1>>1,Kt=W[Z+0]|Ae[Ne+0]<<16,vr=Me[oe+0]|Fe[Oe+0]<<16;e(S!=null);var qt=3*Kt+vr+131074>>2;for(f(S[P+0],255&qt,qt>>16,et,He),R!=null&&(qt=3*vr+Kt+131074>>2,f(R[K+0],255&qt,qt>>16,rt,at)),dt=1;dt<=Xt;++dt){var _r=W[Z+dt]|Ae[Ne+dt]<<16,Wn=Me[oe+dt]|Fe[Oe+dt]<<16,wr=Kt+_r+vr+Wn+524296,Wt=wr+2*(_r+vr)>>3;qt=Wt+Kt>>1,Kt=(wr=wr+2*(Kt+Wn)>>3)+_r>>1,f(S[P+2*dt-1],255&qt,qt>>16,et,He+(2*dt-1)*v),f(S[P+2*dt-0],255&Kt,Kt>>16,et,He+(2*dt-0)*v),R!=null&&(qt=wr+vr>>1,Kt=Wt+Wn>>1,f(R[K+2*dt-1],255&qt,qt>>16,rt,at+(2*dt-1)*v),f(R[K+2*dt+0],255&Kt,Kt>>16,rt,at+(2*dt+0)*v)),Kt=_r,vr=Wn}1&gt||(qt=3*Kt+vr+131074>>2,f(S[P+gt-1],255&qt,qt>>16,et,He+(gt-1)*v),R!=null&&(qt=3*vr+Kt+131074>>2,f(R[K+gt-1],255&qt,qt>>16,rt,at+(gt-1)*v)))}}function so(){ls[Nt]=$s,ls[Rt]=Xa,ls[Ye]=EA,ls[jt]=ch,ls[Et]=uh,ls[Qt]=dh,ls[St]=hh,ls[mt]=Xa,ls[Pt]=ch,ls[er]=uh,ls[lr]=dh}function BA(u){return u&-16384?0>u?0:255:u>>dp}function ca(u,f){return BA((19077*u>>8)+(26149*f>>8)-14234)}function Ka(u,f,v){return BA((19077*u>>8)-(6419*f>>8)-(13320*v>>8)+8708)}function Ga(u,f){return BA((19077*u>>8)+(33050*f>>8)-17685)}function ua(u,f,v,S,P){S[P+0]=ca(u,v),S[P+1]=Ka(u,f,v),S[P+2]=Ga(u,f)}function Mn(u,f,v,S,P){S[P+0]=Ga(u,f),S[P+1]=Ka(u,f,v),S[P+2]=ca(u,v)}function Va(u,f,v,S,P){var R=Ka(u,f,v);f=R<<3&224|Ga(u,f)>>3,S[P+0]=248&ca(u,v)|R>>5,S[P+1]=f}function za(u,f,v,S,P){var R=240&Ga(u,f)|15;S[P+0]=240&ca(u,v)|Ka(u,f,v)>>4,S[P+1]=R}function io(u,f,v,S,P){S[P+0]=255,ua(u,f,v,S,P+1)}function ao(u,f,v,S,P){Mn(u,f,v,S,P),S[P+3]=255}function ns(u,f,v,S,P){ua(u,f,v,S,P),S[P+3]=255}function Ri(u,f,v){N[u]=function(S,P,R,K,W,Z,Ae,Ne,Me){for(var oe=Ne+(-2&Me)*v;Ne!=oe;)f(S[P+0],R[K+0],W[Z+0],Ae,Ne),f(S[P+1],R[K+0],W[Z+0],Ae,Ne+v),P+=2,++K,++Z,Ne+=2*v;1&Me&&f(S[P+0],R[K+0],W[Z+0],Ae,Ne)}}function CA(u,f,v){return v==0?u==0?f==0?6:5:f==0?4:0:v}function xl(u,f,v,S,P){switch(u>>>30){case 3:Ya(f,v,S,P,0);break;case 2:Rs(f,v,S,P);break;case 1:Ur(f,v,S,P)}}function Ds(u,f){var v,S,P=f.M,R=f.Nb,K=u.oc,W=u.pc+40,Z=u.oc,Ae=u.pc+584,Ne=u.oc,Me=u.pc+600;for(v=0;16>v;++v)K[W+32*v-1]=129;for(v=0;8>v;++v)Z[Ae+32*v-1]=129,Ne[Me+32*v-1]=129;for(0<P?K[W-1-32]=Z[Ae-1-32]=Ne[Me-1-32]=129:(s(K,W-32-1,127,21),s(Z,Ae-32-1,127,9),s(Ne,Me-32-1,127,9)),S=0;S<u.za;++S){var oe=f.ya[f.aa+S];if(0<S){for(v=-1;16>v;++v)n(K,W+32*v-4,K,W+32*v+12,4);for(v=-1;8>v;++v)n(Z,Ae+32*v-4,Z,Ae+32*v+4,4),n(Ne,Me+32*v-4,Ne,Me+32*v+4,4)}var Fe=u.Gd,Oe=u.Hd+S,et=oe.ad,He=oe.Hc;if(0<P&&(n(K,W-32,Fe[Oe].y,0,16),n(Z,Ae-32,Fe[Oe].f,0,8),n(Ne,Me-32,Fe[Oe].ea,0,8)),oe.Za){var rt=K,at=W-32+16;for(0<P&&(S>=u.za-1?s(rt,at,Fe[Oe].y[15],4):n(rt,at,Fe[Oe+1].y,0,4)),v=0;4>v;v++)rt[at+128+v]=rt[at+256+v]=rt[at+384+v]=rt[at+0+v];for(v=0;16>v;++v,He<<=2)rt=K,at=W+M1[v],Gi[oe.Ob[v]](rt,at),xl(He,et,16*+v,rt,at)}else if(rt=CA(S,P,oe.Ob[0]),jA[rt](K,W),He!=0)for(v=0;16>v;++v,He<<=2)xl(He,et,16*+v,K,W+M1[v]);for(v=oe.Gc,rt=CA(S,P,oe.Dd),wa[rt](Z,Ae),wa[rt](Ne,Me),He=et,rt=Z,at=Ae,255&(oe=0|v)&&(170&oe?gi(He,256,rt,at):Or(He,256,rt,at)),oe=Ne,He=Me,255&(v>>=8)&&(170&v?gi(et,320,oe,He):Or(et,320,oe,He)),P<u.Ub-1&&(n(Fe[Oe].y,0,K,W+480,16),n(Fe[Oe].f,0,Z,Ae+224,8),n(Fe[Oe].ea,0,Ne,Me+224,8)),v=8*R*u.B,Fe=u.sa,Oe=u.ta+16*S+16*R*u.R,et=u.qa,oe=u.ra+8*S+v,He=u.Ha,rt=u.Ia+8*S+v,v=0;16>v;++v)n(Fe,Oe+v*u.R,K,W+32*v,16);for(v=0;8>v;++v)n(et,oe+v*u.B,Z,Ae+32*v,8),n(He,rt+v*u.B,Ne,Me+32*v,8)}}function qa(u,f,v,S,P,R,K,W,Z){var Ae=[0],Ne=[0],Me=0,oe=Z!=null?Z.kd:0,Fe=Z??new ct;if(u==null||12>v)return 7;Fe.data=u,Fe.w=f,Fe.ha=v,f=[f],v=[v],Fe.gb=[Fe.gb];e:{var Oe=f,et=v,He=Fe.gb;if(e(u!=null),e(et!=null),e(He!=null),He[0]=0,12<=et[0]&&!r(u,Oe[0],"RIFF")){if(r(u,Oe[0]+8,"WEBP")){He=3;break e}var rt=Ze(u,Oe[0]+4);if(12>rt||4294967286<rt){He=3;break e}if(oe&&rt>et[0]-8){He=7;break e}He[0]=rt,Oe[0]+=12,et[0]-=12}He=0}if(He!=0)return He;for(rt=0<Fe.gb[0],v=v[0];;){e:{var at=u;et=f,He=v;var gt=Ae,dt=Ne,Xt=Oe=[0];if((qt=Me=[Me])[0]=0,8>He[0])He=7;else{if(!r(at,et[0],"VP8X")){if(Ze(at,et[0]+4)!=10){He=3;break e}if(18>He[0]){He=7;break e}var Kt=Ze(at,et[0]+8),vr=1+he(at,et[0]+12);if(2147483648<=vr*(at=1+he(at,et[0]+15))){He=3;break e}Xt!=null&&(Xt[0]=Kt),gt!=null&&(gt[0]=vr),dt!=null&&(dt[0]=at),et[0]+=18,He[0]-=18,qt[0]=1}He=0}}if(Me=Me[0],Oe=Oe[0],He!=0)return He;if(et=!!(2&Oe),!rt&&Me)return 3;if(R!=null&&(R[0]=!!(16&Oe)),K!=null&&(K[0]=et),W!=null&&(W[0]=0),K=Ae[0],Oe=Ne[0],Me&&et&&Z==null){He=0;break}if(4>v){He=7;break}if(rt&&Me||!rt&&!Me&&!r(u,f[0],"ALPH")){v=[v],Fe.na=[Fe.na],Fe.P=[Fe.P],Fe.Sa=[Fe.Sa];e:{Kt=u,He=f,rt=v;var qt=Fe.gb;gt=Fe.na,dt=Fe.P,Xt=Fe.Sa,vr=22,e(Kt!=null),e(rt!=null),at=He[0];var _r=rt[0];for(e(gt!=null),e(Xt!=null),gt[0]=null,dt[0]=null,Xt[0]=0;;){if(He[0]=at,rt[0]=_r,8>_r){He=7;break e}var Wn=Ze(Kt,at+4);if(4294967286<Wn){He=3;break e}var wr=8+Wn+1&-2;if(vr+=wr,0<qt&&vr>qt){He=3;break e}if(!r(Kt,at,"VP8 ")||!r(Kt,at,"VP8L")){He=0;break e}if(_r[0]<wr){He=7;break e}r(Kt,at,"ALPH")||(gt[0]=Kt,dt[0]=at+8,Xt[0]=Wn),at+=wr,_r-=wr}}if(v=v[0],Fe.na=Fe.na[0],Fe.P=Fe.P[0],Fe.Sa=Fe.Sa[0],He!=0)break}v=[v],Fe.Ja=[Fe.Ja],Fe.xa=[Fe.xa];e:if(qt=u,He=f,rt=v,gt=Fe.gb[0],dt=Fe.Ja,Xt=Fe.xa,Kt=He[0],at=!r(qt,Kt,"VP8 "),vr=!r(qt,Kt,"VP8L"),e(qt!=null),e(rt!=null),e(dt!=null),e(Xt!=null),8>rt[0])He=7;else{if(at||vr){if(qt=Ze(qt,Kt+4),12<=gt&&qt>gt-12){He=3;break e}if(oe&&qt>rt[0]-8){He=7;break e}dt[0]=qt,He[0]+=8,rt[0]-=8,Xt[0]=vr}else Xt[0]=5<=rt[0]&&qt[Kt+0]==47&&!(qt[Kt+4]>>5),dt[0]=rt[0];He=0}if(v=v[0],Fe.Ja=Fe.Ja[0],Fe.xa=Fe.xa[0],f=f[0],He!=0)break;if(4294967286<Fe.Ja)return 3;if(W==null||et||(W[0]=Fe.xa?2:1),K=[K],Oe=[Oe],Fe.xa){if(5>v){He=7;break}W=K,oe=Oe,et=R,u==null||5>v?u=0:5<=v&&u[f+0]==47&&!(u[f+4]>>5)?(rt=[0],qt=[0],gt=[0],de(dt=new H,u,f,v),ur(dt,rt,qt,gt)?(W!=null&&(W[0]=rt[0]),oe!=null&&(oe[0]=qt[0]),et!=null&&(et[0]=gt[0]),u=1):u=0):u=0}else{if(10>v){He=7;break}W=Oe,u==null||10>v||!Al(u,f+3,v-3)?u=0:(oe=u[f+0]|u[f+1]<<8|u[f+2]<<16,et=16383&(u[f+7]<<8|u[f+6]),u=16383&(u[f+9]<<8|u[f+8]),1&oe||3<(oe>>1&7)||!(oe>>4&1)||oe>>5>=Fe.Ja||!et||!u?u=0:(K&&(K[0]=et),W&&(W[0]=u),u=1))}if(!u||(K=K[0],Oe=Oe[0],Me&&(Ae[0]!=K||Ne[0]!=Oe)))return 3;Z!=null&&(Z[0]=Fe,Z.offset=f-Z.w,e(4294967286>f-Z.w),e(Z.offset==Z.ha-v));break}return He==0||He==7&&Me&&Z==null?(R!=null&&(R[0]|=Fe.na!=null&&0<Fe.na.length),S!=null&&(S[0]=K),P!=null&&(P[0]=Oe),0):He}function Ao(u,f,v){var S=f.width,P=f.height,R=0,K=0,W=S,Z=P;if(f.Da=u!=null&&0<u.Da,f.Da&&(W=u.cd,Z=u.bd,R=u.v,K=u.j,11>v||(R&=-2,K&=-2),0>R||0>K||0>=W||0>=Z||R+W>S||K+Z>P))return 0;if(f.v=R,f.j=K,f.va=R+W,f.o=K+Z,f.U=W,f.T=Z,f.da=u!=null&&0<u.da,f.da){if(!X(W,Z,v=[u.ib],R=[u.hb]))return 0;f.ib=v[0],f.hb=R[0]}return f.ob=u!=null&&u.ob,f.Kb=u==null||!u.Sd,f.da&&(f.ob=f.ib<3*S/4&&f.hb<3*P/4,f.Kb=0),1}function oo(u){if(u==null)return 2;if(11>u.S){var f=u.f.RGBA;f.fb+=(u.height-1)*f.A,f.A=-f.A}else f=u.f.kb,u=u.height,f.O+=(u-1)*f.fa,f.fa=-f.fa,f.N+=(u-1>>1)*f.Ab,f.Ab=-f.Ab,f.W+=(u-1>>1)*f.Db,f.Db=-f.Db,f.F!=null&&(f.J+=(u-1)*f.lb,f.lb=-f.lb);return 0}function da(u,f,v,S){if(S==null||0>=u||0>=f)return 2;if(v!=null){if(v.Da){var P=v.cd,R=v.bd,K=-2&v.v,W=-2&v.j;if(0>K||0>W||0>=P||0>=R||K+P>u||W+R>f)return 2;u=P,f=R}if(v.da){if(!X(u,f,P=[v.ib],R=[v.hb]))return 2;u=P[0],f=R[0]}}S.width=u,S.height=f;e:{var Z=S.width,Ae=S.height;if(u=S.S,0>=Z||0>=Ae||!(u>=Nt&&13>u))u=2;else{if(0>=S.Rd&&S.sd==null){K=R=P=f=0;var Ne=(W=Z*$1[u])*Ae;if(11>u||(R=(Ae+1)/2*(f=(Z+1)/2),u==12&&(K=(P=Z)*Ae)),(Ae=a(Ne+2*R+K))==null){u=1;break e}S.sd=Ae,11>u?((Z=S.f.RGBA).eb=Ae,Z.fb=0,Z.A=W,Z.size=Ne):((Z=S.f.kb).y=Ae,Z.O=0,Z.fa=W,Z.Fd=Ne,Z.f=Ae,Z.N=0+Ne,Z.Ab=f,Z.Cd=R,Z.ea=Ae,Z.W=0+Ne+R,Z.Db=f,Z.Ed=R,u==12&&(Z.F=Ae,Z.J=0+Ne+2*R),Z.Tc=K,Z.lb=P)}if(f=1,P=S.S,R=S.width,K=S.height,P>=Nt&&13>P)if(11>P)u=S.f.RGBA,f&=(W=Math.abs(u.A))*(K-1)+R<=u.size,f&=W>=R*$1[P],f&=u.eb!=null;else{u=S.f.kb,W=(R+1)/2,Ne=(K+1)/2,Z=Math.abs(u.fa),Ae=Math.abs(u.Ab);var Me=Math.abs(u.Db),oe=Math.abs(u.lb),Fe=oe*(K-1)+R;f&=Z*(K-1)+R<=u.Fd,f&=Ae*(Ne-1)+W<=u.Cd,f=(f&=Me*(Ne-1)+W<=u.Ed)&Z>=R&Ae>=W&Me>=W,f&=u.y!=null,f&=u.f!=null,f&=u.ea!=null,P==12&&(f&=oe>=R,f&=Fe<=u.Tc,f&=u.F!=null)}else f=0;u=f?0:2}}return u!=0||v!=null&&v.fd&&(u=oo(S)),u}var Wa=64,Bs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Cs=24,ha=32,Hi=8,fa=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];J("Predictor0","PredictorAdd0"),N.Predictor0=function(){return 4278190080},N.Predictor1=function(u){return u},N.Predictor2=function(u,f,v){return f[v+0]},N.Predictor3=function(u,f,v){return f[v+1]},N.Predictor4=function(u,f,v){return f[v-1]},N.Predictor5=function(u,f,v){return Ve(Ve(u,f[v+1]),f[v+0])},N.Predictor6=function(u,f,v){return Ve(u,f[v-1])},N.Predictor7=function(u,f,v){return Ve(u,f[v+0])},N.Predictor8=function(u,f,v){return Ve(f[v-1],f[v+0])},N.Predictor9=function(u,f,v){return Ve(f[v+0],f[v+1])},N.Predictor10=function(u,f,v){return Ve(Ve(u,f[v-1]),Ve(f[v+0],f[v+1]))},N.Predictor11=function(u,f,v){var S=f[v+0];return 0>=lt(S>>24&255,u>>24&255,(f=f[v-1])>>24&255)+lt(S>>16&255,u>>16&255,f>>16&255)+lt(S>>8&255,u>>8&255,f>>8&255)+lt(255&S,255&u,255&f)?S:u},N.Predictor12=function(u,f,v){var S=f[v+0];return(ze((u>>24&255)+(S>>24&255)-((f=f[v-1])>>24&255))<<24|ze((u>>16&255)+(S>>16&255)-(f>>16&255))<<16|ze((u>>8&255)+(S>>8&255)-(f>>8&255))<<8|ze((255&u)+(255&S)-(255&f)))>>>0},N.Predictor13=function(u,f,v){var S=f[v-1];return(We((u=Ve(u,f[v+0]))>>24&255,S>>24&255)<<24|We(u>>16&255,S>>16&255)<<16|We(u>>8&255,S>>8&255)<<8|We(255&u,255&S))>>>0};var lo=N.PredictorAdd0;N.PredictorAdd1=be,J("Predictor2","PredictorAdd2"),J("Predictor3","PredictorAdd3"),J("Predictor4","PredictorAdd4"),J("Predictor5","PredictorAdd5"),J("Predictor6","PredictorAdd6"),J("Predictor7","PredictorAdd7"),J("Predictor8","PredictorAdd8"),J("Predictor9","PredictorAdd9"),J("Predictor10","PredictorAdd10"),J("Predictor11","PredictorAdd11"),J("Predictor12","PredictorAdd12"),J("Predictor13","PredictorAdd13");var NA=N.PredictorAdd2;_e("ColorIndexInverseTransform","MapARGB","32b",function(u){return u>>8&255},function(u){return u}),_e("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(u){return u},function(u){return u>>8&255});var un,vl=N.ColorIndexInverseTransform,fi=N.MapARGB,pi=N.VP8LColorIndexInverseTransformAlpha,co=N.MapAlpha,uo=N.VP8LPredictorsAdd=[];uo.length=16,(N.VP8LPredictors=[]).length=16,(N.VP8LPredictorsAdd_C=[]).length=16,(N.VP8LPredictors_C=[]).length=16;var ho,fo,pa,ga,ma,Ja,xa,Ya,Rs,gi,Ur,Or,dn,Cn,Mi,po,SA,wl,ju,Eu,Fu,C,D,q,ce,pe,Ie,Ue,De=a(511),Be=a(2041),Re=a(225),it=a(767),Ke=0,It=Be,Bt=Re,Ct=it,Ce=De,Nt=0,Rt=1,Ye=2,jt=3,Et=4,Qt=5,St=6,mt=7,Pt=8,er=9,lr=10,Br=[2,3,7],Yt=[3,3,11],fr=[280,256,256,256,40],Jr=[0,1,1,1,0],va=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],$n=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],os=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],$i=8,Fr=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Dr=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Pr=null,Ir=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Ki=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Hs=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ns=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ms=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],cp=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],up=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],jA=[],Gi=[],wa=[],tn=1,Kn=2,Vi=[],ls=[];Di("UpsampleRgbLinePair",ua,3),Di("UpsampleBgrLinePair",Mn,3),Di("UpsampleRgbaLinePair",ns,4),Di("UpsampleBgraLinePair",ao,4),Di("UpsampleArgbLinePair",io,4),Di("UpsampleRgba4444LinePair",za,2),Di("UpsampleRgb565LinePair",Va,2);var $s=N.UpsampleRgbLinePair,EA=N.UpsampleBgrLinePair,Xa=N.UpsampleRgbaLinePair,ch=N.UpsampleBgraLinePair,uh=N.UpsampleArgbLinePair,dh=N.UpsampleRgba4444LinePair,hh=N.UpsampleRgb565LinePair,Za=16,lc=1<<Za-1,go=-227,_u=482,dp=6,fh=0,hp=a(256),gC=a(256),mC=a(256),xC=a(256),vC=a(_u-go),wC=a(_u-go);Ri("YuvToRgbRow",ua,3),Ri("YuvToBgrRow",Mn,3),Ri("YuvToRgbaRow",ns,4),Ri("YuvToBgraRow",ao,4),Ri("YuvToArgbRow",io,4),Ri("YuvToRgba4444Row",za,2),Ri("YuvToRgb565Row",Va,2);var M1=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ph=[0,2,8],yC=[8,7,6,4,4,2,2,2,1,1,1,1],bC=1;this.WebPDecodeRGBA=function(u,f,v,S,P){var R=Rt,K=new tt,W=new zt;K.ba=W,W.S=R,W.width=[W.width],W.height=[W.height];var Z=W.width,Ae=W.height,Ne=new kt;if(Ne==null||u==null)var Me=2;else e(Ne!=null),Me=qa(u,f,v,Ne.width,Ne.height,Ne.Pd,Ne.Qd,Ne.format,null);if(Me!=0?Z=0:(Z!=null&&(Z[0]=Ne.width[0]),Ae!=null&&(Ae[0]=Ne.height[0]),Z=1),Z){W.width=W.width[0],W.height=W.height[0],S!=null&&(S[0]=W.width),P!=null&&(P[0]=W.height);e:{if(S=new JA,(P=new ct).data=u,P.w=f,P.ha=v,P.kd=1,f=[0],e(P!=null),((u=qa(P.data,P.w,P.ha,null,null,null,f,null,P))==0||u==7)&&f[0]&&(u=4),(f=u)==0){if(e(K!=null),S.data=P.data,S.w=P.w+P.offset,S.ha=P.ha-P.offset,S.put=Ge,S.ac=st,S.bc=Dt,S.ma=K,P.xa){if((u=ia())==null){K=1;break e}if(function(oe,Fe){var Oe=[0],et=[0],He=[0];t:for(;;){if(oe==null)return 0;if(Fe==null)return oe.a=2,0;if(oe.l=Fe,oe.a=0,de(oe.m,Fe.data,Fe.w,Fe.ha),!ur(oe.m,Oe,et,He)){oe.a=3;break t}if(oe.xb=Kn,Fe.width=Oe[0],Fe.height=et[0],!yr(Oe[0],et[0],1,oe,null))break t;return 1}return e(oe.a!=0),0}(u,S)){if(S=(f=da(S.width,S.height,K.Oa,K.ba))==0){t:{S=u;r:for(;;){if(S==null){S=0;break t}if(e(S.s.yc!=null),e(S.s.Ya!=null),e(0<S.s.Wb),e((v=S.l)!=null),e((P=v.ma)!=null),S.xb!=0){if(S.ca=P.ba,S.tb=P.tb,e(S.ca!=null),!Ao(P.Oa,v,jt)){S.a=2;break r}if(!xA(S,v.width)||v.da)break r;if((v.da||pt(S.ca.S))&&ri(),11>S.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),S.ca.f.kb.F!=null&&ri()),S.Pb&&0<S.s.ua&&S.s.vb.X==null&&!F(S.s.vb,S.s.Wa.Xa)){S.a=1;break r}S.xb=0}if(!qn(S,S.V,S.Ba,S.c,S.i,v.o,gn))break r;P.Dc=S.Ma,S=1;break t}e(S.a!=0),S=0}S=!S}S&&(f=u.a)}else f=u.a}else{if((u=new wA)==null){K=1;break e}if(u.Fa=P.na,u.P=P.P,u.qc=P.Sa,Zs(u,S)){if((f=da(S.width,S.height,K.Oa,K.ba))==0){if(u.Aa=0,v=K.Oa,e((P=u)!=null),v!=null){if(0<(Z=0>(Z=v.Md)?0:100<Z?255:255*Z/100)){for(Ae=Ne=0;4>Ae;++Ae)12>(Me=P.pb[Ae]).lc&&(Me.ia=Z*yC[0>Me.lc?0:Me.lc]>>3),Ne|=Me.ia;Ne&&(alert("todo:VP8InitRandom"),P.ia=1)}P.Ga=v.Id,100<P.Ga?P.Ga=100:0>P.Ga&&(P.Ga=0)}(function(oe,Fe){if(oe==null)return 0;if(Fe==null)return _t(oe,2,"NULL VP8Io parameter in VP8Decode().");if(!oe.cb&&!Zs(oe,Fe))return 0;if(e(oe.cb),Fe.ac==null||Fe.ac(Fe)){Fe.ob&&(oe.L=0);var Oe=ph[oe.L];if(oe.L==2?(oe.yb=0,oe.zb=0):(oe.yb=Fe.v-Oe>>4,oe.zb=Fe.j-Oe>>4,0>oe.yb&&(oe.yb=0),0>oe.zb&&(oe.zb=0)),oe.Va=Fe.o+15+Oe>>4,oe.Hb=Fe.va+15+Oe>>4,oe.Hb>oe.za&&(oe.Hb=oe.za),oe.Va>oe.Ub&&(oe.Va=oe.Ub),0<oe.L){var et=oe.ed;for(Oe=0;4>Oe;++Oe){var He;if(oe.Qa.Cb){var rt=oe.Qa.Lb[Oe];oe.Qa.Fb||(rt+=et.Tb)}else rt=et.Tb;for(He=0;1>=He;++He){var at=oe.gd[Oe][He],gt=rt;if(et.Pc&&(gt+=et.vd[0],He&&(gt+=et.od[0])),0<(gt=0>gt?0:63<gt?63:gt)){var dt=gt;0<et.wb&&(dt=4<et.wb?dt>>2:dt>>1)>9-et.wb&&(dt=9-et.wb),1>dt&&(dt=1),at.dd=dt,at.tc=2*gt+dt,at.ld=40<=gt?2:15<=gt?1:0}else at.tc=0;at.La=He}}}Oe=0}else _t(oe,6,"Frame setup failed"),Oe=oe.a;if(Oe=Oe==0){if(Oe){oe.$c=0,0<oe.Aa||(oe.Ic=bC);t:{Oe=oe.Ic,et=4*(dt=oe.za);var Xt=32*dt,Kt=dt+1,vr=0<oe.L?dt*(0<oe.Aa?2:1):0,qt=(oe.Aa==2?2:1)*dt;if((at=et+832+(He=3*(16*Oe+ph[oe.L])/2*Xt)+(rt=oe.Fa!=null&&0<oe.Fa.length?oe.Kc.c*oe.Kc.i:0))!=at)Oe=0;else{if(at>oe.Vb){if(oe.Vb=0,oe.Ec=a(at),oe.Fc=0,oe.Ec==null){Oe=_t(oe,1,"no memory during frame initialization.");break t}oe.Vb=at}at=oe.Ec,gt=oe.Fc,oe.Ac=at,oe.Bc=gt,gt+=et,oe.Gd=A(Xt,rc),oe.Hd=0,oe.rb=A(Kt+1,sl),oe.sb=1,oe.wa=vr?A(vr,Xs):null,oe.Y=0,oe.D.Nb=0,oe.D.wa=oe.wa,oe.D.Y=oe.Y,0<oe.Aa&&(oe.D.Y+=dt),e(!0),oe.oc=at,oe.pc=gt,gt+=832,oe.ya=A(qt,Ra),oe.aa=0,oe.D.ya=oe.ya,oe.D.aa=oe.aa,oe.Aa==2&&(oe.D.aa+=dt),oe.R=16*dt,oe.B=8*dt,dt=(Xt=ph[oe.L])*oe.R,Xt=Xt/2*oe.B,oe.sa=at,oe.ta=gt+dt,oe.qa=oe.sa,oe.ra=oe.ta+16*Oe*oe.R+Xt,oe.Ha=oe.qa,oe.Ia=oe.ra+8*Oe*oe.B+Xt,oe.$c=0,gt+=He,oe.mb=rt?at:null,oe.nb=rt?gt:null,e(gt+rt<=oe.Fc+oe.Vb),Zr(oe),s(oe.Ac,oe.Bc,0,et),Oe=1}}if(Oe){if(Fe.ka=0,Fe.y=oe.sa,Fe.O=oe.ta,Fe.f=oe.qa,Fe.N=oe.ra,Fe.ea=oe.Ha,Fe.Vd=oe.Ia,Fe.fa=oe.R,Fe.Rc=oe.B,Fe.F=null,Fe.J=0,!Ke){for(Oe=-255;255>=Oe;++Oe)De[255+Oe]=0>Oe?-Oe:Oe;for(Oe=-1020;1020>=Oe;++Oe)Be[1020+Oe]=-128>Oe?-128:127<Oe?127:Oe;for(Oe=-112;112>=Oe;++Oe)Re[112+Oe]=-16>Oe?-16:15<Oe?15:Oe;for(Oe=-255;510>=Oe;++Oe)it[255+Oe]=0>Oe?0:255<Oe?255:Oe;Ke=1}xa=cl,Ya=oa,gi=Qi,Ur=ll,Or=nc,Rs=ol,dn=gl,Cn=$a,Mi=T,po=ae,SA=ml,wl=m,ju=xe,Eu=Qe,Fu=Ma,C=no,D=fl,q=pl,Gi[0]=oc,Gi[1]=XA,Gi[2]=Ac,Gi[3]=Bu,Gi[4]=Nr,Gi[5]=Cu,Gi[6]=Os,Gi[7]=Nu,Gi[8]=dl,Gi[9]=eo,jA[0]=bu,jA[1]=ic,jA[2]=ZA,jA[3]=ul,jA[4]=Ha,jA[5]=dr,jA[6]=ac,wa[0]=Su,wa[1]=sc,wa[2]=la,wa[3]=Er,wa[4]=bs,wa[5]=sr,wa[6]=hl,Oe=1}else Oe=0}Oe&&(Oe=function(_r,Wn){for(_r.M=0;_r.M<_r.Va;++_r.M){var wr,Wt=_r.Jc[_r.M&_r.Xb],Ft=_r.m,kn=_r;for(wr=0;wr<kn.za;++wr){var mr=Ft,kr=kn,An=kr.Ac,cs=kr.Bc+4*wr,Ks=kr.zc,Nn=kr.ya[kr.aa+wr];if(kr.Qa.Bb?Nn.$b=Pe(mr,kr.Pa.jb[0])?2+Pe(mr,kr.Pa.jb[2]):Pe(mr,kr.Pa.jb[1]):Nn.$b=0,kr.kc&&(Nn.Ad=Pe(mr,kr.Bd)),Nn.Za=!Pe(mr,145)+0,Nn.Za){var Ss=Nn.Ob,Gs=0;for(kr=0;4>kr;++kr){var Jn,Qr=Ks[0+kr];for(Jn=0;4>Jn;++Jn){Qr=Ms[An[cs+Jn]][Qr];for(var Mr=Hs[Pe(mr,Qr[0])];0<Mr;)Mr=Hs[2*Mr+Pe(mr,Qr[Mr])];Qr=-Mr,An[cs+Jn]=Qr}n(Ss,Gs,An,cs,4),Gs+=4,Ks[0+kr]=Qr}}else Qr=Pe(mr,156)?Pe(mr,128)?1:3:Pe(mr,163)?2:0,Nn.Ob[0]=Qr,s(An,cs,Qr,4),s(Ks,0,Qr,4);Nn.Dd=Pe(mr,142)?Pe(mr,114)?Pe(mr,183)?1:3:2:0}if(kn.m.Ka)return _t(_r,7,"Premature end-of-partition0 encountered.");for(;_r.ja<_r.za;++_r.ja){if(kn=Wt,mr=(Ft=_r).rb[Ft.sb-1],An=Ft.rb[Ft.sb+Ft.ja],wr=Ft.ya[Ft.aa+Ft.ja],cs=Ft.kc?wr.Ad:0)mr.la=An.la=0,wr.Za||(mr.Na=An.Na=0),wr.Hc=0,wr.Gc=0,wr.ia=0;else{var Sn,$r;if(mr=An,An=kn,cs=Ft.Pa.Xc,Ks=Ft.ya[Ft.aa+Ft.ja],Nn=Ft.pb[Ks.$b],kr=Ks.ad,Ss=0,Gs=Ft.rb[Ft.sb-1],Qr=Jn=0,s(kr,Ss,0,384),Ks.Za)var us=0,ya=cs[3];else{Mr=a(16);var Un=mr.Na+Gs.Na;if(Un=Pr(An,cs[1],Un,Nn.Eb,0,Mr,0),mr.Na=Gs.Na=(0<Un)+0,1<Un)xa(Mr,0,kr,Ss);else{var ni=Mr[0]+3>>3;for(Mr=0;256>Mr;Mr+=16)kr[Ss+Mr]=ni}us=1,ya=cs[0]}var Yr=15&mr.la,Yn=15&Gs.la;for(Mr=0;4>Mr;++Mr){var mi=1&Yn;for(ni=$r=0;4>ni;++ni)Yr=Yr>>1|(mi=(Un=Pr(An,ya,Un=mi+(1&Yr),Nn.Sc,us,kr,Ss))>us)<<7,$r=$r<<2|(3<Un?3:1<Un?2:kr[Ss+0]!=0),Ss+=16;Yr>>=4,Yn=Yn>>1|mi<<7,Jn=(Jn<<8|$r)>>>0}for(ya=Yr,us=Yn>>4,Sn=0;4>Sn;Sn+=2){for($r=0,Yr=mr.la>>4+Sn,Yn=Gs.la>>4+Sn,Mr=0;2>Mr;++Mr){for(mi=1&Yn,ni=0;2>ni;++ni)Un=mi+(1&Yr),Yr=Yr>>1|(mi=0<(Un=Pr(An,cs[2],Un,Nn.Qc,0,kr,Ss)))<<3,$r=$r<<2|(3<Un?3:1<Un?2:kr[Ss+0]!=0),Ss+=16;Yr>>=2,Yn=Yn>>1|mi<<5}Qr|=$r<<4*Sn,ya|=Yr<<4<<Sn,us|=(240&Yn)<<Sn}mr.la=ya,Gs.la=us,Ks.Hc=Jn,Ks.Gc=Qr,Ks.ia=43690&Qr?0:Nn.ia,cs=!(Jn|Qr)}if(0<Ft.L&&(Ft.wa[Ft.Y+Ft.ja]=Ft.gd[wr.$b][wr.Za],Ft.wa[Ft.Y+Ft.ja].La|=!cs),kn.Ka)return _t(_r,7,"Premature end-of-file encountered.")}if(Zr(_r),Ft=Wn,kn=1,wr=(Wt=_r).D,mr=0<Wt.L&&Wt.M>=Wt.zb&&Wt.M<=Wt.Va,Wt.Aa==0)t:{if(wr.M=Wt.M,wr.uc=mr,Ds(Wt,wr),kn=1,wr=($r=Wt.D).Nb,mr=(Qr=ph[Wt.L])*Wt.R,An=Qr/2*Wt.B,Mr=16*wr*Wt.R,ni=8*wr*Wt.B,cs=Wt.sa,Ks=Wt.ta-mr+Mr,Nn=Wt.qa,kr=Wt.ra-An+ni,Ss=Wt.Ha,Gs=Wt.Ia-An+ni,Yn=(Yr=$r.M)==0,Jn=Yr>=Wt.Va-1,Wt.Aa==2&&Ds(Wt,$r),$r.uc)for(mi=(Un=Wt).D.M,e(Un.D.uc),$r=Un.yb;$r<Un.Hb;++$r){us=$r,ya=mi;var Vs=(xi=(ds=Un).D).Nb;Sn=ds.R;var xi=xi.wa[xi.Y+us],vi=ds.sa,si=ds.ta+16*Vs*Sn+16*us,wi=xi.dd,rn=xi.tc;if(rn!=0)if(e(3<=rn),ds.L==1)0<us&&C(vi,si,Sn,rn+4),xi.La&&q(vi,si,Sn,rn),0<ya&&Fu(vi,si,Sn,rn+4),xi.La&&D(vi,si,Sn,rn);else{var yi=ds.B,ba=ds.qa,yl=ds.ra+8*Vs*yi+8*us,FA=ds.Ha,ds=ds.Ia+8*Vs*yi+8*us;Vs=xi.ld,0<us&&(Cn(vi,si,Sn,rn+4,wi,Vs),po(ba,yl,FA,ds,yi,rn+4,wi,Vs)),xi.La&&(wl(vi,si,Sn,rn,wi,Vs),Eu(ba,yl,FA,ds,yi,rn,wi,Vs)),0<ya&&(dn(vi,si,Sn,rn+4,wi,Vs),Mi(ba,yl,FA,ds,yi,rn+4,wi,Vs)),xi.La&&(SA(vi,si,Sn,rn,wi,Vs),ju(ba,yl,FA,ds,yi,rn,wi,Vs))}}if(Wt.ia&&alert("todo:DitherRow"),Ft.put!=null){if($r=16*Yr,Yr=16*(Yr+1),Yn?(Ft.y=Wt.sa,Ft.O=Wt.ta+Mr,Ft.f=Wt.qa,Ft.N=Wt.ra+ni,Ft.ea=Wt.Ha,Ft.W=Wt.Ia+ni):($r-=Qr,Ft.y=cs,Ft.O=Ks,Ft.f=Nn,Ft.N=kr,Ft.ea=Ss,Ft.W=Gs),Jn||(Yr-=Qr),Yr>Ft.o&&(Yr=Ft.o),Ft.F=null,Ft.J=null,Wt.Fa!=null&&0<Wt.Fa.length&&$r<Yr&&(Ft.J=Hr(Wt,Ft,$r,Yr-$r),Ft.F=Wt.mb,Ft.F==null&&Ft.F.length==0)){kn=_t(Wt,3,"Could not decode alpha data.");break t}$r<Ft.j&&(Qr=Ft.j-$r,$r=Ft.j,e(!(1&Qr)),Ft.O+=Wt.R*Qr,Ft.N+=Wt.B*(Qr>>1),Ft.W+=Wt.B*(Qr>>1),Ft.F!=null&&(Ft.J+=Ft.width*Qr)),$r<Yr&&(Ft.O+=Ft.v,Ft.N+=Ft.v>>1,Ft.W+=Ft.v>>1,Ft.F!=null&&(Ft.J+=Ft.v),Ft.ka=$r-Ft.j,Ft.U=Ft.va-Ft.v,Ft.T=Yr-$r,kn=Ft.put(Ft))}wr+1!=Wt.Ic||Jn||(n(Wt.sa,Wt.ta-mr,cs,Ks+16*Wt.R,mr),n(Wt.qa,Wt.ra-An,Nn,kr+8*Wt.B,An),n(Wt.Ha,Wt.Ia-An,Ss,Gs+8*Wt.B,An))}if(!kn)return _t(_r,6,"Output aborted.")}return 1}(oe,Fe)),Fe.bc!=null&&Fe.bc(Fe),Oe&=1}return Oe?(oe.cb=0,Oe):0})(u,S)||(f=u.a)}}else f=u.a}f==0&&K.Oa!=null&&K.Oa.fd&&(f=oo(K.ba))}K=f}R=K!=0?null:11>R?W.f.RGBA.eb:W.f.kb.y}else R=null;return R};var $1=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(N,$){for(var k="",_=0;_<4;_++)k+=String.fromCharCode(N[$++]);return k}function d(N,$){return N[$+0]|N[$+1]<<8}function p(N,$){return(N[$+0]|N[$+1]<<8|N[$+2]<<16)>>>0}function g(N,$){return(N[$+0]|N[$+1]<<8|N[$+2]<<16|N[$+3]<<24)>>>0}new l;var h=[0],b=[0],w=[],j=new l,x=t,y=function(N,$){var k={},_=0,z=!1,O=0,te=0;if(k.frames=[],!function(I,H){for(var re=0;re<4;re++)if(I[H+re]!="RIFF".charCodeAt(re))return!0;return!1}(N,$)){for(g(N,$+=4),$+=8;$<N.length;){var ue=c(N,$),fe=g(N,$+=4);$+=4;var ie=fe+(1&fe);switch(ue){case"VP8 ":case"VP8L":k.frames[_]===void 0&&(k.frames[_]={}),(ve=k.frames[_]).src_off=z?te:$-8,ve.src_size=O+fe+8,_++,z&&(z=!1,O=0,te=0);break;case"VP8X":(ve=k.header={}).feature_flags=N[$];var de=$+4;ve.canvas_width=1+p(N,de),de+=3,ve.canvas_height=1+p(N,de),de+=3;break;case"ALPH":z=!0,O=ie+8,te=$-8;break;case"ANIM":(ve=k.header).bgcolor=g(N,$),de=$+4,ve.loop_count=d(N,de),de+=2;break;case"ANMF":var ge,ve;(ve=k.frames[_]={}).offset_x=2*p(N,$),$+=3,ve.offset_y=2*p(N,$),$+=3,ve.width=1+p(N,$),$+=3,ve.height=1+p(N,$),$+=3,ve.duration=p(N,$),$+=3,ge=N[$++],ve.dispose=1&ge,ve.blend=ge>>1&1}ue!="ANMF"&&($+=ie)}return k}}(x,0);y.response=x,y.rgbaoutput=!0,y.dataurl=!1;var B=y.header?y.header:null,E=y.frames?y.frames:null;if(B){B.loop_counter=B.loop_count,h=[B.canvas_height],b=[B.canvas_width];for(var L=0;L<E.length&&E[L].blend!=0;L++);}var U=E[0],M=j.WebPDecodeRGBA(x,U.src_off,U.src_size,b,h);U.rgba=M,U.imgwidth=b[0],U.imgheight=h[0];for(var G=0;G<b[0]*h[0]*4;G++)w[G]=M[G];return this.width=b,this.height=h,this.data=w,this}/** ====================================================================
 * @license
 * jsPDF XMP metadata plugin
 * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */function YL(){var t,e=this.internal.__metadata__.metadata,r=unescape(encodeURIComponent(e));t=this.internal.__metadata__.rawXml?r:'<x:xmpmeta xmlns:x="adobe:ns:meta/"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceUri+'"><jspdf:metadata>'+r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")+"</jspdf:metadata></rdf:Description></rdf:RDF></x:xmpmeta>",this.internal.__metadata__.metadataObjectNumber=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+t.length+" >>"),this.internal.write("stream"),this.internal.write(t),this.internal.write("endstream"),this.internal.write("endobj")}function XL(){this.internal.__metadata__.metadataObjectNumber&&this.internal.write("/Metadata "+this.internal.__metadata__.metadataObjectNumber+" 0 R")}(function(t){var e,r,n,s,a,A,o,l,c,d=function(I){return I=I||{},this.isStrokeTransparent=I.isStrokeTransparent||!1,this.strokeOpacity=I.strokeOpacity||1,this.strokeStyle=I.strokeStyle||"#000000",this.fillStyle=I.fillStyle||"#000000",this.isFillTransparent=I.isFillTransparent||!1,this.fillOpacity=I.fillOpacity||1,this.font=I.font||"10px sans-serif",this.textBaseline=I.textBaseline||"alphabetic",this.textAlign=I.textAlign||"left",this.lineWidth=I.lineWidth||1,this.lineJoin=I.lineJoin||"miter",this.lineCap=I.lineCap||"butt",this.path=I.path||[],this.transform=I.transform!==void 0?I.transform.clone():new l,this.globalCompositeOperation=I.globalCompositeOperation||"normal",this.globalAlpha=I.globalAlpha||1,this.clip_path=I.clip_path||[],this.currentPoint=I.currentPoint||new A,this.miterLimit=I.miterLimit||10,this.lastPoint=I.lastPoint||new A,this.lineDashOffset=I.lineDashOffset||0,this.lineDash=I.lineDash||[],this.margin=I.margin||[0,0,0,0],this.prevPageLastElemOffset=I.prevPageLastElemOffset||0,this.ignoreClearRect=typeof I.ignoreClearRect!="boolean"||I.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,A=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new d}]);var p=function(I){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var H=I;Object.defineProperty(this,"pdf",{get:function(){return H}});var re=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return re},set:function(F){re=!!F}});var Y=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Y},set:function(F){Y=!!F}});var le=0;Object.defineProperty(this,"posX",{get:function(){return le},set:function(F){isNaN(F)||(le=F)}});var me=0;Object.defineProperty(this,"posY",{get:function(){return me},set:function(F){isNaN(F)||(me=F)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(F){var se;typeof F=="number"?se=[F,F,F,F]:((se=new Array(4))[0]=F[0],se[1]=F.length>=2?F[1]:se[0],se[2]=F.length>=3?F[2]:se[0],se[3]=F.length>=4?F[3]:se[1]),c.margin=se}});var ke=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ke},set:function(F){ke=F}});var Ee=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ee},set:function(F){Ee=F}});var Pe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Pe},set:function(F){Pe=F}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(F){F instanceof d&&(c=F)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(F){c.path=F}});var nt=[];Object.defineProperty(this,"ctxStack",{get:function(){return nt},set:function(F){nt=F}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(F){var se;se=g(F),this.ctx.fillStyle=se.style,this.ctx.isFillTransparent=se.a===0,this.ctx.fillOpacity=se.a,this.pdf.setFillColor(se.r,se.g,se.b,{a:se.a}),this.pdf.setTextColor(se.r,se.g,se.b,{a:se.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(F){var se=g(F);this.ctx.strokeStyle=se.style,this.ctx.isStrokeTransparent=se.a===0,this.ctx.strokeOpacity=se.a,se.a===0?this.pdf.setDrawColor(255,255,255):(se.a,this.pdf.setDrawColor(se.r,se.g,se.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(F){["butt","round","square"].indexOf(F)!==-1&&(this.ctx.lineCap=F,this.pdf.setLineCap(F))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(F){isNaN(F)||(this.ctx.lineWidth=F,this.pdf.setLineWidth(F))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(F){["bevel","round","miter"].indexOf(F)!==-1&&(this.ctx.lineJoin=F,this.pdf.setLineJoin(F))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(F){isNaN(F)||(this.ctx.miterLimit=F,this.pdf.setMiterLimit(F))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(F){this.ctx.textBaseline=F}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(F){["right","end","center","left","start"].indexOf(F)!==-1&&(this.ctx.textAlign=F)}});var ut=null,he=null,Ze=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ze},set:function(F){ut=null,he=null,Ze=F}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(F){var se;if(this.ctx.font=F,(se=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(F))!==null){var qe=se[1];se[2];var X=se[3],ne=se[4];se[5];var je=se[6],J=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ne)[2];ne=Math.floor(J==="px"?parseFloat(ne)*this.pdf.internal.scaleFactor:J==="em"?parseFloat(ne)*this.pdf.getFontSize():parseFloat(ne)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ne);var $e=function(_e){var Je,Xe,ye=[],Le=_e.trim();if(Le==="")return $g;if(Le in _2)return[_2[Le]];for(;Le!=="";){switch(Xe=null,Je=(Le=U2(Le)).charAt(0)){case'"':case"'":Xe=GL(Le.substring(1),Je);break;default:Xe=VL(Le)}if(Xe===null||(ye.push(Xe[0]),(Le=U2(Xe[1]))!==""&&Le.charAt(0)!==","))return $g;Le=Le.replace(/^,/,"")}return ye}(je);if(this.fontFaces){var Ve=function(_e,Je){var Xe=_e.getFontList(),ye=JSON.stringify(Xe);if(ut===null||he!==ye){var Le=function(ft){var At=[];return Object.keys(ft).forEach(function(wt){ft[wt].forEach(function(pt){var xt=null;switch(pt){case"bold":xt={family:wt,weight:"bold"};break;case"italic":xt={family:wt,style:"italic"};break;case"bolditalic":xt={family:wt,weight:"bold",style:"italic"};break;case"":case"normal":xt={family:wt}}xt!==null&&(xt.ref={name:wt,style:pt},At.push(xt))})}),At}(Xe);ut=function(ft){for(var At={},wt=0;wt<ft.length;++wt){var pt=Mg(ft[wt]),xt=pt.family,yt=pt.stretch,zt=pt.style,kt=pt.weight;At[xt]=At[xt]||{},At[xt][yt]=At[xt][yt]||{},At[xt][yt][zt]=At[xt][yt][zt]||{},At[xt][yt][zt][kt]=pt}return At}(Le.concat(Je)),he=ye}return ut}(this.pdf,this.fontFaces),ze=$e.map(function(_e){return{family:_e,stretch:"normal",weight:X,style:qe}}),We=function(_e,Je,Xe){for(var ye=(Xe=Xe||{}).defaultFontFamily||"times",Le=Object.assign({},KL,Xe.genericFontFamilies||{}),ft=null,At=null,wt=0;wt<Je.length;++wt)if(Le[(ft=Mg(Je[wt])).family]&&(ft.family=Le[ft.family]),_e.hasOwnProperty(ft.family)){At=_e[ft.family];break}if(!(At=At||_e[ye]))throw new Error("Could not find a font-family for the rule '"+k2(ft)+"' and default family '"+ye+"'.");if(At=function(pt,xt){if(xt[pt])return xt[pt];var yt=Fx[pt],zt=yt<=Fx.normal?-1:1,kt=F2(xt,uC,yt,zt);if(!kt)throw new Error("Could not find a matching font-stretch value for "+pt);return kt}(ft.stretch,At),At=function(pt,xt){if(xt[pt])return xt[pt];for(var yt=cC[pt],zt=0;zt<yt.length;++zt)if(xt[yt[zt]])return xt[yt[zt]];throw new Error("Could not find a matching font-style for "+pt)}(ft.style,At),!(At=function(pt,xt){if(xt[pt])return xt[pt];if(pt===400&&xt[500])return xt[500];if(pt===500&&xt[400])return xt[400];var yt=$L[pt],zt=F2(xt,dC,yt,pt<400?-1:1);if(!zt)throw new Error("Could not find a matching font-weight for value "+pt);return zt}(ft.weight,At)))throw new Error("Failed to resolve a font for the rule '"+k2(ft)+"'.");return At}(Ve,ze);this.pdf.setFont(We.ref.name,We.ref.style)}else{var lt="";(X==="bold"||parseInt(X,10)>=700||qe==="bold")&&(lt="bold"),qe==="italic"&&(lt+="italic"),lt.length===0&&(lt="normal");for(var be="",Se={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ee=0;ee<$e.length;ee++){if(this.pdf.internal.getFont($e[ee],lt,{noFallback:!0,disableWarning:!0})!==void 0){be=$e[ee];break}if(lt==="bolditalic"&&this.pdf.internal.getFont($e[ee],"bold",{noFallback:!0,disableWarning:!0})!==void 0)be=$e[ee],lt="bold";else if(this.pdf.internal.getFont($e[ee],"normal",{noFallback:!0,disableWarning:!0})!==void 0){be=$e[ee],lt="normal";break}}if(be===""){for(var we=0;we<$e.length;we++)if(Se[$e[we]]){be=Se[$e[we]];break}}be=be===""?"Times":be,this.pdf.setFont(be,lt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(F){this.ctx.globalCompositeOperation=F}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(F){this.ctx.globalAlpha=F}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(F){this.ctx.lineDashOffset=F,ve.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(F){this.ctx.lineDash=F,ve.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(F){this.ctx.ignoreClearRect=!!F}})};p.prototype.setLineDash=function(I){this.lineDash=I},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){E.call(this,"fill",!1)},p.prototype.stroke=function(){E.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(I,H){if(isNaN(I)||isNaN(H))throw Xr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var re=this.ctx.transform.applyToPoint(new A(I,H));this.path.push({type:"mt",x:re.x,y:re.y}),this.ctx.lastPoint=new A(I,H)},p.prototype.closePath=function(){var I=new A(0,0),H=0;for(H=this.path.length-1;H!==-1;H--)if(this.path[H].type==="begin"&&Gr(this.path[H+1])==="object"&&typeof this.path[H+1].x=="number"){I=new A(this.path[H+1].x,this.path[H+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new A(I.x,I.y)},p.prototype.lineTo=function(I,H){if(isNaN(I)||isNaN(H))throw Xr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var re=this.ctx.transform.applyToPoint(new A(I,H));this.path.push({type:"lt",x:re.x,y:re.y}),this.ctx.lastPoint=new A(re.x,re.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),E.call(this,null,!0)},p.prototype.quadraticCurveTo=function(I,H,re,Y){if(isNaN(re)||isNaN(Y)||isNaN(I)||isNaN(H))throw Xr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var le=this.ctx.transform.applyToPoint(new A(re,Y)),me=this.ctx.transform.applyToPoint(new A(I,H));this.path.push({type:"qct",x1:me.x,y1:me.y,x:le.x,y:le.y}),this.ctx.lastPoint=new A(le.x,le.y)},p.prototype.bezierCurveTo=function(I,H,re,Y,le,me){if(isNaN(le)||isNaN(me)||isNaN(I)||isNaN(H)||isNaN(re)||isNaN(Y))throw Xr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ke=this.ctx.transform.applyToPoint(new A(le,me)),Ee=this.ctx.transform.applyToPoint(new A(I,H)),Pe=this.ctx.transform.applyToPoint(new A(re,Y));this.path.push({type:"bct",x1:Ee.x,y1:Ee.y,x2:Pe.x,y2:Pe.y,x:ke.x,y:ke.y}),this.ctx.lastPoint=new A(ke.x,ke.y)},p.prototype.arc=function(I,H,re,Y,le,me){if(isNaN(I)||isNaN(H)||isNaN(re)||isNaN(Y)||isNaN(le))throw Xr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(me=!!me,!this.ctx.transform.isIdentity){var ke=this.ctx.transform.applyToPoint(new A(I,H));I=ke.x,H=ke.y;var Ee=this.ctx.transform.applyToPoint(new A(0,re)),Pe=this.ctx.transform.applyToPoint(new A(0,0));re=Math.sqrt(Math.pow(Ee.x-Pe.x,2)+Math.pow(Ee.y-Pe.y,2))}Math.abs(le-Y)>=2*Math.PI&&(Y=0,le=2*Math.PI),this.path.push({type:"arc",x:I,y:H,radius:re,startAngle:Y,endAngle:le,counterclockwise:me})},p.prototype.arcTo=function(I,H,re,Y,le){throw new Error("arcTo not implemented.")},p.prototype.rect=function(I,H,re,Y){if(isNaN(I)||isNaN(H)||isNaN(re)||isNaN(Y))throw Xr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(I,H),this.lineTo(I+re,H),this.lineTo(I+re,H+Y),this.lineTo(I,H+Y),this.lineTo(I,H),this.lineTo(I+re,H),this.lineTo(I,H)},p.prototype.fillRect=function(I,H,re,Y){if(isNaN(I)||isNaN(H)||isNaN(re)||isNaN(Y))throw Xr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var le={};this.lineCap!=="butt"&&(le.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(le.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(I,H,re,Y),this.fill(),le.hasOwnProperty("lineCap")&&(this.lineCap=le.lineCap),le.hasOwnProperty("lineJoin")&&(this.lineJoin=le.lineJoin)}},p.prototype.strokeRect=function(I,H,re,Y){if(isNaN(I)||isNaN(H)||isNaN(re)||isNaN(Y))throw Xr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(I,H,re,Y),this.stroke())},p.prototype.clearRect=function(I,H,re,Y){if(isNaN(I)||isNaN(H)||isNaN(re)||isNaN(Y))throw Xr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(I,H,re,Y))},p.prototype.save=function(I){I=typeof I!="boolean"||I;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("q");if(this.pdf.setPage(H),I){this.ctx.fontSize=this.pdf.internal.getFontSize();var Y=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Y}},p.prototype.restore=function(I){I=typeof I!="boolean"||I;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("Q");this.pdf.setPage(H),I&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(I){var H,re,Y,le;if(I.isCanvasGradient===!0&&(I=I.getColor()),!I)return{r:0,g:0,b:0,a:0,style:I};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(I))H=0,re=0,Y=0,le=0;else{var me=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(I);if(me!==null)H=parseInt(me[1]),re=parseInt(me[2]),Y=parseInt(me[3]),le=1;else if((me=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(I))!==null)H=parseInt(me[1]),re=parseInt(me[2]),Y=parseInt(me[3]),le=parseFloat(me[4]);else{if(le=1,typeof I=="string"&&I.charAt(0)!=="#"){var ke=new nC(I);I=ke.ok?ke.toHex():"#000000"}I.length===4?(H=I.substring(1,2),H+=H,re=I.substring(2,3),re+=re,Y=I.substring(3,4),Y+=Y):(H=I.substring(1,3),re=I.substring(3,5),Y=I.substring(5,7)),H=parseInt(H,16),re=parseInt(re,16),Y=parseInt(Y,16)}}return{r:H,g:re,b:Y,a:le,style:I}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(I,H,re,Y){if(isNaN(H)||isNaN(re)||typeof I!="string")throw Xr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Y=isNaN(Y)?void 0:Y,!h.call(this)){var le=ie(this.ctx.transform.rotation),me=this.ctx.transform.scaleX;_.call(this,{text:I,x:H,y:re,scale:me,angle:le,align:this.textAlign,maxWidth:Y})}},p.prototype.strokeText=function(I,H,re,Y){if(isNaN(H)||isNaN(re)||typeof I!="string")throw Xr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){Y=isNaN(Y)?void 0:Y;var le=ie(this.ctx.transform.rotation),me=this.ctx.transform.scaleX;_.call(this,{text:I,x:H,y:re,scale:me,renderingMode:"stroke",angle:le,align:this.textAlign,maxWidth:Y})}},p.prototype.measureText=function(I){if(typeof I!="string")throw Xr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var H=this.pdf,re=this.pdf.internal.scaleFactor,Y=H.internal.getFontSize(),le=H.getStringUnitWidth(I)*Y/H.internal.scaleFactor;return new function(me){var ke=(me=me||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ke}}),this}({width:le*=Math.round(96*re/72*1e4)/1e4})},p.prototype.scale=function(I,H){if(isNaN(I)||isNaN(H))throw Xr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var re=new l(I,0,0,H,0,0);this.ctx.transform=this.ctx.transform.multiply(re)},p.prototype.rotate=function(I){if(isNaN(I))throw Xr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var H=new l(Math.cos(I),Math.sin(I),-Math.sin(I),Math.cos(I),0,0);this.ctx.transform=this.ctx.transform.multiply(H)},p.prototype.translate=function(I,H){if(isNaN(I)||isNaN(H))throw Xr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var re=new l(1,0,0,1,I,H);this.ctx.transform=this.ctx.transform.multiply(re)},p.prototype.transform=function(I,H,re,Y,le,me){if(isNaN(I)||isNaN(H)||isNaN(re)||isNaN(Y)||isNaN(le)||isNaN(me))throw Xr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ke=new l(I,H,re,Y,le,me);this.ctx.transform=this.ctx.transform.multiply(ke)},p.prototype.setTransform=function(I,H,re,Y,le,me){I=isNaN(I)?1:I,H=isNaN(H)?0:H,re=isNaN(re)?0:re,Y=isNaN(Y)?1:Y,le=isNaN(le)?0:le,me=isNaN(me)?0:me,this.ctx.transform=new l(I,H,re,Y,le,me)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(I,H,re,Y,le,me,ke,Ee,Pe){var nt=this.pdf.getImageProperties(I),ut=1,he=1,Ze=1,F=1;Y!==void 0&&Ee!==void 0&&(Ze=Ee/Y,F=Pe/le,ut=nt.width/Y*Ee/Y,he=nt.height/le*Pe/le),me===void 0&&(me=H,ke=re,H=0,re=0),Y!==void 0&&Ee===void 0&&(Ee=Y,Pe=le),Y===void 0&&Ee===void 0&&(Ee=nt.width,Pe=nt.height);var se=this.ctx.transform.decompose(),qe=ie(se.rotate.shx),X=new l,ne=(X=(X=(X=X.multiply(se.translate)).multiply(se.skew)).multiply(se.scale)).applyToRectangle(new o(me-H*Ze,ke-re*F,Y*ut,le*he));if(this.autoPaging){for(var je,J=j.call(this,ne),$e=[],Ve=0;Ve<J.length;Ve+=1)$e.indexOf(J[Ve])===-1&&$e.push(J[Ve]);B($e);for(var ze=$e[0],We=$e[$e.length-1],lt=ze;lt<We+1;lt++){this.pdf.setPage(lt);var be=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Se=lt===1?this.posY+this.margin[0]:this.margin[0],ee=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],we=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_e=lt===1?0:ee+(lt-2)*we;if(this.ctx.clip_path.length!==0){var Je=this.path;je=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(je,this.posX+this.margin[3],-_e+Se+this.ctx.prevPageLastElemOffset),L.call(this,"fill",!0),this.path=Je}var Xe=JSON.parse(JSON.stringify(ne));Xe=y([Xe],this.posX+this.margin[3],-_e+Se+this.ctx.prevPageLastElemOffset)[0];var ye=(lt>ze||lt<We)&&w.call(this);ye&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],be,we,null).clip().discardPath()),this.pdf.addImage(I,"JPEG",Xe.x,Xe.y,Xe.w,Xe.h,null,null,qe),ye&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(I,"JPEG",ne.x,ne.y,ne.w,ne.h,null,null,qe)};var j=function(I,H,re){var Y=[];H=H||this.pdf.internal.pageSize.width,re=re||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var le=this.posY+this.ctx.prevPageLastElemOffset;switch(I.type){default:case"mt":case"lt":Y.push(Math.floor((I.y+le)/re)+1);break;case"arc":Y.push(Math.floor((I.y+le-I.radius)/re)+1),Y.push(Math.floor((I.y+le+I.radius)/re)+1);break;case"qct":var me=de(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x,I.y);Y.push(Math.floor((me.y+le)/re)+1),Y.push(Math.floor((me.y+me.h+le)/re)+1);break;case"bct":var ke=ge(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x2,I.y2,I.x,I.y);Y.push(Math.floor((ke.y+le)/re)+1),Y.push(Math.floor((ke.y+ke.h+le)/re)+1);break;case"rect":Y.push(Math.floor((I.y+le)/re)+1),Y.push(Math.floor((I.y+I.h+le)/re)+1)}for(var Ee=0;Ee<Y.length;Ee+=1)for(;this.pdf.internal.getNumberOfPages()<Y[Ee];)x.call(this);return Y},x=function(){var I=this.fillStyle,H=this.strokeStyle,re=this.font,Y=this.lineCap,le=this.lineWidth,me=this.lineJoin;this.pdf.addPage(),this.fillStyle=I,this.strokeStyle=H,this.font=re,this.lineCap=Y,this.lineWidth=le,this.lineJoin=me},y=function(I,H,re){for(var Y=0;Y<I.length;Y++)switch(I[Y].type){case"bct":I[Y].x2+=H,I[Y].y2+=re;case"qct":I[Y].x1+=H,I[Y].y1+=re;default:I[Y].x+=H,I[Y].y+=re}return I},B=function(I){return I.sort(function(H,re){return H-re})},E=function(I,H){var re=this.fillStyle,Y=this.strokeStyle,le=this.lineCap,me=this.lineWidth,ke=Math.abs(me*this.ctx.transform.scaleX),Ee=this.lineJoin;if(this.autoPaging){for(var Pe,nt,ut=JSON.parse(JSON.stringify(this.path)),he=JSON.parse(JSON.stringify(this.path)),Ze=[],F=0;F<he.length;F++)if(he[F].x!==void 0)for(var se=j.call(this,he[F]),qe=0;qe<se.length;qe+=1)Ze.indexOf(se[qe])===-1&&Ze.push(se[qe]);for(var X=0;X<Ze.length;X++)for(;this.pdf.internal.getNumberOfPages()<Ze[X];)x.call(this);B(Ze);for(var ne=Ze[0],je=Ze[Ze.length-1],J=ne;J<je+1;J++){this.pdf.setPage(J),this.fillStyle=re,this.strokeStyle=Y,this.lineCap=le,this.lineWidth=ke,this.lineJoin=Ee;var $e=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ve=J===1?this.posY+this.margin[0]:this.margin[0],ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],We=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],lt=J===1?0:ze+(J-2)*We;if(this.ctx.clip_path.length!==0){var be=this.path;Pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(Pe,this.posX+this.margin[3],-lt+Ve+this.ctx.prevPageLastElemOffset),L.call(this,I,!0),this.path=be}if(nt=JSON.parse(JSON.stringify(ut)),this.path=y(nt,this.posX+this.margin[3],-lt+Ve+this.ctx.prevPageLastElemOffset),H===!1||J===0){var Se=(J>ne||J<je)&&w.call(this);Se&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$e,We,null).clip().discardPath()),L.call(this,I,H),Se&&this.pdf.restoreGraphicsState()}this.lineWidth=me}this.path=ut}else this.lineWidth=ke,L.call(this,I,H),this.lineWidth=me},L=function(I,H){if((I!=="stroke"||H||!b.call(this))&&(I==="stroke"||H||!h.call(this))){for(var re,Y,le=[],me=this.path,ke=0;ke<me.length;ke++){var Ee=me[ke];switch(Ee.type){case"begin":le.push({begin:!0});break;case"close":le.push({close:!0});break;case"mt":le.push({start:Ee,deltas:[],abs:[]});break;case"lt":var Pe=le.length;if(me[ke-1]&&!isNaN(me[ke-1].x)&&(re=[Ee.x-me[ke-1].x,Ee.y-me[ke-1].y],Pe>0)){for(;Pe>=0;Pe--)if(le[Pe-1].close!==!0&&le[Pe-1].begin!==!0){le[Pe-1].deltas.push(re),le[Pe-1].abs.push(Ee);break}}break;case"bct":re=[Ee.x1-me[ke-1].x,Ee.y1-me[ke-1].y,Ee.x2-me[ke-1].x,Ee.y2-me[ke-1].y,Ee.x-me[ke-1].x,Ee.y-me[ke-1].y],le[le.length-1].deltas.push(re);break;case"qct":var nt=me[ke-1].x+2/3*(Ee.x1-me[ke-1].x),ut=me[ke-1].y+2/3*(Ee.y1-me[ke-1].y),he=Ee.x+2/3*(Ee.x1-Ee.x),Ze=Ee.y+2/3*(Ee.y1-Ee.y),F=Ee.x,se=Ee.y;re=[nt-me[ke-1].x,ut-me[ke-1].y,he-me[ke-1].x,Ze-me[ke-1].y,F-me[ke-1].x,se-me[ke-1].y],le[le.length-1].deltas.push(re);break;case"arc":le.push({deltas:[],abs:[],arc:!0}),Array.isArray(le[le.length-1].abs)&&le[le.length-1].abs.push(Ee)}}Y=H?null:I==="stroke"?"stroke":"fill";for(var qe=!1,X=0;X<le.length;X++)if(le[X].arc)for(var ne=le[X].abs,je=0;je<ne.length;je++){var J=ne[je];J.type==="arc"?G.call(this,J.x,J.y,J.radius,J.startAngle,J.endAngle,J.counterclockwise,void 0,H,!qe):z.call(this,J.x,J.y),qe=!0}else if(le[X].close===!0)this.pdf.internal.out("h"),qe=!1;else if(le[X].begin!==!0){var $e=le[X].start.x,Ve=le[X].start.y;O.call(this,le[X].deltas,$e,Ve),qe=!0}Y&&N.call(this,Y),H&&$.call(this)}},U=function(I){var H=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,re=H*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return I-re;case"top":return I+H-re;case"hanging":return I+H-2*re;case"middle":return I+H/2-re;default:return I}},M=function(I){return I+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var I=function(){};return I.colorStops=[],I.addColorStop=function(H,re){this.colorStops.push([H,re])},I.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},I.isCanvasGradient=!0,I},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var G=function(I,H,re,Y,le,me,ke,Ee,Pe){for(var nt=ue.call(this,re,Y,le,me),ut=0;ut<nt.length;ut++){var he=nt[ut];ut===0&&(Pe?k.call(this,he.x1+I,he.y1+H):z.call(this,he.x1+I,he.y1+H)),te.call(this,I,H,he.x2,he.y2,he.x3,he.y3,he.x4,he.y4)}Ee?$.call(this):N.call(this,ke)},N=function(I){switch(I){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},$=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(I,H){this.pdf.internal.out(r(I)+" "+n(H)+" m")},_=function(I){var H;switch(I.align){case"right":case"end":H="right";break;case"center":H="center";break;default:H="left"}var re,Y,le,me=this.pdf.getTextDimensions(I.text),ke=U.call(this,I.y),Ee=M.call(this,ke)-me.h,Pe=this.ctx.transform.applyToPoint(new A(I.x,ke));if(this.autoPaging){var nt=this.ctx.transform.decompose(),ut=new l;ut=(ut=(ut=ut.multiply(nt.translate)).multiply(nt.skew)).multiply(nt.scale);for(var he=this.ctx.transform.applyToRectangle(new o(I.x,ke,me.w,me.h)),Ze=ut.applyToRectangle(new o(I.x,Ee,me.w,me.h)),F=j.call(this,Ze),se=[],qe=0;qe<F.length;qe+=1)se.indexOf(F[qe])===-1&&se.push(F[qe]);B(se);for(var X=se[0],ne=se[se.length-1],je=X;je<ne+1;je++){this.pdf.setPage(je);var J=je===1?this.posY+this.margin[0]:this.margin[0],$e=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ve=this.pdf.internal.pageSize.height-this.margin[2],ze=Ve-this.margin[0],We=this.pdf.internal.pageSize.width-this.margin[1],lt=We-this.margin[3],be=je===1?0:$e+(je-2)*ze;if(this.ctx.clip_path.length!==0){var Se=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(re,this.posX+this.margin[3],-1*be+J),L.call(this,"fill",!0),this.path=Se}var ee=y([JSON.parse(JSON.stringify(Ze))],this.posX+this.margin[3],-be+J+this.ctx.prevPageLastElemOffset)[0];I.scale>=.01&&(Y=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Y*I.scale),le=this.lineWidth,this.lineWidth=le*I.scale);var we=this.autoPaging!=="text";if(we||ee.y+ee.h<=Ve){if(we||ee.y>=J&&ee.x<=We){var _e=we?I.text:this.pdf.splitTextToSize(I.text,I.maxWidth||We-ee.x)[0],Je=y([JSON.parse(JSON.stringify(he))],this.posX+this.margin[3],-be+J+this.ctx.prevPageLastElemOffset)[0],Xe=we&&(je>X||je<ne)&&w.call(this);Xe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],lt,ze,null).clip().discardPath()),this.pdf.text(_e,Je.x,Je.y,{angle:I.angle,align:H,renderingMode:I.renderingMode}),Xe&&this.pdf.restoreGraphicsState()}}else ee.y<Ve&&(this.ctx.prevPageLastElemOffset+=Ve-ee.y);I.scale>=.01&&(this.pdf.setFontSize(Y),this.lineWidth=le)}}else I.scale>=.01&&(Y=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Y*I.scale),le=this.lineWidth,this.lineWidth=le*I.scale),this.pdf.text(I.text,Pe.x+this.posX,Pe.y+this.posY,{angle:I.angle,align:H,renderingMode:I.renderingMode,maxWidth:I.maxWidth}),I.scale>=.01&&(this.pdf.setFontSize(Y),this.lineWidth=le)},z=function(I,H,re,Y){re=re||0,Y=Y||0,this.pdf.internal.out(r(I+re)+" "+n(H+Y)+" l")},O=function(I,H,re){return this.pdf.lines(I,H,re,null,null)},te=function(I,H,re,Y,le,me,ke,Ee){this.pdf.internal.out([e(s(re+I)),e(a(Y+H)),e(s(le+I)),e(a(me+H)),e(s(ke+I)),e(a(Ee+H)),"c"].join(" "))},ue=function(I,H,re,Y){for(var le=2*Math.PI,me=Math.PI/2;H>re;)H-=le;var ke=Math.abs(re-H);ke<le&&Y&&(ke=le-ke);for(var Ee=[],Pe=Y?-1:1,nt=H;ke>1e-5;){var ut=nt+Pe*Math.min(ke,me);Ee.push(fe.call(this,I,nt,ut)),ke-=Math.abs(ut-nt),nt=ut}return Ee},fe=function(I,H,re){var Y=(re-H)/2,le=I*Math.cos(Y),me=I*Math.sin(Y),ke=le,Ee=-me,Pe=ke*ke+Ee*Ee,nt=Pe+ke*le+Ee*me,ut=4/3*(Math.sqrt(2*Pe*nt)-nt)/(ke*me-Ee*le),he=ke-ut*Ee,Ze=Ee+ut*ke,F=he,se=-Ze,qe=Y+H,X=Math.cos(qe),ne=Math.sin(qe);return{x1:I*Math.cos(H),y1:I*Math.sin(H),x2:he*X-Ze*ne,y2:he*ne+Ze*X,x3:F*X-se*ne,y3:F*ne+se*X,x4:I*Math.cos(re),y4:I*Math.sin(re)}},ie=function(I){return 180*I/Math.PI},de=function(I,H,re,Y,le,me){var ke=I+.5*(re-I),Ee=H+.5*(Y-H),Pe=le+.5*(re-le),nt=me+.5*(Y-me),ut=Math.min(I,le,ke,Pe),he=Math.max(I,le,ke,Pe),Ze=Math.min(H,me,Ee,nt),F=Math.max(H,me,Ee,nt);return new o(ut,Ze,he-ut,F-Ze)},ge=function(I,H,re,Y,le,me,ke,Ee){var Pe,nt,ut,he,Ze,F,se,qe,X,ne,je,J,$e,Ve,ze=re-I,We=Y-H,lt=le-re,be=me-Y,Se=ke-le,ee=Ee-me;for(nt=0;nt<41;nt++)X=(se=(ut=I+(Pe=nt/40)*ze)+Pe*((Ze=re+Pe*lt)-ut))+Pe*(Ze+Pe*(le+Pe*Se-Ze)-se),ne=(qe=(he=H+Pe*We)+Pe*((F=Y+Pe*be)-he))+Pe*(F+Pe*(me+Pe*ee-F)-qe),nt==0?(je=X,J=ne,$e=X,Ve=ne):(je=Math.min(je,X),J=Math.min(J,ne),$e=Math.max($e,X),Ve=Math.max(Ve,ne));return new o(Math.round(je),Math.round(J),Math.round($e-je),Math.round(Ve-J))},ve=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var I,H,re=(I=this.ctx.lineDash,H=this.ctx.lineDashOffset,JSON.stringify({lineDash:I,lineDashOffset:H}));this.prevLineDash!==re&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=re)}}})(tr.API),function(t){var e=function(A){var o,l,c,d,p,g,h,b,w,j;for(l=[],c=0,d=(A+=o="\0\0\0\0".slice(A.length%4||4)).length;d>c;c+=4)(p=(A.charCodeAt(c)<<24)+(A.charCodeAt(c+1)<<16)+(A.charCodeAt(c+2)<<8)+A.charCodeAt(c+3))!==0?(g=(p=((p=((p=((p=(p-(j=p%85))/85)-(w=p%85))/85)-(b=p%85))/85)-(h=p%85))/85)%85,l.push(g+33,h+33,b+33,w+33,j+33)):l.push(122);return function(x,y){for(var B=y;B>0;B--)x.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(A){var o,l,c,d,p,g=String,h="length",b=255,w="charCodeAt",j="slice",x="replace";for(A[j](-2),A=A[j](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),c=[],d=0,p=(A+=o="uuuuu"[j](A[h]%5||5))[h];p>d;d+=5)l=52200625*(A[w](d)-33)+614125*(A[w](d+1)-33)+7225*(A[w](d+2)-33)+85*(A[w](d+3)-33)+(A[w](d+4)-33),c.push(b&l>>24,b&l>>16,b&l>>8,b&l);return function(y,B){for(var E=B;E>0;E--)y.pop()}(c,o[h]),g.fromCharCode.apply(g,c)},n=function(A){return A.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},s=function(A){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((A=A.replace(/\s/g,"")).indexOf(">")!==-1&&(A=A.substr(0,A.indexOf(">"))),A.length%2&&(A+="0"),o.test(A)===!1)return"";for(var l="",c=0;c<A.length;c+=2)l+=String.fromCharCode("0x"+(A[c]+A[c+1]));return l},a=function(A){for(var o=new Uint8Array(A.length),l=A.length;l--;)o[l]=A.charCodeAt(l);return(o=bx(o)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};t.processDataByFilters=function(A,o){var l=0,c=A||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=s(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=n(c),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(tr.API),function(t){t.loadFile=function(e,r,n){return function(s,a,A){a=a!==!1,A=typeof A=="function"?A:function(){};var o=void 0;try{o=function(l,c,d){var p=new XMLHttpRequest,g=0,h=function(b){var w=b.length,j=[],x=String.fromCharCode;for(g=0;g<w;g+=1)j.push(x(255&b.charCodeAt(g)));return j.join("")};if(p.open("GET",l,!c),p.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(p.onload=function(){p.status===200?d(h(this.responseText)):d(void 0)}),p.send(null),c&&p.status===200)return h(p.responseText)}(s,a,A)}catch{}return o}(e,r,n)},t.allowFsRead=void 0,t.loadImageFile=t.loadFile}(tr.API),function(t){function e(){return(cr.html2canvas?Promise.resolve(cr.html2canvas):Cg(()=>Promise.resolve().then(()=>yQ),void 0)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(cr.DOMPurify?Promise.resolve(cr.DOMPurify):Cg(()=>import("./purify.es-1770213214020.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=Gr(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},s=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},a=function o(l,c){for(var d=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),p=l.firstChild;p;p=p.nextSibling)c!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||d.appendChild(o(p,c));return l.nodeType===1&&(l.nodeName==="CANVAS"?(d.width=l.width,d.height=l.height,d.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(d.value=l.value),d.addEventListener("load",function(){d.scrollTop=l.scrollTop,d.scrollLeft=l.scrollLeft},!0)),d},A=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return(d=d.setProgress(1,o,1,[o])).set(l)};(A.prototype=Object.create(Promise.prototype)).constructor=A,A.convert=function(o,l){return o.__proto__=l||A.prototype,o},A.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},A.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o),l){case"string":return this.then(r).then(function(c){return this.set({src:s("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},A.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},A.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},A.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},A.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,g=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete g.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var h=0;h<d.length;++h){var b=d[h],w=b.src.find(function(j){return j.format==="truetype"});w&&c.addFont(w.url,b.ref.name,b.ref.style)}return g.windowHeight=g.windowHeight||0,g.windowHeight=g.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):g.windowHeight,c.context2d.save(!0),l(this.prop.container,g)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},A.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},A.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},A.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},A.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},A.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},A.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},A.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},A.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in A.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},A.prototype.get=function(o,l){return this.then(function(){var c=o in A.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},A.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},A.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(o=o||tr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},A.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},A.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},A.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(d,p){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(g){return c.updateProgress(null,d),g}).then(d,p).then(function(g){return c.updateProgress(1),g})})},A.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then;var d=this;o&&(o=o.bind(d)),l&&(l=l.bind(d));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:A.convert(Object.assign({},d),Promise.prototype),g=c.call(p,o,l);return A.convert(g,d.__proto__)},A.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},A.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},A.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return A.convert(l,this)},A.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},A.prototype.error=function(o){return this.then(function(){throw new Error(o)})},A.prototype.using=A.prototype.set,A.prototype.saveAs=A.prototype.save,A.prototype.export=A.prototype.output,A.prototype.run=A.prototype.then,tr.getPageSize=function(o,l,c){if(Gr(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var p,g=(""+c).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+l}var b,w=0,j=0;if(h.hasOwnProperty(g))w=h[g][1]/p,j=h[g][0]/p;else try{w=c[1],j=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",j>w&&(b=j,j=w,w=b);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",w>j&&(b=j,j=w,w=b)}return{width:j,height:w,unit:l,k:p,orientation:o}},t.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(Mg):null;var c=new A(l);return l.worker?c:c.from(o).doCallback()}}(tr.API),tr.API.addJS=function(t){var e,r,n=t;return this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(e+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),r=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+n+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){e!==void 0&&r!==void 0&&this.internal.out("/Names <</JavaScript "+e+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),a=0;a<s.length;a++){var A=s[a],o=n.exec(A);if(o!=null){var l=o[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(A)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,d=[];for(a=0;a<c;a++){var p=r.internal.newObject();d.push(p);var g=r.internal.getPageInfo(a+1);r.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var h=r.internal.newObject();for(r.internal.write("<< /Names [ "),a=0;a<d.length;a++)r.internal.write("(page_"+(a+1)+")"+d[a]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+h+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,a){var A={title:s,options:a,children:[]};return n==null&&(n=this.root),n.children.push(A),A},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<n.children.length;a++){var A=n.children[a];this.objStart(A),this.line("/Title "+this.makeString(A.title)),this.line("/Parent "+this.makeRef(n)),a>0&&this.line("/Prev "+this.makeRef(n.children[a-1])),a<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[a+1])),A.children.length>0&&(this.line("/First "+this.makeRef(A.children[0])),this.line("/Last "+this.makeRef(A.children[A.children.length-1])));var o=this.count=this.count_r({count:0},A);if(o>0&&this.line("/Count "+o),A.options&&A.options.pageNumber){var l=r.internal.getPageInfo(A.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var c=0;c<n.children.length;c++)this.renderItems(n.children[c])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var a=0;a<s.children.length;a++)n.count++,this.count_r(n,s.children[a]);return n.count}}])}(tr.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,s,a,A,o){var l,c=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=A||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,l=function(p){for(var g,h=256*p.charCodeAt(4)+p.charCodeAt(5),b=p.length,w={width:0,height:0,numcomponents:1},j=4;j<b;j+=2){if(j+=h,e.indexOf(p.charCodeAt(j+1))!==-1){g=256*p.charCodeAt(j+5)+p.charCodeAt(j+6),w={width:256*p.charCodeAt(j+7)+p.charCodeAt(j+8),height:g,numcomponents:p.charCodeAt(j+9)};break}h=256*p.charCodeAt(j+2)+p.charCodeAt(j+3)}return w}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),l.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:c,index:n,alias:s}}return d}}(tr.API),tr.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var s,a=FL(t,{checkCrc:!0}),A=a.width,o=a.height,l=a.channels,c=a.palette,d=a.depth;s=c&&l===1?function(G){for(var N=G.width,$=G.height,k=G.data,_=G.palette,z=G.depth,O=!1,te=[],ue=[],fe=void 0,ie=!1,de=0,ge=0;ge<_.length;ge++){var ve=Oy(_[ge],4),I=ve[0],H=ve[1],re=ve[2],Y=ve[3];te.push(I,H,re),Y!=null&&(Y===0?(de++,ue.length<1&&ue.push(ge)):Y<255&&(ie=!0))}if(ie||de>1){O=!0,ue=void 0;var le=N*$;fe=new Uint8Array(le);for(var me=new DataView(k.buffer),ke=0;ke<le;ke++){var Ee=Kg(me,ke,z),Pe=Oy(_[Ee],4)[3];fe[ke]=Pe}}else de===0&&(ue=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:O?8:void 0,colorBytes:k,alphaBytes:fe,needSMask:O,palette:te,mask:ue}}(a):l===2||l===4?function(G){for(var N=G.data,$=G.width,k=G.height,_=G.channels,z=G.depth,O=_===2?"DeviceGray":"DeviceRGB",te=_-1,ue=$*k,fe=te,ie=ue*fe,de=1*ue,ge=Math.ceil(ie*z/8),ve=Math.ceil(de*z/8),I=new Uint8Array(ge),H=new Uint8Array(ve),re=new DataView(N.buffer),Y=new DataView(I.buffer),le=new DataView(H.buffer),me=!1,ke=0;ke<ue;ke++){for(var Ee=ke*_,Pe=0;Pe<fe;Pe++)H2(Y,Kg(re,Ee+Pe,z),ke*fe+Pe,z);var nt=Kg(re,Ee+fe,z);nt<(1<<z)-1&&(me=!0),H2(le,nt,1*ke,z)}return{colorSpace:O,colorsPerPixel:te,sMaskBitsPerComponent:me?z:void 0,colorBytes:I,alphaBytes:H,needSMask:me}}(a):function(G){var N=G.data,$=G.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:$,colorsPerPixel:$==="DeviceGray"?1:3,colorBytes:N instanceof Uint16Array?function(k){for(var _=k.length,z=new Uint8Array(2*_),O=new DataView(z.buffer,z.byteOffset,z.byteLength),te=0;te<_;te++)O.setUint16(2*te,k[te],!1);return z}(N):N,needSMask:!1}}(a);var p,g,h,b=s,w=b.colorSpace,j=b.colorsPerPixel,x=b.sMaskBitsPerComponent,y=b.colorBytes,B=b.alphaBytes,E=b.needSMask,L=b.palette,U=b.mask,M=null;return n!==tr.API.image_compression.NONE&&typeof bx=="function"?(M=function(G){var N;switch(G){case tr.API.image_compression.FAST:N=11;break;case tr.API.image_compression.MEDIUM:N=13;break;case tr.API.image_compression.SLOW:N=14;break;default:N=12}return N}(n),p=this.decode.FLATE_DECODE,g="/Predictor ".concat(M," /Colors ").concat(j," /BitsPerComponent ").concat(d," /Columns ").concat(A),t=L2(y,Math.ceil(A*j*d/8),j,d,n),E&&(h=L2(B,Math.ceil(A*x/8),1,x,n))):(p=void 0,g=void 0,t=y,E&&(h=B)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:r,data:t,index:e,filter:p,decodeParameters:g,transparency:U,palette:L,sMask:h,predictor:M,width:A,height:o,bitsPerComponent:d,sMaskBitsPerComponent:x,colorSpace:w}}},function(t){t.processGIF89A=function(e,r,n,s){var a=new JL(e),A=a.width,o=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:A,height:o},d=new Gg(100).encode(c,100);return t.processJPEG.call(this,d,r,n,s)},t.processGIF87A=t.processGIF89A}(tr.API),Na.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:n,blue:r,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Na.prototype.parseBGR=function(){this.pos=this.offset;var t="bit"+this.bitPP,e=this.width*this.height*4;if(e>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");this.data=new Uint8Array(e);try{this[t]()}catch(r){Xr.log("bit decode error:"+r)}},Na.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var a=this.datav.getUint8(this.pos++,!0),A=n*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var l=this.palette[a>>7-o&1];this.data[A+4*o]=l.blue,this.data[A+4*o+1]=l.green,this.data[A+4*o+2]=l.red,this.data[A+4*o+3]=255}r!==0&&(this.pos+=4-r)}},Na.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<t;s++){var a=this.datav.getUint8(this.pos++,!0),A=n*this.width*4+2*s*4,o=a>>4,l=15&a,c=this.palette[o];if(this.data[A]=c.blue,this.data[A+1]=c.green,this.data[A+2]=c.red,this.data[A+3]=255,2*s+1>=this.width)break;c=this.palette[l],this.data[A+4]=c.blue,this.data[A+4+1]=c.green,this.data[A+4+2]=c.red,this.data[A+4+3]=255}e!==0&&(this.pos+=4-e)}},Na.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+4*n;if(s<this.palette.length){var A=this.palette[s];this.data[a]=A.red,this.data[a+1]=A.green,this.data[a+2]=A.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}t!==0&&(this.pos+=4-t)}},Na.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var A=(a&e)/e*255|0,o=(a>>5&e)/e*255|0,l=(a>>10&e)/e*255|0,c=a>>15?255:0,d=n*this.width*4+4*s;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=A,this.data[d+3]=c}this.pos+=t}},Na.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var A=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(A&e)/e*255|0,l=(A>>5&r)/r*255|0,c=(A>>11)/e*255|0,d=s*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=t}},Na.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),A=e*this.width*4+4*r;this.data[A]=a,this.data[A+1]=s,this.data[A+2]=n,this.data[A+3]=255}this.pos+=this.width%4}},Na.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),A=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=a,this.data[o+1]=s,this.data[o+2]=n,this.data[o+3]=A}},Na.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,s){var a=new Na(e,!1),A=a.width,o=a.height,l={data:a.getData(),width:A,height:o},c=new Gg(100).encode(l,100);return t.processJPEG.call(this,c,r,n,s)}}(tr.API),$2.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,s){var a=new $2(e),A=a.width,o=a.height,l={data:a.getData(),width:A,height:o},c=new Gg(100).encode(l,100);return t.processJPEG.call(this,c,r,n,s)}}(tr.API),tr.API.processRGBA=function(t,e,r){for(var n=t.data,s=n.length,a=new Uint8Array(s/4*3),A=new Uint8Array(s/4),o=0,l=0,c=0;c<s;c+=4){var d=n[c],p=n[c+1],g=n[c+2],h=n[c+3];a[o++]=d,a[o++]=p,a[o++]=g,A[l++]=h}var b=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(A),data:b,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},tr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Sc=tr.API,bf=Sc.getCharWidthsArray=function(t,e){var r,n,s=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),A=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:s.metadata.Unicode.widths,l=o.fof?o.fof:1,c=e.kerning?e.kerning:s.metadata.Unicode.kerning,d=c.fof?c.fof:1,p=e.doKerning!==!1,g=0,h=t.length,b=0,w=o[0]||l,j=[];for(r=0;r<h;r++)n=t.charCodeAt(r),typeof s.metadata.widthOfString=="function"?j.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+A*(1e3/a)||0)/1e3):(g=p&&Gr(c[n])==="object"&&!isNaN(parseInt(c[n][b],10))?c[n][b]/d:0,j.push((o[n]||w)/l+g)),b=n;return j},I2=Sc.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return Sc.processArabic&&(t=Sc.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,s)/r:bf.apply(this,arguments).reduce(function(a,A){return a+A},0)},Q2=function(t,e,r,n){for(var s=[],a=0,A=t.length,o=0;a!==A&&o+e[a]<r;)o+=e[a],a++;s.push(t.slice(0,a));var l=a;for(o=0;a!==A;)o+e[a]>n&&(s.push(t.slice(l,a)),o=0,l=a),o+=e[a],a++;return l!==a&&s.push(t.slice(l,a)),s},T2=function(t,e,r){r||(r={});var n,s,a,A,o,l,c,d=[],p=[d],g=r.textIndent||0,h=0,b=0,w=t.split(" "),j=bf.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?w[0].length+2:r.lineIndent||0){var x=Array(l).join(" "),y=[];w.map(function(E){(E=E.split(/\s*\n/)).length>1?y=y.concat(E.map(function(L,U){return(U&&L.length?`
`:"")+L})):y.push(E[0])}),w=y,l=I2.apply(this,[x,r])}for(a=0,A=w.length;a<A;a++){var B=0;if(n=w[a],l&&n[0]==`
`&&(n=n.substr(1),B=1),g+h+(b=(s=bf.apply(this,[n,r])).reduce(function(E,L){return E+L},0))>e||B){if(b>e){for(o=Q2.apply(this,[n,s,e-(g+h),e]),d.push(o.shift()),d=[o.pop()];o.length;)p.push([o.shift()]);b=s.slice(n.length-(d[0]?d[0].length:0)).reduce(function(E,L){return E+L},0)}else d=[n];p.push(d),g=b+l,h=j}else d.push(n),g+=h+b,h=j}return c=l?function(E,L){return(L?x:"")+E.join(" ")}:function(E){return E.join(" ")},p.map(c)},Sc.splitTextToSize=function(t,e,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),a=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var p=this.internal.getFont(d.fontName,d.fontStyle),g="Unicode";return p.metadata[g]?{widths:p.metadata[g].widths||{0:1},kerning:p.metadata[g].kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var A=1*this.internal.scaleFactor*e/s;a.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,a.lineIndent=r.lineIndent;var o,l,c=[];for(o=0,l=n.length;o<l;o++)c=c.concat(T2.apply(this,[n[o],A,a]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},s={},a=0;a<16;a++)n[r[a]]=e[a],s[e[a]]=r[a];var A=function(g){return"0x"+parseInt(g,10).toString(16)},o=t.__fontmetrics__.compress=function(g){var h,b,w,j,x=["{"];for(var y in g){if(h=g[y],isNaN(parseInt(y,10))?b="'"+y+"'":(y=parseInt(y,10),b=(b=A(y).slice(2)).slice(0,-1)+s[b.slice(-1)]),typeof h=="number")h<0?(w=A(h).slice(3),j="-"):(w=A(h).slice(2),j=""),w=j+w.slice(0,-1)+s[w.slice(-1)];else{if(Gr(h)!=="object")throw new Error("Don't know what to do with value type "+Gr(h)+".");w=o(h)}x.push(b+w)}return x.push("}"),x.join("")},l=t.__fontmetrics__.uncompress=function(g){if(typeof g!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,b,w,j,x={},y=1,B=x,E=[],L="",U="",M=g.length-1,G=1;G<M;G+=1)(j=g[G])=="'"?h?(w=h.join(""),h=void 0):h=[]:h?h.push(j):j=="{"?(E.push([B,w]),B={},w=void 0):j=="}"?((b=E.pop())[0][b[1]]=B,w=void 0,B=b[0]):j=="-"?y=-1:w===void 0?n.hasOwnProperty(j)?(L+=n[j],w=parseInt(L,16)*y,y=1,L=""):L+=j:n.hasOwnProperty(j)?(U+=n[j],B[w]=parseInt(U,16)*y,y=1,w=void 0,U=""):U+=j;return x},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},p={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(g){var h=g.font,b=p.Unicode[h.postScriptName];b&&(h.metadata.Unicode={},h.metadata.Unicode.widths=b.widths,h.metadata.Unicode.kerning=b.kerning);var w=d.Unicode[h.postScriptName];w&&(h.metadata.Unicode.encoding=w,h.encoding=w.codePages[0])}])}(tr.API),function(t){var e=function(r){for(var n=r.length,s=new Uint8Array(n),a=0;a<n;a++)s[a]=r.charCodeAt(a);return s};t.API.events.push(["addFont",function(r){var n=void 0,s=r.font,a=r.instance;if(!s.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=a.existsFileInVFS(s.postScriptName)===!1?a.loadFile(s.postScriptName):a.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(A,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Rf(o)),A.metadata=t.API.TTFFont.open(o),A.metadata.Unicode=A.metadata.Unicode||{encoding:{},kerning:{},widths:[]},A.metadata.glyIdsUsed=[0]})(s,n)}}])}(tr),tr.API.addSvgAsImage=function(t,e,r,n,s,a,A,o){if(isNaN(e)||isNaN(r))throw Xr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(s))throw Xr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=n,l.height=s;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return(cr.canvg?Promise.resolve(cr.canvg):Cg(()=>import("./index.es-1770213214020.js"),[])).catch(function(g){return Promise.reject(new Error("Could not load canvg: "+g))}).then(function(g){return g.default?g.default:g}).then(function(g){return g.fromString(c,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(d)}).then(function(){p.addImage(l.toDataURL("image/jpeg",1),e,r,n,s,A,o)})},tr.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(e,r);return this},tr.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,s,a,A={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(A),l=[],c=0,d=0,p=0;function g(b,w){var j,x=!1;for(j=0;j<b.length;j+=1)b[j]===w&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(A)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var h=o.length;for(p=0;p<h;p+=1)r[o[p]].value=r[o[p]].defaultValue,r[o[p]].explicitSet=!1}if(Gr(t)==="object"){for(s in t)if(a=t[s],g(o,s)&&a!==void 0){if(r[s].type==="boolean"&&typeof a=="boolean")r[s].value=a;else if(r[s].type==="name"&&g(r[s].valueSet,a))r[s].value=a;else if(r[s].type==="integer"&&Number.isInteger(a))r[s].value=a;else if(r[s].type==="array"){for(c=0;c<a.length;c+=1)if(n=!0,a[c].length===1&&typeof a[c][0]=="number")l.push(String(a[c]-1));else if(a[c].length>1){for(d=0;d<a[c].length;d+=1)typeof a[c][d]!="number"&&(n=!1);n===!0&&l.push([a[c][0]-1,a[c][1]-1].join(" "))}r[s].value="["+l.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,w=[];for(b in r)r[b].explicitSet===!0&&(r[b].type==="name"?w.push("/"+b+" /"+r[b].value):w.push("/"+b+" "+r[b].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},tr.API.addMetadata=function(t,e){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:t,namespaceUri:e??"http://jspdf.default.namespaceuri/",rawXml:typeof e=="boolean"&&e},this.internal.events.subscribe("putCatalog",XL),this.internal.events.subscribe("postPutResources",YL)),this},function(t){var e=t.API,r=e.pdfEscape16=function(a,A){for(var o,l=A.metadata.Unicode.widths,c=["","0","00","000","0000"],d=[""],p=0,g=a.length;p<g;++p){if(o=A.metadata.characterToGlyph(a.charCodeAt(p)),A.metadata.glyIdsUsed.push(o),A.metadata.toUnicode[o]=a.charCodeAt(p),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(A.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(c[4-o.length],o)}return d.join("")},n=function(a){var A,o,l,c,d,p,g;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,g=(o=Object.keys(a).sort(function(h,b){return h-b})).length;p<g;p++)A=o[p],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),a[A]!==void 0&&a[A]!==null&&typeof a[A].toString=="function"&&(c=("0000"+a[A].toString(16)).slice(-4),A=("0000"+(+A).toString(16)).slice(-4),l.push("<"+A+"><"+c+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(A){var o=A.font,l=A.out,c=A.newObject,d=A.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var p=o.metadata.Unicode.widths,g=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),h="",b=0;b<g.length;b++)h+=String.fromCharCode(g[b]);var w=c();d({data:h,addLength1:!0,objectId:w}),l("endobj");var j=c();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:j}),l("endobj");var x=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Ic(o.fontName)),l("/FontFile2 "+w+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var y=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Ic(o.fontName)),l("/FontDescriptor "+x+" 0 R"),l("/W "+t.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+j+" 0 R"),l("/BaseFont /"+Ic(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+y+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(A){var o=A.font,l=A.out,c=A.newObject,d=A.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var p=o.metadata.rawData,g="",h=0;h<p.length;h++)g+=String.fromCharCode(p[h]);var b=c();d({data:g,addLength1:!0,objectId:b}),l("endobj");var w=c();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:w}),l("endobj");var j=c();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+b+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+Ic(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=c();for(var x=0;x<o.metadata.hmtx.widths.length;x++)o.metadata.hmtx.widths[x]=parseInt(o.metadata.hmtx.widths[x]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+Ic(o.fontName)+"/FontDescriptor "+j+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]);var s=function(a){var A,o=a.text||"",l=a.x,c=a.y,d=a.options||{},p=a.mutex||{},g=p.pdfEscape,h=p.activeFontKey,b=p.fonts,w=h,j="",x=0,y="",B=b[w].encoding;if(b[w].encoding!=="Identity-H")return{text:o,x:l,y:c,options:d,mutex:p};for(y=o,w=h,Array.isArray(o)&&(y=o[0]),x=0;x<y.length;x+=1)b[w].metadata.hasOwnProperty("cmap")&&(A=b[w].metadata.cmap.unicode.codeMap[y[x].charCodeAt(0)]),A||y[x].charCodeAt(0)<256&&b[w].metadata.hasOwnProperty("Unicode")?j+=y[x]:j+="";var E="";return parseInt(w.slice(1))<14||B==="WinAnsiEncoding"?E=g(j,w).split("").map(function(L){return L.charCodeAt(0).toString(16)}).join(""):B==="Identity-H"&&(E=r(j,b[w])),p.isHex=!0,{text:E,x:l,y:c,options:d,mutex:p}};e.events.push(["postProcessText",function(a){var A=a.text||"",o=[],l={text:A,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(A)){var c=0;for(c=0;c<A.length;c+=1)Array.isArray(A[c])&&A[c].length===3?o.push([s(Object.assign({},l,{text:A[c][0]})).text,A[c][1],A[c][2]]):o.push(s(Object.assign({},l,{text:A[c]})).text);a.text=o}else a.text=s(Object.assign({},l,{text:A})).text}])}(tr),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(tr.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var s,a,A,o,l,c,d,p=e,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},j=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,B=0;this.__bidiEngine__={};var E=function(k){var _=k.charCodeAt(),z=_>>8,O=w[z];return O!==void 0?p[256*O+(255&_)]:z===252||z===253?"AL":x.test(z)?"L":z===8?"R":"N"},L=function(k){for(var _,z=0;z<k.length;z++){if((_=E(k.charAt(z)))==="L")return!1;if(_==="R")return!0}return!1},U=function(k,_,z,O){var te,ue,fe,ie,de=_[O];switch(de){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"N":case"AN":break;case"EN":y&&(de="AN");break;case"AL":y=!0,de="R";break;case"WS":case"BN":de="N";break;case"CS":O<1||O+1>=_.length||(te=z[O-1])!=="EN"&&te!=="AN"||(ue=_[O+1])!=="EN"&&ue!=="AN"?de="N":y&&(ue="AN"),de=ue===te?ue:"N";break;case"ES":de=(te=O>0?z[O-1]:"B")==="EN"&&O+1<_.length&&_[O+1]==="EN"?"EN":"N";break;case"ET":if(O>0&&z[O-1]==="EN"){de="EN";break}if(y){de="N";break}for(fe=O+1,ie=_.length;fe<ie&&_[fe]==="ET";)fe++;de=fe<ie&&_[fe]==="EN"?"EN":"N";break;case"NSM":if(A&&!o){for(ie=_.length,fe=O+1;fe<ie&&_[fe]==="NSM";)fe++;if(fe<ie){var ge=k[O],ve=ge>=1425&&ge<=2303||ge===64286;if(te=_[fe],ve&&(te==="R"||te==="AL")){de="R";break}}}de=O<1||(te=_[O-1])==="B"?"N":z[O-1];break;case"B":y=!1,s=!0,de=B;break;case"S":a=!0,de="N"}return de},M=function(k,_,z){var O=k.split("");return z&&G(O,z,{hiLevel:B}),O.reverse(),_&&_.reverse(),O.join("")},G=function(k,_,z){var O,te,ue,fe,ie,de=-1,ge=k.length,ve=0,I=[],H=B?h:g,re=[];for(y=!1,s=!1,a=!1,te=0;te<ge;te++)re[te]=E(k[te]);for(ue=0;ue<ge;ue++){if(ie=ve,I[ue]=U(k,re,I,ue),O=240&(ve=H[ie][b[I[ue]]]),ve&=15,_[ue]=fe=H[ve][5],O>0)if(O===16){for(te=de;te<ue;te++)_[te]=1;de=-1}else de=-1;if(H[ve][6])de===-1&&(de=ue);else if(de>-1){for(te=de;te<ue;te++)_[te]=fe;de=-1}re[ue]==="B"&&(_[ue]=0),z.hiLevel|=fe}a&&function(Y,le,me){for(var ke=0;ke<me;ke++)if(Y[ke]==="S"){le[ke]=B;for(var Ee=ke-1;Ee>=0&&Y[Ee]==="WS";Ee--)le[Ee]=B}}(re,_,ge)},N=function(k,_,z,O,te){if(!(te.hiLevel<k)){if(k===1&&B===1&&!s)return _.reverse(),void(z&&z.reverse());for(var ue,fe,ie,de,ge=_.length,ve=0;ve<ge;){if(O[ve]>=k){for(ie=ve+1;ie<ge&&O[ie]>=k;)ie++;for(de=ve,fe=ie-1;de<fe;de++,fe--)ue=_[de],_[de]=_[fe],_[fe]=ue,z&&(ue=z[de],z[de]=z[fe],z[fe]=ue);ve=ie}ve++}}},$=function(k,_,z){var O=k.split(""),te={hiLevel:B};return z||(z=[]),G(O,z,te),function(ue,fe,ie){if(ie.hiLevel!==0&&d)for(var de,ge=0;ge<ue.length;ge++)fe[ge]===1&&(de=j.indexOf(ue[ge]))>=0&&(ue[ge]=j[de+1])}(O,z,te),N(2,O,_,z,te),N(1,O,_,z,te),O.join("")};return this.__bidiEngine__.doBidiReorder=function(k,_,z){if(function(te,ue){if(ue)for(var fe=0;fe<te.length;fe++)ue[fe]=fe;o===void 0&&(o=L(te)),c===void 0&&(c=L(te))}(k,_),A||!l||c)if(A&&l&&o^c)B=o?1:0,k=M(k,_,z);else if(!A&&l&&c)B=o?1:0,k=$(k,_,z),k=M(k,_);else if(!A||o||l||c){if(A&&!l&&o^c)k=M(k,_),o?(B=0,k=$(k,_,z)):(B=1,k=$(k,_,z),k=M(k,_));else if(A&&o&&!l&&c)B=1,k=$(k,_,z),k=M(k,_);else if(!A&&!l&&o^c){var O=d;o?(B=1,k=$(k,_,z),B=0,d=!1,k=$(k,_,z),d=O):(B=0,k=$(k,_,z),k=M(k,_),B=1,d=!1,k=$(k,_,z),d=O,k=M(k,_))}}else B=0,k=$(k,_,z);else B=o?1:0,k=$(k,_,z);return k},this.__bidiEngine__.setOptions=function(k){k&&(A=k.isInputVisual,l=k.isOutputVisual,o=k.isInputRtl,c=k.isOutputRtl,d=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var s=n.text;n.x,n.y;var a=n.options||{};n.mutex,a.lang;var A=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,r.setOptions(a),Object.prototype.toString.call(s)==="[object Array]"){var o=0;for(A=[],o=0;o<s.length;o+=1)Object.prototype.toString.call(s[o])==="[object Array]"?A.push([r.doBidiReorder(s[o][0]),s[o][1],s[o][2]]):A.push([r.doBidiReorder(s[o])]);n.text=A}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(tr),tr.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new Xo(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new h6(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new ZL(this.contents),this.head=new t6(this),this.name=new a6(this),this.cmap=new fC(this),this.toUnicode={},this.hhea=new r6(this),this.maxp=new A6(this),this.hmtx=new o6(this),this.post=new s6(this),this.os2=new n6(this),this.loca=new d6(this),this.glyf=new l6(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,s,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var A,o,l,c;for(c=[],A=0,o=(l=this.bbox).length;A<o;A++)e=l[A],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),32768&(r=s>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var s,a,A,o;for(A=0,a=0,o=(e=""+e).length;0<=o?a<o:a>o;a=0<=o?++a:--a)s=e.charCodeAt(a),A+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return A*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var Da,Xo=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,s;for(s=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(e.charCodeAt(r)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,s,a,A,o,l;return e=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),a=this.readByte(),A=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^a)+65536*(255^A)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*s+16777216*a+65536*A+256*o+l},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,s,a;for(a=[],n=0,s=e.length;n<s;n++)r=e[n],a.push(this.writeByte(r));return a},t}(),ZL=function(){var t;function e(r){var n,s,a;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,a=this.tableCount;0<=a?s<a:s>a;s=0<=a?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,s,a,A,o,l,c,d,p,g,h,b,w;for(w in h=Object.keys(r).length,l=Math.log(2),p=16*Math.floor(Math.log(h)/l),A=Math.floor(p/l),d=16*h-p,(s=new Xo).writeInt(this.scalarType),s.writeShort(h),s.writeShort(p),s.writeShort(A),s.writeShort(d),a=16*h,c=s.pos+a,o=null,b=[],r)for(g=r[w],s.writeString(w),s.writeInt(t(g)),s.writeInt(c),s.writeInt(g.length),b=b.concat(g),w==="head"&&(o=c),c+=g.length;c%4;)b.push(0),c++;return s.write(b),n=2981146554-t(s.data),s.pos=o+8,s.writeUInt32(n),s.data},t=function(r){var n,s,a,A;for(r=pC.call(r);r.length%4;)r.push(0);for(a=new Xo(r),s=0,n=0,A=r.length;n<A;n=n+=4)s+=a.readUInt32();return 4294967295&s},e}(),e6={}.hasOwnProperty,mA=function(t,e){for(var r in e)e6.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Da=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var t6=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,Da),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new Xo).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),K2=function(){function t(e,r){var n,s,a,A,o,l,c,d,p,g,h,b,w,j,x,y,B;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(h=e.readUInt16(),g=h/2,e.pos+=6,a=function(){var E,L;for(L=[],l=E=0;0<=g?E<g:E>g;l=0<=g?++E:--E)L.push(e.readUInt16());return L}(),e.pos+=2,w=function(){var E,L;for(L=[],l=E=0;0<=g?E<g:E>g;l=0<=g?++E:--E)L.push(e.readUInt16());return L}(),c=function(){var E,L;for(L=[],l=E=0;0<=g?E<g:E>g;l=0<=g?++E:--E)L.push(e.readUInt16());return L}(),d=function(){var E,L;for(L=[],l=E=0;0<=g?E<g:E>g;l=0<=g?++E:--E)L.push(e.readUInt16());return L}(),s=(this.length-e.pos+this.offset)/2,o=function(){var E,L;for(L=[],l=E=0;0<=s?E<s:E>s;l=0<=s?++E:--E)L.push(e.readUInt16());return L}(),l=x=0,B=a.length;x<B;l=++x)for(j=a[l],n=y=b=w[l];b<=j?y<=j:y>=j;n=b<=j?++y:--y)d[l]===0?A=n+c[l]:(A=o[d[l]/2+(n-b)-(g-l)]||0)!==0&&(A+=c[l]),this.codeMap[n]=65535&A}e.pos=p}return t.encode=function(e,r){var n,s,a,A,o,l,c,d,p,g,h,b,w,j,x,y,B,E,L,U,M,G,N,$,k,_,z,O,te,ue,fe,ie,de,ge,ve,I,H,re,Y,le,me,ke,Ee,Pe,nt,ut;switch(O=new Xo,A=Object.keys(e).sort(function(he,Ze){return he-Ze}),r){case"macroman":for(w=0,j=function(){var he=[];for(b=0;b<256;++b)he.push(0);return he}(),y={0:0},a={},te=0,de=A.length;te<de;te++)y[Ee=e[s=A[te]]]==null&&(y[Ee]=++w),a[s]={old:e[s],new:y[e[s]]},j[s]=y[e[s]];return O.writeUInt16(1),O.writeUInt16(0),O.writeUInt32(12),O.writeUInt16(0),O.writeUInt16(262),O.writeUInt16(0),O.write(j),{charMap:a,subtable:O.data,maxGlyphID:w+1};case"unicode":for(_=[],p=[],B=0,y={},n={},x=c=null,ue=0,ge=A.length;ue<ge;ue++)y[L=e[s=A[ue]]]==null&&(y[L]=++B),n[s]={old:L,new:y[L]},o=y[L]-s,x!=null&&o===c||(x&&p.push(x),_.push(s),c=o),x=s;for(x&&p.push(x),p.push(65535),_.push(65535),$=2*(N=_.length),G=2*Math.pow(Math.log(N)/Math.LN2,2),g=Math.log(G/2)/Math.LN2,M=2*N-G,l=[],U=[],h=[],b=fe=0,ve=_.length;fe<ve;b=++fe){if(k=_[b],d=p[b],k===65535){l.push(0),U.push(0);break}if(k-(z=n[k].new)>=32768)for(l.push(0),U.push(2*(h.length+N-b)),s=ie=k;k<=d?ie<=d:ie>=d;s=k<=d?++ie:--ie)h.push(n[s].new);else l.push(z-k),U.push(0)}for(O.writeUInt16(3),O.writeUInt16(1),O.writeUInt32(12),O.writeUInt16(4),O.writeUInt16(16+8*N+2*h.length),O.writeUInt16(0),O.writeUInt16($),O.writeUInt16(G),O.writeUInt16(g),O.writeUInt16(M),me=0,I=p.length;me<I;me++)s=p[me],O.writeUInt16(s);for(O.writeUInt16(0),ke=0,H=_.length;ke<H;ke++)s=_[ke],O.writeUInt16(s);for(Pe=0,re=l.length;Pe<re;Pe++)o=l[Pe],O.writeUInt16(o);for(nt=0,Y=U.length;nt<Y;nt++)E=U[nt],O.writeUInt16(E);for(ut=0,le=h.length;ut<le;ut++)w=h[ut],O.writeUInt16(w);return{charMap:n,subtable:O.data,maxGlyphID:B+1}}},t}(),fC=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,Da),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,s;for(e.pos=this.offset,this.version=e.readUInt16(),s=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=s?n<s:n>s;n=0<=s?++n:--n)r=new K2(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,s;return r==null&&(r="macroman"),n=K2.encode(e,r),(s=new Xo).writeUInt16(0),s.writeUInt16(1),n.table=s.data.concat(n.subtable),n},t}(),r6=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,Da),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),n6=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,Da),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),s6=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,Da),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,s;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(n=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],s=[];e.pos<this.offset+this.length;)r=e.readByte(),s.push(this.names.push(e.readString(r)));return s;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var A,o,l;for(l=[],a=A=0,o=this.file.maxp.numGlyphs;0<=o?A<o:A>o;a=0<=o?++A:--A)l.push(e.readUInt32());return l}).call(this)}},t}(),i6=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},a6=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,Da),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,s,a,A,o,l,c,d,p,g;for(e.pos=this.offset,e.readShort(),r=e.readShort(),o=e.readShort(),n=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(l={},a=d=0,p=n.length;d<p;a=++d)s=n[a],e.pos=s.offset,c=e.readString(s.length),A=new i6(c,s),l[g=s.nameID]==null&&(l[g]=[]),l[s.nameID].push(A);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},t}(),A6=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,Da),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),o6=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,Da),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,s,a,A,o,l;for(e.pos=this.offset,this.metrics=[],r=0,o=this.file.hhea.numberOfMetrics;0<=o?r<o:r>o;r=0<=o?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,d;for(d=[],r=c=0;0<=s?c<s:c>s;r=0<=s?++c:--c)d.push(e.readInt16());return d}(),this.widths=(function(){var c,d,p,g;for(g=[],c=0,d=(p=this.metrics).length;c<d;c++)a=p[c],g.push(a.advance);return g}).call(this),n=this.widths[this.widths.length-1],l=[],r=A=0;0<=s?A<s:A>s;r=0<=s?++A:--A)l.push(this.widths.push(n));return l},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),pC=[].slice,l6=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,Da),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,s,a,A,o,l,c,d,p;return e in this.cache?this.cache[e]:(a=this.file.loca,r=this.file.contents,n=a.indexOf(e),(s=a.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,A=(o=new Xo(r.read(s))).readShort(),c=o.readShort(),p=o.readShort(),l=o.readShort(),d=o.readShort(),this.cache[e]=A===-1?new u6(o,c,p,l,d):new c6(o,A,c,p,l,d),this.cache[e]))},t.prototype.encode=function(e,r,n){var s,a,A,o,l;for(A=[],a=[],o=0,l=r.length;o<l;o++)s=e[r[o]],a.push(A.length),s&&(A=A.concat(s.encode(n)));return a.push(A.length),{table:A,offsets:a}},t}(),c6=function(){function t(e,r,n,s,a,A){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=a,this.yMax=A,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),u6=function(){function t(e,r,n,s,a){var A,o;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],A=this.raw;o=A.readShort(),this.glyphOffsets.push(A.pos),this.glyphIDs.push(A.readUInt16()),32&o;)A.pos+=1&o?4:2,128&o?A.pos+=8:64&o?A.pos+=4:8&o&&(A.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new Xo(pC.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),d6=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return mA(t,Da),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,a;for(a=[],n=0,s=this.length;n<s;n+=2)a.push(2*e.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],n=0,s=this.length;n<s;n+=4)a.push(e.readUInt32());return a}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),s=0,a=0,A=0;A<n.length;++A)if(n[A]=s,a<r.length&&r[a]==A){++a,n[A]=s;var o=this.offsets[A],l=this.offsets[A+1]-o;l>0&&(s+=l)}for(var c=new Array(4*n.length),d=0;d<n.length;++d)c[4*d+3]=255&n[d],c[4*d+2]=(65280&n[d])>>8,c[4*d+1]=(16711680&n[d])>>16,c[4*d]=(4278190080&n[d])>>24;return c},t}(),h6=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,s,a;for(r in s=this.font.cmap.tables[0].codeMap,e={},a=this.subset)n=a[r],e[r]=s[n];return e},t.prototype.glyphsFor=function(e){var r,n,s,a,A,o,l;for(s={},A=0,o=e.length;A<o;A++)s[a=e[A]]=this.font.glyf.glyphFor(a);for(a in r=[],s)(n=s[a])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(a in l=this.glyphsFor(r))n=l[a],s[a]=n;return s},t.prototype.encode=function(e,r){var n,s,a,A,o,l,c,d,p,g,h,b,w,j,x;for(s in n=fC.encode(this.generateCmap(),"unicode"),A=this.glyphsFor(e),h={0:0},x=n.charMap)h[(l=x[s]).old]=l.new;for(b in g=n.maxGlyphID,A)b in h||(h[b]=g++);return d=function(y){var B,E;for(B in E={},y)E[y[B]]=B;return E}(h),p=Object.keys(d).sort(function(y,B){return y-B}),w=function(){var y,B,E;for(E=[],y=0,B=p.length;y<B;y++)o=p[y],E.push(d[o]);return E}(),a=this.font.glyf.encode(A,w,h),c=this.font.loca.encode(a.offsets,w),j={cmap:this.font.cmap.raw(),glyf:a.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(j["OS/2"]=this.font.os2.raw()),this.font.directory.encode(j)},t}();tr.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,s,a,A;if(Array.isArray(r))return"["+function(){var o,l,c;for(c=[],o=0,l=r.length;o<l;o++)n=r[o],c.push(e.convert(n));return c}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in a=["<<"],r)A=r[s],a.push("/"+s+" "+e.convert(A));return a.push(">>"),a.join(`
`)}return""+r},e}();const f6=(t,e)=>{const[r,n]=V.useState(!1),[s,a]=V.useState(""),A=V.useRef(null),o=V.useRef(t),l=V.useRef(e),c=V.useRef(!1),d=V.useRef(-1),p=V.useRef(null);V.useEffect(()=>{o.current=t,l.current=e},[t,e]);const g=V.useCallback(()=>{p.current&&(clearTimeout(p.current),p.current=null)},[]),h=V.useCallback(()=>{g(),p.current=setTimeout(()=>{l.current&&l.current()},1500)},[g]);V.useEffect(()=>{if(typeof window<"u"){const x=window.SpeechRecognition||window.webkitSpeechRecognition;if(x){const y=new x;y.continuous=!0,y.interimResults=!0,y.lang="ja-JP",y.onresult=B=>{let E="",L="";for(let U=B.resultIndex;U<B.results.length;U++){const M=B.results[U],G=M[0].transcript;M.isFinal?U>d.current&&(E+=G,d.current=U):L=G}E?(o.current(E),a(""),h()):L&&(a(L),g())},y.onerror=B=>{B.error!=="no-speech"&&(console.error("Speech recognition error:",B.error),B.error!=="aborted"&&(n(!1),c.current=!1,g()),a(""))},y.onend=()=>{if(c.current)try{d.current=-1,y.start()}catch{}else n(!1),a(""),d.current=-1},A.current=y}}return()=>{c.current=!1,g(),A.current&&A.current.stop()}},[h,g]);const b=V.useCallback(()=>{if(A.current&&!r){c.current=!0,d.current=-1,a(""),g();try{A.current.start(),n(!0)}catch(x){console.error("Failed to start speech recognition:",x)}}},[r,g]),w=V.useCallback(()=>{c.current=!1,g(),A.current&&A.current.stop(),n(!1),a("")},[g]),j=typeof window<"u"&&(window.SpeechRecognition||window.webkitSpeechRecognition);return{isListening:r,interimText:s,startListening:b,stopListening:w,isSupported:j}},pu=({onTranscript:t,onAutoSend:e,disabled:r=!1,className:n="",size:s="normal"})=>{const{isListening:a,interimText:A,startListening:o,stopListening:l,isSupported:c}=f6(t,e);if(!c)return null;const d={normal:{button:"p-3",icon:22,container:""},large:{button:"p-5",icon:40,container:"ring-4 ring-cyan-500/30"}},p=d[s]||d.normal;return i.jsxs("div",{className:"relative flex flex-col items-center",children:[i.jsx("button",{type:"button",onClick:a?l:o,disabled:r,className:`rounded-full transition-all flex items-center justify-center ${p.button} ${p.container} ${a?"bg-gradient-to-r from-red-500 to-pink-500 text-white animate-pulse shadow-xl shadow-red-500/40":"bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-400 hover:to-blue-500 shadow-lg shadow-cyan-500/30"} ${r?"opacity-50 cursor-not-allowed":""} ${n}`,title:a?" ":" ",children:i.jsxs("svg",{width:p.icon,height:p.icon,viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",children:[i.jsx("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),i.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),i.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),i.jsx("line",{x1:"8",y1:"23",x2:"16",y2:"23"})]})}),a&&A&&i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-4 py-2 bg-slate-800/95 text-slate-200 text-sm rounded-xl whitespace-nowrap max-w-xs truncate shadow-lg",children:[A,"..."]}),a&&i.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm font-medium text-red-400",children:[i.jsxs("span",{className:"relative flex h-3 w-3",children:[i.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),i.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]}),"..."]})]})},_x=[{id:"blue",name:"",bg:"bg-blue-500",bgLight:"bg-blue-500/30",text:"text-blue-300",border:"border-blue-400"},{id:"emerald",name:"",bg:"bg-emerald-500",bgLight:"bg-emerald-500/30",text:"text-emerald-300",border:"border-emerald-400"},{id:"purple",name:"",bg:"bg-purple-500",bgLight:"bg-purple-500/30",text:"text-purple-300",border:"border-purple-400"},{id:"orange",name:"",bg:"bg-orange-500",bgLight:"bg-orange-500/30",text:"text-orange-300",border:"border-orange-400"},{id:"pink",name:"",bg:"bg-pink-500",bgLight:"bg-pink-500/30",text:"text-pink-300",border:"border-pink-400"},{id:"gray",name:"",bg:"bg-slate-400",bgLight:"bg-slate-400/30",text:"text-slate-300",border:"border-slate-400"},{id:"cyan",name:"",bg:"bg-cyan-500",bgLight:"bg-cyan-500/30",text:"text-cyan-300",border:"border-cyan-400"},{id:"red",name:"",bg:"bg-red-500",bgLight:"bg-red-500/30",text:"text-red-300",border:"border-red-400"}],Tn=t=>_x.find(e=>e.id===t)||_x[0],gu=({value:t,onChange:e})=>i.jsx("div",{className:"flex flex-wrap gap-2",children:_x.map(r=>i.jsx("button",{type:"button",onClick:()=>e(r.id),className:`w-7 h-7 rounded-full ${r.bg} transition-all ${t===r.id?"ring-2 ring-white ring-offset-2 ring-offset-slate-800 scale-110":"hover:scale-105"}`,title:r.name},r.id))});function p6({tasks:t,setTasks:e,events:r,setEvents:n,goals:s,transactions:a,addTask:A,updateTask:o,deleteTask:l,addEvent:c,updateEvent:d,deleteEvent:p,addGoal:g,updateGoal:h,deleteGoal:b,addTransaction:w}){const[j,x]=V.useState(new Date),[y,B]=V.useState(null),[E,L]=V.useState(!1),[U,M]=V.useState({title:"",time:"09:00",endTime:"10:00",type:"event",colorId:"emerald",linkedType:"",linkedId:""}),[G,N]=V.useState("week"),[$,k]=V.useState(null),[_,z]=V.useState(!1),[O,te]=V.useState(null),[ue,fe]=V.useState({}),[ie,de]=V.useState(!1),[ge,ve]=V.useState({title:"",amount:"",type:"expense",category:"",date:"",paymentTiming:"immediate",linkedType:"",linkedId:""}),I=["1","2","3","4","5","6","7","8","9","10","11","12"],H=["","","","","","",""],re=new Date;V.useEffect(()=>{(async()=>{try{const Xe=await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${35.6762}&longitude=${139.6503}&daily=weather_code,temperature_2m_max,temperature_2m_min&timezone=Asia/Tokyo&forecast_days=10`)).json();if(Xe.daily){const ye={};Xe.daily.time.forEach((Le,ft)=>{ye[Le]={code:Xe.daily.weather_code[ft],maxTemp:Math.round(Xe.daily.temperature_2m_max[ft]),minTemp:Math.round(Xe.daily.temperature_2m_min[ft])}}),fe(ye)}}catch(we){console.error("Failed to fetch weather:",we)}})()},[]);const Y=ee=>ee===0?"":ee===1||ee===2?"":ee===3?"":ee>=45&&ee<=48?"":ee>=51&&ee<=55||ee>=56&&ee<=57||ee>=61&&ee<=65||ee>=66&&ee<=67?"":ee>=71&&ee<=77?"":ee>=80&&ee<=82?"":ee>=85&&ee<=86?"":ee>=95&&ee<=99?"":"",le=ee=>{const we=new Date(ee),_e=we.getDay(),Je=_e===0?6:_e-1;return we.setDate(we.getDate()-Je),we},me=()=>{const ee=le(j);return Array.from({length:7},(we,_e)=>{const Je=new Date(ee);return Je.setDate(Je.getDate()+_e),Je})},ke=ee=>{const we=(s||[]).map(_e=>({..._e,isGoal:!0}));return[...t,...r,...we].filter(_e=>_e.date===ee)},Ee=ee=>`${ee.getFullYear()}-${String(ee.getMonth()+1).padStart(2,"0")}-${String(ee.getDate()).padStart(2,"0")}`,Pe=new Date(j.getFullYear(),j.getMonth()+1,0).getDate(),nt=new Date(j.getFullYear(),j.getMonth(),1).getDay(),ut=nt===0?6:nt-1,he=ee=>{const we=`${j.getFullYear()}-${String(j.getMonth()+1).padStart(2,"0")}-${String(ee).padStart(2,"0")}`,_e=(s||[]).map(Je=>({...Je,isGoal:!0}));return[...t,...r,..._e].filter(Je=>Je.date===we)},Ze=()=>{x(G==="week"?new Date(j.getFullYear(),j.getMonth(),j.getDate()-7):new Date(j.getFullYear(),j.getMonth()-1,1))},F=()=>{x(G==="week"?new Date(j.getFullYear(),j.getMonth(),j.getDate()+7):new Date(j.getFullYear(),j.getMonth()+1,1))},se=ee=>{B(ee),L(!0)},qe=async()=>{if(U.title.trim()&&y){const ee=U.colorId||(U.type==="task"?"blue":U.type==="goal"?"purple":"emerald"),we={id:Date.now(),title:U.title,date:y,time:U.allDay?"":U.time,endTime:U.allDay?"":U.endTime,allDay:U.allDay||!1,colorId:ee,color:Tn(ee).bg};U.type==="task"?await A({...we,progress:0,tag:"",linkedType:U.linkedType||"",linkedId:U.linkedId||""}):U.type==="goal"?await g({...we,progress:0}):await c(we),M({title:"",time:"09:00",endTime:"10:00",type:"event",colorId:"emerald",allDay:!1,linkedType:"",linkedId:""}),L(!1)}},X=(ee,we)=>{we.stopPropagation(),k({...ee,isTask:ee.progress!==void 0&&!ee.isGoal,isGoal:ee.isGoal||!1}),z(!0)},ne=async()=>{if($&&$.title.trim()){const ee=$.colorId||"blue",we={title:$.title,date:$.date,time:$.allDay?"":$.time,endTime:$.allDay?"":$.endTime,allDay:$.allDay||!1,colorId:ee,color:Tn(ee).bg};$.isGoal?await h($.id,{...we,progress:$.progress||0}):$.isTask?await o($.id,{...we,progress:$.progress||0,linkedType:$.linkedType||"",linkedId:$.linkedId||""}):await d($.id,we),k(null),z(!1)}},je=async()=>{$&&($.isGoal?await b($.id):$.isTask?await l($.id):await p($.id),k(null),z(!1))},J=(ee,we)=>{ee.stopPropagation(),te({...we,isTask:we.progress!==void 0&&!we.isGoal,isGoal:we.isGoal||!1}),ee.dataTransfer.effectAllowed="move",ee.dataTransfer.setData("text/plain",we.id)},$e=ee=>{ee.preventDefault(),ee.dataTransfer.dropEffect="move"},Ve=async(ee,we,_e=null)=>{if(ee.preventDefault(),!O)return;const Je=O.colorId||"blue";let Xe={title:O.title,date:we,colorId:Je,color:Tn(Je).bg};if(_e!==null&&!O.allDay){const ye=O.time&&O.endTime?parseInt(O.endTime.split(":")[0])-parseInt(O.time.split(":")[0]):1;Xe.time=`${String(_e).padStart(2,"0")}:00`,Xe.endTime=`${String(Math.min(_e+ye,23)).padStart(2,"0")}:00`}else Xe.time=O.time,Xe.endTime=O.endTime;Xe.allDay=O.allDay||!1;try{O.isGoal?await h(O.id,{...Xe,progress:O.progress||0}):O.isTask?await o(O.id,{...Xe,progress:O.progress||0,linkedType:O.linkedType||"",linkedId:O.linkedId||""}):await d(O.id,Xe)}catch(ye){console.error("Failed to move event:",ye)}te(null)},ze=()=>{te(null)},We=ee=>ee.getDate()===re.getDate()&&ee.getMonth()===re.getMonth()&&ee.getFullYear()===re.getFullYear(),lt=ee=>ee===re.getDate()&&j.getMonth()===re.getMonth()&&j.getFullYear()===re.getFullYear(),be=()=>{const ee=me(),we=ee[0],_e=ee[6];return we.getMonth()===_e.getMonth()?`${we.getFullYear()} ${I[we.getMonth()]} ${we.getDate()} - ${_e.getDate()}`:`${we.getFullYear()} ${we.getMonth()+1}/${we.getDate()} - ${_e.getMonth()+1}/${_e.getDate()}`},Se=Array.from({length:18},(ee,we)=>we+6);return i.jsxs("div",{children:[i.jsxs("div",{className:"bg-slate-800/40 rounded-xl border border-slate-700/50 p-4 md:p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-3 mb-4 md:mb-6",children:[i.jsx("h2",{className:"text-lg md:text-xl font-bold text-slate-200",children:G==="week"?be():`${j.getFullYear()} ${I[j.getMonth()]}`}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex bg-slate-800 rounded-lg p-1 border border-slate-700",children:[i.jsx("button",{onClick:()=>N("week"),className:`px-3 py-1 text-sm transition-colors ${G==="week"?"bg-blue-600 text-white rounded":"text-slate-400 hover:text-slate-200"}`,children:""}),i.jsx("button",{onClick:()=>N("month"),className:`px-3 py-1 text-sm transition-colors ${G==="month"?"bg-blue-600 text-white rounded":"text-slate-400 hover:text-slate-200"}`,children:""})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:Ze,className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:i.jsx(bt,{name:"chevronLeft",size:20,className:"text-slate-400"})}),i.jsx("button",{onClick:()=>x(new Date),className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm",children:""}),i.jsx("button",{onClick:F,className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:i.jsx(bt,{name:"chevronRight",size:20,className:"text-slate-400"})})]})]})]}),G==="week"&&i.jsxs("div",{className:"overflow-auto",children:[i.jsxs("div",{className:"grid grid-cols-8 gap-1 mb-1 sticky top-0 bg-slate-800/90 z-20",children:[i.jsx("div",{className:"w-16"}),me().map((ee,we)=>{const _e=Ee(ee),Je=ke(_e);return i.jsxs("div",{className:`text-center py-3 rounded-lg cursor-pointer transition-all ${We(ee)?"bg-blue-600/20 border border-blue-500":"hover:bg-slate-700/50"}`,onClick:()=>se(_e),onDragOver:$e,onDrop:Xe=>Ve(Xe,_e),children:[i.jsx("div",{className:`text-xs font-medium ${we===5?"text-blue-400":we===6?"text-red-400":"text-slate-400"}`,children:H[we]}),i.jsx("div",{className:`text-lg font-bold ${We(ee)?"text-blue-400":"text-slate-200"}`,children:ee.getDate()}),ue[_e]&&i.jsxs("div",{className:"text-xs mt-1 flex flex-col items-center gap-0.5",children:[i.jsx("span",{className:"text-base",children:Y(ue[_e].code)}),i.jsxs("span",{className:"text-slate-400",children:[i.jsxs("span",{className:"text-red-400",children:[ue[_e].maxTemp,""]}),i.jsx("span",{className:"mx-0.5",children:"/"}),i.jsxs("span",{className:"text-blue-400",children:[ue[_e].minTemp,""]})]})]}),Je.length>0&&i.jsxs("div",{className:"text-xs text-emerald-400 mt-1",children:[Je.length,""]})]},we)})]}),i.jsxs("div",{className:"grid grid-cols-8 gap-1 mb-1",children:[i.jsx("div",{className:"w-16 text-xs text-slate-500 text-right pr-2 pt-1",children:""}),me().map((ee,we)=>{const _e=Ee(ee),Je=ke(_e).filter(Xe=>(Xe.allDay||!Xe.time&&!Xe.endTime)&&(Xe.isGoal||Xe.progress===void 0));return i.jsx("div",{className:`min-h-[28px] rounded-lg p-0.5 ${We(ee)?"bg-blue-900/10":""} ${O?"hover:bg-blue-900/30":""}`,onDragOver:$e,onDrop:Xe=>Ve(Xe,_e),children:Je.map((Xe,ye)=>{const Le=Xe.isGoal?"purple":"emerald",ft=Tn(Xe.colorId||Le),At=Xe.isGoal?"goal":"event",wt=t.filter(xt=>xt.linkedType===At&&String(xt.linkedId)===String(Xe.id)).sort((xt,yt)=>{if(xt.progress===100&&yt.progress!==100)return 1;if(xt.progress!==100&&yt.progress===100)return-1;const zt=xt.date||"9999-99-99",kt=yt.date||"9999-99-99";return zt.localeCompare(kt)}),pt=(a||[]).filter(xt=>xt.linkedType===At&&String(xt.linkedId)===String(Xe.id));return i.jsxs("div",{draggable:!0,onDragStart:xt=>J(xt,Xe),onDragEnd:ze,onClick:xt=>X(Xe,xt),className:`text-xs px-2 py-1 mb-0.5 rounded cursor-grab ${ft.bgLight} ${ft.text} ${(O==null?void 0:O.id)===Xe.id?"opacity-50":""}`,children:[i.jsxs("div",{className:"truncate font-medium",children:[Xe.isGoal?" ":" ",Xe.title]}),wt.length>0&&i.jsx("div",{className:"mt-1 space-y-0.5",children:wt.map(xt=>i.jsxs("div",{className:"text-[10px] flex items-center gap-1 text-slate-300 truncate",children:[i.jsx("span",{className:xt.progress===100?"text-emerald-400":"text-blue-400",children:xt.progress===100?"":""}),i.jsx("span",{className:xt.progress===100?"line-through opacity-60":"",children:xt.title})]},xt.id))}),pt.length>0&&i.jsx("div",{className:"mt-1 space-y-0.5",children:pt.map(xt=>i.jsxs("div",{className:"text-[10px] flex items-center gap-1 truncate",children:[i.jsx("span",{className:xt.type==="income"?"text-emerald-400":"text-red-400",children:xt.type==="income"?"":""}),i.jsxs("span",{className:xt.type==="income"?"text-emerald-300":"text-red-300",children:[xt.type==="income"?"+":"-","",Math.abs(xt.amount).toLocaleString()]})]},xt.id))})]},`event-${ye}`)})},we)})]}),i.jsx("div",{className:"max-h-[350px] md:max-h-[500px] overflow-y-auto",children:i.jsxs("div",{className:"grid grid-cols-8 gap-1",children:[i.jsx("div",{className:"w-16",children:Se.map(ee=>i.jsxs("div",{className:"h-[50px] text-xs text-slate-500 text-right pr-2 pt-1 border-t border-slate-700/50",children:[ee,":00"]},ee))}),me().map((ee,we)=>{const _e=Ee(ee),Je=ke(_e),Xe=We(ee),ye=new Date,Le=ye.getHours(),ft=ye.getMinutes(),At=Se[0],wt=Se[Se.length-1]+1,pt=(Le-At+ft/60)*50,xt=Xe&&Le>=At&&Le<wt;return i.jsxs("div",{className:`relative ${Xe?"bg-blue-900/10":""}`,children:[Se.map(yt=>i.jsx("div",{className:`h-[50px] border-t border-slate-700/50 hover:bg-slate-800/30 cursor-pointer transition-colors ${O?"hover:bg-blue-900/30":""}`,onClick:()=>{const zt=`${String(yt).padStart(2,"0")}:00`,kt=`${String(Math.min(yt+1,23)).padStart(2,"0")}:00`;M({...U,time:zt,endTime:kt}),se(_e)},onDragOver:$e,onDrop:zt=>Ve(zt,_e,yt)},yt)),xt&&i.jsx("div",{className:"absolute left-0 right-0 z-20 pointer-events-none",style:{top:`${pt}px`},children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full shadow-lg shadow-red-500/50"}),i.jsx("div",{className:"flex-1 h-0.5 bg-red-500 shadow-lg shadow-red-500/50"})]})}),Je.filter(yt=>!yt.allDay&&(yt.time||yt.endTime)).map((yt,zt)=>{const kt=yt.time?parseInt(yt.time.split(":")[0]):9,Ut=yt.time&&parseInt(yt.time.split(":")[1])||0,br=yt.endTime?parseInt(yt.endTime.split(":")[0]):kt+1,Q=yt.endTime&&parseInt(yt.endTime.split(":")[1])||0,Te=Se[0],st=Se[Se.length-1]+1;if(br<Te||kt>=st)return null;const Ge=(kt-Te+Ut/60)*50,ur=(br+Q/60-(kt+Ut/60))*50,Lt=yt.progress!==void 0&&!yt.isGoal,gr=yt.isGoal?"purple":Lt?"blue":"emerald",Jt=Tn(yt.colorId||gr),ot=yt.isGoal?"goal":"event",nr=!Lt&&(yt.isGoal||!Lt)?t.filter(xr=>xr.linkedType===ot&&String(xr.linkedId)===String(yt.id)).sort((xr,qn)=>{if(xr.progress===100&&qn.progress!==100)return 1;if(xr.progress!==100&&qn.progress===100)return-1;const ys=xr.date||"9999-99-99",ia=qn.date||"9999-99-99";return ys.localeCompare(ia)}):[],Wr=!Lt&&(yt.isGoal||!Lt)?(a||[]).filter(xr=>xr.linkedType===ot&&String(xr.linkedId)===String(yt.id)):[],Lr=40+(nr.length+Wr.length)*16,rs=Math.max(ur,Math.max(24,Lr));return i.jsxs("div",{draggable:!0,onDragStart:xr=>J(xr,yt),onDragEnd:ze,onClick:xr=>X(yt,xr),className:`absolute left-1 right-1 px-2 py-1 rounded cursor-grab hover:opacity-90 transition-opacity overflow-hidden z-10 ${Jt.bgLight} ${Jt.text} border-l-2 ${Jt.border} ${(O==null?void 0:O.id)===yt.id?"opacity-50":""}`,style:{top:`${Ge}px`,height:`${rs}px`},children:[i.jsx("div",{className:"text-xs",children:yt.time&&i.jsxs("span",{className:"text-slate-300 font-medium",children:[yt.isGoal?" ":"",yt.time,yt.endTime?`-${yt.endTime}`:""]})}),i.jsx("div",{className:"text-sm font-bold truncate",children:yt.title}),nr.length>0&&i.jsx("div",{className:"mt-1 space-y-0.5",children:nr.map(xr=>i.jsxs("div",{className:"text-xs flex items-center gap-1 text-slate-300 truncate",children:[i.jsx("span",{className:xr.progress===100?"text-emerald-400":"text-blue-400",children:xr.progress===100?"":""}),i.jsx("span",{className:xr.progress===100?"line-through opacity-60":"",children:xr.title})]},xr.id))}),Wr.length>0&&i.jsx("div",{className:"mt-1 space-y-0.5",children:Wr.map(xr=>i.jsxs("div",{className:"text-xs flex items-center gap-1 truncate",children:[i.jsx("span",{className:xr.type==="income"?"text-emerald-400":"text-red-400",children:xr.type==="income"?"":""}),i.jsxs("span",{className:xr.type==="income"?"text-emerald-300":"text-red-300",children:[xr.type==="income"?"+":"-","",Math.abs(xr.amount).toLocaleString()]})]},xr.id))})]},zt)})]},we)})]})})]}),G==="month"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:H.map((ee,we)=>i.jsx("div",{className:`text-center py-2 text-sm font-medium ${we===5?"text-blue-400":we===6?"text-red-400":"text-slate-400"}`,children:ee},ee))}),i.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:ut}).map((ee,we)=>i.jsx("div",{className:"h-24 bg-slate-900/30 rounded-lg"},`empty-${we}`)),Array.from({length:Pe}).map((ee,we)=>{const _e=we+1,Je=he(_e),Xe=(ut+we)%7,ye=`${j.getFullYear()}-${String(j.getMonth()+1).padStart(2,"0")}-${String(_e).padStart(2,"0")}`;return i.jsxs("div",{onClick:()=>se(ye),onDragOver:$e,onDrop:Le=>Ve(Le,ye),className:`h-24 p-2 rounded-lg cursor-pointer transition-all ${lt(_e)?"bg-blue-600/20 border-2 border-blue-500":"bg-slate-900/50 hover:bg-slate-800/50 border border-slate-700/50"} ${O?"hover:bg-blue-900/30":""}`,children:[i.jsx("div",{className:`text-sm font-medium mb-1 ${Xe===5?"text-blue-400":Xe===6?"text-red-400":"text-slate-300"}`,children:_e}),i.jsxs("div",{className:"space-y-1 overflow-hidden",children:[Je.slice(0,2).map((Le,ft)=>{const At=Le.isGoal?"purple":Le.progress!==void 0?"blue":"emerald",wt=Tn(Le.colorId||At);return i.jsxs("div",{draggable:!0,onDragStart:pt=>J(pt,Le),onDragEnd:ze,onClick:pt=>X(Le,pt),className:`text-xs px-1 py-0.5 rounded truncate cursor-grab hover:opacity-80 transition-opacity ${wt.bgLight} ${wt.text} ${(O==null?void 0:O.id)===Le.id?"opacity-50":""}`,children:[Le.isGoal?" ":"",Le.title]},ft)}),Je.length>2&&i.jsxs("div",{className:"text-xs text-slate-500",children:["+",Je.length-2," more"]})]})]},_e)})]})]})]}),E&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>L(!1),children:i.jsxs("div",{className:"bg-slate-800 rounded-xl p-6 w-96 border border-slate-700",onClick:ee=>ee.stopPropagation(),children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-200 mb-4",children:[y," "]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsx("input",{type:"text",value:U.title,onChange:ee=>M({...U,title:ee.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500",placeholder:"..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsxs("select",{value:U.type,onChange:ee=>M({...U,type:ee.target.value,colorId:ee.target.value==="task"?"blue":ee.target.value==="goal"?"purple":"emerald"}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500",children:[i.jsx("option",{value:"event",children:""}),i.jsx("option",{value:"task",children:""}),i.jsx("option",{value:"goal",children:""})]})]}),(U.type==="event"||U.type==="goal"||U.type==="task")&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"newAllDay",checked:U.allDay||!1,onChange:ee=>M({...U,allDay:ee.target.checked,time:ee.target.checked?"":"09:00",endTime:ee.target.checked?"":"10:00"}),className:"w-4 h-4 rounded border-slate-600 bg-slate-900 text-blue-500 focus:ring-blue-500"}),i.jsx("label",{htmlFor:"newAllDay",className:"text-sm text-slate-300",children:""})]}),!U.allDay&&i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsx("input",{type:"time",value:U.time,onChange:ee=>{const we=ee.target.value;let _e=U.endTime;if(we>=_e){const[Je,Xe]=we.split(":").map(Number);_e=`${String(Math.min(Je+1,23)).padStart(2,"0")}:${String(Xe).padStart(2,"0")}`}M({...U,time:we,endTime:_e})},className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsx("input",{type:"time",value:U.endTime,onChange:ee=>M({...U,endTime:ee.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-2 block",children:""}),i.jsx(gu,{value:U.colorId,onChange:ee=>M({...U,colorId:ee})})]}),U.type==="task"&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("select",{value:U.linkedType||"",onChange:ee=>M({...U,linkedType:ee.target.value,linkedId:""}),className:"bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500 text-sm",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"event",children:" "}),i.jsx("option",{value:"goal",children:" "})]}),i.jsxs("select",{value:U.linkedId||"",onChange:ee=>M({...U,linkedId:ee.target.value}),className:"bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500 text-sm",disabled:!U.linkedType,children:[i.jsx("option",{value:"",children:""}),U.linkedType==="event"&&(r==null?void 0:r.map(ee=>i.jsxs("option",{value:ee.id,children:[ee.date?`${ee.date} - `:"",ee.title]},ee.id))),U.linkedType==="goal"&&(s==null?void 0:s.map(ee=>i.jsxs("option",{value:ee.id,children:[ee.date?`${ee.date} - `:"",ee.title]},ee.id)))]})]})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{onClick:()=>L(!1),className:"flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-slate-200 rounded-lg transition-colors",children:""}),i.jsx("button",{onClick:qe,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",children:""})]})]})]})}),_&&$&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>z(!1),children:i.jsxs("div",{className:"bg-slate-800 rounded-xl p-6 w-96 border border-slate-700",onClick:ee=>ee.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-200",children:$.isGoal?"":$.isTask?"":""}),i.jsx("span",{className:`text-xs px-2 py-1 rounded ${$.isGoal?"bg-purple-500/30 text-purple-300":$.isTask?"bg-blue-500/30 text-blue-300":"bg-emerald-500/30 text-emerald-300"}`,children:$.isGoal?" ":$.isTask?"":""})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsx("input",{type:"text",value:$.title,onChange:ee=>k({...$,title:ee.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsx("input",{type:"date",value:$.date,onChange:ee=>k({...$,date:ee.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"allDay",checked:$.allDay||!1,onChange:ee=>k({...$,allDay:ee.target.checked,time:ee.target.checked?"":$.time,endTime:ee.target.checked?"":$.endTime}),className:"w-4 h-4 rounded border-slate-600 bg-slate-900 text-blue-500 focus:ring-blue-500"}),i.jsx("label",{htmlFor:"allDay",className:"text-sm text-slate-300",children:""})]}),!$.allDay&&i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsx("input",{type:"time",value:$.time||"",onChange:ee=>{const we=ee.target.value;let _e=$.endTime||"";if(we&&(!_e||we>=_e)){const[Je,Xe]=we.split(":").map(Number);_e=`${String(Math.min(Je+1,23)).padStart(2,"0")}:${String(Xe).padStart(2,"0")}`}k({...$,time:we,endTime:_e})},className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsx("input",{type:"time",value:$.endTime||"",onChange:ee=>k({...$,endTime:ee.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500"})]})]}),($.isTask||$.isGoal)&&i.jsxs("div",{children:[i.jsxs("label",{className:"text-sm text-slate-400 mb-1 block",children:[" (",$.progress||0,"%)"]}),i.jsx("input",{type:"range",min:"0",max:"100",value:$.progress||0,onChange:ee=>k({...$,progress:parseInt(ee.target.value)}),className:"w-full"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-2 block",children:""}),i.jsx(gu,{value:$.colorId||"blue",onChange:ee=>k({...$,colorId:ee})})]}),$.isTask&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("select",{value:$.linkedType||"",onChange:ee=>k({...$,linkedType:ee.target.value,linkedId:""}),className:"bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500 text-sm",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"event",children:" "}),i.jsx("option",{value:"goal",children:" "})]}),i.jsxs("select",{value:$.linkedId||"",onChange:ee=>k({...$,linkedId:ee.target.value}),className:"bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500 text-sm",disabled:!$.linkedType,children:[i.jsx("option",{value:"",children:""}),$.linkedType==="event"&&(r==null?void 0:r.map(ee=>i.jsxs("option",{value:ee.id,children:[ee.date?`${ee.date} - `:"",ee.title]},ee.id))),$.linkedType==="goal"&&(s==null?void 0:s.map(ee=>i.jsxs("option",{value:ee.id,children:[ee.date?`${ee.date} - `:"",ee.title]},ee.id)))]})]})]}),($.isGoal||!$.isTask&&!$.isGoal)&&i.jsxs("div",{children:[i.jsxs("label",{className:"text-sm text-slate-400 mb-2 block flex items-center gap-2",children:[i.jsx(bt,{name:"tasks",size:14}),""]}),(()=>{const ee=$.isGoal?"goal":"event",we=t.filter(_e=>_e.linkedType===ee&&String(_e.linkedId)===String($.id)).sort((_e,Je)=>{if(_e.progress===100&&Je.progress!==100)return 1;if(_e.progress!==100&&Je.progress===100)return-1;const Xe=_e.date||"9999-99-99",ye=Je.date||"9999-99-99";return Xe.localeCompare(ye)});return i.jsxs("div",{className:"space-y-2",children:[we.length>0?i.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:we.map(_e=>i.jsxs("div",{className:"flex items-center gap-2 bg-slate-900/50 rounded-lg px-3 py-2 text-sm",children:[i.jsx("span",{className:`w-5 h-5 rounded-full flex items-center justify-center text-xs ${_e.progress===100?"bg-emerald-500/20 text-emerald-400":"bg-blue-500/20 text-blue-400"}`,children:_e.progress===100?"":""}),i.jsx("span",{className:_e.progress===100?"text-slate-500 line-through":"text-slate-300",children:_e.title}),i.jsx("span",{className:"text-slate-600 text-xs ml-auto",children:_e.date})]},_e.id))}):i.jsx("div",{className:"text-slate-600 text-sm bg-slate-900/50 rounded-lg px-3 py-2",children:""}),i.jsxs("button",{type:"button",onClick:async()=>{const _e=prompt(":");_e&&_e.trim()&&await A({title:_e.trim(),date:$.date||new Date().toISOString().split("T")[0],tag:"",progress:0,colorId:"blue",color:Tn("blue").bg,linkedType:ee,linkedId:String($.id)})},className:"w-full px-3 py-2 bg-blue-600/20 hover:bg-blue-600/30 text-blue-400 border border-blue-600/50 rounded-lg transition-colors text-sm flex items-center justify-center gap-2",children:[i.jsx(bt,{name:"plus",size:14}),""]}),i.jsxs("button",{type:"button",onClick:()=>{ve({title:"",amount:"",type:"expense",category:"",date:$.date||new Date().toISOString().split("T")[0],paymentTiming:"immediate",linkedType:ee,linkedId:String($.id)}),de(!0)},className:"w-full px-3 py-2 bg-emerald-600/20 hover:bg-emerald-600/30 text-emerald-400 border border-emerald-600/50 rounded-lg transition-colors text-sm flex items-center justify-center gap-2",children:[i.jsx(bt,{name:"plus",size:14}),""]})]})})()]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsxs("button",{onClick:je,className:"px-4 py-2 bg-red-600/20 hover:bg-red-600/30 text-red-400 border border-red-600/50 rounded-lg transition-colors flex items-center gap-2",children:[i.jsx(bt,{name:"trash",size:16}),""]}),i.jsx("button",{onClick:()=>z(!1),className:"flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-slate-200 rounded-lg transition-colors",children:""}),i.jsx("button",{onClick:ne,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",children:""})]})]})]})}),ie&&i.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-[60] p-4",children:i.jsxs("div",{className:"bg-slate-800 rounded-xl p-6 w-full max-w-md border border-slate-700",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-200 mb-4",children:""}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>ve({...ge,type:"expense",category:""}),className:`flex-1 py-2 rounded-lg font-medium transition-colors ${ge.type==="expense"?"bg-red-500 text-white":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:""}),i.jsx("button",{onClick:()=>ve({...ge,type:"income",category:""}),className:`flex-1 py-2 rounded-lg font-medium transition-colors ${ge.type==="income"?"bg-emerald-500 text-white":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:""})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsx("input",{type:"text",value:ge.title,onChange:ee=>ve({...ge,title:ee.target.value}),placeholder:ge.type==="expense"?": ":": ",className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsx("input",{type:"number",value:ge.amount,onChange:ee=>ve({...ge,amount:ee.target.value}),placeholder:"1000",className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsx("select",{value:ge.category,onChange:ee=>ve({...ge,category:ee.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500",children:ge.type==="expense"?i.jsxs(i.Fragment,{children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""})]}):i.jsxs(i.Fragment,{children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""})]})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsx("input",{type:"date",value:ge.date,onChange:ee=>ve({...ge,date:ee.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500"})]}),ge.type==="expense"&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>ve({...ge,paymentTiming:"immediate"}),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-colors ${ge.paymentTiming==="immediate"?"bg-blue-600 text-white":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:""}),i.jsx("button",{type:"button",onClick:()=>ve({...ge,paymentTiming:"nextMonthEnd"}),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-colors ${ge.paymentTiming==="nextMonthEnd"?"bg-blue-600 text-white":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:""})]})]}),ge.linkedType&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsxs("div",{className:"bg-slate-900/50 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-300",children:[ge.linkedType==="event"?" ":" ",": ",$==null?void 0:$.title]})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{onClick:()=>de(!1),className:"flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-slate-200 rounded-lg transition-colors",children:""}),i.jsx("button",{onClick:async()=>{if(ge.title.trim()&&ge.amount)try{await w({title:ge.title.trim(),amount:parseFloat(ge.amount),type:ge.type,category:ge.category,date:ge.date||new Date().toISOString().split("T")[0],paymentTiming:ge.type==="expense"&&ge.paymentTiming||"immediate",linkedType:ge.linkedType||"",linkedId:ge.linkedId||""}),de(!1),ve({title:"",amount:"",type:"expense",category:"",date:"",paymentTiming:"immediate",linkedType:"",linkedId:""})}catch(ee){console.error(":",ee),alert(": "+ee.message)}else alert("")},className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",children:""})]})]})]})})]})}function g6({tasks:t,addTask:e,updateTask:r,deleteTask:n,events:s,goals:a,setTasks:A}){const[o,l]=V.useState("all"),[c,d]=V.useState(""),[p,g]=V.useState(!1),[h,b]=V.useState({title:"",date:"",tag:"",colorId:"blue",linkedType:"",linkedId:"",allDay:!0,time:"09:00",endTime:"10:00"}),[w,j]=V.useState(null),[x,y]=V.useState(null),[B,E]=V.useState(null),[L,U]=V.useState(null),[M,G]=V.useState(!1),[N,$]=V.useState([]),[k,_]=V.useState(!1),[z,O]=V.useState({}),[te,ue]=V.useState(!1),fe=(he,Ze)=>{if(!he||!Ze)return null;if(he==="event"){const F=s==null?void 0:s.find(se=>String(se.id)===String(Ze));return F?{type:"event",name:F.title,date:F.date,icon:"",colorId:F.colorId||"emerald"}:null}if(he==="goal"){const F=a==null?void 0:a.find(se=>String(se.id)===String(Ze));return F?{type:"goal",name:F.title,date:F.date,icon:"",colorId:F.colorId||"purple"}:null}return null},ie=t.filter(he=>{const Ze=he.title.toLowerCase().includes(c.toLowerCase()),F=o==="all"||o==="completed"&&he.progress===100||o==="pending"&&he.progress<100;return Ze&&F}).sort((he,Ze)=>{if(he.progress===100&&Ze.progress!==100)return 1;if(he.progress!==100&&Ze.progress===100)return-1;if(he.sortOrder!==void 0&&Ze.sortOrder!==void 0)return he.sortOrder-Ze.sortOrder;const F=he.date||"9999-99-99",se=Ze.date||"9999-99-99";return F.localeCompare(se)}),de=(he,Ze)=>{y(Ze),he.dataTransfer.effectAllowed="move"},ge=(he,Ze)=>{he.preventDefault(),x&&x.id!==Ze.id&&E(Ze)},ve=async(he,Ze)=>{if(he.preventDefault(),!x||x.id===Ze.id){y(null),E(null);return}const F=[...ie],se=F.findIndex($e=>$e.id===x.id),qe=F.findIndex($e=>$e.id===Ze.id),[X]=F.splice(se,1);F.splice(qe,0,X);const ne=F.filter($e=>$e.progress!==100),je=F.filter($e=>$e.progress===100),J=ne.map(($e,Ve)=>({id:$e.id,sortOrder:Ve}));je.forEach(($e,Ve)=>{J.push({id:$e.id,sortOrder:1e4+Ve})});for(const $e of J)await r($e.id,{sortOrder:$e.sortOrder});y(null),E(null)},I=()=>{y(null),E(null)},H=async()=>{if(h.title.trim()){const he=h.colorId||"blue",Ze={title:h.title,date:h.date||new Date().toISOString().split("T")[0],tag:h.tag,progress:0,colorId:he,color:Tn(he).bg,linkedType:h.linkedType||"",linkedId:h.linkedId||"",allDay:h.allDay,time:h.allDay?"":h.time,endTime:h.allDay?"":h.endTime};await e(Ze),b({title:"",date:"",tag:"",colorId:"blue",linkedType:"",linkedId:"",allDay:!0,time:"09:00",endTime:"10:00"}),g(!1)}},re=async he=>{await n(he)},Y=async he=>{await r(he.id,{progress:he.progress===100?0:100})},le=async()=>{if(w&&w.title.trim()){const he=w.colorId||"blue";await r(w.id,{...w,colorId:he,color:Tn(he).bg,time:w.time||"",endTime:w.endTime||"",allDay:w.allDay||!1,linkedType:w.linkedType||"",linkedId:w.linkedId||""}),j(null)}},me=async he=>{var se,qe,X,ne,je,J,$e,Ve;U(he),G(!0),$([]),_(!0);const Ze=localStorage.getItem("ai_api_key"),F=localStorage.getItem("ai_provider")||"gemini";if(!Ze){$([{error:"APIAI API"}]),G(!1);return}try{const ze=`


${he.title}


1. 30
2. 58
3. 
4. 


JSON
{
  "thinking": "...",
  "subtasks": [
    { "title": "1", "reason": "", "estimatedMinutes": 15 },
    { "title": "2", "reason": "", "estimatedMinutes": 20 }
  ],
  "summary": ""
}

JSON`;let We;if(F==="gemini"?We=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${Ze}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:ze}]}],generationConfig:{temperature:.7,maxOutputTokens:2048}})}):F==="groq"&&(We=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ze}`},body:JSON.stringify({model:"llama-3.3-70b-versatile",messages:[{role:"user",content:ze}],temperature:.7,max_tokens:2048})})),!We.ok)throw new Error(`API error: ${We.status}`);const lt=await We.json();let be="";F==="gemini"?be=((je=(ne=(X=(qe=(se=lt.candidates)==null?void 0:se[0])==null?void 0:qe.content)==null?void 0:X.parts)==null?void 0:ne[0])==null?void 0:je.text)||"":be=((Ve=($e=(J=lt.choices)==null?void 0:J[0])==null?void 0:$e.message)==null?void 0:Ve.content)||"";const Se=be.match(/\{[\s\S]*\}/);if(Se){const ee=JSON.parse(Se[0]);$(ee)}else throw new Error("JSON")}catch(ze){console.error("Task decomposition error:",ze),$({error:`: ${ze.message}`})}finally{G(!1)}},ke=he=>{O(Ze=>({...Ze,[he]:!Ze[he]}))},Ee=()=>{if(!(N!=null&&N.subtasks))return;if(N.subtasks.every((Ze,F)=>z[F]))O({});else{const Ze={};N.subtasks.forEach((F,se)=>{Ze[se]=!0}),O(Ze)}},Pe=Object.values(z).filter(Boolean).length,nt=async()=>{var ne,je,J,$e,Ve,ze,We,lt;if(!(N!=null&&N.subtasks)||!L||Pe===0)return;ue(!0);const he=localStorage.getItem("ai_api_key"),Ze=localStorage.getItem("ai_provider")||"gemini";if(!he){alert("APIAI API"),ue(!1);return}const F=N.subtasks.filter((be,Se)=>z[Se]),se=new Date,qe=[];for(let be=0;be<7;be++){const Se=new Date(se);Se.setDate(Se.getDate()+be),qe.push(Se.toISOString().split("T")[0])}const X=qe.map(be=>{const Se=t.filter(we=>we.date===be&&we.progress!==100),ee=(s==null?void 0:s.filter(we=>we.date===be))||[];return{date:be,tasks:Se.map(we=>({title:we.title,time:we.time,endTime:we.endTime,allDay:we.allDay})),events:ee.map(we=>({title:we.title,time:we.time,endTime:we.endTime,allDay:we.allDay}))}});try{const be=`


${F.map((Je,Xe)=>`${Xe+1}. ${Je.title}${Je.estimatedMinutes||30}`).join(`
`)}

7
${X.map(Je=>{const Xe=[...Je.tasks,...Je.events];return`${Je.date}: ${Xe.length>0?Xe.map(ye=>ye.allDay?`${ye.title}()`:`${ye.title}(${ye.time||""}-${ye.endTime||""})`).join(", "):""}`}).join(`
`)}


1. 
2. 13-4
3. 
4. 920
5. 


JSON
{
  "schedule": [
    { "subtaskIndex": 0, "date": "2024-01-15", "time": "09:00", "endTime": "09:30", "reason": "" }
  ],
  "summary": ""
}

JSON`;let Se;if(Ze==="gemini"?Se=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${he}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:be}]}],generationConfig:{temperature:.5,maxOutputTokens:2048}})}):Ze==="groq"&&(Se=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${he}`},body:JSON.stringify({model:"llama-3.3-70b-versatile",messages:[{role:"user",content:be}],temperature:.5,max_tokens:2048})})),!Se.ok)throw new Error(`API error: ${Se.status}`);const ee=await Se.json();let we="";Ze==="gemini"?we=((Ve=($e=(J=(je=(ne=ee.candidates)==null?void 0:ne[0])==null?void 0:je.content)==null?void 0:J.parts)==null?void 0:$e[0])==null?void 0:Ve.text)||"":we=((lt=(We=(ze=ee.choices)==null?void 0:ze[0])==null?void 0:We.message)==null?void 0:lt.content)||"";const _e=we.match(/\{[\s\S]*\}/);if(_e){const Je=JSON.parse(_e[0]);for(const Xe of Je.schedule){const ye=F[Xe.subtaskIndex];if(ye){const Le={title:`* ${ye.title}`,date:Xe.date,tag:L.tag||"",progress:0,colorId:L.colorId||"blue",color:Tn(L.colorId||"blue").bg,linkedType:L.linkedType||"",linkedId:L.linkedId||"",allDay:!1,time:Xe.time,endTime:Xe.endTime,parentTaskId:String(L.id),parentTaskTitle:L.title,aiScheduled:!0};await e(Le)}}alert(` ${Je.schedule.length}

${Je.summary}`)}else throw new Error("JSON")}catch(be){console.error("Scheduling error:",be),alert(`: ${be.message}`)}finally{ue(!1),_(!1),U(null),$([]),O({})}},ut=async()=>{if(!(N!=null&&N.subtasks)||!L||Pe===0)return;const he=L.date||new Date().toISOString().split("T")[0],Ze=N.subtasks.filter((F,se)=>z[se]);for(const F of Ze){const se={title:`* ${F.title}`,date:he,tag:L.tag||"",progress:0,colorId:L.colorId||"blue",color:Tn(L.colorId||"blue").bg,linkedType:L.linkedType||"",linkedId:L.linkedId||"",allDay:!0,parentTaskId:String(L.id),parentTaskTitle:L.title};await e(se)}_(!1),U(null),$([]),O({})};return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("div",{className:"flex gap-4 items-center",children:i.jsxs("h2",{className:"text-xl text-slate-200 font-bold flex items-center gap-2",children:[i.jsx(bt,{name:"tasks",className:"text-blue-400"})," ",i.jsxs("span",{className:"text-sm bg-slate-700 px-2 py-0.5 rounded-full text-slate-300",children:[t.length,""]})]})}),i.jsxs("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-cyan-600 text-white rounded-lg flex items-center gap-2 text-sm hover:bg-cyan-500 transition-colors",children:[i.jsx(bt,{name:"plus",size:16})," "]})]}),i.jsxs("div",{className:"flex gap-3 mb-6",children:[i.jsxs("select",{value:o,onChange:he=>l(he.target.value),className:"bg-slate-900 border border-slate-700 text-slate-300 px-3 py-2 rounded-lg text-sm outline-none",children:[i.jsx("option",{value:"all",children:""}),i.jsx("option",{value:"pending",children:""}),i.jsx("option",{value:"completed",children:""})]}),i.jsxs("div",{className:"flex-1 relative",children:[i.jsx("div",{className:"absolute left-3 top-2.5 text-slate-600",children:i.jsx(bt,{name:"search",size:16})}),i.jsx("input",{type:"text",value:c,onChange:he=>d(he.target.value),placeholder:"...",className:"w-full bg-slate-900 border border-slate-700 text-slate-300 pl-10 pr-3 py-2 rounded-lg text-sm outline-none focus:border-blue-500"})]})]}),i.jsxs("div",{className:"space-y-3",children:[ie.map((he,Ze)=>i.jsxs("div",{draggable:!0,onDragStart:F=>de(F,he),onDragOver:F=>ge(F,he),onDrop:F=>ve(F,he),onDragEnd:I,className:`bg-slate-800/50 border rounded-xl p-4 flex items-center justify-between group hover:border-slate-600 transition-all cursor-move ${(B==null?void 0:B.id)===he.id?"border-cyan-500 bg-cyan-500/10":"border-slate-700/50"} ${(x==null?void 0:x.id)===he.id?"opacity-50":""}`,children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"text-slate-600 hover:text-slate-400 cursor-grab active:cursor-grabbing",children:i.jsx(bt,{name:"menu",size:16})}),i.jsx("button",{onClick:()=>Y(he),className:`w-10 h-10 rounded-lg flex items-center justify-center transition-colors ${he.progress===100?"bg-emerald-500/20 text-emerald-400":"bg-cyan-500/10 text-cyan-400 hover:bg-cyan-500/20"}`,children:he.progress===100?i.jsx(bt,{name:"check",size:20}):i.jsx(bt,{name:"calendar",size:20})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:`font-bold ${he.progress===100?"text-slate-500 line-through":"text-slate-200"}`,children:he.title}),i.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${Tn(he.colorId||"blue").bgLight} ${Tn(he.colorId||"blue").text} border border-white/5`,children:he.tag}),(()=>{const F=fe(he.linkedType,he.linkedId);if(F){const se=Tn(F.colorId);return i.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${se.bgLight} ${se.text}`,children:[F.icon," ",F.name]})}return null})()]}),i.jsx("div",{className:"text-slate-500 text-xs",children:he.date})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:`font-bold text-sm ${he.progress===100?"text-emerald-400":"text-slate-500"}`,children:[he.progress,"%"]}),he.progress!==100&&i.jsxs("button",{onClick:()=>me(he),className:"text-slate-500 hover:text-purple-400 transition-colors p-1 hover:bg-slate-700 rounded flex items-center gap-1",title:"",children:[i.jsx(bt,{name:"target",size:16}),i.jsx("span",{className:"text-xs hidden md:inline",children:""})]}),i.jsx("button",{onClick:()=>j({...he}),className:"text-slate-600 hover:text-blue-400 transition-colors p-1 hover:bg-slate-700 rounded",children:i.jsx(bt,{name:"edit",size:16})}),i.jsx("button",{onClick:()=>re(he.id),className:"text-slate-600 hover:text-red-400 transition-colors p-1 hover:bg-slate-700 rounded",children:i.jsx(bt,{name:"trash",size:16})})]})]},he.id)),ie.length===0&&i.jsx("div",{className:"text-center py-12 text-slate-500",children:""})]}),p&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>g(!1),children:i.jsxs("div",{className:"bg-slate-800 rounded-xl p-6 w-96 border border-slate-700",onClick:he=>he.stopPropagation(),children:[i.jsx("h3",{className:"text-lg font-bold text-slate-200 mb-4",children:""}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsx("input",{type:"text",value:h.title,onChange:he=>b({...h,title:he.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500",placeholder:"..."})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsx("input",{type:"date",value:h.date,onChange:he=>b({...h,date:he.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsxs("select",{value:h.tag,onChange:he=>b({...h,tag:he.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""})]})]})]}),i.jsx("div",{children:i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:h.allDay,onChange:he=>b({...h,allDay:he.target.checked}),className:"w-4 h-4 rounded bg-slate-700 border-slate-600 text-blue-500"}),i.jsx("span",{className:"text-sm text-slate-300",children:""})]})}),!h.allDay&&i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsx("input",{type:"time",value:h.time,onChange:he=>b({...h,time:he.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsx("input",{type:"time",value:h.endTime,onChange:he=>b({...h,endTime:he.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-2 block",children:""}),i.jsx(gu,{value:h.colorId,onChange:he=>b({...h,colorId:he})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("select",{value:h.linkedType,onChange:he=>b({...h,linkedType:he.target.value,linkedId:""}),className:"bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500 text-sm",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"event",children:" "}),i.jsx("option",{value:"goal",children:" "})]}),i.jsxs("select",{value:h.linkedId,onChange:he=>b({...h,linkedId:he.target.value}),className:"bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500 text-sm",disabled:!h.linkedType,children:[i.jsx("option",{value:"",children:""}),h.linkedType==="event"&&(s==null?void 0:s.map(he=>i.jsxs("option",{value:he.id,children:[he.date?`${he.date} - `:"",he.title]},he.id))),h.linkedType==="goal"&&(a==null?void 0:a.map(he=>i.jsxs("option",{value:he.id,children:[he.date?`${he.date} - `:"",he.title]},he.id)))]})]})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{onClick:()=>g(!1),className:"flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-slate-200 rounded-lg transition-colors",children:""}),i.jsx("button",{onClick:H,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",children:""})]})]})]})}),w&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>j(null),children:i.jsxs("div",{className:"bg-slate-800 rounded-xl p-6 w-96 border border-slate-700",onClick:he=>he.stopPropagation(),children:[i.jsx("h3",{className:"text-lg font-bold text-slate-200 mb-4",children:""}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsx("input",{type:"text",value:w.title,onChange:he=>j({...w,title:he.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsx("input",{type:"date",value:w.date,onChange:he=>j({...w,date:he.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsx("input",{type:"number",min:"0",max:"100",value:w.progress,onChange:he=>j({...w,progress:parseInt(he.target.value)||0}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-2 block",children:""}),i.jsx(gu,{value:w.colorId||"blue",onChange:he=>j({...w,colorId:he})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"tasklist-edit-allday",checked:w.allDay||!1,onChange:he=>j({...w,allDay:he.target.checked,time:"",endTime:""}),className:"w-4 h-4 rounded bg-slate-900 border-slate-700 text-blue-500 focus:ring-blue-500"}),i.jsx("label",{htmlFor:"tasklist-edit-allday",className:"text-sm text-slate-300",children:""})]}),!w.allDay&&i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsx("input",{type:"time",value:w.time||"",onChange:he=>{let Ze=w.endTime||"";const F=he.target.value;if(F&&(!Ze||F>=Ze)){const[se,qe]=F.split(":").map(Number);Ze=`${String(Math.min(se+1,23)).padStart(2,"0")}:${String(qe).padStart(2,"0")}`}j({...w,time:F,endTime:Ze})},className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsx("input",{type:"time",value:w.endTime||"",onChange:he=>j({...w,endTime:he.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("select",{value:w.linkedType||"",onChange:he=>j({...w,linkedType:he.target.value,linkedId:""}),className:"bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500 text-sm",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"event",children:" "}),i.jsx("option",{value:"goal",children:" "})]}),i.jsxs("select",{value:w.linkedId||"",onChange:he=>j({...w,linkedId:he.target.value}),className:"bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500 text-sm",disabled:!w.linkedType,children:[i.jsx("option",{value:"",children:""}),w.linkedType==="event"&&(s==null?void 0:s.map(he=>i.jsxs("option",{value:he.id,children:[he.date?`${he.date} - `:"",he.title]},he.id))),w.linkedType==="goal"&&(a==null?void 0:a.map(he=>i.jsxs("option",{value:he.id,children:[he.date?`${he.date} - `:"",he.title]},he.id)))]})]})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{onClick:()=>j(null),className:"flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-slate-200 rounded-lg transition-colors",children:""}),i.jsx("button",{onClick:le,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",children:""})]})]})]})}),k&&i.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:()=>_(!1),children:i.jsxs("div",{className:"bg-slate-800 rounded-xl p-4 md:p-6 w-full max-w-lg max-h-[85vh] overflow-y-auto border border-slate-700",onClick:he=>he.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-200 flex items-center gap-2",children:[i.jsx(bt,{name:"target",className:"text-purple-400"})," (CoT)"]}),i.jsx("button",{onClick:()=>_(!1),className:"text-slate-400 hover:text-slate-200",children:i.jsx(bt,{name:"x",size:20})})]}),L&&i.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-3 mb-4 border border-slate-700",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-1",children:""}),i.jsx("div",{className:"text-slate-200 font-medium",children:L.title})]}),M&&i.jsx("div",{className:"text-center py-8",children:i.jsxs("div",{className:"inline-flex items-center gap-3 text-purple-400",children:[i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-purple-400 border-t-transparent"}),i.jsx("span",{children:"AI..."})]})}),(N==null?void 0:N.error)&&i.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4 text-red-400",children:N.error}),!M&&(N==null?void 0:N.subtasks)&&i.jsxs("div",{className:"space-y-4",children:[N.thinking&&i.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-3",children:[i.jsxs("div",{className:"text-xs text-purple-400 mb-1 flex items-center gap-1",children:[i.jsx(bt,{name:"cpu",size:12}),""]}),i.jsx("div",{className:"text-sm text-purple-200",children:N.thinking})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsxs("div",{className:"text-sm text-slate-400",children:["",Pe,"/",N.subtasks.length,""]}),i.jsx("button",{onClick:Ee,className:"text-xs text-purple-400 hover:text-purple-300 transition-colors",children:N.subtasks.every((he,Ze)=>z[Ze])?"":""})]}),i.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:N.subtasks.map((he,Ze)=>i.jsx("div",{onClick:()=>ke(Ze),className:`bg-slate-900/50 border rounded-lg p-3 cursor-pointer transition-all ${z[Ze]?"border-purple-500 bg-purple-500/10":"border-slate-700 hover:border-slate-600"}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:`flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${z[Ze]?"bg-purple-500 border-purple-500":"border-slate-600"}`,children:z[Ze]&&i.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),i.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-purple-500/20 text-purple-400 flex items-center justify-center text-xs font-bold",children:Ze+1}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-slate-200 font-medium text-sm",children:he.title}),he.reason&&i.jsx("div",{className:"text-xs text-slate-500 mt-1",children:he.reason}),he.estimatedMinutes&&i.jsxs("div",{className:"text-xs text-cyan-400 mt-1",children:[" ",he.estimatedMinutes,""]})]})]})},Ze))})]}),N.summary&&i.jsxs("div",{className:"bg-slate-900/50 border border-slate-600 rounded-lg p-3",children:[i.jsx("div",{className:"text-xs text-slate-400 mb-1",children:""}),i.jsx("div",{className:"text-sm text-slate-300",children:N.summary})]}),te&&i.jsx("div",{className:"bg-cyan-500/10 border border-cyan-500/30 rounded-lg p-4 text-center",children:i.jsxs("div",{className:"inline-flex items-center gap-3 text-cyan-400",children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-cyan-400 border-t-transparent"}),i.jsx("span",{className:"text-sm",children:"AI..."})]})}),i.jsxs("div",{className:"space-y-2 pt-2",children:[i.jsxs("button",{onClick:nt,disabled:Pe===0||te,className:`w-full px-4 py-3 rounded-lg transition-colors text-sm flex items-center justify-center gap-2 ${Pe>0&&!te?"bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white":"bg-slate-700 text-slate-500 cursor-not-allowed"}`,children:[i.jsx(bt,{name:"calendar",size:16})," AI",Pe,""]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{_(!1),O({})},className:"flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-slate-200 rounded-lg transition-colors text-sm",children:""}),i.jsxs("button",{onClick:ut,disabled:Pe===0,className:`flex-1 px-4 py-2 rounded-lg transition-colors text-sm flex items-center justify-center gap-2 ${Pe>0?"bg-purple-600 hover:bg-purple-500 text-white":"bg-slate-700 text-slate-500 cursor-not-allowed"}`,children:[i.jsx(bt,{name:"plus",size:16}),""]})]})]})]})]})})]})}function m6({tasks:t,goals:e,events:r,updateTask:n,deleteTask:s,addTask:a,addGoal:A,addEvent:o}){const[l,c]=V.useState("day"),[d,p]=V.useState(new Date),[g,h]=V.useState(null),[b,w]=V.useState({}),[j,x]=V.useState(new Date),[y,B]=V.useState(null),[E,L]=V.useState(null),[U,M]=V.useState(null),[G,N]=V.useState(!1),[$,k]=V.useState(!1),[_,z]=V.useState("task"),[O,te]=V.useState(""),[ue,fe]=V.useState({title:"",colorId:"blue",allDay:!0,time:"09:00",endTime:"10:00",linkedType:"",linkedId:""});V.useEffect(()=>{const J=setInterval(()=>{x(new Date)},6e4);return()=>clearInterval(J)},[]);const ie=new Date(j);ie.setHours(0,0,0,0);const de=V.useMemo(()=>{const J=[],$e=ze=>[...ze].sort((We,lt)=>{if(We.progress===100&&lt.progress!==100)return 1;if(We.progress!==100&&lt.progress===100)return-1;const be=We.date||"9999-99-99",Se=lt.date||"9999-99-99";return be.localeCompare(Se)});e.forEach(ze=>{const We=t.filter(lt=>lt.linkedType==="goal"&&String(lt.linkedId)===String(ze.id)&&lt.progress!==100);We.length>0&&J.push({id:`goal-${ze.id}`,type:"goal",title:ze.title,date:ze.date,colorId:ze.colorId||"purple",progress:ze.progress||0,tasks:$e(We),icon:""})}),r.forEach(ze=>{const We=t.filter(lt=>lt.linkedType==="event"&&String(lt.linkedId)===String(ze.id)&&lt.progress!==100);We.length>0&&J.push({id:`event-${ze.id}`,type:"event",title:ze.title,date:ze.date,colorId:ze.colorId||"emerald",tasks:$e(We),icon:""})});const Ve=$e(t.filter(ze=>(!ze.linkedType||!ze.linkedId)&&ze.progress!==100));return Ve.length>0&&J.push({id:"unlinked",type:"unlinked",title:"",date:null,colorId:"blue",tasks:Ve,icon:""}),J.sort((ze,We)=>ze.date?We.date?new Date(ze.date)-new Date(We.date):-1:1)},[t,e,r]),ve=(()=>{let J=[];const $e=new Date(d);if(l==="day"){$e.setDate($e.getDate()-3);for(let Ve=0;Ve<14;Ve++){const ze=new Date($e);ze.setDate(ze.getDate()+Ve),J.push(ze)}}else if(l==="week"){const Ve=new Date($e),ze=Ve.getDay();Ve.setDate(Ve.getDate()-(ze===0?6:ze-1)),Ve.setDate(Ve.getDate()-7);for(let We=0;We<56;We++){const lt=new Date(Ve);lt.setDate(lt.getDate()+We),J.push(lt)}}else{$e.setMonth($e.getMonth()-1),$e.setDate(1);for(let Ve=0;Ve<180;Ve++){const ze=new Date($e);ze.setDate(ze.getDate()+Ve),J.push(ze)}}return J})(),I=J=>`${J.getFullYear()}-${String(J.getMonth()+1).padStart(2,"0")}-${String(J.getDate()).padStart(2,"0")}`,H=J=>{if(!J)return-1;new Date(J).setHours(0,0,0,0);for(let Ve=0;Ve<ve.length;Ve++)if(I(ve[Ve])===J)return Ve;return-1},re=ve.findIndex(J=>I(J)===I(ie)),Y=()=>{const J=new Date(d);l==="day"?J.setDate(J.getDate()-7):l==="week"?J.setDate(J.getDate()-28):J.setMonth(J.getMonth()-3),p(J)},le=()=>{const J=new Date(d);l==="day"?J.setDate(J.getDate()+7):l==="week"?J.setDate(J.getDate()+28):J.setMonth(J.getMonth()+3),p(J)},me=()=>{p(new Date)},ke=J=>{w($e=>({...$e,[J]:!$e[J]}))},Ee=(J,$e)=>{B($e),J.dataTransfer.effectAllowed="move",J.dataTransfer.setData("text/plain",$e.id)},Pe=()=>{B(null),L(null)},nt=(J,$e,Ve)=>{J.preventDefault(),J.dataTransfer.dropEffect="move",L({dateStr:$e,taskId:Ve})},ut=()=>{L(null)},he=async(J,$e)=>{if(J.preventDefault(),y&&n&&$e!==y.date)try{await n(y.id,{date:$e})}catch(Ve){console.error("Failed to update task date:",Ve)}B(null),L(null)},Ze=J=>{M({...J}),N(!0)},F=async()=>{if(!(!U||!U.title.trim()))try{await n(U.id,{title:U.title,date:U.date,time:U.time||"",endTime:U.endTime||"",progress:U.progress||0,colorId:U.colorId||"blue",allDay:U.allDay||!1,linkedType:U.linkedType||"",linkedId:U.linkedId||""}),N(!1),M(null)}catch(J){console.error("Failed to update task:",J)}},se=async()=>{if(!(!U||!s)&&window.confirm(`${U.title}`))try{await s(U.id),N(!1),M(null)}catch(J){console.error("Failed to delete task:",J)}},qe=36,X=40,ne=32,je=l==="day"?60:l==="week"?30:10;return i.jsxs("div",{className:"flex flex-col",children:[i.jsxs("div",{className:"bg-slate-800/40 rounded-xl border border-slate-700/50 p-4 md:p-6 overflow-hidden flex flex-col max-h-[calc(100vh-200px)] md:max-h-[calc(100vh-150px)]",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-2 mb-4",children:[i.jsxs("h3",{className:"text-sm font-bold text-slate-300 tracking-wider uppercase flex items-center gap-2",children:[i.jsx(bt,{name:"calendar",size:18,className:"text-blue-400"}),""]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:Y,className:"p-1.5 hover:bg-slate-700 rounded-lg transition-colors",children:i.jsx(bt,{name:"chevronLeft",size:18,className:"text-slate-400"})}),i.jsx("button",{onClick:me,className:"px-3 py-1 text-xs bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",children:""}),i.jsx("button",{onClick:le,className:"p-1.5 hover:bg-slate-700 rounded-lg transition-colors",children:i.jsx(bt,{name:"chevronRight",size:18,className:"text-slate-400"})})]}),i.jsx("div",{className:"flex bg-slate-800 rounded-lg p-1 border border-slate-700",children:["day","week","month"].map(J=>i.jsx("button",{onClick:()=>c(J),className:`px-3 py-1 text-xs transition-colors ${l===J?"bg-blue-600 text-white rounded shadow":"text-slate-400 hover:text-slate-200"}`,children:J==="day"?"":J==="week"?"":""},J))})]})]}),i.jsxs("div",{className:"flex-1 flex overflow-hidden rounded-lg border border-slate-700 bg-slate-900/30",children:[i.jsxs("div",{className:"w-56 flex-shrink-0 border-r border-slate-700 bg-slate-800/50 overflow-y-auto",children:[i.jsx("div",{className:"sticky top-0 z-10 bg-slate-800 border-b border-slate-700 px-3 flex items-center",style:{height:qe},children:i.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:" /  / "})}),de.map(J=>{const $e=b[J.id]!==!1,Ve=Tn(J.colorId);return i.jsxs("div",{children:[i.jsxs("div",{className:`flex items-center gap-2 px-3 border-b border-slate-700 cursor-pointer hover:bg-slate-700/50 transition-colors ${Ve.bgLight}`,style:{height:X},onClick:()=>ke(J.id),children:[i.jsx("span",{className:"text-slate-400 text-xs",children:$e?"":""}),i.jsx("span",{className:"text-sm",children:J.icon}),i.jsx("span",{className:"text-sm font-medium text-slate-200 truncate flex-1",children:J.title}),i.jsxs("span",{className:"text-[10px] text-slate-500",children:[J.tasks.length,""]})]}),$e&&J.tasks.map(ze=>{const We=Tn(ze.colorId||"blue");return i.jsxs("div",{className:`flex items-center gap-2 px-3 pl-8 border-b border-slate-800 hover:bg-slate-800/50 transition-colors cursor-pointer ${g===ze.id?"bg-slate-800/50":""}`,style:{height:ne},onMouseEnter:()=>h(ze.id),onMouseLeave:()=>h(null),onClick:()=>Ze(ze),children:[i.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${ze.progress===100?"bg-emerald-500":We.bg}`}),i.jsx("span",{className:`text-xs truncate flex-1 ${ze.progress===100?"text-slate-500 line-through":"text-slate-300"}`,children:ze.title}),ze.progress>0&&ze.progress<100&&i.jsxs("span",{className:"text-[10px] text-slate-500",children:[ze.progress,"%"]}),ze.progress===100&&i.jsx("span",{className:"text-[10px] text-emerald-500",children:""})]},ze.id)})]},J.id)}),de.length===0&&i.jsx("div",{className:"p-4 text-center text-slate-500 text-xs",children:""})]}),i.jsx("div",{className:"flex-1 overflow-auto relative",children:i.jsxs("div",{className:"relative",style:{minWidth:ve.length*je},children:[i.jsx("div",{className:"sticky top-0 z-10 bg-slate-800/95 border-b border-slate-700 flex",style:{height:qe},children:ve.map((J,$e)=>{const Ve=J.getDay(),ze=I(J)===I(ie),We=Ve===0||Ve===6,lt=l==="day"||l==="week"&&Ve===1||l==="month"&&J.getDate()===1;return i.jsx("div",{onClick:()=>{te(I(J)),fe({title:"",colorId:"blue"}),z("task"),k(!0)},className:`flex-shrink-0 flex items-center justify-center text-xs border-r border-slate-700/50 cursor-pointer hover:bg-slate-700/50 transition-colors ${ze?"bg-blue-600/20 text-blue-400 font-bold":We?"text-red-400":"text-slate-400"}`,style:{width:je},title:"",children:lt&&i.jsx("span",{className:"truncate px-0.5",children:l==="month"?`${J.getMonth()+1}`:`${J.getMonth()+1}/${J.getDate()}`})},$e)})}),de.map(J=>{const $e=b[J.id]!==!1,Ve=Tn(J.colorId),ze=H(J.date);return i.jsxs("div",{children:[i.jsx("div",{className:`flex border-b border-slate-700 ${Ve.bgLight}`,style:{height:X},children:ve.map((We,lt)=>{const be=lt===re,Se=lt===ze;return i.jsx("div",{className:`flex-shrink-0 border-r border-slate-700/30 flex items-center justify-center ${be?"bg-red-500/10":""}`,style:{width:je},children:Se&&i.jsx("div",{className:`w-3 h-3 rounded-full ${Ve.bg} shadow-lg`,title:J.title})},lt)})}),$e&&J.tasks.map(We=>{const lt=H(We.date),be=Tn(We.colorId||"blue"),Se=We.progress===100;return i.jsx("div",{className:`flex border-b border-slate-800/50 ${g===We.id?"bg-slate-800/30":""} ${(y==null?void 0:y.id)===We.id?"opacity-50":""}`,style:{height:ne},onMouseEnter:()=>h(We.id),onMouseLeave:()=>h(null),children:ve.map((ee,we)=>{const _e=we===re,Je=we===lt,Xe=I(ee),ye=(E==null?void 0:E.dateStr)===Xe&&(E==null?void 0:E.taskId)===We.id;return i.jsx("div",{className:`flex-shrink-0 border-r border-slate-800/30 flex items-center justify-center transition-colors ${_e?"bg-red-500/5":""} ${ye&&!Je?"bg-blue-500/20 ring-1 ring-blue-400/50":""}`,style:{width:je},onDragOver:Le=>nt(Le,Xe,We.id),onDragLeave:ut,onDrop:Le=>he(Le,Xe),children:Je&&i.jsx("div",{draggable:!0,onDragStart:Le=>Ee(Le,We),onDragEnd:Pe,onClick:()=>Ze(We),className:`rounded px-1 py-0.5 text-[10px] font-medium text-white truncate shadow cursor-pointer hover:brightness-110 hover:scale-105 transition-all ${Se?"bg-emerald-600":be.bg}`,style:{maxWidth:je-4},title:`${We.title}${We.progress?` (${We.progress}%)`:""}
  / `,children:Se?"":We.progress>0?`${We.progress}%`:""})},we)})},We.id)})]},J.id)}),re>=0&&(()=>{const J=j.getHours(),$e=j.getMinutes(),Ve=(J*60+$e)/(24*60),ze=re*je+Ve*je;return i.jsx("div",{className:"absolute top-0 w-0.5 bg-red-500 pointer-events-none z-20",style:{left:`${ze}px`,height:"100%",boxShadow:"0 0 8px rgba(239, 68, 68, 0.5)"}})})()]})})]}),i.jsxs("div",{className:"mt-4 flex items-center gap-6 text-xs text-slate-400",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:""}),i.jsx("span",{children:""})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:""}),i.jsx("span",{children:""})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:""}),i.jsx("span",{children:""})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 bg-emerald-500 rounded"}),i.jsx("span",{children:""})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-0.5 h-4 bg-red-500"}),i.jsx("span",{children:""})]})]})]}),G&&U&&i.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:()=>N(!1),children:i.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 w-full max-w-md border border-slate-700 shadow-xl",onClick:J=>J.stopPropagation(),children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-200 mb-4 flex items-center gap-2",children:[i.jsx(bt,{name:"edit",size:20,className:"text-blue-400"}),""]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:""}),i.jsx("input",{type:"text",value:U.title||"",onChange:J=>M({...U,title:J.target.value}),className:"w-full bg-slate-900/50 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:""})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:""}),i.jsx("input",{type:"date",value:U.date||"",onChange:J=>M({...U,date:J.target.value}),className:"w-full bg-slate-900/50 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"edit-allday",checked:U.allDay||!1,onChange:J=>M({...U,allDay:J.target.checked,time:"",endTime:""}),className:"w-4 h-4 rounded bg-slate-900 border-slate-700 text-blue-500 focus:ring-blue-500"}),i.jsx("label",{htmlFor:"edit-allday",className:"text-sm text-slate-300",children:""})]}),!U.allDay&&i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:""}),i.jsx("input",{type:"time",value:U.time||"",onChange:J=>M({...U,time:J.target.value}),className:"w-full bg-slate-900/50 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:""}),i.jsx("input",{type:"time",value:U.endTime||"",onChange:J=>M({...U,endTime:J.target.value}),className:"w-full bg-slate-900/50 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-xs text-slate-400 mb-1",children:[": ",U.progress||0,"%"]}),i.jsx("input",{type:"range",min:"0",max:"100",step:"10",value:U.progress||0,onChange:J=>M({...U,progress:parseInt(J.target.value)}),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-blue-500"}),i.jsxs("div",{className:"flex justify-between text-[10px] text-slate-500 mt-1",children:[i.jsx("span",{children:"0%"}),i.jsx("span",{children:"50%"}),i.jsx("span",{children:"100%"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-400 mb-2",children:""}),i.jsx(gu,{value:U.colorId||"blue",onChange:J=>M({...U,colorId:J})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:""}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("select",{value:U.linkedType||"",onChange:J=>M({...U,linkedType:J.target.value,linkedId:""}),className:"bg-slate-900/50 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:border-blue-500 outline-none",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"event",children:" "}),i.jsx("option",{value:"goal",children:" "})]}),i.jsxs("select",{value:U.linkedId||"",onChange:J=>M({...U,linkedId:J.target.value}),disabled:!U.linkedType,className:"bg-slate-900/50 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:border-blue-500 outline-none disabled:opacity-50",children:[i.jsx("option",{value:"",children:"..."}),U.linkedType==="event"&&(r==null?void 0:r.map(J=>i.jsxs("option",{value:J.id,children:[J.date?`${J.date} - `:"",J.title]},J.id))),U.linkedType==="goal"&&(e==null?void 0:e.map(J=>i.jsxs("option",{value:J.id,children:[J.date?`${J.date} - `:"",J.title]},J.id)))]})]})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsxs("button",{onClick:se,className:"px-4 py-2 bg-red-600/20 text-red-400 rounded-lg hover:bg-red-600/30 transition-colors text-sm",children:[i.jsx(bt,{name:"trash",size:16,className:"inline mr-1"}),""]}),i.jsx("div",{className:"flex-1"}),i.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 bg-slate-700 text-slate-300 rounded-lg hover:bg-slate-600 transition-colors text-sm",children:""}),i.jsx("button",{onClick:F,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-500 transition-colors text-sm",children:""})]})]})}),$&&i.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:()=>k(!1),children:i.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 w-full max-w-md border border-slate-700 shadow-xl",onClick:J=>J.stopPropagation(),children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-200 mb-4 flex items-center gap-2",children:[i.jsx(bt,{name:"plus",size:20,className:"text-emerald-400"}),""]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-400 mb-2",children:""}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>z("task"),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-1 ${_==="task"?"bg-blue-600 text-white":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:" "}),i.jsx("button",{onClick:()=>z("goal"),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-1 ${_==="goal"?"bg-purple-600 text-white":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:" "}),i.jsx("button",{onClick:()=>z("event"),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-1 ${_==="event"?"bg-emerald-600 text-white":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:" "})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:""}),i.jsx("input",{type:"text",value:ue.title,onChange:J=>fe({...ue,title:J.target.value}),className:"w-full bg-slate-900/50 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none",placeholder:_==="task"?"":_==="goal"?"":"",autoFocus:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:""}),i.jsx("input",{type:"date",value:O,onChange:J=>te(J.target.value),className:"w-full bg-slate-900/50 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:border-blue-500 outline-none"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"roadmap-add-allday",checked:ue.allDay,onChange:J=>fe({...ue,allDay:J.target.checked}),className:"w-4 h-4 rounded bg-slate-900 border-slate-700 text-blue-500 focus:ring-blue-500"}),i.jsx("label",{htmlFor:"roadmap-add-allday",className:"text-sm text-slate-300",children:""})]}),!ue.allDay&&i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:""}),i.jsx("input",{type:"time",value:ue.time,onChange:J=>{let $e=ue.endTime;const Ve=J.target.value;if(Ve&&(!$e||Ve>=$e)){const[ze,We]=Ve.split(":").map(Number);$e=`${String(Math.min(ze+1,23)).padStart(2,"0")}:${String(We).padStart(2,"0")}`}fe({...ue,time:Ve,endTime:$e})},className:"w-full bg-slate-900/50 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:border-blue-500 outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:""}),i.jsx("input",{type:"time",value:ue.endTime,onChange:J=>fe({...ue,endTime:J.target.value}),className:"w-full bg-slate-900/50 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:border-blue-500 outline-none"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-400 mb-2",children:""}),i.jsx(gu,{value:ue.colorId,onChange:J=>fe({...ue,colorId:J})})]}),_==="task"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:""}),i.jsxs("select",{value:ue.linkedType&&ue.linkedId?`${ue.linkedType}:${ue.linkedId}`:"",onChange:J=>{const $e=J.target.value;if(!$e)fe({...ue,linkedType:"",linkedId:""});else{const[Ve,ze]=$e.split(":");fe({...ue,linkedType:Ve,linkedId:ze})}},className:"w-full bg-slate-900/50 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:border-blue-500 outline-none",children:[i.jsx("option",{value:"",children:""}),r.length>0&&i.jsx("optgroup",{label:" ",children:r.map(J=>i.jsxs("option",{value:`event:${J.id}`,children:[J.title," (",J.date,")"]},`event-${J.id}`))}),e.length>0&&i.jsx("optgroup",{label:" ",children:e.map(J=>i.jsx("option",{value:`goal:${J.id}`,children:J.title},`goal-${J.id}`))})]})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{onClick:()=>k(!1),className:"flex-1 px-4 py-2 bg-slate-700 text-slate-300 rounded-lg hover:bg-slate-600 transition-colors text-sm",children:""}),i.jsx("button",{onClick:async()=>{if(!ue.title.trim()||!O)return;const J={title:ue.title.trim(),date:O,colorId:ue.colorId,color:Tn(ue.colorId).bg,allDay:ue.allDay,time:ue.allDay?"":ue.time,endTime:ue.allDay?"":ue.endTime};try{_==="task"&&a?await a({...J,progress:0,tag:"",linkedType:ue.linkedType||"",linkedId:ue.linkedId||""}):_==="goal"&&A?await A({...J,progress:0}):_==="event"&&o&&await o({...J}),k(!1),fe({title:"",colorId:"blue",allDay:!0,time:"09:00",endTime:"10:00",linkedType:"",linkedId:""})}catch($e){console.error("Failed to add item:",$e)}},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-500 transition-colors text-sm",children:""})]})]})]})})]})}function x6(){const[t,e]=V.useState(!1),[r,n]=V.useState(!1),[s,a]=V.useState(null),[A,o]=V.useState([]),[l,c]=V.useState({}),[d,p]=V.useState(!1),[g,h]=V.useState([]),[b,w]=V.useState(!0),j="http://localhost:5600/api",x=["#3b82f6","#8b5cf6","#10b981","#f97316","#06b6d4","#ec4899","#f59e0b","#84cc16","#14b8a6","#6366f1","#ef4444","#22c55e","#a855f7","#0ea5e9","#f43f5e"],y=O=>x[O%x.length],B=async()=>{try{if((await fetch(`${j}/0/info`,{signal:AbortSignal.timeout(3e3)})).ok){e(!0),a(null);const te=await E();return te&&te.length>0&&await L(te),!0}}catch{e(!1),a("ActivityWatchCORSActivityWatch")}return!1},E=async()=>{try{const O=await fetch(`${j}/0/buckets`);if(O.ok){const te=await O.json(),ue=Object.keys(te);return h(ue),ue}}catch(O){console.error("Failed to fetch buckets:",O)}return[]},L=async O=>{n(!0),a(null);try{const te=new Date;te.setHours(0,0,0,0);const ue=te.toISOString(),fe=O.find(ge=>ge.startsWith("aw-watcher-window")||ge.includes("window")),ie=O.find(ge=>ge.startsWith("aw-watcher-web")||ge.includes("chrome")||ge.includes("firefox"));if(console.log("Fetching from buckets:",{windowBucket:fe,webBucket:ie}),!fe&&!ie){a(`: ${O.join(", ")}`),n(!1);return}let de=[];if(fe)try{const ge=await fetch(`${j}/0/buckets/${fe}/events?start=${ue}&limit=500`);if(ge.ok){const ve=await ge.json();console.log("Window events:",ve.length),de=[...de,...ve]}}catch(ge){console.error("Window bucket fetch failed:",ge)}if(ie)try{const ge=await fetch(`${j}/0/buckets/${ie}/events?start=${ue}&limit=500`);if(ge.ok){const ve=await ge.json();console.log("Web events:",ve.length);const I=ve.map(H=>{var re,Y,le;return{...H,data:{app:(re=H.data)!=null&&re.url?new URL(H.data.url).hostname:"Browser",title:((Y=H.data)==null?void 0:Y.title)||((le=H.data)==null?void 0:le.url)||""}}});de=[...de,...I]}}catch(ge){console.error("Web bucket fetch failed:",ge)}if(console.log("Total events:",de.length),de.length>0){const ge=M(de);console.log("Processed events:",ge.length),o(ge),G(ge)}else o([]),setTodayStats({})}catch(te){console.error("Failed to fetch events:",te),a(`: ${te.message}`)}n(!1)},U=async()=>{!t||g.length===0||await L(g)},M=O=>{const te={};return O.forEach(ue=>{var I,H;const fe=((I=ue.data)==null?void 0:I.app)||"Unknown",ie=((H=ue.data)==null?void 0:H.title)||"",de=ue.duration||0,ge=new Date(ue.timestamp),ve=`${fe}_${ge.getHours()}`;te[ve]||(te[ve]={id:ve,app:fe,title:ie.substring(0,100),duration:0,startTime:ge,endTime:ge,events:[]}),te[ve].duration+=de,te[ve].events.push({title:ie,duration:de,timestamp:ge}),ge<te[ve].startTime&&(te[ve].startTime=ge),ge>te[ve].endTime&&(te[ve].endTime=ge)}),Object.values(te).filter(ue=>ue.duration>60).sort((ue,fe)=>fe.startTime-ue.startTime)},G=O=>{const te={};O.forEach(ue=>{const fe=ue.app;te[fe]||(te[fe]=0),te[fe]+=ue.duration}),c(te)};V.useEffect(()=>{B()},[]),V.useEffect(()=>{if(!t||!b)return;U();const O=setInterval(U,3e4);return()=>clearInterval(O)},[t,g,b]);const N=O=>{const te=Math.floor(O/3600),ue=Math.floor(O%3600/60);return te>0?`${te}${ue}`:`${ue}`},$=O=>{const te=O.toLowerCase();return te.includes("chrome")||te.includes("firefox")||te.includes("safari")||te.includes("edge")?"":te.includes("code")||te.includes("studio")||te.includes("vim")||te.includes("sublime")?"":te.includes("slack")||te.includes("discord")||te.includes("teams")?"":te.includes("zoom")||te.includes("meet")?"":te.includes("mail")||te.includes("outlook")||te.includes("thunderbird")?"":te.includes("finder")||te.includes("explorer")?"":te.includes("terminal")||te.includes("iterm")||te.includes("cmd")?"":te.includes("figma")||te.includes("sketch")||te.includes("photoshop")?"":te.includes("notion")||te.includes("obsidian")||te.includes("evernote")?"":te.includes("spotify")||te.includes("music")?"":te.includes("twitter")||te.includes("x.com")?"":te.includes("youtube")?"":""},k=Object.values(l).reduce((O,te)=>O+te,0),_=Object.entries(l).sort((O,te)=>te[1]-O[1]),z=_.slice(0,10);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-slate-800/40 rounded-xl border border-slate-700/50 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${t?"bg-emerald-500":"bg-red-500"}`}),i.jsxs("h3",{className:"text-lg font-bold text-slate-200",children:["ActivityWatch ",t?"":""]}),r&&i.jsx("span",{className:"text-xs text-slate-500",children:"..."})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-400",children:[i.jsx("input",{type:"checkbox",checked:b,onChange:O=>w(O.target.checked),className:"rounded border-slate-600 bg-slate-900 text-blue-500"}),""]}),i.jsx("button",{onClick:U,disabled:!t||r,className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 disabled:bg-slate-700 text-white rounded-lg text-sm transition-colors",children:""}),i.jsx("button",{onClick:()=>p(!d),className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-slate-200 rounded-lg text-sm transition-colors",children:""})]})]}),s&&i.jsx("div",{className:"bg-red-900/30 border border-red-700/50 rounded-lg p-4 mb-4",children:i.jsx("p",{className:"text-red-400 text-sm",children:s})}),d&&i.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4 mb-4",children:[i.jsx("h4",{className:"font-medium text-slate-200 mb-3",children:" ActivityWatch"}),i.jsxs("ol",{className:"space-y-2 text-sm text-slate-400",children:[i.jsxs("li",{children:["1. ",i.jsx("a",{href:"https://activitywatch.net/downloads/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"ActivityWatch"}),""]}),i.jsx("li",{children:"2. "}),i.jsx("li",{children:"3. "}),i.jsx("li",{children:"4. "})]}),i.jsxs("div",{className:"mt-4 flex gap-2",children:[i.jsx("a",{href:"https://activitywatch.net/downloads/",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg text-sm inline-block",children:""}),i.jsx("button",{onClick:B,className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm",children:""})]}),g.length>0&&i.jsxs("div",{className:"mt-4 p-3 bg-slate-800 rounded-lg",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-2",children:":"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(O=>i.jsx("span",{className:"text-xs bg-slate-700 px-2 py-1 rounded",children:O},O))})]})]}),t&&i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4 text-center",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-1",children:""}),i.jsx("div",{className:"text-xl font-bold text-blue-400",children:A.length}),i.jsx("div",{className:"text-xs text-slate-500",children:""})]}),i.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4 text-center",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-1",children:""}),i.jsx("div",{className:"text-xl font-bold text-emerald-400",children:N(k)})]}),i.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4 text-center",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-1",children:""}),i.jsx("div",{className:"text-xl font-bold text-purple-400",children:Object.keys(l).length})]})]})]}),t&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-slate-800/40 rounded-xl border border-slate-700/50 p-6",children:[i.jsx("h3",{className:"text-sm font-bold text-slate-400 mb-4",children:""}),z.length>0?i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsxs("div",{className:"relative w-40 h-40 flex-shrink-0",children:[i.jsx("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90",children:(()=>{let O=0;return z.map(([te,ue],fe)=>{const ie=ue/k*100,de=`${ie} ${100-ie}`,ge=i.jsx("circle",{cx:"18",cy:"18",r:"15.915",fill:"transparent",stroke:y(fe),strokeWidth:"3.5",strokeDasharray:de,strokeDashoffset:-O,className:"transition-all duration-300"},te);return O+=ie,ge})})()}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-lg font-bold text-slate-200",children:N(k)}),i.jsx("div",{className:"text-xs text-slate-500",children:""})]})})]}),i.jsx("div",{className:"flex-1 space-y-1 max-h-40 overflow-y-auto",children:z.map(([O,te],ue)=>{const fe=k>0?Math.round(te/k*100):0;return i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:y(ue)}}),i.jsxs("span",{className:"text-slate-300 flex-1 truncate",children:[$(O)," ",O]}),i.jsxs("span",{className:"text-slate-500 text-xs",children:[fe,"%"]})]},O)})})]}):i.jsx("div",{className:"text-center text-slate-500 py-8",children:""})]}),i.jsxs("div",{className:"bg-slate-800/40 rounded-xl border border-slate-700/50 p-6",children:[i.jsx("h3",{className:"text-sm font-bold text-slate-400 mb-4",children:"TOP 10"}),i.jsxs("div",{className:"space-y-3",children:[z.map(([O,te],ue)=>{var de;const fe=((de=z[0])==null?void 0:de[1])||1,ie=te/fe*100;return i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("span",{className:"text-slate-300 truncate flex items-center gap-2",children:[$(O)," ",O]}),i.jsx("span",{className:"text-slate-400 flex-shrink-0 ml-2",children:N(te)})]}),i.jsx("div",{className:"h-2 bg-slate-700/50 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full rounded-full transition-all duration-300",style:{width:`${ie}%`,backgroundColor:y(ue)}})})]},O)}),z.length===0&&i.jsx("div",{className:"text-center text-slate-500 py-8",children:""})]})]})]}),i.jsxs("div",{className:"bg-slate-800/40 rounded-xl border border-slate-700/50 p-6",children:[i.jsx("h3",{className:"text-sm font-bold text-slate-400 mb-4",children:""}),i.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[A.map((O,te)=>{const ue=_.findIndex(([fe])=>fe===O.app);return i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-900/50 rounded-lg",children:[i.jsx("div",{className:"w-1 h-10 rounded-full flex-shrink-0",style:{backgroundColor:y(ue>=0?ue:te)}}),i.jsx("span",{className:"text-xl flex-shrink-0",children:$(O.app)}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-medium text-slate-200 truncate",children:O.app}),i.jsx("div",{className:"text-xs text-slate-500 truncate",children:O.title||"()"})]}),i.jsxs("div",{className:"text-right flex-shrink-0",children:[i.jsx("div",{className:"text-sm text-slate-300",children:N(O.duration)}),i.jsx("div",{className:"text-xs text-slate-500",children:O.startTime.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})})]})]},O.id)}),A.length===0&&i.jsx("div",{className:"text-center text-slate-500 py-8",children:""})]})]})]})]})}function v6({tasks:t,goals:e,transactions:r}){const n=V.useMemo(()=>{const A=["","","","","","",""],o=new Date;return Array.from({length:7}).map((l,c)=>{const d=new Date(o);d.setDate(d.getDate()-(6-c));const p=d.toISOString().split("T")[0],g=t.filter(b=>b.date===p&&b.progress===100).length,h=t.filter(b=>b.date===p).length;return{day:A[d.getDay()],date:p,completed:g,total:h,percentage:h>0?Math.round(g/h*100):0}})},[t]),s=V.useMemo(()=>{const A=t.filter(p=>p.progress===100).length,o=t.length,l=o>0?Math.round(A/o*100):0,c=r.filter(p=>p.type==="income").reduce((p,g)=>p+g.amount,0),d=r.filter(p=>p.type==="expense").reduce((p,g)=>p+g.amount,0);return{completedTasks:A,totalTasks:o,completionRate:l,activeGoals:e.length,totalIncome:c,totalExpense:d,netSavings:c-d}},[t,e,r]),a=V.useMemo(()=>{const A=new Date;return Array.from({length:30}).map((o,l)=>{const c=new Date(A);c.setDate(c.getDate()-(29-l));const d=c.toISOString().split("T")[0],g=t.filter(h=>h.date===d).filter(h=>h.progress===100).length;return{date:d,level:g===0?0:g<2?1:g<4?2:3}})},[t]);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-slate-800/40 rounded-xl border border-slate-700/50 p-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/20 flex items-center justify-center",children:i.jsx(bt,{name:"check",size:20,className:"text-blue-400"})}),i.jsx("div",{className:"text-sm text-slate-400",children:""})]}),i.jsxs("div",{className:"text-2xl font-bold text-slate-200",children:[s.completedTasks," ",i.jsxs("span",{className:"text-sm text-slate-500",children:["/ ",s.totalTasks]})]})]}),i.jsxs("div",{className:"bg-slate-800/40 rounded-xl border border-slate-700/50 p-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-500/20 flex items-center justify-center",children:i.jsx(bt,{name:"trendingUp",size:20,className:"text-emerald-400"})}),i.jsx("div",{className:"text-sm text-slate-400",children:""})]}),i.jsxs("div",{className:"text-2xl font-bold text-emerald-400",children:[s.completionRate,"%"]})]}),i.jsxs("div",{className:"bg-slate-800/40 rounded-xl border border-slate-700/50 p-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-500/20 flex items-center justify-center",children:i.jsx(bt,{name:"target",size:20,className:"text-purple-400"})}),i.jsx("div",{className:"text-sm text-slate-400",children:""})]}),i.jsx("div",{className:"text-2xl font-bold text-purple-400",children:s.activeGoals})]}),i.jsxs("div",{className:"bg-slate-800/40 rounded-xl border border-slate-700/50 p-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-yellow-500/20 flex items-center justify-center",children:i.jsx(bt,{name:"wallet",size:20,className:"text-yellow-400"})}),i.jsx("div",{className:"text-sm text-slate-400",children:""})]}),i.jsxs("div",{className:`text-2xl font-bold ${s.netSavings>=0?"text-emerald-400":"text-red-400"}`,children:["",s.netSavings.toLocaleString()]})]})]}),i.jsxs("div",{className:"bg-slate-800/40 rounded-xl border border-slate-700/50 p-6",children:[i.jsx("h3",{className:"text-sm font-bold text-slate-400 mb-4",children:""}),i.jsx("div",{className:"flex items-end justify-between gap-2 h-40",children:n.map((A,o)=>i.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2",children:[i.jsx("div",{className:"w-full bg-slate-700/50 rounded-lg overflow-hidden h-32 flex flex-col justify-end",children:i.jsx("div",{className:"bg-gradient-to-t from-blue-600 to-blue-400 transition-all",style:{height:`${Math.max(A.percentage,5)}%`}})}),i.jsx("div",{className:"text-xs text-slate-500",children:A.day}),i.jsxs("div",{className:"text-xs text-slate-400",children:[A.completed,"/",A.total]})]},o))})]}),i.jsxs("div",{className:"bg-slate-800/40 rounded-xl border border-slate-700/50 p-6",children:[i.jsx("h3",{className:"text-sm font-bold text-slate-400 mb-4",children:"30"}),i.jsx("div",{className:"flex gap-1 flex-wrap",children:a.map((A,o)=>i.jsx("div",{title:`${A.date}: Level ${A.level}`,className:`w-4 h-4 rounded-sm ${A.level===0?"bg-slate-700":A.level===1?"bg-emerald-900":A.level===2?"bg-emerald-700":"bg-emerald-500"}`},o))}),i.jsxs("div",{className:"flex items-center gap-2 mt-4 text-xs text-slate-500",children:[i.jsx("span",{children:""}),i.jsx("div",{className:"w-3 h-3 rounded-sm bg-slate-700"}),i.jsx("div",{className:"w-3 h-3 rounded-sm bg-emerald-900"}),i.jsx("div",{className:"w-3 h-3 rounded-sm bg-emerald-700"}),i.jsx("div",{className:"w-3 h-3 rounded-sm bg-emerald-500"}),i.jsx("span",{children:""})]})]})]})}function w6({tasks:t,goals:e,transactions:r,events:n,addTask:s,addEvent:a,addGoal:A,updateTask:o,deleteTask:l,diaryEntries:c,addDiaryEntry:d,settings:p}){const g=new Date().toISOString().split("T")[0],[h,b]=V.useState(g),[w,j]=V.useState([]),[x,y]=V.useState([]),[B,E]=V.useState(!1),[L,U]=V.useState(!1),[M,G]=V.useState(!1),[N,$]=V.useState(""),[k,_]=V.useState(""),[z,O]=V.useState(!1),[te,ue]=V.useState(!0),[fe,ie]=V.useState(!1),[de,ge]=V.useState(()=>window.localStorage.getItem("lifedash_voiceEnabled")==="true"),[ve,I]=V.useState(!1),[H,re]=V.useState([]),[Y,le]=V.useState([]),me=V.useRef(null),ke=V.useRef(null),Ee=V.useRef(null),Pe=V.useMemo(()=>(c||[]).filter(be=>be.content&&be.content.includes("")).sort((be,Se)=>new Date(Se.date)-new Date(be.date)),[c]);V.useEffect(()=>{window.localStorage.setItem("lifedash_voiceEnabled",de.toString())},[de]);const nt=localStorage.getItem("ai_api_key")||"",ut=V.useRef(null),he=async be=>{if(!de)return;Ze();const Se=be.replace(/<<<ACTION>>>[\s\S]*?<<<END_ACTION>>>/g,"").trim();if(!Se)return;const ee=Se.length>5e3?Se.substring(0,5e3):Se;I(!0);try{const we=await fetch(`https://texttospeech.googleapis.com/v1/text:synthesize?key=${nt}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:{text:ee},voice:{languageCode:"ja-JP",name:"ja-JP-Wavenet-C"},audioConfig:{audioEncoding:"MP3",speakingRate:1.1,pitch:-2}})});if(!we.ok)throw new Error("TTS API error");const Je=(await we.json()).audioContent,Xe=new Blob([Uint8Array.from(atob(Je),Le=>Le.charCodeAt(0))],{type:"audio/mp3"}),ye=URL.createObjectURL(Xe);ut.current&&(ut.current.src=ye,ut.current.onended=()=>{I(!1),URL.revokeObjectURL(ye)},ut.current.onerror=()=>{I(!1),URL.revokeObjectURL(ye)},await ut.current.play())}catch(we){console.error("TTS error:",we),I(!1)}},Ze=()=>{ut.current&&(ut.current.pause(),ut.current.currentTime=0),I(!1)},F=be=>new Promise((Se,ee)=>{const we=new FileReader;we.onload=()=>{const _e=we.result.split(",")[1];Se(_e)},we.onerror=ee,we.readAsDataURL(be)}),se=be=>{const Se=Array.from(be.target.files||[]);if(Se.length===0)return;const ee=10,we=H.length,_e=ee-we;if(_e<=0){alert("10");return}const Je=Se.slice(0,_e),Xe=[],ye=[];let Le=0;Je.forEach(ft=>{if(ft.size>10*1024*1024){alert(`${ft.name}10MB`),Le++,Le===Je.length&&Xe.length>0&&(re(wt=>[...wt,...Xe]),le(wt=>[...wt,...ye]));return}const At=new FileReader;At.onload=wt=>{Xe.push(ft),ye.push(wt.target.result),Le++,Le===Je.length&&(re(pt=>[...pt,...Xe]),le(pt=>[...pt,...ye]))},At.readAsDataURL(ft)}),Ee.current&&(Ee.current.value="")},qe=be=>{re(Se=>Se.filter((ee,we)=>we!==be)),le(Se=>Se.filter((ee,we)=>we!==be))},X=()=>{re([]),le([]),Ee.current&&(Ee.current.value="")},ne={role:"assistant",content:`

`},je=be=>{const Se=new Date(be),ee=["","","","","","",""];return`${Se.getMonth()+1}/${Se.getDate()}${ee[Se.getDay()]}`};V.useEffect(()=>{(async()=>{ue(!0);try{const Se=JSON.parse(window.localStorage.getItem("lifedash_chatMessages")||"{}"),ee=Se[h]||[];ee.length>0?j(ee):j(h===g?[ne]:[]);const we=Object.keys(Se).filter(_e=>Se[_e].length>0).sort((_e,Je)=>Je.localeCompare(_e));y(we)}catch(Se){console.error("Error loading messages:",Se),j(h===g?[ne]:[])}finally{ue(!1)}})()},[h]);const J=be=>{try{const Se=be.filter(_e=>_e.content&&_e.content.trim()),ee=JSON.parse(window.localStorage.getItem("lifedash_chatMessages")||"{}");ee[h]=Se,window.localStorage.setItem("lifedash_chatMessages",JSON.stringify(ee));const we=Object.keys(ee).filter(_e=>ee[_e].length>0).sort((_e,Je)=>Je.localeCompare(_e));y(we)}catch(Se){console.error("Error saving messages:",Se)}},$e=async(be=null,Se=!1)=>{var wt,pt,xt,yt,zt,kt;const ee=localStorage.getItem("ai_api_key")||"";if(!ee)return console.error("API"),{error:"API"};let we=be;if(!we){const Ut=new Date;Ut.setDate(Ut.getDate()-1),we=Ut.toISOString().split("T")[0]}if((c||[]).find(Ut=>Ut.date===we&&Ut.content&&Ut.content.includes(""))&&!Se)return console.log(`${we}`),{exists:!0,date:we};const Xe=JSON.parse(window.localStorage.getItem("lifedash_chatMessages")||"{}")[we]||[],ye=t.filter(Ut=>Ut.date===we),Le=ye.filter(Ut=>Ut.progress===100),ft=(n==null?void 0:n.filter(Ut=>Ut.date===we))||[],At=`


- : 
- 
- : 

${we}
- : ${ye.length}: ${Le.length}
${ye.map(Ut=>`  - ${Ut.title}: ${Ut.progress===100?"":`${Ut.progress||0}%`}`).join(`
`)||"  - "}

- :
${ft.map(Ut=>`  - ${Ut.title}`).join(`
`)||"  - "}


${Xe.slice(-10).map(Ut=>{var br;return`${Ut.role==="assistant"?"":""}: ${((br=Ut.content)==null?void 0:br.substring(0,200))||""}`}).join(`
`)||""}


- 
- 
- 
- 200400
- 
- `;try{ie(!0);const Ut=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${ee}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:At}]}],generationConfig:{temperature:.9,maxOutputTokens:1024}})}),br=await Ut.json();if(!Ut.ok)throw new Error(((wt=br.error)==null?void 0:wt.message)||"API Error");const Q=((kt=(zt=(yt=(xt=(pt=br.candidates)==null?void 0:pt[0])==null?void 0:xt.content)==null?void 0:yt.parts)==null?void 0:zt[0])==null?void 0:kt.text)||"";if(Q&&d)return await d({date:we,content:Q,isFavorite:!1}),console.log(":",we),{success:!0,date:we}}catch(Ut){return console.error(":",Ut),{error:Ut.message}}finally{ie(!1)}};V.useEffect(()=>{const be=()=>{const ee=new Date,we=ee.getHours(),_e=ee.getMinutes();if(we===0&&_e<=5){const Je=window.localStorage.getItem("lifedash_lastDiaryCheck"),Xe=ee.toISOString().split("T")[0];Je!==Xe&&(window.localStorage.setItem("lifedash_lastDiaryCheck",Xe),$e())}};be();const Se=setInterval(be,6e4);return()=>clearInterval(Se)},[t,n,c,d]),V.useEffect(()=>{var be;(be=me.current)==null||be.scrollIntoView({behavior:"smooth"})},[w]);const Ve=()=>{const be=new Date,Se=be.toISOString().split("T")[0],ee=(Q,Te)=>{const st=new Date(Q);return st.setDate(st.getDate()+Te),st.toISOString().split("T")[0]},we=ee(Se,1);ee(Se,2);const _e=ee(Se,7),Je=Q=>["","","","","","",""][new Date(Q).getDay()],Xe=t.filter(Q=>Q.date===Se),ye=t.filter(Q=>Q.date===we),Le=t.filter(Q=>Q.date>Se&&Q.date<=_e).sort((Q,Te)=>Q.date.localeCompare(Te.date)),ft=t.filter(Q=>Q.progress<100&&Q.date>=Se).sort((Q,Te)=>Q.date.localeCompare(Te.date)),At=t.filter(Q=>Q.progress<100&&Q.date<Se),wt=t.filter(Q=>Q.progress===100),pt=(n==null?void 0:n.filter(Q=>Q.date===Se))||[],xt=(n==null?void 0:n.filter(Q=>Q.date===we))||[],yt=(n==null?void 0:n.filter(Q=>Q.date>Se&&Q.date<=_e).sort((Q,Te)=>Q.date.localeCompare(Te.date)))||[];n!=null&&n.filter(Q=>Q.date>=Se).sort((Q,Te)=>Q.date.localeCompare(Te.date)),e.filter(Q=>(Q.progress||0)<100),e.filter(Q=>Q.progress===100);const zt=r.filter(Q=>Q.type==="income").reduce((Q,Te)=>Q+(Te.amount||0),0),kt=r.filter(Q=>Q.type==="expense").reduce((Q,Te)=>Q+(Te.amount||0),0),Ut=Q=>`- ${Q.date}${Je(Q.date)}${Q.time?` ${Q.time}`:""}: ${Q.title}${Q.tag?` [${Q.tag}]`:""} (: ${Q.progress||0}%)`,br=Q=>`- ${Q.date}${Je(Q.date)}${Q.time?` ${Q.time}${Q.endTime?`${Q.endTime}`:""}`:""}: ${Q.title}`;return`
${be.toLocaleString("ja-JP")}${Je(Se)}

===  ===

${Se}${Je(Se)}${Xe.length}
${Xe.map(Ut).join(`
`)||"- "}

${pt.length}
${pt.map(br).join(`
`)||"- "}

${we}${Je(we)}${ye.length}
${ye.map(Ut).join(`
`)||"- "}

${xt.length}
${xt.map(br).join(`
`)||"- "}

1${Le.length}
${Le.slice(0,15).map(Ut).join(`
`)||"- "}

1${yt.length}
${yt.slice(0,15).map(br).join(`
`)||"- "}

${At.length}
${At.map(Ut).join(`
`)||"- "}

===  ===


- : ${t.length}
- : ${wt.length}
- : ${ft.length}
- : ${At.length}

${e.length}
${e.map(Q=>`- ${Q.title} (: ${Q.progress||0}%)${Q.date?` : ${Q.date}`:""}`).join(`
`)||"- "}


- : ${zt.toLocaleString()}
- : ${kt.toLocaleString()}
- : ${(zt-kt).toLocaleString()}
`},ze=async(be,Se,ee=[])=>{var Le,ft,At,wt,pt,xt,yt,zt,kt,Ut;const we=localStorage.getItem("ai_api_key")||"",_e=localStorage.getItem("ai_provider")||"gemini";if(!we)return{response:`API

Gemini API

Google AI Studio: https://aistudio.google.com/apikey`,action:null};const Je=(p==null?void 0:p.username)||"",Xe=`${Je}

  


- IQ180
- 10
- 5
- 
- 

  

 
1. 
2. 
3. ${Je}
4. 
5. 
6. 
7. 

 
- 
- 
- 
- 

 
- 
- 
- 
- 
- 

  

 
1. 
2. ${Je}
3. ${Je}
4. 
5. 

 
- 
- 
- 
- 
- 

 ${Je}
- 
- 
- 


- 
- ${Je}
- 
- 

 4 

4
${Je}

 1: Dr. 
- 
- 
- 
- 
- 
- 

 2: ICF-MCC
- 
- 
- 
- 5
- 
- 
- ${Je}

 3: 
- 
- 
- 
- 
- 
- 

 4: 23
- 
- 184123
- 
- 
- 

5


- 
- 
- 
- 
- 


- 
- 
- 
- 
- 
- 


- 
- 
- 
- 
- 


- 
  - /
  - 
  - 
  - 1
- 
  - 
  - 
  - 
- 
  - 
  - 
  - 
  - 
- 


- 
- 
- 
- 
- 
- 


- 
- 
- 
- 

- 23

 5: 
- 
- 
- 
- 
- 


- 
- 
- 
- 
- 
- 
- 

 6: 
- 
- 4
- 

FP
- 
- 6
- 
- 
- NG
- iDeCoNISA
- 

 7: 
- 40
- 
- 
- 


- 
- 
- 9
- 
- 
- 
- 
- 
- 

 8: 
- 
- 
- 


- 2166
- 
- 2
- 
- 
- 
- 
- ${Je}

 9: DaiGo
- 
- 
- 

DaiGo
- 
- 
- 7-8NG
- 2-3HIIT
- 
- if-then
- 
- MACMeasurable, Actionable, Competent
- 


- ${Je}  
- ${Je}    
- ${Je}  
- ${Je}  
- ${Je}  
- ${Je}  FP
- ${Je}  
- ${Je}  
- ${Je}  DaiGo
-   

  



1. 
   - 
   - 
   - 

2. 
   - 55 Whys
   - 
   - 

3. 
   - 
   - 11
   - 
   - 

4. 
   - ${Je}
   - 
   - 


 NG
 OK
 NG
 OK

${Je}5

1. 
   - 
   - 
   - 

2. 
   - 
   - 
   - 
   - 

3. 
   - 
   - 
   - 
   - AI

4. 
   - 
   - 
   - 
   - ${Je}

5. 
   - 
   - 
   - 
   - ""


- 
- 
- 
- 

${Ve()}

 - 
  

     
1. 
2. ${Je}
3. 

 OK
-  ${Je} OK
-  ${Je} OK
- ${Je} OK

 
-  
-  
-  
-   

 




JSON
1. : <<<ACTION>>>{"type":"addTask","title":"","date":"YYYY-MM-DD"}<<<END_ACTION>>>
2. : <<<ACTION>>>{"type":"addEvent","title":"","date":"YYYY-MM-DD","time":"HH:MM"}<<<END_ACTION>>>
3. : <<<ACTION>>>{"type":"addGoal","title":""}<<<END_ACTION>>>


  

 
- ${Je}
- 
- 
- 

 
- 
- 
- 

 
- 
- 

 - 

 
- 1-2
- 

 
  
- 
- NG
- 
- 

 
1. 
2. 
3. 
4. 
5. ${Je}

 NG
- 
- 
- 
- 

 


""""1



...""""


- NG
- 
- JSON

 - 
  
- 1
- 
- 
- 
- `,ye=[...Se.slice(-10).map(br=>({role:br.role==="assistant"?"assistant":"user",content:br.content})),{role:"user",content:be}];try{let br="";if(_e==="gemini"){const st=[{text:`${Xe}

:
${ye.map(Lt=>`${Lt.role}: ${Lt.content}`).join(`
`)}`}],Ge=Array.isArray(ee)?ee:ee?[ee]:[];Ge.length>0&&(Ge.forEach(Lt=>{st.push({inlineData:{mimeType:"image/jpeg",data:Lt}})}),st[0].text+=`

[${Ge.length}]`);const Dt=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${we}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:st}],generationConfig:{temperature:.7,maxOutputTokens:8192}})}),ur=await Dt.json();if(!Dt.ok)throw new Error(((Le=ur.error)==null?void 0:Le.message)||"Gemini API ");br=((xt=(pt=(wt=(At=(ft=ur.candidates)==null?void 0:ft[0])==null?void 0:At.content)==null?void 0:wt.parts)==null?void 0:pt[0])==null?void 0:xt.text)||""}else{const st=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${we}`},body:JSON.stringify({model:"llama-3.3-70b-versatile",messages:[{role:"system",content:Xe},...ye],max_tokens:1e3,temperature:.7})}),Ge=await st.json();if(!st.ok)throw new Error(((yt=Ge.error)==null?void 0:yt.message)||"API ");br=((Ut=(kt=(zt=Ge.choices)==null?void 0:zt[0])==null?void 0:kt.message)==null?void 0:Ut.content)||""}let Q=null;const Te=br.match(/<<<ACTION>>>([\s\S]*?)<<<END_ACTION>>>/);if(Te)try{Q=JSON.parse(Te[1].trim())}catch(st){console.error("Action parse error:",st)}return br=br.replace(/<<<ACTION>>>[\s\S]*?<<<END_ACTION>>>/g,"").replace(/<<<ACTION>>>[\s\S]*/g,"").trim(),{response:br,action:Q}}catch(br){return console.error("AI API error:",br),{response:`: ${br.message}`,action:null}}},We=async be=>{if(!be)return null;try{switch(be.type){case"addTask":return await s({title:be.title,date:be.date||new Date().toISOString().split("T")[0],tag:be.tag||"",progress:0,colorId:be.colorId||"blue"}),` ${be.title}`;case"addEvent":return await a({title:be.title,date:be.date||new Date().toISOString().split("T")[0],time:be.time||"",type:"event",colorId:"emerald"}),` ${be.title}`;case"addGoal":return await A({title:be.title,progress:0,colorId:"purple"}),` ${be.title}`;default:return null}}catch(Se){return console.error("Action execution error:",Se),` : ${Se.message}`}},lt=async()=>{if(!k.trim()&&H.length===0||z)return;const be=k.trim()||"()";let Se=[];H.length>0&&(Se=await Promise.all(H.map(_e=>F(_e))));const ee={role:"user",content:be,images:Y.length>0?Y:null,createdAt:new Date().toISOString()},we=[...w,ee];j(we),_(""),X(),O(!0);try{const{response:_e,action:Je}=await ze(be,w,Se),Xe=await We(Je);let ye=_e||"";Xe&&(ye=ye?`${ye}

${Xe}`:Xe),(!ye||!ye.trim())&&(ye="");const Le={role:"assistant",content:ye,createdAt:new Date().toISOString()},ft=[...we,Le];j(ft),he(ye),J(ft)}catch(_e){const Je={role:"assistant",content:`: ${_e.message}`,createdAt:new Date().toISOString()},Xe=[...we,Je];j(Xe),J(Xe)}finally{O(!1),setTimeout(()=>{var _e;return(_e=ke.current)==null?void 0:_e.focus()},100)}};return i.jsxs("div",{className:"flex flex-col h-[calc(100vh-200px)] md:h-[calc(100vh-140px)]",children:[i.jsx("audio",{ref:ut,className:"hidden"}),i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-1 mb-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:()=>{const be=new Date(h);be.setDate(be.getDate()-1),b(be.toISOString().split("T")[0])},className:"p-1 text-slate-400 hover:text-slate-200 hover:bg-slate-700 rounded transition-colors",children:""}),i.jsx("span",{className:"text-slate-200 font-medium text-sm min-w-[60px] text-center",children:h===g?"":je(h)}),i.jsx("button",{onClick:()=>{const be=new Date(h);be.setDate(be.getDate()+1);const Se=be.toISOString().split("T")[0];Se<=g&&b(Se)},disabled:h===g,className:"p-1 text-slate-400 hover:text-slate-200 hover:bg-slate-700 rounded transition-colors disabled:opacity-30",children:""}),h!==g&&i.jsx("button",{onClick:()=>b(g),className:"ml-1 px-1.5 py-0.5 text-xs bg-blue-600 text-white rounded hover:bg-blue-500",children:""})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:()=>E(!B),className:`px-2 py-1 rounded-lg text-xs transition-colors ${B?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:" "}),i.jsxs("button",{onClick:()=>U(!L),className:`px-2 py-1 rounded-lg text-xs transition-colors ${L?"bg-purple-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[" ",Pe.length>0&&` (${Pe.length})`]}),i.jsxs("button",{onClick:()=>{ve?Ze():ge(!de)},className:`px-2 py-1 rounded-lg text-xs transition-colors ${ve?"bg-red-600 text-white animate-pulse":de?"bg-green-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,title:ve?"":de?"ON":"OFF",children:[ve?"":de?"":"","",de?"ON":"OFF"]})]})]}),L&&i.jsxs("div",{className:"mb-3 bg-slate-800/50 rounded-xl p-4 border border-purple-700/50 max-h-80 overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("h4",{className:"text-sm font-bold text-purple-300 flex items-center gap-2",children:[" ",fe&&i.jsx("span",{className:"text-xs text-purple-400 animate-pulse",children:"..."})]}),i.jsx("button",{onClick:()=>{const be=new Date;be.setDate(be.getDate()-1),$(be.toISOString().split("T")[0]),G(!0)},disabled:fe,className:"px-2 py-1 text-xs bg-purple-600 hover:bg-purple-500 disabled:bg-purple-800 text-white rounded transition-colors",children:fe?"...":" "})]}),Pe.length>0?i.jsx("div",{className:"space-y-3",children:Pe.map((be,Se)=>{var ee;return i.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-3 border border-slate-700/50",children:[i.jsx("div",{className:"text-xs text-purple-400 mb-2",children:je(be.date)}),i.jsx("div",{className:"text-sm text-slate-300 whitespace-pre-wrap leading-relaxed",children:(ee=be.content)==null?void 0:ee.replace("","").trim()})]},be.id||Se)})}):i.jsxs("p",{className:"text-sm text-slate-500 text-center py-4",children:["",i.jsx("br",{}),i.jsx("span",{className:"text-xs",children:"24"})]})]}),M&&i.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:()=>G(!1),children:i.jsxs("div",{className:"bg-slate-800 rounded-xl p-6 w-full max-w-sm border border-purple-700/50 shadow-xl",onClick:be=>be.stopPropagation(),children:[i.jsx("h3",{className:"text-lg font-bold text-purple-300 mb-4 flex items-center gap-2",children:" "}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:""}),i.jsx("input",{type:"date",value:N,onChange:be=>$(be.target.value),max:new Date().toISOString().split("T")[0],className:"w-full bg-slate-900/50 border border-slate-700 rounded-lg px-3 py-2 text-sm text-slate-200 focus:border-purple-500 outline-none"})]}),N&&Pe.find(be=>be.date===N)&&i.jsx("div",{className:"bg-yellow-900/30 border border-yellow-600/50 rounded-lg p-3 text-sm text-yellow-300",children:" "}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{onClick:()=>G(!1),className:"flex-1 px-4 py-2 bg-slate-700 text-slate-300 rounded-lg hover:bg-slate-600 transition-colors text-sm",children:""}),i.jsx("button",{onClick:async()=>{!N||Pe.find(Se=>Se.date===N)&&!confirm(`${je(N)}`)||(G(!1),await $e(N,!0))},disabled:!N||fe,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-500 disabled:bg-purple-800 transition-colors text-sm",children:fe?"...":""})]})]})]})}),B&&i.jsxs("div",{className:"mb-3 bg-slate-800/50 rounded-xl p-3 border border-slate-700 max-h-40 overflow-y-auto",children:[i.jsx("h4",{className:"text-xs font-bold text-slate-400 mb-2",children:""}),x.length>0?i.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(be=>i.jsx("button",{onClick:()=>{b(be),E(!1)},className:`px-2 py-1 text-xs rounded transition-colors ${be===h?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:be===g?"":je(be)},be))}):i.jsx("p",{className:"text-xs text-slate-500",children:""})]}),i.jsxs("div",{className:"flex-1 bg-slate-800/20 rounded-xl border border-slate-700/50 p-4 mb-4 overflow-y-auto space-y-4",children:[te?i.jsx("div",{className:"flex items-center justify-center h-full text-slate-400",children:"..."}):w.length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-slate-500",children:""}):w.filter(be=>be.content&&be.content.trim()).map((be,Se)=>i.jsx("div",{className:`flex ${be.role==="user"?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-[80%] rounded-xl p-4 ${be.role==="user"?"bg-blue-600 text-white":"bg-slate-700/50 text-slate-200"}`,children:[be.role==="assistant"&&i.jsx("div",{className:"text-xs text-cyan-400 mb-1",children:" "}),be.images&&be.images.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:be.images.map((ee,we)=>i.jsx("img",{src:ee,alt:` ${we+1}`,className:"max-h-32 rounded-lg cursor-pointer hover:opacity-90",onClick:()=>window.open(ee,"_blank")},we))}),be.image&&!be.images&&i.jsx("img",{src:be.image,alt:"",className:"max-w-full max-h-64 rounded-lg mb-2 cursor-pointer hover:opacity-90",onClick:()=>window.open(be.image,"_blank")}),i.jsx("div",{className:"whitespace-pre-wrap text-sm",children:be.content})]})},Se)),z&&i.jsx("div",{className:"flex justify-start",children:i.jsx("div",{className:"bg-slate-700/50 rounded-xl p-4 text-slate-400",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex gap-1",children:[i.jsx("span",{className:"animate-bounce",children:"."}),i.jsx("span",{className:"animate-bounce",style:{animationDelay:"0.1s"},children:"."}),i.jsx("span",{className:"animate-bounce",style:{animationDelay:"0.2s"},children:"."})]}),i.jsx("span",{className:"text-sm",children:"..."})]})})}),i.jsx("div",{ref:me})]}),h===g?i.jsxs("div",{className:"space-y-2",children:[Y.length>0&&i.jsxs("div",{className:"flex flex-wrap gap-2",children:[Y.map((be,Se)=>i.jsxs("div",{className:"relative inline-block",children:[i.jsx("img",{src:be,alt:` ${Se+1}`,className:"h-20 w-20 object-cover rounded-lg border border-slate-600"}),i.jsx("button",{onClick:()=>qe(Se),className:"absolute -top-2 -right-2 w-5 h-5 bg-red-600 hover:bg-red-500 text-white rounded-full flex items-center justify-center text-xs",children:""})]},Se)),Y.length>1&&i.jsx("button",{onClick:X,className:"h-20 px-3 bg-slate-700 hover:bg-slate-600 text-slate-400 rounded-lg text-xs flex items-center justify-center",children:""})]}),i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsxs("div",{className:"md:hidden flex flex-col items-center py-2 rounded-2xl",style:{backgroundColor:"var(--bg-tertiary)"},children:[i.jsx("span",{className:"text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:" "}),i.jsx(pu,{onTranscript:be=>_(Se=>Se+be),onAutoSend:lt,disabled:z,size:"large",className:"w-20 h-20 shadow-lg"})]}),i.jsxs("div",{className:"relative flex items-center gap-2",children:[i.jsx("input",{ref:Ee,type:"file",accept:"image/*",multiple:!0,onChange:se,className:"hidden"}),i.jsxs("button",{onClick:()=>{var be;return(be=Ee.current)==null?void 0:be.click()},disabled:z||H.length>=10,className:"p-2 md:p-3 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-xl transition-colors disabled:opacity-50 relative flex-shrink-0",title:H.length>=10?"10":"",children:["",H.length>0&&i.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 text-white text-xs rounded-full flex items-center justify-center",children:H.length})]}),i.jsx("input",{ref:ke,type:"text",value:k,onChange:be=>_(be.target.value),onKeyPress:be=>be.key==="Enter"&&!be.shiftKey&&lt(),placeholder:"...",className:"flex-1 min-w-0 bg-slate-900 border border-slate-700 text-slate-200 px-3 md:px-6 py-3 md:py-4 rounded-xl outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all text-sm md:text-base",disabled:z}),i.jsx("div",{className:"hidden md:block",children:i.jsx(pu,{onTranscript:be=>_(Se=>Se+be),onAutoSend:lt,disabled:z})}),i.jsx("button",{onClick:lt,disabled:z||!k.trim()&&H.length===0,className:"p-2 md:p-3 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 text-white rounded-xl transition-colors disabled:opacity-50 flex-shrink-0",children:i.jsx(bt,{name:"send",size:18,className:"md:w-5 md:h-5"})})]})]})]}):i.jsx("div",{className:"text-center py-3 text-slate-500 text-sm",children:""})]})}function y6({tasks:t,goals:e,events:r,transactions:n,diaryEntries:s,shoppingItems:a,scripts:A,settings:o}){const l=new Date().toISOString().split("T")[0],[c,d]=V.useState(l),[p,g]=V.useState([]),[h,b]=V.useState([]),[w,j]=V.useState(!1),[x,y]=V.useState(""),[B,E]=V.useState(!1),[L,U]=V.useState(!0),[M,G]=V.useState(null),[N,$]=V.useState(null),k=V.useRef(null),_=V.useRef(null),z=V.useRef(null),O=Y=>new Promise((le,me)=>{const ke=new FileReader;ke.onload=()=>{const Ee=ke.result.split(",")[1];le(Ee)},ke.onerror=me,ke.readAsDataURL(Y)}),te=Y=>{var me;const le=(me=Y.target.files)==null?void 0:me[0];if(le){if(le.size>10*1024*1024){alert("10MB");return}G(le);const ke=new FileReader;ke.onload=Ee=>$(Ee.target.result),ke.readAsDataURL(le)}},ue=()=>{G(null),$(null),z.current&&(z.current.value="")},fe={role:"assistant",content:`${(o==null?void 0:o.username)||""}



`},ie=Y=>{const le=new Date(Y),me=["","","","","","",""];return`${le.getMonth()+1}/${le.getDate()}${me[le.getDay()]}`};V.useEffect(()=>{(async()=>{U(!0);try{const le=JSON.parse(window.localStorage.getItem("lifedash_twinMessages")||"{}"),me=le[c]||[];me.length>0?g(me):g(c===l?[fe]:[]);const ke=Object.keys(le).filter(Ee=>le[Ee].length>0).sort((Ee,Pe)=>Pe.localeCompare(Ee));b(ke)}catch(le){console.error("Error loading messages:",le),g(c===l?[fe]:[])}finally{U(!1)}})()},[c,o==null?void 0:o.username]);const de=Y=>{try{const le=Y.filter(Ee=>Ee.content&&Ee.content.trim()),me=JSON.parse(window.localStorage.getItem("lifedash_twinMessages")||"{}");me[c]=le,window.localStorage.setItem("lifedash_twinMessages",JSON.stringify(me));const ke=Object.keys(me).filter(Ee=>me[Ee].length>0).sort((Ee,Pe)=>Pe.localeCompare(Ee));b(ke)}catch(le){console.error("Error saving messages:",le)}};V.useEffect(()=>{var Y;(Y=k.current)==null||Y.scrollIntoView({behavior:"smooth"})},[p]);const ge=()=>{const Y=(o==null?void 0:o.username)||"",le=new Date().toISOString().split("T")[0],ke=(s||[]).sort((ye,Le)=>new Date(Le.date)-new Date(ye.date)).slice(0,20).map(ye=>{var Le;return`${ye.date}${((Le=ye.content)==null?void 0:Le.substring(0,300))||""}`}).join(`
`),Ee=t.filter(ye=>ye.progress===100);t.filter(ye=>ye.progress<100);const Pe=[...new Set(t.map(ye=>ye.tag).filter(Boolean))],nt=t.sort((ye,Le)=>new Date(Le.date||0)-new Date(ye.date||0)).slice(0,10),ut=e.filter(ye=>(ye.progress||0)<100),he=e.filter(ye=>(ye.progress||0)>=100),Ze=(r||[]).filter(ye=>ye.date>=le).sort((ye,Le)=>new Date(ye.date)-new Date(Le.date)).slice(0,10),F=(r||[]).filter(ye=>ye.date<le).sort((ye,Le)=>new Date(Le.date)-new Date(ye.date)).slice(0,10),se=[...new Set((r||[]).map(ye=>ye.tag||ye.type).filter(Boolean))],qe=n.filter(ye=>ye.type==="expense"),X=n.filter(ye=>ye.type==="income"),ne=[...new Set(qe.map(ye=>ye.category).filter(Boolean))],je=qe.reduce((ye,Le)=>ye+(Le.amount||0),0),J=X.reduce((ye,Le)=>ye+(Le.amount||0),0),$e=n.sort((ye,Le)=>new Date(Le.date||0)-new Date(ye.date||0)).slice(0,10),Ve=[...new Set((a||[]).map(ye=>ye.store).filter(Boolean))],ze=(a||[]).filter(ye=>!ye.purchased),We=(a||[]).filter(ye=>ye.purchased),lt=(A||[]).filter(ye=>ye.isFavorite),be=(A||[]).sort((ye,Le)=>(Le.useCount||0)-(ye.useCount||0)).slice(0,5),Se=[...new Set((A||[]).map(ye=>ye.category).filter(Boolean))],ee=JSON.parse(window.localStorage.getItem("lifedash_tracking")||"{}"),we=Object.entries(ee).sort(([ye],[Le])=>Le.localeCompare(ye)).slice(0,7).map(([ye,Le])=>({date:ye,...Le})),_e=JSON.parse(window.localStorage.getItem("lifedash_chatMessages")||"{}"),Je=Object.entries(_e).sort(([ye],[Le])=>Le.localeCompare(ye)).slice(0,5).flatMap(([ye,Le])=>Le.filter(ft=>ft.role==="user").map(ft=>{var At;return(At=ft.content)==null?void 0:At.substring(0,150)})).filter(Boolean),Xe=(s||[]).filter(ye=>ye.content&&ye.content.includes("")).sort((ye,Le)=>new Date(Le.date)-new Date(ye.date)).slice(0,5).map(ye=>{var Le;return(Le=ye.content)==null?void 0:Le.replace("","").substring(0,200)});return`

${Y}AI
${Y}
${Y}1

${Y}
- : ${Y}
- : ${Ee.length} / : ${t.length}
- : ${he.length} / : ${e.length}
- : ${Pe.join(", ")||""}


${ut.map(ye=>`- ${ye.title} (: ${ye.progress||0}%)`).join(`
`)||"- "}

${Y}
${ke||""}

AI${Y}
${Xe.join(`
`)||""}


- : ${se.join(", ")||""}
- :
${Ze.map(ye=>`  - ${ye.date}: ${ye.title}`).join(`
`)||"  - "}
- :
${F.slice(0,5).map(ye=>`  - ${ye.date}: ${ye.title}`).join(`
`)||"  - "}


${nt.map(ye=>`- ${ye.title} (${ye.date}) - ${ye.progress===100?"":`${ye.progress||0}%`}`).join(`
`)||""}


- : ${J.toLocaleString()}
- : ${je.toLocaleString()}
- : ${ne.slice(0,5).join(", ")||""}
- :
${$e.slice(0,5).map(ye=>`  - ${ye.date}: ${ye.title} ${(ye.amount||0).toLocaleString()} (${ye.type==="income"?"":""})`).join(`
`)||"  - "}


- : ${Ve.slice(0,5).join(", ")||""}
- : ${ze.length}
- : ${We.length}

AI
- : ${lt.map(ye=>ye.title).join(", ")||""}
- : ${Se.join(", ")||""}
- :
${be.map(ye=>`  - ${ye.title} (: ${ye.useCount||0})`).join(`
`)||"  - "}


${we.map(ye=>`- ${ye.date}: =${ye.mood||"?"}, =${ye.sleep||"?"}h, =${ye.exercise?"":""}`).join(`
`)||""}

AI
${Je.slice(0,10).join(`
`)||""}



${Y}${Y}


- ${Y}
- 
- 
- 
- 


1. 140
2. 1${Y}
3. 
4. 1NG
5.  
6. NG


- 
- 
- 
- 
- 
- 
- 

NG
- 
- 
- 
`},ve=async(Y,le,me=null)=>{var he,Ze,F,se,qe,X;const ke=localStorage.getItem("ai_api_key")||"";if(!ke)return"APIGemini API";const Ee=ge(),Pe=(o==null?void 0:o.username)||"",nt=`${Ee}

${new Date().toLocaleDateString("ja-JP")}


${Pe}
${Pe}${Pe}


${Pe}
`,ut=le.slice(-10);try{const ne=[{text:`${nt}

:
${ut.map($e=>`${$e.role==="assistant"?Pe:""}: ${$e.content}`).join(`
`)}`}];me&&(ne.push({inlineData:{mimeType:"image/jpeg",data:me}}),ne[0].text+=`

[]`);const je=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${ke}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:ne}],generationConfig:{temperature:.8,maxOutputTokens:4096}})}),J=await je.json();if(!je.ok)throw new Error(((he=J.error)==null?void 0:he.message)||"Gemini API ");return((X=(qe=(se=(F=(Ze=J.candidates)==null?void 0:Ze[0])==null?void 0:F.content)==null?void 0:se.parts)==null?void 0:qe[0])==null?void 0:X.text)||""}catch(ne){return console.error("AI Error:",ne),`: ${ne.message}`}},I=async()=>{if(!x.trim()&&!M||B)return;const Y=x.trim()||"()";let le=null;M&&(le=await O(M));const me={role:"user",content:Y,image:N,createdAt:new Date().toISOString()},ke=[...p,me];g(ke),y(""),ue(),E(!0);try{const Pe={role:"assistant",content:await ve(Y,ke,le),createdAt:new Date().toISOString()},nt=[...ke,Pe];g(nt),de(nt)}catch(Ee){console.error("Error:",Ee);const Pe={role:"assistant",content:`: ${Ee.message}`,createdAt:new Date().toISOString()},nt=[...ke,Pe];g(nt),de(nt)}finally{E(!1),setTimeout(()=>{var Ee;(Ee=_.current)==null||Ee.focus()},100)}},H=Y=>{const le=new Date(c);le.setDate(le.getDate()+Y),d(le.toISOString().split("T")[0])},re=V.useMemo(()=>{const Y=(s==null?void 0:s.length)||0,le=(t==null?void 0:t.length)||0,me=(e==null?void 0:e.length)||0,ke=(n==null?void 0:n.length)||0;return{totalDiaries:Y,totalTasks:le,totalGoals:me,totalTransactions:ke}},[s,t,e,n]);return i.jsxs("div",{className:"h-[calc(100vh-200px)] md:h-[calc(100vh-120px)] flex flex-col",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-4",children:[i.jsxs("div",{className:"flex items-center justify-between md:justify-start gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>H(-1),className:"p-2 rounded-lg hover:bg-purple-600/20 transition-colors",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},children:i.jsx(bt,{name:"chevronLeft",size:18})}),i.jsx("span",{className:"text-base md:text-lg font-bold min-w-[70px] text-center",style:{color:"var(--text-primary)"},children:c===l?"":ie(c)}),i.jsx("button",{onClick:()=>H(1),className:"p-2 rounded-lg hover:bg-purple-600/20 transition-colors",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},children:i.jsx(bt,{name:"chevronRight",size:18})})]}),c!==l&&i.jsx("button",{onClick:()=>d(l),className:"px-3 py-1.5 text-xs bg-purple-600/20 text-purple-400 rounded-lg hover:bg-purple-600/30",children:""}),i.jsx("button",{onClick:()=>j(!w),className:`md:hidden px-3 py-1.5 rounded-lg text-sm transition-colors ${w?"bg-purple-600 text-white":""}`,style:{backgroundColor:w?void 0:"var(--bg-tertiary)",color:w?void 0:"var(--text-secondary)"},children:""})]}),i.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2 text-xs",style:{color:"var(--text-tertiary)"},children:[i.jsxs("span",{className:"px-2 py-1 rounded",style:{backgroundColor:"var(--bg-tertiary)"},children:[" ",re.totalDiaries]}),i.jsxs("span",{className:"px-2 py-1 rounded",style:{backgroundColor:"var(--bg-tertiary)"},children:[" ",re.totalTasks]}),i.jsxs("span",{className:"px-2 py-1 rounded",style:{backgroundColor:"var(--bg-tertiary)"},children:[" ",re.totalGoals]})]}),i.jsx("button",{onClick:()=>j(!w),className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${w?"bg-purple-600 text-white":""}`,style:{backgroundColor:w?void 0:"var(--bg-tertiary)",color:w?void 0:"var(--text-secondary)"},children:" "})]})]}),w&&i.jsxs("div",{className:"mb-3 rounded-xl p-3 border border-purple-500/30 max-h-32 md:max-h-40 overflow-y-auto",style:{backgroundColor:"var(--bg-tertiary)"},children:[i.jsx("h4",{className:"text-xs font-bold text-purple-400 mb-2",children:""}),h.length>0?i.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(Y=>i.jsx("button",{onClick:()=>{d(Y),j(!1)},className:`px-2 py-1 text-xs rounded-lg transition-colors ${Y===c?"bg-purple-600 text-white":"hover:bg-purple-600/20"}`,style:{backgroundColor:Y===c?void 0:"var(--bg-secondary)",color:Y===c?void 0:"var(--text-secondary)"},children:Y===l?"":ie(Y)},Y))}):i.jsx("p",{className:"text-xs",style:{color:"var(--text-tertiary)"},children:""})]}),i.jsxs("div",{className:"flex-1 rounded-xl border border-purple-500/20 p-3 md:p-4 mb-3 md:mb-4 overflow-y-auto space-y-3 md:space-y-4",style:{backgroundColor:"var(--bg-secondary)"},children:[L?i.jsx("div",{className:"flex items-center justify-center h-full",style:{color:"var(--text-tertiary)"},children:"..."}):p.length===0?i.jsx("div",{className:"flex items-center justify-center h-full",style:{color:"var(--text-tertiary)"},children:""}):p.filter(Y=>Y.content&&Y.content.trim()).map((Y,le)=>i.jsx("div",{className:`flex ${Y.role==="user"?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-[85%] md:max-w-[80%] rounded-xl p-3 md:p-4 ${Y.role==="user"?"":"border border-purple-500/30"}`,style:{backgroundColor:Y.role==="user"?"var(--bg-tertiary)":"var(--bg-card)",color:"var(--text-primary)"},children:[Y.role==="assistant"&&i.jsxs("div",{className:"text-xs text-purple-400 mb-1 flex items-center gap-1",children:[" ",(o==null?void 0:o.username)||"","Digital Twin"]}),Y.image&&i.jsx("img",{src:Y.image,alt:"",className:"max-w-full max-h-48 md:max-h-64 rounded-lg mb-2 cursor-pointer hover:opacity-90",onClick:()=>window.open(Y.image,"_blank")}),i.jsx("div",{className:"whitespace-pre-wrap text-sm",children:Y.content})]})},le)),B&&i.jsx("div",{className:"flex justify-start",children:i.jsx("div",{className:"rounded-xl p-3 md:p-4 text-purple-400 border border-purple-500/30",style:{backgroundColor:"var(--bg-card)"},children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex gap-1",children:[i.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-400 animate-bounce",style:{animationDelay:"0ms"}}),i.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-400 animate-bounce",style:{animationDelay:"150ms"}}),i.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-400 animate-bounce",style:{animationDelay:"300ms"}})]}),i.jsx("span",{className:"text-sm",children:"..."})]})})}),i.jsx("div",{ref:k})]}),i.jsxs("div",{className:"space-y-2",children:[N&&i.jsxs("div",{className:"relative inline-block",children:[i.jsx("img",{src:N,alt:"",className:"max-h-24 md:max-h-32 rounded-lg border border-purple-500/50"}),i.jsx("button",{onClick:ue,className:"absolute -top-2 -right-2 w-6 h-6 bg-red-600 hover:bg-red-500 text-white rounded-full flex items-center justify-center text-xs",children:""})]}),i.jsx("div",{className:"md:hidden flex justify-center py-2 rounded-xl",style:{backgroundColor:"var(--bg-tertiary)"},children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("span",{className:"text-xs mb-1",style:{color:"var(--text-tertiary)"},children:" "}),i.jsx(pu,{onTranscript:Y=>y(le=>le+Y),onAutoSend:I,disabled:B,size:"large",className:"w-16 h-16"})]})}),i.jsxs("div",{className:"flex gap-2 md:gap-3",children:[i.jsx("input",{ref:z,type:"file",accept:"image/*",onChange:te,className:"hidden"}),i.jsx("button",{onClick:()=>{var Y;return(Y=z.current)==null?void 0:Y.click()},disabled:B,className:"p-2 md:px-4 md:py-3 rounded-xl transition-colors disabled:opacity-50",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},title:"",children:""}),i.jsx("input",{ref:_,type:"text",value:x,onChange:Y=>y(Y.target.value),onKeyDown:Y=>Y.key==="Enter"&&!Y.shiftKey&&I(),placeholder:"...",className:"flex-1 min-w-0 border border-purple-500/30 rounded-xl px-3 md:px-4 py-2 md:py-3 outline-none focus:border-purple-500 transition-colors text-sm md:text-base",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)"},disabled:B}),i.jsx("div",{className:"hidden md:block",children:i.jsx(pu,{onTranscript:Y=>y(le=>le+Y),onAutoSend:I,disabled:B})}),i.jsx("button",{onClick:I,disabled:B||!x.trim()&&!M,className:"p-2 md:px-5 md:py-3 bg-purple-600 hover:bg-purple-500 disabled:bg-purple-800 disabled:cursor-not-allowed text-white rounded-xl transition-colors flex items-center justify-center",children:i.jsx(bt,{name:"send",size:18})})]})]})]})}function b6({scripts:t,addScript:e,updateScript:r,deleteScript:n}){const[s,a]=V.useState("all"),[A,o]=V.useState(""),[l,c]=V.useState(!1),[d,p]=V.useState(null),[g,h]=V.useState({}),[b,w]=V.useState(null),[j,x]=V.useState({title:"",content:"",category:"prompt",variables:[],isFavorite:!1}),y=[{id:"all",name:"",icon:"",color:"slate"},{id:"prompt",name:"",icon:"",color:"blue"},{id:"code",name:"",icon:"",color:"emerald"},{id:"analysis",name:"",icon:"",color:"purple"},{id:"image",name:"",icon:"",color:"pink"},{id:"writing",name:"",icon:"",color:"orange"},{id:"custom",name:"",icon:"",color:"cyan"}],B=_=>{const z=/\{\{([^}]+)\}\}/g,O=[];let te;for(;(te=z.exec(_))!==null;)O.includes(te[1])||O.push(te[1]);return O},E=(_,z)=>{const O=g[z]||{};let te=_;const ue=/\{\{([^}]+)\}\}/g;return te=te.replace(ue,(fe,ie)=>O[ie]||fe),te},L=async _=>{const z=E(_.content,_.id);await navigator.clipboard.writeText(z),w(_.id),r(_.id,{..._,useCount:(_.useCount||0)+1}),setTimeout(()=>w(null),2e3)},U=_=>{r(_.id,{..._,isFavorite:!_.isFavorite})},M=t.filter(_=>{const z=s==="all"||_.category===s,O=!A||_.title.toLowerCase().includes(A.toLowerCase())||_.content.toLowerCase().includes(A.toLowerCase());return z&&O}).sort((_,z)=>_.isFavorite!==z.isFavorite?z.isFavorite?1:-1:(z.useCount||0)-(_.useCount||0)),G=()=>{if(!j.title.trim()||!j.content.trim())return;const _=B(j.content).map(z=>({name:z,type:"text",default:""}));e({...j,variables:_}),x({title:"",content:"",category:"prompt",variables:[],isFavorite:!1}),c(!1)},N=()=>{if(!d||!d.title.trim()||!d.content.trim())return;const _=B(d.content).map(z=>{var te;return((te=d.variables)==null?void 0:te.find(ue=>ue.name===z))||{name:z,type:"text",default:""}});r(d.id,{...d,variables:_}),p(null)},$=(_,z,O)=>{h(te=>({...te,[_]:{...te[_]||{},[z]:O}}))},k=_=>{const z=y.find(O=>O.id===_);return(z==null?void 0:z.color)||"slate"};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h2",{className:"text-xl font-bold",children:"AI Scripts"}),i.jsxs("span",{className:"text-slate-400",children:["(",M.length," )"]})]}),i.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg transition-colors",children:[i.jsx(bt,{name:"plus",size:18}),""]})]}),i.jsxs("div",{className:"relative",children:[i.jsx(bt,{name:"search",size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),i.jsx("input",{type:"text",value:A,onChange:_=>o(_.target.value),placeholder:"...",className:"w-full bg-slate-800/50 border border-slate-700/50 rounded-xl pl-10 pr-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsx("div",{className:"flex gap-2 flex-wrap",children:y.map(_=>i.jsxs("button",{onClick:()=>a(_.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${s===_.id?`bg-${_.color}-600 text-white`:"bg-slate-800/50 text-slate-400 hover:bg-slate-700"}`,style:s===_.id?{backgroundColor:_.color==="slate"?"#475569":_.color==="blue"?"#2563eb":_.color==="emerald"?"#059669":_.color==="purple"?"#9333ea":_.color==="pink"?"#db2777":_.color==="orange"?"#ea580c":_.color==="cyan"?"#0891b2":"#475569"}:{},children:[_.icon," ",_.name]},_.id))}),i.jsx("div",{className:"space-y-4",children:M.length===0?i.jsxs("div",{className:"text-center py-12 text-slate-500",children:[i.jsx(bt,{name:"scripts",size:48,className:"mx-auto mb-4 opacity-50"}),i.jsx("p",{children:""}),i.jsx("button",{onClick:()=>c(!0),className:"mt-4 text-blue-400 hover:text-blue-300",children:"+ "})]}):M.map(_=>{const z=k(_.category),O=y.find(fe=>fe.id===_.category),te=_.variables||[],ue=g[_.id]||{};return i.jsxs("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700/50 overflow-hidden hover:border-slate-600/50 transition-colors",children:[i.jsx("div",{className:"p-4 border-b border-slate-700/30",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-xl",children:O==null?void 0:O.icon}),i.jsx("h3",{className:"font-semibold text-lg",children:_.title}),i.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:{backgroundColor:z==="blue"?"rgba(37, 99, 235, 0.2)":z==="emerald"?"rgba(5, 150, 105, 0.2)":z==="purple"?"rgba(147, 51, 234, 0.2)":z==="pink"?"rgba(219, 39, 119, 0.2)":z==="orange"?"rgba(234, 88, 12, 0.2)":z==="cyan"?"rgba(8, 145, 178, 0.2)":"rgba(71, 85, 105, 0.2)",color:z==="blue"?"#60a5fa":z==="emerald"?"#34d399":z==="purple"?"#c084fc":z==="pink"?"#f472b6":z==="orange"?"#fb923c":z==="cyan"?"#22d3ee":"#94a3b8"},children:O==null?void 0:O.name}),_.useCount>0&&i.jsxs("span",{className:"text-xs text-slate-500",children:[_.useCount,""]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>U(_),className:`p-2 rounded-lg transition-colors ${_.isFavorite?"text-yellow-400":"text-slate-500 hover:text-yellow-400"}`,children:i.jsx(bt,{name:_.isFavorite?"starFilled":"star",size:18})}),i.jsx("button",{onClick:()=>p(_),className:"p-2 text-slate-400 hover:text-blue-400 rounded-lg transition-colors",children:i.jsx(bt,{name:"edit",size:18})}),i.jsx("button",{onClick:()=>n(_.id),className:"p-2 text-slate-400 hover:text-red-400 rounded-lg transition-colors",children:i.jsx(bt,{name:"trash",size:18})})]})]})}),i.jsx("div",{className:"p-4 bg-slate-900/30",children:i.jsx("pre",{className:"text-sm text-slate-300 whitespace-pre-wrap font-mono overflow-x-auto max-h-32 overflow-y-auto",children:E(_.content,_.id)})}),te.length>0&&i.jsxs("div",{className:"p-4 border-t border-slate-700/30 bg-slate-800/30",children:[i.jsx("p",{className:"text-xs text-slate-500 mb-3",children:":"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:te.map((fe,ie)=>{var de;return i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs text-slate-400",children:fe.name}),fe.type==="select"?i.jsx("select",{value:ue[fe.name]||fe.default||"",onChange:ge=>$(_.id,fe.name,ge.target.value),className:"w-full bg-slate-700/50 border border-slate-600 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:(de=fe.options)==null?void 0:de.map(ge=>i.jsx("option",{value:ge,children:ge},ge))}):fe.type==="textarea"?i.jsx("textarea",{value:ue[fe.name]||fe.default||"",onChange:ge=>$(_.id,fe.name,ge.target.value),placeholder:`{{${fe.name}}}`,className:"w-full bg-slate-700/50 border border-slate-600 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[60px]"}):i.jsx("input",{type:fe.type==="number"?"number":"text",value:ue[fe.name]||fe.default||"",onChange:ge=>$(_.id,fe.name,ge.target.value),placeholder:`{{${fe.name}}}`,className:"w-full bg-slate-700/50 border border-slate-600 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]},ie)})})]}),i.jsx("div",{className:"p-4 border-t border-slate-700/30",children:i.jsxs("button",{onClick:()=>L(_),className:`w-full py-3 rounded-lg font-medium transition-all flex items-center justify-center gap-2 ${b===_.id?"bg-emerald-600 text-white":"bg-blue-600 hover:bg-blue-500 text-white"}`,children:[i.jsx(bt,{name:b===_.id?"check":"copy",size:18}),b===_.id?"":""]})})]},_.id)})}),l&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>c(!1),children:i.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 w-full max-w-2xl border border-slate-700 max-h-[90vh] overflow-y-auto",onClick:_=>_.stopPropagation(),children:[i.jsx("h3",{className:"text-lg font-bold mb-4",children:""}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:""}),i.jsx("input",{type:"text",value:j.title,onChange:_=>x({...j,title:_.target.value}),className:"w-full bg-slate-700/50 border border-slate-600 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:": "})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:""}),i.jsx("select",{value:j.category,onChange:_=>x({...j,category:_.target.value}),className:"w-full bg-slate-700/50 border border-slate-600 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:y.filter(_=>_.id!=="all").map(_=>i.jsxs("option",{value:_.id,children:[_.icon," ",_.name]},_.id))})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm text-slate-400 mb-1",children:["",i.jsxs("span",{className:"text-xs text-slate-500 ml-2",children:["{{}}"," "]})]}),i.jsx("textarea",{value:j.content,onChange:_=>x({...j,content:_.target.value}),className:"w-full bg-slate-700/50 border border-slate-600 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm min-h-[200px]",placeholder:": {{}}:\\n\\n{{}}"})]}),B(j.content).length>0&&i.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-3",children:[i.jsx("p",{className:"text-xs text-slate-400 mb-2",children:":"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:B(j.content).map(_=>i.jsx("span",{className:"text-xs bg-blue-600/20 text-blue-400 px-2 py-1 rounded",children:`{{${_}}}`},_))})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"favorite",checked:j.isFavorite,onChange:_=>x({...j,isFavorite:_.target.checked}),className:"rounded"}),i.jsx("label",{htmlFor:"favorite",className:"text-sm text-slate-400",children:""})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{onClick:()=>c(!1),className:"flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg transition-colors",children:""}),i.jsx("button",{onClick:G,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",children:""})]})]})}),d&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>p(null),children:i.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 w-full max-w-2xl border border-slate-700 max-h-[90vh] overflow-y-auto",onClick:_=>_.stopPropagation(),children:[i.jsx("h3",{className:"text-lg font-bold mb-4",children:""}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:""}),i.jsx("input",{type:"text",value:d.title,onChange:_=>p({...d,title:_.target.value}),className:"w-full bg-slate-700/50 border border-slate-600 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:""}),i.jsx("select",{value:d.category,onChange:_=>p({...d,category:_.target.value}),className:"w-full bg-slate-700/50 border border-slate-600 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:y.filter(_=>_.id!=="all").map(_=>i.jsxs("option",{value:_.id,children:[_.icon," ",_.name]},_.id))})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm text-slate-400 mb-1",children:["",i.jsxs("span",{className:"text-xs text-slate-500 ml-2",children:["{{}}"," "]})]}),i.jsx("textarea",{value:d.content,onChange:_=>p({...d,content:_.target.value}),className:"w-full bg-slate-700/50 border border-slate-600 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm min-h-[200px]"})]}),B(d.content).length>0&&i.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-3",children:[i.jsx("p",{className:"text-xs text-slate-400 mb-2",children:":"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:B(d.content).map(_=>i.jsx("span",{className:"text-xs bg-blue-600/20 text-blue-400 px-2 py-1 rounded",children:`{{${_}}}`},_))})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{onClick:()=>p(null),className:"flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg transition-colors",children:""}),i.jsx("button",{onClick:N,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",children:""})]})]})})]})}function B6({diaryEntries:t=[],addDiaryEntry:e,settings:r={}}){const n=new Date().toISOString().split("T")[0],[s,a]=V.useState(n),[A,o]=V.useState(!1),[l,c]=V.useState(()=>!localStorage.getItem("lifedash_morning_guide_seen")),[d,p]=V.useState(0),[g,h]=V.useState([]),[b,w]=V.useState(""),[j,x]=V.useState(!1),[y,B]=V.useState(!1),[E,L]=V.useState(""),[U,M]=V.useState(0),[G,N]=V.useState(!1),[$,k]=V.useState(!1),_=V.useRef(null),z=V.useRef(null),O=V.useRef(null),te=V.useMemo(()=>(t||[]).filter(se=>se.content&&se.content.startsWith("")).sort((se,qe)=>new Date(qe.date)-new Date(se.date)),[t]),ue=V.useMemo(()=>te.find(se=>se.date===n),[te,n]),fe=te.find(se=>se.date===s),ie=[...new Set(te.map(se=>se.date))].slice(0,30),de=()=>{let se=0;const qe=ie.sort((X,ne)=>new Date(ne)-new Date(X));for(let X=0;X<qe.length;X++){const ne=new Date;ne.setDate(ne.getDate()-X);const je=ne.toISOString().split("T")[0];if(qe.includes(je))se++;else break}return se},ge=[{title:"",content:`


 
 
 
 

${r.username||""}`,icon:""},{title:"",content:`AI

 
 
 


 
 
 

OK`,icon:""},{title:"",content:`

1 
2 AI
3 Enter
4 
5 OK

 
 
 

`,icon:""}],ve=()=>{c(!1),localStorage.setItem("lifedash_morning_guide_seen","true")};V.useEffect(()=>(G?O.current=setInterval(()=>{M(se=>se+1)},1e3):clearInterval(O.current),()=>clearInterval(O.current)),[G]),V.useEffect(()=>{var se;(se=z.current)==null||se.scrollIntoView({behavior:"smooth"})},[g]),V.useEffect(()=>{!j&&g.length>0&&!y&&setTimeout(()=>{var se;(se=_.current)==null||se.focus()},100)},[j,g.length,y]);const I=se=>{const qe=Math.floor(se/60),X=se%60;return`${qe.toString().padStart(2,"0")}:${X.toString().padStart(2,"0")}`},H=se=>{const qe=new Date(se),X=["","","","","","",""];return`${qe.getMonth()+1}/${qe.getDate()}${X[qe.getDay()]}`},re=se=>{const qe=new Date(se),X=["","","","","","",""];return`${qe.getFullYear()}${qe.getMonth()+1}${qe.getDate()}${X[qe.getDay()]}`},Y=se=>se.replace(`
`,"").replace("",""),le=()=>g.filter(se=>se.role==="user").reduce((se,qe)=>se+qe.content.length,0),me=()=>`








- ${r.username||""}
- 
- 
- 


- OK
- 140100
- 11
- OK











- OK
- 
- `,ke=()=>`


${g.map(qe=>`${qe.role==="user"?"":"AI"}: ${qe.content}`).join(`
`)}


- 
- 
- 
- 5001000
- 
- OK
- ---

`,Ee=async(se,qe=!1)=>{var Ve,ze,We,lt,be;const X=localStorage.getItem("ai_api_key")||"";if(!X)throw new Error("APIGemini API");const ne=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${X}`,je=qe?[{role:"user",parts:[{text:se}]}]:[{role:"user",parts:[{text:me()}]},{role:"model",parts:[{text:""}]},...g.map(Se=>({role:Se.role==="user"?"user":"model",parts:[{text:Se.content}]})),{role:"user",parts:[{text:se}]}];return((be=(lt=(We=(ze=(Ve=(await(await fetch(ne,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:je,generationConfig:{temperature:.9,maxOutputTokens:qe?2048:256}})})).json()).candidates)==null?void 0:Ve[0])==null?void 0:ze.content)==null?void 0:We.parts)==null?void 0:lt[0])==null?void 0:be.text)||""},Pe=async()=>{N(!0),x(!0);try{const se=await Ee("");h([{role:"ai",content:se}])}catch(se){console.error("Error starting session:",se),h([{role:"ai",content:""}])}finally{x(!1)}},nt=se=>["","","","","","OK","ok","","","done","",""].some(X=>se.toLowerCase().includes(X.toLowerCase())),ut=async()=>{if(!b.trim()||j)return;const se=b.trim();h(qe=>[...qe,{role:"user",content:se}]),w(""),x(!0);try{if(nt(se)){h(X=>[...X,{role:"ai",content:"OK..."}]);const qe=await Ee(ke(),!0);L(qe),B(!0),N(!1),h(X=>[...X,{role:"ai",content:" "}])}else{const qe=await Ee(se);h(X=>[...X,{role:"ai",content:qe}])}}catch(qe){console.error("Error:",qe),h(X=>[...X,{role:"ai",content:""}])}finally{x(!1)}},he=async()=>{if(g.filter(se=>se.role==="user").length!==0){x(!0),h(se=>[...se,{role:"ai",content:"OK..."}]);try{const se=await Ee(ke(),!0);L(se),B(!0),N(!1),h(qe=>[...qe,{role:"ai",content:" "}])}catch(se){console.error("Error generating note:",se),alert("")}finally{x(!1)}}},Ze=async()=>{if(!E.trim())return;const se=`
${E}`;try{await e({date:n,content:se,isFavorite:!1}),k(!0),setTimeout(()=>{k(!1),F()},2e3)}catch(qe){console.error("Failed to save morning note:",qe),alert("")}},F=()=>{h([]),w(""),x(!1),B(!1),L(""),M(0),N(!1)};return i.jsxs("div",{className:"space-y-6 pb-8 max-w-4xl mx-auto",children:[l&&i.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"rounded-2xl p-8 max-w-lg w-full",style:{backgroundColor:"var(--bg-card)"},children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("span",{className:"text-6xl mb-4 block",children:ge[d].icon}),i.jsx("h2",{className:"text-2xl font-bold mb-2",style:{color:"var(--text-primary)"},children:ge[d].title})]}),i.jsx("div",{className:"text-left mb-8 whitespace-pre-line leading-relaxed",style:{color:"var(--text-secondary)"},children:ge[d].content}),i.jsx("div",{className:"flex justify-center gap-2 mb-6",children:ge.map((se,qe)=>i.jsx("button",{onClick:()=>p(qe),className:`w-2 h-2 rounded-full transition-all ${qe===d?"w-6":""}`,style:{backgroundColor:qe===d?"var(--accent-secondary)":"var(--border-primary)"}},qe))}),i.jsxs("div",{className:"flex gap-3",children:[d>0&&i.jsx("button",{onClick:()=>p(se=>se-1),className:"flex-1 py-3 rounded-xl font-medium transition-all",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)"},children:""}),d<ge.length-1?i.jsx("button",{onClick:()=>p(se=>se+1),className:"flex-1 py-3 rounded-xl font-medium transition-all",style:{backgroundColor:"var(--accent-secondary)",color:"white"},children:""}):i.jsx("button",{onClick:ve,className:"flex-1 py-3 rounded-xl font-medium transition-all",style:{backgroundColor:"var(--accent-secondary)",color:"white"},children:""})]}),i.jsx("button",{onClick:ve,className:"mt-4 w-full text-sm",style:{color:"var(--text-tertiary)"},children:""})]})}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:" "}),i.jsx("p",{className:"text-sm mt-1",style:{color:"var(--text-tertiary)"},children:""})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:()=>c(!0),className:"px-3 py-1.5 rounded-lg text-sm transition-all",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},children:" "}),i.jsxs("button",{onClick:()=>o(!A),className:"px-3 py-1.5 rounded-lg text-sm transition-all",style:{backgroundColor:A?"var(--accent-secondary)":"var(--bg-tertiary)",color:A?"white":"var(--text-secondary)"},children:["  (",te.length,")"]})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"rounded-xl p-4 text-center",style:{backgroundColor:"var(--bg-card)"},children:[i.jsx("div",{className:"text-3xl mb-1",children:""}),i.jsx("div",{className:"text-2xl font-bold",style:{color:"var(--accent-secondary)"},children:de()}),i.jsx("div",{className:"text-xs",style:{color:"var(--text-tertiary)"},children:""})]}),i.jsxs("div",{className:"rounded-xl p-4 text-center",style:{backgroundColor:"var(--bg-card)"},children:[i.jsx("div",{className:"text-3xl mb-1",children:""}),i.jsx("div",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:te.length}),i.jsx("div",{className:"text-xs",style:{color:"var(--text-tertiary)"},children:""})]}),i.jsxs("div",{className:"rounded-xl p-4 text-center",style:{backgroundColor:"var(--bg-card)"},children:[i.jsx("div",{className:"text-3xl mb-1",children:ue?"":""}),i.jsx("div",{className:"text-lg font-bold",style:{color:ue?"var(--success)":"var(--text-secondary)"},children:ue?"":""}),i.jsx("div",{className:"text-xs",style:{color:"var(--text-tertiary)"},children:""})]})]}),A&&i.jsxs("div",{className:"rounded-xl p-4",style:{backgroundColor:"var(--bg-card)"},children:[i.jsx("h3",{className:"font-medium mb-3",style:{color:"var(--text-primary)"},children:""}),ie.length===0?i.jsx("p",{className:"text-sm",style:{color:"var(--text-tertiary)"},children:""}):i.jsx("div",{className:"flex flex-wrap gap-2",children:ie.map(se=>i.jsx("button",{onClick:()=>a(se),className:`px-3 py-1.5 rounded-lg text-sm transition-all ${s===se?"ring-2":""}`,style:{backgroundColor:se===n?"var(--accent-secondary)":"var(--bg-tertiary)",color:se===n?"white":"var(--text-secondary)",ringColor:"var(--accent-secondary)"},children:se===n?"":H(se)},se))})]}),$&&i.jsx("div",{className:"rounded-xl p-4 text-center",style:{backgroundColor:"var(--success)",color:"white"},children:" "}),s!==n&&fe?i.jsxs("div",{className:"rounded-xl p-6",style:{backgroundColor:"var(--bg-card)"},children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"font-medium",style:{color:"var(--text-primary)"},children:[re(s),""]}),i.jsx("button",{onClick:()=>a(n),className:"text-sm px-3 py-1 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},children:""})]}),i.jsx("div",{className:"whitespace-pre-wrap leading-relaxed",style:{color:"var(--text-secondary)"},children:Y(fe.content)}),i.jsxs("div",{className:"mt-4 text-xs",style:{color:"var(--text-tertiary)"},children:[Y(fe.content).length,""]})]}):ue&&g.length===0?i.jsxs("div",{className:"rounded-xl p-6",style:{backgroundColor:"var(--bg-card)"},children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("span",{className:"text-5xl",children:""}),i.jsx("h3",{className:"text-xl font-bold mt-4",style:{color:"var(--text-primary)"},children:""}),i.jsx("p",{className:"text-sm mt-2",style:{color:"var(--text-tertiary)"},children:""})]}),i.jsxs("div",{className:"border-t pt-4 mt-4",style:{borderColor:"var(--border-primary)"},children:[i.jsx("h4",{className:"text-sm font-medium mb-2",style:{color:"var(--text-secondary)"},children:""}),i.jsxs("div",{className:"whitespace-pre-wrap text-sm leading-relaxed",style:{color:"var(--text-tertiary)"},children:[Y(ue.content).substring(0,300),Y(ue.content).length>300&&"..."]}),i.jsxs("div",{className:"mt-3 text-xs",style:{color:"var(--text-tertiary)"},children:[Y(ue.content).length,""]})]})]}):g.length>0?i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"rounded-xl p-4",style:{backgroundColor:"var(--bg-card)"},children:[i.jsxs("div",{className:"flex items-center justify-between mb-4 pb-3 border-b",style:{borderColor:"var(--border-primary)"},children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsx("span",{className:"text-xl font-mono font-bold",style:{color:"var(--text-primary)"},children:I(U)})]}),i.jsxs("div",{className:"text-sm",style:{color:"var(--text-tertiary)"},children:[i.jsx("span",{className:"font-bold",style:{color:le()>=500?"var(--success)":"var(--text-primary)"},children:le()})," "]})]}),i.jsxs("div",{className:"h-80 overflow-y-auto space-y-3 mb-4",children:[g.map((se,qe)=>i.jsx("div",{className:`flex ${se.role==="user"?"justify-end":"justify-start"}`,children:i.jsx("div",{className:`max-w-[85%] px-4 py-2 rounded-2xl ${se.role==="user"?"rounded-br-sm":"rounded-bl-sm"}`,style:{backgroundColor:se.role==="user"?"var(--accent-secondary)":"var(--bg-tertiary)",color:se.role==="user"?"white":"var(--text-primary)"},children:se.content})},qe)),j&&i.jsx("div",{className:"flex justify-start",children:i.jsx("div",{className:"px-4 py-2 rounded-2xl rounded-bl-sm",style:{backgroundColor:"var(--bg-tertiary)"},children:i.jsx("span",{className:"animate-pulse",children:"..."})})}),i.jsx("div",{ref:z})]}),!y&&i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{ref:_,type:"text",value:b,onChange:se=>w(se.target.value),onKeyDown:se=>{se.key==="Enter"&&!se.shiftKey&&(se.preventDefault(),ut())},placeholder:"...",disabled:j,className:"flex-1 px-4 py-3 rounded-xl focus:outline-none focus:ring-2",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-primary)",ringColor:"var(--accent-secondary)"}}),i.jsx(pu,{onTranscript:se=>w(qe=>qe+se),onAutoSend:ut,disabled:j}),i.jsx("button",{onClick:ut,disabled:!b.trim()||j,className:"px-4 py-2 rounded-xl transition-all disabled:opacity-50",style:{backgroundColor:"var(--accent-secondary)",color:"white"},children:""})]}),g.filter(se=>se.role==="user").length>0&&!y&&i.jsx("button",{onClick:he,disabled:j,className:"mt-3 w-full py-2 rounded-xl text-sm transition-all disabled:opacity-50",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},children:" "})]}),i.jsxs("div",{className:"rounded-xl p-4",style:{backgroundColor:"var(--bg-card)"},children:[i.jsx("h3",{className:"font-medium mb-3",style:{color:"var(--text-primary)"},children:" "}),y&&E?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"h-72 overflow-y-auto p-3 rounded-lg whitespace-pre-wrap text-sm leading-relaxed",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},children:E}),i.jsxs("div",{className:"mt-4 flex gap-2",children:[i.jsx("button",{onClick:F,className:"px-4 py-2 rounded-xl transition-all",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},children:""}),i.jsx("button",{onClick:Ze,className:"flex-1 py-3 rounded-xl font-medium transition-all",style:{backgroundColor:"var(--accent-secondary)",color:"white"},children:" "})]})]}):i.jsx("div",{className:"h-72 flex items-center justify-center p-4 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"},children:i.jsxs("div",{className:"text-center",style:{color:"var(--text-tertiary)"},children:[i.jsx("span",{className:"text-4xl block mb-3",children:""}),i.jsxs("p",{children:["AI",i.jsx("br",{}),""]}),i.jsx("p",{className:"text-xs mt-2",children:""})]})})]})]}):i.jsxs("div",{className:"rounded-xl p-8 text-center",style:{backgroundColor:"var(--bg-card)"},children:[i.jsx("span",{className:"text-6xl block mb-4",children:""}),i.jsxs("h2",{className:"text-2xl font-bold mb-2",style:{color:"var(--text-primary)"},children:["",r.username||""]}),i.jsxs("p",{className:"mb-6",style:{color:"var(--text-secondary)"},children:["",i.jsx("br",{}),"AI"]}),i.jsx("button",{onClick:Pe,disabled:j,className:"px-8 py-4 rounded-2xl font-bold text-lg transition-all hover:scale-105 disabled:opacity-50",style:{backgroundColor:"var(--accent-secondary)",color:"white"},children:j?"...":" "}),i.jsxs("div",{className:"mt-8 grid grid-cols-3 gap-4 text-sm",style:{color:"var(--text-tertiary)"},children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl mb-1",children:""}),i.jsx("div",{children:""})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl mb-1",children:""}),i.jsx("div",{children:""})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl mb-1",children:""}),i.jsx("div",{children:""})]})]})]}),i.jsxs("div",{className:"rounded-xl p-4",style:{backgroundColor:"var(--bg-card)"},children:[i.jsxs("h3",{className:"font-medium mb-2 flex items-center gap-2",style:{color:"var(--text-primary)"},children:[i.jsx("span",{children:""})," "]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-center text-sm",children:[i.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"},children:[i.jsx("div",{className:"text-xl mb-1",children:""}),i.jsx("div",{style:{color:"var(--text-secondary)"},children:""})]}),i.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"},children:[i.jsx("div",{className:"text-xl mb-1",children:""}),i.jsx("div",{style:{color:"var(--text-secondary)"},children:"UP"})]}),i.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"},children:[i.jsx("div",{className:"text-xl mb-1",children:""}),i.jsx("div",{style:{color:"var(--text-secondary)"},children:""})]}),i.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"var(--bg-tertiary)"},children:[i.jsx("div",{className:"text-xl mb-1",children:""}),i.jsx("div",{style:{color:"var(--text-secondary)"},children:""})]})]})]})]})}function C6({diaryEntries:t=[],addDiaryEntry:e,updateDiaryEntry:r,deleteDiaryEntry:n,events:s=[],goals:a=[],tasks:A=[]}){const[o,l]=V.useState(new Date().toISOString().split("T")[0]),[c,d]=V.useState(!1),[p,g]=V.useState([]),[h,b]=V.useState(""),[w,j]=V.useState(!1),[x,y]=V.useState(!1),[B,E]=V.useState(""),L=V.useRef(null),U=V.useRef(null),[M,G]=V.useState(null),[N,$]=V.useState(""),[k,_]=V.useState(!1),[z,O]=V.useState(null),te=t.filter(F=>F.date===o&&!(F.content&&F.content.includes(""))&&!(F.content&&F.content.includes(""))).sort((F,se)=>new Date(se.createdAt)-new Date(F.createdAt)),ue=A.filter(F=>F.date===o),fe=s.filter(F=>F.date===o),ie=a.filter(F=>F.progress<100),de=F=>{const se=new Date(F),qe=["","","","","","",""];return`${se.getFullYear()}${se.getMonth()+1}${se.getDate()}${qe[se.getDay()]}`},ge=F=>{if(!F)return"";const se=new Date(F);return`${se.getHours().toString().padStart(2,"0")}:${se.getMinutes().toString().padStart(2,"0")}`};V.useEffect(()=>{var F;(F=L.current)==null||F.scrollIntoView({behavior:"smooth"})},[p]),V.useEffect(()=>{g([]),y(!1),E(""),b("")},[o]);const ve=()=>`


${`

: ${de(o)}


${ue.length>0?ue.map(se=>`- ${se.title}${se.progress===100?"":`${se.progress||0}%`}`).join(`
`):""}


${fe.length>0?fe.map(se=>`- ${se.title}${se.time?` (${se.time})`:""}`).join(`
`):""}


${ie.length>0?ie.map(se=>`- ${se.title}${se.progress||0}%`).join(`
`):""}
`}


- 
- 
- 
- 


- 
- 
- 
- 


- 140
- 
- 1
-  


- 
- 
- 
- 
- 
- 

NG
- 
- 
- `,I=()=>`


${p.map(se=>`${se.role==="ai"?"":""}: ${se.content}`).join(`
`)}


- 
- 
- 
- 200400
- 
- 
- 



---

**English Version:**

`,H=async(F,se)=>{var ne,je,J,$e,Ve,ze,We,lt,be,Se;const qe=localStorage.getItem("ai_api_key")||"",X=localStorage.getItem("ai_provider")||"gemini";if(!qe)throw new Error("APIGemini API");if(X==="gemini"){const ee=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${qe}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:`${se}

${F.map(_e=>`${_e.role==="ai"?"":""}: ${_e.content}`).join(`
`)}`}]}],generationConfig:{temperature:.8,maxOutputTokens:8192}})}),we=await ee.json();if(!ee.ok)throw new Error(((ne=we.error)==null?void 0:ne.message)||"Gemini API ");return((ze=(Ve=($e=(J=(je=we.candidates)==null?void 0:je[0])==null?void 0:J.content)==null?void 0:$e.parts)==null?void 0:Ve[0])==null?void 0:ze.text)||""}else{const ee=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${qe}`},body:JSON.stringify({model:"llama-3.3-70b-versatile",messages:[{role:"system",content:se},...F.map(_e=>({role:_e.role==="ai"?"assistant":"user",content:_e.content}))],max_tokens:500,temperature:.8})}),we=await ee.json();if(!ee.ok)throw new Error(((We=we.error)==null?void 0:We.message)||"API ");return((Se=(be=(lt=we.choices)==null?void 0:lt[0])==null?void 0:be.message)==null?void 0:Se.content)||""}},re=async()=>{if(!(localStorage.getItem("ai_api_key")||"")){alert(`API

Gemini API
Google AI Studio: https://aistudio.google.com/apikey`);return}j(!0);try{const se=await H([],ve());g([{role:"ai",content:se}]),setTimeout(()=>{var qe;(qe=U.current)==null||qe.focus()},100)}catch(se){alert(`: ${se.message}`)}finally{j(!1)}},Y=F=>["","","","","","","","","ok","OK","","","",""].some(qe=>F.includes(qe)),le=async()=>{if(!h.trim()||w)return;const F=[...p,{role:"user",content:h}];g(F),b(""),j(!0);try{if(Y(h)){g([...F,{role:"ai",content:""}]);const se=await H(F,I());E(se),y(!0),g(qe=>[...qe.slice(0,-1),{role:"ai",content:""}])}else{const se=await H(F,ve());g([...F,{role:"ai",content:se}])}}catch(se){alert(`: ${se.message}`)}finally{j(!1),setTimeout(()=>{var se;(se=U.current)==null||se.focus()},100)}},me=async()=>{if(!(p.length<2||w)){j(!0);try{g(se=>[...se,{role:"ai",content:""}]);const F=await H(p,I());E(F),y(!0),g(se=>[...se.slice(0,-1),{role:"ai",content:""}])}catch(F){alert(`: ${F.message}`)}finally{j(!1)}}},ke=async()=>{if(B.trim())try{await e({date:o,content:B,isFavorite:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),alert(""),g([]),y(!1),E("")}catch(F){console.error("Failed to save diary:",F),alert("")}},Ee=()=>{const F=new Date(o);F.setDate(F.getDate()-1),l(F.toISOString().split("T")[0])},Pe=()=>{const F=new Date(o);F.setDate(F.getDate()+1),l(F.toISOString().split("T")[0])},nt=F=>{G(F),$(F.content||""),_(!0)},ut=async()=>{if(!(!M||!N.trim()))try{await r(M.id,{content:N,updatedAt:new Date().toISOString()}),_(!1),G(null),$("")}catch(F){console.error("Failed to update diary:",F),alert("")}},he=async F=>{try{await n(F),O(null);const se=t.find(qe=>qe.id===F);se&&se.date===o&&l(new Date().toISOString().split("T")[0])}catch(se){console.error("Failed to delete diary:",se),alert("")}},Ze={backgroundImage:"repeating-linear-gradient(transparent, transparent 23px, #d4c5a9 23px, #d4c5a9 24px)",backgroundSize:"100% 24px",lineHeight:"24px",fontSize:"10pt"};return i.jsxs("div",{className:"flex flex-col",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-2 mb-4",children:[i.jsx("h2",{className:"text-lg md:text-xl font-bold text-slate-200 flex items-center gap-2",children:" "}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("button",{onClick:()=>d(!c),className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${c?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:" "})})]}),c&&i.jsxs("div",{className:"mb-4 bg-slate-800/50 rounded-xl p-4 border border-slate-700 max-h-80 overflow-y-auto",children:[i.jsx("h3",{className:"text-sm font-bold text-slate-300 mb-3",children:""}),t.filter(F=>!(F.content&&F.content.includes(""))&&!(F.content&&F.content.includes(""))).length>0?i.jsx("div",{className:"space-y-2",children:t.filter(F=>!(F.content&&F.content.includes(""))&&!(F.content&&F.content.includes(""))).sort((F,se)=>new Date(se.date)-new Date(F.date)).map(F=>{var se;return i.jsxs("div",{className:`p-3 rounded-lg transition-colors ${F.date===o?"bg-blue-600/30 border border-blue-500":"bg-slate-900/50"}`,children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("button",{onClick:()=>{l(F.date),d(!1)},className:"flex-1 text-left hover:opacity-80",children:[i.jsxs("div",{className:"text-sm text-blue-400",children:[de(F.date),F.createdAt&&i.jsx("span",{className:"ml-2 text-slate-500",children:ge(F.createdAt)})]}),i.jsxs("div",{className:"text-xs text-slate-400 truncate mt-1",children:[(se=F.content)==null?void 0:se.substring(0,60),"..."]})]}),i.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[i.jsx("button",{onClick:qe=>{qe.stopPropagation(),nt(F)},className:"p-1.5 text-slate-400 hover:text-blue-400 hover:bg-slate-700 rounded transition-colors",title:"",children:""}),i.jsx("button",{onClick:qe=>{qe.stopPropagation(),O(F.id)},className:"p-1.5 text-slate-400 hover:text-red-400 hover:bg-slate-700 rounded transition-colors",title:"",children:""})]})]}),z===F.id&&i.jsxs("div",{className:"mt-2 p-2 bg-red-900/30 border border-red-500/50 rounded-lg",children:[i.jsx("p",{className:"text-xs text-red-300 mb-2",children:""}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>O(null),className:"flex-1 px-2 py-1 text-xs bg-slate-700 text-slate-300 rounded hover:bg-slate-600",children:""}),i.jsx("button",{onClick:()=>he(F.id),className:"flex-1 px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-500",children:""})]})]})]},F.id)})}):i.jsx("div",{className:"text-sm text-slate-500",children:""})]}),i.jsxs("div",{className:"flex-1 flex gap-4",children:[i.jsxs("div",{className:"flex-1 flex flex-col bg-slate-800/30 rounded-xl border border-slate-700 overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-700",children:[i.jsx("button",{onClick:Ee,className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:i.jsx("span",{className:"text-slate-400",children:""})}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-lg font-bold text-slate-200",children:de(o)}),i.jsxs("div",{className:"text-xs text-slate-500",children:[ue.length>0&&` ${ue.length}`,fe.length>0&&`  ${fe.length}`]})]}),i.jsx("button",{onClick:Pe,className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:i.jsx("span",{className:"text-slate-400",children:""})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:p.length===0?i.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h3",{className:"text-lg font-bold text-slate-200 mb-2",children:""}),i.jsxs("p",{className:"text-sm text-slate-400 mb-6 max-w-sm",children:["",i.jsx("br",{}),"OK"]}),te.length>0?i.jsxs("div",{className:"text-sm text-blue-400 mb-4",children:[" ",te.length,""]}):null,i.jsx("button",{onClick:re,disabled:w,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl font-medium hover:from-purple-500 hover:to-blue-500 transition-all disabled:opacity-50",children:w?"...":" "})]}):i.jsxs(i.Fragment,{children:[p.map((F,se)=>i.jsx("div",{className:`flex ${F.role==="user"?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-[80%] p-3 rounded-2xl ${F.role==="user"?"bg-blue-600 text-white rounded-br-md":"bg-slate-700 text-slate-200 rounded-bl-md"}`,children:[F.role==="ai"&&i.jsx("div",{className:"text-xs text-purple-400 mb-1",children:" AI"}),i.jsx("div",{className:"text-sm whitespace-pre-wrap",children:F.content})]})},se)),w&&i.jsx("div",{className:"flex justify-start",children:i.jsx("div",{className:"bg-slate-700 text-slate-400 p-3 rounded-2xl rounded-bl-md",children:i.jsxs("div",{className:"flex gap-1",children:[i.jsx("span",{className:"animate-bounce",children:"."}),i.jsx("span",{className:"animate-bounce",style:{animationDelay:"0.1s"},children:"."}),i.jsx("span",{className:"animate-bounce",style:{animationDelay:"0.2s"},children:"."})]})})}),i.jsx("div",{ref:L})]})}),p.length>0&&!x&&i.jsxs("div",{className:"p-4 border-t border-slate-700",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{ref:U,type:"text",value:h,onChange:F=>b(F.target.value),onKeyDown:F=>F.key==="Enter"&&!F.shiftKey&&le(),placeholder:"...",className:"flex-1 bg-slate-900 border border-slate-700 rounded-xl px-4 py-2 text-slate-200 outline-none focus:border-blue-500",disabled:w,autoFocus:!0}),i.jsx(pu,{onTranscript:F=>b(se=>se+F),onAutoSend:le,disabled:w}),i.jsx("button",{onClick:le,disabled:!h.trim()||w,className:"px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-500 transition-colors disabled:opacity-50",children:""})]}),i.jsxs("div",{className:"flex items-center justify-between mt-2",children:[i.jsx("div",{className:"text-xs text-slate-500",children:" OK"}),i.jsx("button",{onClick:me,disabled:p.filter(F=>F.role==="user").length<1||w,className:"text-xs px-3 py-1 bg-purple-600/50 text-purple-300 rounded-lg hover:bg-purple-600 transition-colors disabled:opacity-30",children:" "})]})]})]}),i.jsxs("div",{className:"w-96 flex flex-col",children:[i.jsxs("div",{className:"flex-1 bg-gradient-to-b from-amber-100 to-amber-50 rounded-xl shadow-lg overflow-hidden flex flex-col",style:{minHeight:"500px"},children:[i.jsx("div",{className:"bg-amber-200/50 px-4 py-3 border-b border-amber-300",children:i.jsx("div",{className:"text-amber-800 font-medium text-sm",children:de(o)})}),i.jsx("div",{className:"flex-1 p-4 overflow-y-auto",style:Ze,children:x&&B?i.jsx("div",{className:"text-amber-900 whitespace-pre-wrap",children:B}):te.length>0?i.jsx("div",{className:"space-y-4",children:te.map((F,se)=>i.jsxs("div",{className:se>0?"pt-4 border-t border-amber-300":"",children:[i.jsx("div",{className:"text-xs text-amber-600 mb-1",children:ge(F.createdAt)}),i.jsx("div",{className:"text-amber-900 whitespace-pre-wrap",children:F.content})]},F.id))}):i.jsxs("div",{className:"text-amber-400 italic",children:["",i.jsx("br",{}),"AI",i.jsx("br",{}),""]})})]}),x&&B&&i.jsxs("div",{className:"mt-4 flex gap-2",children:[i.jsx("button",{onClick:()=>{g([]),y(!1),E("")},className:"flex-1 px-4 py-2 bg-slate-700 text-slate-200 rounded-lg hover:bg-slate-600 transition-colors",children:""}),i.jsx("button",{onClick:ke,className:"flex-1 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-500 transition-colors font-medium",children:" "})]})]})]}),k&&M&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-slate-800 rounded-xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-700",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-200",children:" "}),i.jsx("button",{onClick:()=>{_(!1),G(null),$("")},className:"p-2 text-slate-400 hover:text-slate-200 hover:bg-slate-700 rounded-lg transition-colors",children:""})]}),i.jsxs("div",{className:"p-4 flex-1 overflow-y-auto",children:[i.jsx("div",{className:"mb-3",children:i.jsx("div",{className:"text-sm text-blue-400 mb-1",children:de(M.date)})}),i.jsx("textarea",{value:N,onChange:F=>$(F.target.value),className:"w-full h-64 bg-slate-900 border border-slate-700 rounded-lg p-3 text-slate-200 resize-none outline-none focus:border-blue-500",placeholder:"..."})]}),i.jsxs("div",{className:"flex gap-2 p-4 border-t border-slate-700",children:[i.jsx("button",{onClick:()=>{_(!1),G(null),$("")},className:"flex-1 px-4 py-2 bg-slate-700 text-slate-200 rounded-lg hover:bg-slate-600 transition-colors",children:""}),i.jsx("button",{onClick:ut,disabled:!N.trim(),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-500 transition-colors font-medium disabled:opacity-50",children:" "})]})]})})]})}function N6({shoppingItems:t,addShoppingItem:e,updateShoppingItem:r,deleteShoppingItem:n,events:s,goals:a}){const[A,o]=V.useState(!1),[l,c]=V.useState(null),[d,p]=V.useState({title:"",store:"",timing:"immediate",linkedType:"",linkedId:""}),[g,h]=V.useState("all"),[b,w]=V.useState("all"),j=["","100","amazon",""],x={immediate:"",future:""},y=t.filter(N=>{const $=g==="all"||N.store===g,k=b==="all"||N.timing===b;return $&&k&&!N.purchased}),B=t.filter(N=>N.purchased),E=j.map(N=>{const $=y.filter(k=>k.store===N);return{store:N,count:$.length}}),L=(N,$)=>{if(!N||!$)return null;if(N==="event"){const k=s.find(_=>String(_.id)===String($));return k?{type:"event",name:k.title,date:k.date,icon:"",colorId:k.colorId||"emerald"}:null}if(N==="goal"){const k=a.find(_=>String(_.id)===String($));return k?{type:"goal",name:k.title,date:k.date,icon:"",colorId:k.colorId||"purple"}:null}return null},U=()=>{d.title.trim()&&(e({title:d.title,store:d.store,timing:d.timing,purchased:!1,linkedType:d.linkedType,linkedId:d.linkedId}),p({title:"",store:"",timing:"immediate",linkedType:"",linkedId:""}),o(!1))},M=()=>{!l||!l.title.trim()||(r(l.id,{title:l.title,store:l.store,timing:l.timing,linkedType:l.linkedType,linkedId:l.linkedId}),c(null))},G=N=>{r(N.id,{...N,purchased:!N.purchased})};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h2",{className:"text-xl font-bold",children:""}),i.jsxs("span",{className:"text-slate-400",children:["(",y.length," )"]})]}),i.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg transition-colors",children:[i.jsx(bt,{name:"plus",size:18}),""]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[i.jsx("p",{className:"text-slate-400 text-sm",children:""}),i.jsxs("p",{className:"text-2xl font-bold text-blue-400",children:[y.length," "]})]}),i.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[i.jsx("p",{className:"text-slate-400 text-sm",children:""}),i.jsxs("p",{className:"text-2xl font-bold text-emerald-400",children:[B.length," "]})]})]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:E.map(({store:N,count:$})=>i.jsxs("div",{className:`bg-slate-800/30 rounded-lg p-3 border cursor-pointer transition-all ${g===N?"border-blue-400 bg-blue-600/20":"border-slate-700/50 hover:border-slate-600"}`,onClick:()=>h(g===N?"all":N),children:[i.jsx("p",{className:"text-sm text-slate-400",children:N}),i.jsxs("p",{className:"text-lg font-semibold",children:[$," "]})]},N))}),i.jsxs("div",{className:"flex gap-2 flex-wrap",children:[i.jsx("button",{onClick:()=>h("all"),className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${g==="all"?"bg-blue-600 text-white":"bg-slate-800/50 text-slate-400 hover:bg-slate-700"}`,children:""}),j.map(N=>i.jsx("button",{onClick:()=>h(g===N?"all":N),className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${g===N?"bg-blue-600 text-white":"bg-slate-800/50 text-slate-400 hover:bg-slate-700"}`,children:N},N)),i.jsx("div",{className:"w-px bg-slate-700 mx-2"}),i.jsx("button",{onClick:()=>w("all"),className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${b==="all"?"bg-emerald-600 text-white":"bg-slate-800/50 text-slate-400 hover:bg-slate-700"}`,children:""}),i.jsx("button",{onClick:()=>w("immediate"),className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${b==="immediate"?"bg-emerald-600 text-white":"bg-slate-800/50 text-slate-400 hover:bg-slate-700"}`,children:""}),i.jsx("button",{onClick:()=>w("future"),className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${b==="future"?"bg-purple-600 text-white":"bg-slate-800/50 text-slate-400 hover:bg-slate-700"}`,children:""})]}),i.jsx("div",{className:"space-y-3",children:y.length===0?i.jsxs("div",{className:"text-center py-12 text-slate-500",children:[i.jsx(bt,{name:"shopping",size:48,className:"mx-auto mb-4 opacity-50"}),i.jsx("p",{children:""})]}):y.map(N=>{const $=L(N.linkedType,N.linkedId);return i.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50 flex items-center gap-4 group hover:bg-slate-800/70 transition-colors",children:[i.jsx("button",{onClick:()=>G(N),className:"w-6 h-6 rounded-full border-2 border-slate-600 hover:border-emerald-400 flex items-center justify-center transition-colors",children:N.purchased&&i.jsx(bt,{name:"check",size:14,className:"text-emerald-400"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("h3",{className:"font-semibold truncate",children:N.title}),i.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${N.timing==="immediate"?"bg-emerald-600/20 text-emerald-400":"bg-purple-600/20 text-purple-400"}`,children:x[N.timing]}),$&&(()=>{const k=Tn($.colorId);return i.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${k.bgLight} ${k.text}`,children:[$.icon," ",$.name]})})()]}),i.jsx("div",{className:"flex items-center gap-3 mt-1 text-sm text-slate-400",children:i.jsx("span",{className:"bg-slate-700/50 px-2 py-0.5 rounded",children:N.store})})]}),i.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[i.jsx("button",{onClick:()=>c(N),className:"p-2 text-slate-400 hover:text-blue-400 transition-colors",children:i.jsx(bt,{name:"edit",size:16})}),i.jsx("button",{onClick:()=>n(N.id),className:"p-2 text-slate-400 hover:text-red-400 transition-colors",children:i.jsx(bt,{name:"trash",size:16})})]})]},N.id)})}),B.length>0&&i.jsxs("div",{className:"mt-8",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-400 mb-4",children:[" (",B.length,")"]}),i.jsx("div",{className:"space-y-2",children:B.map(N=>i.jsxs("div",{className:"bg-slate-800/30 rounded-lg p-3 border border-slate-700/30 flex items-center gap-4 opacity-60",children:[i.jsx("button",{onClick:()=>G(N),className:"w-6 h-6 rounded-full bg-emerald-600 flex items-center justify-center",children:i.jsx(bt,{name:"check",size:14,className:"text-white"})}),i.jsx("span",{className:"flex-1 line-through text-slate-500",children:N.title}),i.jsx("span",{className:"text-sm text-slate-500",children:N.store}),i.jsx("button",{onClick:()=>n(N.id),className:"p-1 text-slate-600 hover:text-red-400 transition-colors",children:i.jsx(bt,{name:"trash",size:14})})]},N.id))})]}),A&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>o(!1),children:i.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 w-full max-w-md border border-slate-700",onClick:N=>N.stopPropagation(),children:[i.jsx("h3",{className:"text-lg font-bold mb-4",children:""}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:""}),i.jsx("input",{type:"text",value:d.title,onChange:N=>p({...d,title:N.target.value}),className:"w-full bg-slate-700/50 border border-slate-600 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:": "})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:""}),i.jsx("select",{value:d.store,onChange:N=>p({...d,store:N.target.value}),className:"w-full bg-slate-700/50 border border-slate-600 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:j.map(N=>i.jsx("option",{value:N,children:N},N))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:""}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>p({...d,timing:"immediate"}),className:`flex-1 py-2 rounded-lg transition-colors ${d.timing==="immediate"?"bg-emerald-600 text-white":"bg-slate-700/50 text-slate-400"}`,children:""}),i.jsx("button",{type:"button",onClick:()=>p({...d,timing:"future"}),className:`flex-1 py-2 rounded-lg transition-colors ${d.timing==="future"?"bg-purple-600 text-white":"bg-slate-700/50 text-slate-400"}`,children:""})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:" ()"}),i.jsxs("select",{value:`${d.linkedType}:${d.linkedId}`,onChange:N=>{const[$,k]=N.target.value.split(":");p({...d,linkedType:$||"",linkedId:k||""})},className:"w-full bg-slate-700/50 border border-slate-600 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:":",children:""}),i.jsx("optgroup",{label:" ",children:s.map(N=>i.jsxs("option",{value:`event:${N.id}`,children:[N.date?`${N.date} - `:"",N.title]},`event-${N.id}`))}),i.jsx("optgroup",{label:" ",children:a.map(N=>i.jsxs("option",{value:`goal:${N.id}`,children:[N.date?`${N.date} - `:"",N.title]},`goal-${N.id}`))})]})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{onClick:()=>o(!1),className:"flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg transition-colors",children:""}),i.jsx("button",{onClick:U,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",children:""})]})]})}),l&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>c(null),children:i.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 w-full max-w-md border border-slate-700",onClick:N=>N.stopPropagation(),children:[i.jsx("h3",{className:"text-lg font-bold mb-4",children:""}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:""}),i.jsx("input",{type:"text",value:l.title,onChange:N=>c({...l,title:N.target.value}),className:"w-full bg-slate-700/50 border border-slate-600 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:""}),i.jsx("select",{value:l.store,onChange:N=>c({...l,store:N.target.value}),className:"w-full bg-slate-700/50 border border-slate-600 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:j.map(N=>i.jsx("option",{value:N,children:N},N))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:""}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>c({...l,timing:"immediate"}),className:`flex-1 py-2 rounded-lg transition-colors ${l.timing==="immediate"?"bg-emerald-600 text-white":"bg-slate-700/50 text-slate-400"}`,children:""}),i.jsx("button",{type:"button",onClick:()=>c({...l,timing:"future"}),className:`flex-1 py-2 rounded-lg transition-colors ${l.timing==="future"?"bg-purple-600 text-white":"bg-slate-700/50 text-slate-400"}`,children:""})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:" ()"}),i.jsxs("select",{value:`${l.linkedType}:${l.linkedId}`,onChange:N=>{const[$,k]=N.target.value.split(":");c({...l,linkedType:$||"",linkedId:k||""})},className:"w-full bg-slate-700/50 border border-slate-600 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:":",children:""}),i.jsx("optgroup",{label:" ",children:s.map(N=>i.jsxs("option",{value:`event:${N.id}`,children:[N.date?`${N.date} - `:"",N.title]},`event-${N.id}`))}),i.jsx("optgroup",{label:" ",children:a.map(N=>i.jsxs("option",{value:`goal:${N.id}`,children:[N.date?`${N.date} - `:"",N.title]},`goal-${N.id}`))})]})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{onClick:()=>c(null),className:"flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg transition-colors",children:""}),i.jsx("button",{onClick:M,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",children:""})]})]})})]})}function S6(){var hl,Ti,to,bA,ro,Ma,no,fl,pl,Li,Pi,gl,$a,ml,m,T,ae,xe,Qe,tt,ct,Mt,Vt,or,hr,Sr,en,mn,Hr,Bn,xn,Hn,Oi,ri,Di,so,BA,ca,Ka,Ga,ua,Mn,Va,za,io,ao,ns,Ri,CA,xl,Ds,qa,Ao,oo,da,Wa,Bs,Cs,ha,Hi,fa,lo,NA,un,vl,fi,pi,co,uo,ho,fo,pa,ga,ma,Ja,xa,Ya,Rs,gi,Ur,Or,dn,Cn,Mi,po,SA,wl,ju,Eu,Fu;const[t]=V.useState(["BTC/USDT","ETH/USDT","SOL/USDT","DOGE/USDT"]),[e,r]=V.useState("BTC/USDT"),[n,s]=V.useState({}),[a,A]=V.useState({}),[o,l]=V.useState(!0),[c,d]=V.useState(!1),[p,g]=V.useState(.5),[h,b]=V.useState(null),[w,j]=V.useState("midnight"),[x,y]=V.useState(!0),[B,E]=V.useState({}),[L,U]=V.useState(()=>localStorage.getItem("kucoin_api_key")||""),[M,G]=V.useState(()=>localStorage.getItem("kucoin_api_secret")||""),[N,$]=V.useState(()=>localStorage.getItem("kucoin_passphrase")||""),[k,_]=V.useState(()=>localStorage.getItem("kucoin_api_version")||"3"),[z,O]=V.useState(!1),[te,ue]=V.useState(null),[fe,ie]=V.useState(!1),[de,ge]=V.useState("1"),[ve,I]=V.useState("5"),[H,re]=V.useState([]),[Y,le]=V.useState(!1),[me,ke]=V.useState(()=>localStorage.getItem("trade_one_click_mode")==="true");V.useEffect(()=>{localStorage.setItem("trade_one_click_mode",me.toString())},[me]);const[Ee,Pe]=V.useState(()=>{try{const C=localStorage.getItem("trade_memos");return C?JSON.parse(C):{}}catch{return{}}});V.useEffect(()=>{localStorage.setItem("trade_memos",JSON.stringify(Ee))},[Ee]);const[nt,ut]=V.useState(!1),[he,Ze]=V.useState(""),[F,se]=V.useState(""),[qe,X]=V.useState(""),[ne,je]=V.useState("10"),[J,$e]=V.useState(()=>{try{const C=localStorage.getItem("price_alerts");return C?JSON.parse(C):[]}catch{return[]}});V.useEffect(()=>{localStorage.setItem("price_alerts",JSON.stringify(J))},[J]);const[Ve,ze]=V.useState(()=>{try{const C=localStorage.getItem("daily_pnl"),D=C?JSON.parse(C):{date:"",trades:0,wins:0,pnl:0},q=new Date().toISOString().split("T")[0];return D.date!==q?{date:q,trades:0,wins:0,pnl:0}:D}catch{return{date:new Date().toISOString().split("T")[0],trades:0,wins:0,pnl:0}}});V.useEffect(()=>{localStorage.setItem("daily_pnl",JSON.stringify(Ve))},[Ve]);const[We,lt]=V.useState(()=>{try{const C=localStorage.getItem("trade_positions");return C?JSON.parse(C):{}}catch{return{}}});V.useEffect(()=>{localStorage.setItem("trade_positions",JSON.stringify(We))},[We]),V.useEffect(()=>{L&&localStorage.setItem("kucoin_api_key",L),M&&localStorage.setItem("kucoin_api_secret",M),N&&localStorage.setItem("kucoin_passphrase",N),k&&localStorage.setItem("kucoin_api_version",k)},[L,M,N,k]);const be=async(C,D,q,ce,pe)=>{const Ie=`${C}${D}${q}${ce}`,Ue=new TextEncoder,De=Ue.encode(pe),Be=Ue.encode(Ie),Re=await crypto.subtle.importKey("raw",De,{name:"HMAC",hash:"SHA-256"},!1,["sign"]),it=await crypto.subtle.sign("HMAC",Re,Be);return btoa(String.fromCharCode(...new Uint8Array(it)))},Se=async(C,D)=>{const q=new TextEncoder,ce=q.encode(D),pe=q.encode(C),Ie=await crypto.subtle.importKey("raw",ce,{name:"HMAC",hash:"SHA-256"},!1,["sign"]),Ue=await crypto.subtle.sign("HMAC",Ie,pe);return btoa(String.fromCharCode(...new Uint8Array(Ue)))},[ee,we]=V.useState(""),_e=[{name:"Cloudflare Workers",url:"https://kucoin-futures-proxy.awogurix.workers.dev",region:"auto"},{name:"Direct (CORS required)",url:"https://api-futures.kucoin.com",region:"direct"}],[Je,Xe]=V.useState(()=>parseInt(localStorage.getItem("kucoin_proxy_index")||"0"));V.useEffect(()=>{localStorage.setItem("kucoin_proxy_index",Je.toString())},[Je]);const ye=((hl=_e[Je])==null?void 0:hl.url)||_e[0].url,Le=async()=>{var C;if(!L||!M||!N){we("API");return}we("...");try{const D=Date.now().toString(),q="GET",ce="/api/v1/account-overview?currency=USDT",Ie=await be(D,q,ce,"",M),Ue=k==="2"||k==="3"||k==="3"?await Se(N,M):N,De=`${ye}/api/v1/account-overview?currency=USDT`;console.log("Request details:",{timestamp:D,method:q,endpoint:ce,apiVersion:k});const Be=await fetch(De,{method:"GET",headers:{"Content-Type":"application/json","KC-API-KEY":L,"KC-API-SIGN":Ie,"KC-API-TIMESTAMP":D,"KC-API-PASSPHRASE":Ue,"KC-API-KEY-VERSION":k}}),Re=await Be.json();if(console.log("KuCoin Futures API Response:",Re),Re.code==="200000"&&Re.data)ue({accountEquity:parseFloat(Re.data.accountEquity||0),availableBalance:parseFloat(Re.data.availableBalance||0),marginBalance:parseFloat(Re.data.marginBalance||0),unrealisedPNL:parseFloat(Re.data.unrealisedPNL||0),currency:Re.data.currency||"USDT"}),we(" ");else{let it=Re.msg||"API";const Ke=((C=Re.code)==null?void 0:C.toString())||"";Be.status===404||Ke==="404"?it="APIKuCoin API":Ke==="400001"?it="KC-API-KEY":Ke==="400002"?it="":Ke==="400003"?it="APIAPI":Ke==="400004"?it="Passphrase":Ke==="400005"?it="API Secret":Ke==="400007"?it="Futures":Ke==="411100"?it="Futures":(Ke==="400003"||Re.msg&&Re.msg.includes("unavailable in the U.S"))&&(it="USVPN/SG"),(Re.error==="HTML_RESPONSE"||Re.error==="REGION_RESTRICTED")&&(it="VPN"),Re.error==="Not Found"&&(it=""),we(` ${it} (${Ke||Be.status||"ERR"})`),console.error("KuCoin API Error:",Re,"Status:",Be.status)}}catch(D){console.error("KuCoin balance error:",D),D.message.includes("Unexpected token")||D.message.includes("JSON")?we(" VPN/SG"):we(` ${D.message}`)}},ft=async()=>{if(!(!L||!M||!N))try{const C=Date.now().toString(),D="GET",q="/api/v1/positions",pe=await be(C,D,q,"",M),Ie=k==="2"||k==="3"?await Se(N,M):N,De=await(await fetch(`${ye}${q}`,{method:D,headers:{"Content-Type":"application/json","KC-API-KEY":L,"KC-API-SIGN":pe,"KC-API-TIMESTAMP":C,"KC-API-PASSPHRASE":Ie,"KC-API-KEY-VERSION":k}})).json();if(console.log("KuCoin Positions:",De),De.code==="200000"&&De.data){const Be=De.data.filter(Re=>Re.currentQty!==0);re(Be.map(Re=>({symbol:Re.symbol,side:Re.currentQty>0?"LONG":"SHORT",qty:Math.abs(Re.currentQty),entryPrice:parseFloat(Re.avgEntryPrice),markPrice:parseFloat(Re.markPrice),unrealisedPnl:parseFloat(Re.unrealisedPnl),realisedPnl:parseFloat(Re.realisedGrossPnl),leverage:parseFloat(Re.realLeverage),liquidationPrice:parseFloat(Re.liquidationPrice),margin:parseFloat(Re.posMargin),openTime:Re.openingTimestamp,maintMargin:parseFloat(Re.maintMargin),roe:Re.unrealisedRoePcnt?parseFloat(Re.unrealisedRoePcnt)*100:0})))}}catch(C){console.error("KuCoin positions error:",C)}},At=async()=>{if(!L||!M||!N){alert("API");return}if(H.length===0){alert("");return}if(confirm(` 

${H.length}

`)){le(!0);try{const C=[];for(const q of H){const ce=Date.now().toString(),pe="POST",Ie="/api/v1/orders",Ue={clientOid:`emergency_close_${Date.now()}_${q.symbol}`,symbol:q.symbol,side:q.side==="LONG"?"sell":"buy",type:"market",closeOrder:!0,size:q.qty},De=JSON.stringify(Ue),Be=await be(ce,pe,Ie,De,M),Re=k==="2"||k==="3"?await Se(N,M):N,Ke=await(await fetch(`${ye}${Ie}`,{method:"POST",headers:{"Content-Type":"application/json","KC-API-KEY":L,"KC-API-SIGN":Be,"KC-API-TIMESTAMP":ce,"KC-API-PASSPHRASE":Re,"KC-API-KEY-VERSION":k},body:De})).json();C.push({symbol:q.symbol,success:Ke.code==="200000",data:Ke}),await new Promise(It=>setTimeout(It,200))}const D=C.filter(q=>q.success).length;alert(` 

: ${D}/${C.length}`),Le(),ft()}catch(C){console.error("Emergency close error:",C),alert(` : ${C.message}`)}finally{le(!1)}}},[wt,pt]=V.useState(()=>localStorage.getItem("kucoin_margin_mode")||"cross");V.useEffect(()=>{localStorage.setItem("kucoin_margin_mode",wt)},[wt]);const xt=async(C,D)=>{if(!L||!M||!N)return!1;try{const q=Date.now().toString(),ce="POST",pe="/api/v1/position/margin/auto-deposit-status",Ue=JSON.stringify({symbol:C,status:D==="cross"}),De=await be(q,ce,pe,Ue,M),Be=k==="2"||k==="3"?await Se(N,M):N,it=await(await fetch(`${ye}${pe}`,{method:"POST",headers:{"Content-Type":"application/json","KC-API-KEY":L,"KC-API-SIGN":De,"KC-API-TIMESTAMP":q,"KC-API-PASSPHRASE":Be,"KC-API-KEY-VERSION":k},body:Ue})).json();return console.log("Margin mode change response:",it),it.code==="200000"}catch(q){return console.error("Margin mode change error:",q),!1}},yt=async(C,D,q,ce)=>{var pe,Ie,Ue,De,Be,Re,it;if(!L||!M||!N)return alert("API"),O(!0),!1;ie(!0);try{const Ke=C.replace("BTC","XBT").replace("/","").replace("USDT","USDTM");console.log("Setting margin mode:",wt,"for",Ke),await xt(Ke,wt),await new Promise(os=>setTimeout(os,300));const It=Date.now().toString(),Bt="POST",Ct="/api/v1/orders",Ce=(te==null?void 0:te.availableBalance)||0,Nt=Ce*parseInt(q)/100,Rt=((Ue=(Ie=n[C])==null?void 0:Ie[((pe=n[C])==null?void 0:pe.length)-1])==null?void 0:Ue.close)||0,Ye=Rn(),jt=Ye.takeProfitPercent,Et=Ye.stopLossPercent,Qt=zr[C];let St,mt;(De=Qt==null?void 0:Qt.debateResult)!=null&&De.finalTP&&((Be=Qt==null?void 0:Qt.debateResult)!=null&&Be.finalSL)?(St=Qt.debateResult.finalTP,mt=Qt.debateResult.finalSL,console.log("Using confirmed debate TP/SL:",{tpPrice:St,slPrice:mt})):(Re=a[C])!=null&&Re.suggestedTP&&((it=a[C])!=null&&it.suggestedSL)?(St=a[C].suggestedTP,mt=a[C].suggestedSL,console.log("Using signal suggested TP/SL:",{tpPrice:St,slPrice:mt})):(D.toLowerCase()==="buy"?(St=Rt*(1+jt/100),mt=Rt*(1-Et/100)):(St=Rt*(1-jt/100),mt=Rt*(1+Et/100)),console.log("Using calculated TP/SL:",{tpPrice:St,slPrice:mt,tpPercent:jt,slPercent:Et}));const Pt=Nt*parseInt(ce),er=Math.max(1,Math.floor(Pt));console.log("Order calculation:",{totalBalance:Ce,sizePercentage:q,usageAmount:Nt,leverageValue:ce,buyingPower:Pt,contractSize:er,currentPrice:Rt,marginMode:wt,tpPrice:St,slPrice:mt});const lr={clientOid:`order_${Date.now()}`,symbol:Ke,side:D.toLowerCase(),type:"market",leverage:ce.toString(),size:er},Br=JSON.stringify(lr),Yt=await be(It,Bt,Ct,Br,M),fr=k==="2"||k==="3"?await Se(N,M):N,Jr=`${ye}/api/v1/orders`,$n=await(await fetch(Jr,{method:"POST",headers:{"Content-Type":"application/json","KC-API-KEY":L,"KC-API-SIGN":Yt,"KC-API-TIMESTAMP":It,"KC-API-PASSPHRASE":fr,"KC-API-KEY-VERSION":k},body:Br})).json();if(console.log("KuCoin Order Response:",$n),$n.code==="200000"){let os=!1,$i=!1,Fr=null,Dr=null;await new Promise(Ir=>setTimeout(Ir,500));try{const Ir=await zt(Ke,D.toLowerCase()==="buy"?"sell":"buy",er,St,"tp");Ir.success&&(os=!0,Fr=Ir.orderId)}catch(Ir){console.error("TP order failed:",Ir)}try{const Ir=await zt(Ke,D.toLowerCase()==="buy"?"sell":"buy",er,mt,"sl");Ir.success&&($i=!0,Dr=Ir.orderId)}catch(Ir){console.error("SL order failed:",Ir)}const Pr=os&&$i?" TP/SL":os?" TPSL":$i?" SLTP":" TP/SL";return alert(` 
OrderId: ${$n.data.orderId}
---
: ${er} 
: ${Rt.toFixed(2)} USDT
---
  (TP): ${St.toFixed(2)} USDT (+${jt.toFixed(2)}%)
  (SL): ${mt.toFixed(2)} USDT (-${Et.toFixed(2)}%)
${Pr}
---
: ${Nt.toFixed(2)} USDT (${q}%)
: ${Pt.toFixed(2)} USDT (${ce}x)
: ${Ce.toFixed(2)} USDT`),Le(),ft(),!0}else{const os=$n.msg&&($n.msg.includes("unavailable in the U.S")||$n.msg.includes("region")||$n.code==="400302");return alert(os?` : 

KuCoin API


1. VPN
2. 
3. 

---
: ${er}
: ${Nt.toFixed(2)} USDT`:` : ${$n.msg}

: ${er}
: ${Nt.toFixed(2)} USDT
`),!1}}catch(Ke){const It=Ke.message||"";return It.includes("unavailable")||It.includes("U.S")?alert(` 


1. VPN
2. 
3. `):alert(` : ${Ke.message}`),!1}finally{ie(!1)}},zt=async(C,D,q,ce,pe)=>{try{const Ie=Date.now().toString(),Ue="POST",De="/api/v1/orders",Be={clientOid:`${pe}_${Date.now()}`,symbol:C,side:D,type:"market",stop:pe==="tp"?"up":"down",stopPriceType:"TP",stopPrice:ce.toFixed(2),size:q,reduceOnly:!0,closeOrder:!0};D==="buy"&&(Be.stop=pe==="tp"?"down":"up");const Re=JSON.stringify(Be),it=await be(Ie,Ue,De,Re,M),Ke=k==="2"||k==="3"?await Se(N,M):N,It=`${ye}/api/v1/orders`,Ct=await(await fetch(It,{method:"POST",headers:{"Content-Type":"application/json","KC-API-KEY":L,"KC-API-SIGN":it,"KC-API-TIMESTAMP":Ie,"KC-API-PASSPHRASE":Ke,"KC-API-KEY-VERSION":k},body:Re})).json();return console.log(`${pe.toUpperCase()} Order Response:`,Ct),Ct.code==="200000"?{success:!0,orderId:Ct.data.orderId}:(console.error(`${pe.toUpperCase()} order failed:`,Ct.msg),{success:!1,error:Ct.msg})}catch(Ie){return console.error(`${pe.toUpperCase()} order error:`,Ie),{success:!1,error:Ie.message}}},kt=async C=>{if(!L||!M||!N)return alert("API"),!1;ie(!0);try{const D=Date.now().toString(),q="POST",ce="/api/v1/orders",pe=C.replace("BTC","XBT").replace("/","").replace("USDT","USDTM"),Ie={clientOid:`close_${Date.now()}`,symbol:pe,type:"market",closeOrder:!0,size:parseInt(de)},Ue=JSON.stringify(Ie),De=await be(D,q,ce,Ue,M),Be=k==="2"||k==="3"?await Se(N,M):N,Re=`${ye}/api/v1/orders`,Ke=await(await fetch(Re,{method:"POST",headers:{"Content-Type":"application/json","KC-API-KEY":L,"KC-API-SIGN":De,"KC-API-TIMESTAMP":D,"KC-API-PASSPHRASE":Be,"KC-API-KEY-VERSION":k},body:Ue})).json();return console.log("KuCoin Close Response:",Ke),Ke.code==="200000"?(alert(" "),Le(),!0):(alert(` : ${Ke.msg}`),!1)}catch(D){return alert(` : ${D.message}`),!1}finally{ie(!1)}},[Ut,br]=V.useState([]),[Q,Te]=V.useState([]),[st,Ge]=V.useState(!1),[Dt,ur]=V.useState("history"),Lt=async()=>{if(!(!L||!M||!N)){Ge(!0);try{const C=Date.now().toString(),D="GET",q="/api/v1/fills?pageSize=100",ce=await be(C,D,q,"",M),pe=k==="2"||k==="3"?await Se(N,M):N,Ue=await(await fetch(`${ye}${q}`,{method:"GET",headers:{"Content-Type":"application/json","KC-API-KEY":L,"KC-API-SIGN":ce,"KC-API-TIMESTAMP":C,"KC-API-PASSPHRASE":pe,"KC-API-KEY-VERSION":k}})).json();if(console.log("Trade History Response:",Ue),Ue.code==="200000"&&Ue.data&&Ue.data.items){const De=Ue.data.items.map(Be=>({id:Be.tradeId,orderId:Be.orderId,symbol:Be.symbol,side:Be.side,price:parseFloat(Be.price),size:parseFloat(Be.size),value:parseFloat(Be.value||0),fee:parseFloat(Be.fee||0),feeRate:parseFloat(Be.feeRate||0),pnl:parseFloat(Be.settleCurrency==="USDT"&&Be.pnl||0),time:new Date(Be.tradeTime||Be.createdAt),tradeType:Be.tradeType||"trade",liquidity:Be.liquidity}));br(De)}}catch(C){console.error("Trade history error:",C)}finally{Ge(!1)}}},gr=async()=>{if(!(!L||!M||!N)){Ge(!0);try{const C=Date.now().toString(),D="GET",q="/api/v1/history-positions?pageSize=50",ce=await be(C,D,q,"",M),pe=k==="2"||k==="3"?await Se(N,M):N,Ue=await(await fetch(`${ye}${q}`,{method:"GET",headers:{"Content-Type":"application/json","KC-API-KEY":L,"KC-API-SIGN":ce,"KC-API-TIMESTAMP":C,"KC-API-PASSPHRASE":pe,"KC-API-KEY-VERSION":k}})).json();if(console.log("PnL History Response:",Ue),Ue.code==="200000"&&Ue.data&&Ue.data.items){const De=Ue.data.items.map(Be=>({id:Be.id||Be.openingTimestamp,symbol:Be.symbol,side:Be.side,qty:parseFloat(Be.qty||Be.currentQty||0),entryPrice:parseFloat(Be.avgEntryPrice||0),closePrice:parseFloat(Be.avgClosePrice||0),pnl:parseFloat(Be.pnl||Be.realisedPnl||0),roe:parseFloat(Be.roe||0)*100,openTime:new Date(Be.openingTimestamp),closeTime:new Date(Be.closingTimestamp||Be.settledTimestamp),leverage:parseFloat(Be.leverage||1),fee:parseFloat(Be.tradeFee||0),fundingFee:parseFloat(Be.fundingFee||0)}));Te(De)}}catch(C){console.error("PnL history error:",C)}finally{Ge(!1)}}},Jt=V.useMemo(()=>{if(!Q.length)return[];const C=[...Q].sort((q,ce)=>q.closeTime-ce.closeTime);let D=0;return C.map(q=>(D+=q.pnl,{date:q.closeTime,pnl:q.pnl,cumulative:D,symbol:q.symbol,side:q.side}))},[Q]),ot=V.useMemo(()=>{if(!Q.length)return null;const C=Q.filter(Re=>Re.pnl>0),D=Q.filter(Re=>Re.pnl<0),q=Q.reduce((Re,it)=>Re+it.pnl,0),ce=Q.reduce((Re,it)=>Re+it.fee+it.fundingFee,0),pe=C.length?C.reduce((Re,it)=>Re+it.pnl,0)/C.length:0,Ie=D.length?D.reduce((Re,it)=>Re+it.pnl,0)/D.length:0,Ue=C.length?Math.max(...C.map(Re=>Re.pnl)):0,De=D.length?Math.min(...D.map(Re=>Re.pnl)):0,Be=D.length&&Ie!==0?Math.abs(C.reduce((Re,it)=>Re+it.pnl,0)/D.reduce((Re,it)=>Re+it.pnl,0)):0;return{totalTrades:Q.length,wins:C.length,losses:D.length,winRate:C.length/Q.length*100,totalPnl:q,totalFees:ce,netPnl:q-ce,avgWin:pe,avgLoss:Ie,maxWin:Ue,maxLoss:De,profitFactor:Be,avgRoe:Q.reduce((Re,it)=>Re+it.roe,0)/Q.length}},[Q]);V.useEffect(()=>{if(L&&M&&N){Le(),ft(),Lt(),gr();const C=setInterval(Le,3e4),D=setInterval(ft,1e4);return()=>{clearInterval(C),clearInterval(D)}}},[L,M,N]);const nr=V.useCallback(C=>{if(x)try{const D=new(window.AudioContext||window.webkitAudioContext),q=D.createOscillator(),ce=D.createGain();switch(q.connect(ce),ce.connect(D.destination),C){case"ENTRY_LONG":q.frequency.setValueAtTime(523.25,D.currentTime),q.frequency.setValueAtTime(659.25,D.currentTime+.15),q.frequency.setValueAtTime(783.99,D.currentTime+.3),ce.gain.setValueAtTime(.3,D.currentTime),ce.gain.exponentialRampToValueAtTime(.01,D.currentTime+.5),q.start(D.currentTime),q.stop(D.currentTime+.5);break;case"ENTRY_SHORT":q.frequency.setValueAtTime(783.99,D.currentTime),q.frequency.setValueAtTime(659.25,D.currentTime+.15),q.frequency.setValueAtTime(523.25,D.currentTime+.3),ce.gain.setValueAtTime(.3,D.currentTime),ce.gain.exponentialRampToValueAtTime(.01,D.currentTime+.5),q.start(D.currentTime),q.stop(D.currentTime+.5);break;case"TAKE_PROFIT":q.type="sine",q.frequency.setValueAtTime(1046.5,D.currentTime),q.frequency.setValueAtTime(1318.51,D.currentTime+.1),q.frequency.setValueAtTime(1567.98,D.currentTime+.2),q.frequency.setValueAtTime(2093,D.currentTime+.3),ce.gain.setValueAtTime(.25,D.currentTime),ce.gain.exponentialRampToValueAtTime(.01,D.currentTime+.6),q.start(D.currentTime),q.stop(D.currentTime+.6);break;case"STOP_LOSS":q.type="sawtooth",q.frequency.setValueAtTime(200,D.currentTime),q.frequency.setValueAtTime(150,D.currentTime+.2),q.frequency.setValueAtTime(200,D.currentTime+.4),ce.gain.setValueAtTime(.2,D.currentTime),ce.gain.exponentialRampToValueAtTime(.01,D.currentTime+.6),q.start(D.currentTime),q.stop(D.currentTime+.6);break;default:return}}catch(D){console.log("Sound play failed:",D)}},[x]);V.useEffect(()=>{const C=["ENTRY_LONG","ENTRY_SHORT","TAKE_PROFIT","STOP_LOSS"];for(const D of t){const q=a[D];if(!q)continue;const ce=q.signalType,pe=B[D];C.includes(ce)&&ce!==pe&&(nr(ce),E(Ie=>({...Ie,[D]:ce})))}},[a,t,B,nr]),V.useEffect(()=>{var D,q;if(J.length===0)return;const C=J.filter(ce=>!ce.triggered);if(C.length!==0)for(const ce of C){const pe=(q=(D=n[ce.symbol])==null?void 0:D.slice(-1)[0])==null?void 0:q.close;if(!pe)continue;let Ie=!1;(ce.condition==="above"&&pe>=ce.price||ce.condition==="below"&&pe<=ce.price)&&(Ie=!0),Ie&&(nr("ENTRY_LONG"),"Notification"in window&&Notification.permission==="granted"&&new Notification(` : ${ce.symbol}`,{body:`${ce.condition==="above"?"":""}: ${pe.toFixed(2)} (: ${ce.price})`,icon:"/favicon.ico"}),$e(Ue=>Ue.map(De=>De.id===ce.id?{...De,triggered:!0,triggeredAt:Date.now()}:De)),ce(` 

${ce.symbol}
${ce.condition==="above"?" ":" "}

: ${pe.toFixed(2)}
: ${ce.price}`))}},[n,J,nr]);const Wr=(C,D,q)=>{const ce={id:Date.now().toString(),symbol:C,price:parseFloat(D),condition:q,triggered:!1,createdAt:Date.now()};$e(pe=>[...pe,ce])},gn=C=>{$e(D=>D.filter(q=>q.id!==C))};V.useEffect(()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},[]),V.useEffect(()=>{const C=D=>{var pe;if(["INPUT","TEXTAREA","SELECT"].includes((pe=document.activeElement)==null?void 0:pe.tagName))return;const q=a[e],ce=D.key.toLowerCase();if(ce==="l"&&(q==null?void 0:q.action)==="OPEN_LONG"&&L&&(D.preventDefault(),(me||confirm(` LONG

${e}
: ${de}%
: ${ve}x

`))&&yt(e,"buy",de,ve)),ce==="s"&&(q==null?void 0:q.action)==="OPEN_SHORT"&&L&&(D.preventDefault(),(me||confirm(` SHORT

${e}
: ${de}%
: ${ve}x

`))&&yt(e,"sell",de,ve)),ce==="c"&&We[e]&&L&&(D.preventDefault(),(me||confirm(` 

${e}
${We[e].type}

`))&&kt(e)),ce==="escape"&&(D.preventDefault(),d(Ie=>!Ie)),["1","2","3","4"].includes(ce)){D.preventDefault();const Ie=parseInt(ce)-1;t[Ie]&&r(t[Ie])}ce==="k"&&(D.preventDefault(),ut(Ie=>!Ie))};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[e,a,L,me,de,ve,We,t]);const Lr=(C,D)=>{if(C.length<D)return null;const q=2/(D+1);let ce=C.slice(0,D).reduce((pe,Ie)=>pe+Ie,0)/D;for(let pe=D;pe<C.length;pe++)ce=C[pe]*q+ce*(1-q);return ce},rs=(C,D=20,q=2)=>{if(C.length<D)return null;const ce=C.slice(-D).map(De=>De.close),pe=ce.reduce((De,Be)=>De+Be,0)/D,Ie=ce.reduce((De,Be)=>De+Math.pow(Be-pe,2),0)/D,Ue=Math.sqrt(Ie);return{upper:pe+q*Ue,middle:pe,lower:pe-q*Ue,std:Ue}},xr=(C,D=12,q=26,ce=9)=>{if(C.length<q+ce)return null;const pe=C.map(Bt=>Bt.close),Ie=Lr(pe,D),Ue=Lr(pe,q),De=Ie-Ue,Be=[];for(let Bt=q;Bt<=pe.length;Bt++){const Ct=pe.slice(0,Bt),Ce=Lr(Ct,D),Nt=Lr(Ct,q);Ce!==null&&Nt!==null&&Be.push(Ce-Nt)}const Re=Be.length>=ce?Lr(Be,ce):De,it=De-Re,Ke=Be.length>=2?Be[Be.length-2]-Re:it,It=it-Ke;return{macd:De,signal:Re,histogram:it,histogramSlope:It}},qn=(C,D=14)=>{if(C.length<D+1)return null;let q=0;for(let ce=C.length-D;ce<C.length;ce++){const pe=C[ce].high,Ie=C[ce].low,Ue=C[ce-1].close,De=Math.max(pe-Ie,Math.abs(pe-Ue),Math.abs(Ie-Ue));q+=De}return q/D},ys=(C,D=20)=>{if(C.length<D)return null;const q=C.slice(-D).map(De=>De.volume),ce=q.reduce((De,Be)=>De+Be,0)/D,pe=C[C.length-1].volume,Ie=Math.sqrt(q.reduce((De,Be)=>De+Math.pow(Be-ce,2),0)/D),Ue=pe>ce+Ie*1.5;return{current:pe,average:ce,ratio:pe/ce,isSpike:Ue}},ia=C=>{if(C.length<50)return{trend:"NEUTRAL",strength:0,ema20:null,ema50:null};const D=C.map(De=>De.close),q=Lr(D,20),ce=Lr(D,50),pe=D[D.length-1];let Ie="NEUTRAL",Ue=0;return q>ce&&pe>q?(Ie="STRONG_UP",Ue=(pe-ce)/ce*100):q>ce?(Ie="UP",Ue=(q-ce)/ce*100):q<ce&&pe<q?(Ie="STRONG_DOWN",Ue=(ce-pe)/ce*100):q<ce&&(Ie="DOWN",Ue=(ce-q)/ce*100),{trend:Ie,strength:Math.min(Ue,10),ema20:q,ema50:ce}},[yr,xA]=V.useState(()=>{const C=localStorage.getItem("trade_learned_params_v54");return C?JSON.parse(C):{rsiPeriod:7,rsiOversold:35,rsiOverbought:65,takeProfitPercent:.4,stopLossPercent:.25,volumeThreshold:.5,maxHoldingMinutes:30,momentumThreshold:.05,volatilityMode:"auto",lastUpdated:null,performance:{winRate:0,profitFactor:0,trades:0}}}),Rn=V.useCallback(()=>{const C=new Date().getHours(),D=.4,q=.25;let ce=1,pe="";return C>=6&&C<12?(ce=.75,pe=""):C>=16&&C<20?(ce=1.25,pe=""):(C>=22||C<2)&&(ce=1.5,pe=""),yr.volatilityMode==="low"?(ce=.75,pe=""):yr.volatilityMode==="medium"?(ce=1,pe=""):yr.volatilityMode==="high"&&(ce=1.5,pe=""),{takeProfitPercent:Math.round(D*ce*100)/100,stopLossPercent:Math.round(q*ce*100)/100,volatilityMultiplier:ce,timeZoneName:pe,maxHoldingMinutes:30}},[yr.volatilityMode]),[aa,vA]=V.useState(!1),[rl,Aa]=V.useState(0),[ec,nl]=V.useState([]);V.useEffect(()=>{localStorage.setItem("trade_learned_params_v52",JSON.stringify(yr))},[yr]);const Xs=async()=>{vA(!0),Aa(0),nl([]);const C=D=>nl(q=>[...q.slice(-9),D]);try{C(" ...");const D=Nr.symbol.replace("/",""),q=await fetch(`https://api.binance.com/api/v3/klines?symbol=${D}&interval=1m&limit=1000`);if(!q.ok)throw new Error("");const pe=(await q.json()).map(Ke=>({timestamp:new Date(Ke[0]),open:parseFloat(Ke[1]),high:parseFloat(Ke[2]),low:parseFloat(Ke[3]),close:parseFloat(Ke[4]),volume:parseFloat(Ke[5])}));C(` ${pe.length}`),Aa(10);const Ie={rsiPeriod:[5,7,9],rsiOversold:[35,40,45],rsiOverbought:[55,60,65],takeProfitPercent:[.15,.2,.25,.3],stopLossPercent:[.1,.15,.2],volumeThreshold:[.6,.8,1],maxHoldingMinutes:[5,8,10,15],momentumThreshold:[.05,.08,.1]};let Ue={...yr},De=0,Be=0,Re=1;Object.values(Ie).forEach(Ke=>Re*=Ke.length),C(` ${Re}...`);let it=0;for(const Ke of Ie.rsiPeriod)for(const It of Ie.rsiOversold)for(const Bt of Ie.rsiOverbought)for(const Ct of Ie.takeProfitPercent)for(const Ce of Ie.stopLossPercent)for(const Nt of Ie.volumeThreshold)for(const Rt of Ie.maxHoldingMinutes)for(const Ye of Ie.momentumThreshold){it++;const jt=sl(pe,{rsiPeriod:Ke,rsiOversold:It,rsiOverbought:Bt,takeProfitPercent:Ct,stopLossPercent:Ce,volumeThreshold:Nt,maxHoldingMinutes:Rt,momentumThreshold:Ye}),Et=Math.min(jt.trades/50,2),Qt=jt.profitFactor*(jt.winRate/100)*Et,St=De*(Be/100)*1;if(Qt>St&&jt.trades>=10&&(De=jt.profitFactor,Be=jt.winRate,Ue={rsiPeriod:Ke,rsiOversold:It,rsiOverbought:Bt,takeProfitPercent:Ct,stopLossPercent:Ce,volumeThreshold:Nt,maxHoldingMinutes:Rt,momentumThreshold:Ye},C(` : ${Be.toFixed(0)}% PF${De.toFixed(2)} ${jt.trades}`)),it%200===0){const mt=10+Math.floor(it/Re*80);Aa(mt)}}C(" "),C(` : ${Be.toFixed(1)}% | PF: ${De.toFixed(2)}`),Aa(95),xA({...Ue,lastUpdated:new Date().toISOString(),performance:{winRate:Be,profitFactor:De,trades:0}}),Aa(100),C(" ")}catch(D){C(` : ${D.message}`)}finally{vA(!1)}},sl=(C,D)=>{let q=null,ce=0,pe=0,Ie=0,Ue=0;const De=(Ce,Nt)=>{if(Ce.length<Nt+1)return null;let Rt=0,Ye=0;for(let Qt=Ce.length-Nt;Qt<Ce.length;Qt++){const St=Ce[Qt].close-Ce[Qt-1].close;St>0?Rt+=St:Ye-=St}const jt=Rt/Nt,Et=Ye/Nt;return Et===0?100:100-100/(1+jt/Et)},Be=(Ce,Nt)=>{if(Ce.length<Nt+3)return 0;const Rt=De(Ce.slice(0,-2),Nt),Ye=De(Ce,Nt);return!Rt||!Ye?0:Ye-Rt},Re=Ce=>{if(Ce.length<20)return 1;const Nt=Ce.slice(-20).reduce((Rt,Ye)=>Rt+Ye.volume,0)/20;return Ce[Ce.length-1].volume/Nt};for(let Ce=30;Ce<C.length;Ce++){const Nt=C.slice(0,Ce+1),Rt=De(Nt,D.rsiPeriod),Ye=Be(Nt,D.rsiPeriod),jt=Re(Nt),Et=C[Ce].close;if(Rt)if(q){const St=Ce-q.entryBar,mt=q.type==="LONG"?(Et-q.entryPrice)/q.entryPrice*100:(q.entryPrice-Et)/q.entryPrice*100,Pt=mt>=D.takeProfitPercent,er=mt<=-D.stopLossPercent,lr=St>=D.maxHoldingMinutes;(Pt||er||lr)&&(mt>0?(ce++,Ie+=mt):(pe++,Ue+=Math.abs(mt)),q=null)}else{const Qt=jt>=D.volumeThreshold,St=Rt<D.rsiOversold,mt=Rt>D.rsiOverbought,Pt=Ye>.5,er=Ye<-.5,lr=Nt.length>=4?(Et-Nt[Nt.length-4].close)/Nt[Nt.length-4].close*100:0,Br=D.momentumThreshold||.08,Yt=20;if(Nt.length>=Yt){const fr=Nt.slice(-Yt),Jr=fr.reduce((Ns,Ms)=>Ns+Ms.close,0)/Yt,va=fr.reduce((Ns,Ms)=>Ns+Math.pow(Ms.close-Jr,2),0)/Yt,$n=Math.sqrt(va),os=Jr-$n*2,$i=Jr+$n*2,Fr=St&&Pt,Dr=Et<=os*1.002&&Rt<50,Pr=lr>Br&&Rt<55,Ir=mt&&er,Ki=Et>=$i*.998&&Rt>50,Hs=lr<-Br&&Rt>45;(Fr||Dr||Pr)&&Qt?q={type:"LONG",entryPrice:Et,entryBar:Ce}:(Ir||Ki||Hs)&&Qt&&(q={type:"SHORT",entryPrice:Et,entryBar:Ce})}}}const it=ce+pe,Ke=it>0?ce/it*100:0,It=ce>0?Ie/ce:0,Bt=pe>0?Ue/pe:1,Ct=Bt>0?It/Bt:It>0?1/0:0;return{trades:it,wins:ce,losses:pe,winRate:Ke,profitFactor:Ct,avgWin:It,avgLoss:Bt}},il=(C,D)=>{if(C.length<D)return null;const q=2/(D+1);let ce=C.slice(0,D).reduce((pe,Ie)=>pe+Ie.close,0)/D;for(let pe=D;pe<C.length;pe++)ce=(C[pe].close-ce)*q+ce;return ce},Ra=(C,D=9)=>{if(C.length<D+1)return null;let q=0,ce=0;for(let De=C.length-D;De<C.length;De++){const Be=C[De].close-C[De-1].close;Be>0?q+=Be:ce-=Be}const pe=q/D,Ie=ce/D;return Ie===0?100:100-100/(1+pe/Ie)},tc=(C,D=9)=>{if(C.length<D+3)return 0;const q=Ra(C.slice(0,-2),D),ce=Ra(C.slice(0,-1),D),pe=Ra(C,D);return!q||!ce||!pe?0:(pe-q)/2},rc=(C,D)=>{if(!C||C.length<20)return{signal:" WAIT",reason:"...",action:null,signalType:"WAIT"};const q=yr,ce=Rn(),pe=Ra(C,q.rsiPeriod),Ie=tc(C,q.rsiPeriod),Ue=ys(C),De=C[C.length-1].close,Be=We[D],Re=rs(C),it=xr(C),Ke=qn(C),It=ia(C);if(!pe||!Ke)return{signal:" WAIT",reason:"...",action:null,signalType:"WAIT",rsi:pe,bb:Re,macd:it,emaTrend:It};const Bt=ce.takeProfitPercent,Ct=ce.stopLossPercent,Ce=ce.maxHoldingMinutes*60*1e3;if(Be){const tn=Be.entryPrice,Kn=new Date(Be.entryTime).getTime(),Vi=Date.now()-Kn,ls=Math.floor(Vi/6e4),$s=Be.type==="LONG"?(De-tn)/tn*100:(tn-De)/tn*100,EA=Be.type==="LONG"?tn*(1+Bt/100):tn*(1-Bt/100),Xa=Be.type==="LONG"?tn*(1-Ct/100):tn*(1+Ct/100),ch=Be.type==="LONG"?De>=EA:De<=EA,uh=Be.type==="LONG"?De<=Xa:De>=Xa,dh=Vi>=Ce;if(ch)return{signal:" ",signalType:"TAKE_PROFIT",reason:`+${$s.toFixed(3)}% | ${ls}`,action:Be.type==="LONG"?"CLOSE_LONG":"CLOSE_SHORT",position:Be,pnlPercent:$s,rsi:pe,bb:Re,macd:it,atr:Ke,volume:Ue,emaTrend:It,lastPrice:De,tpPrice:EA,slPrice:Xa,params:q};if(uh)return{signal:" ",signalType:"STOP_LOSS",reason:`${$s.toFixed(3)}% | ${ls}`,action:Be.type==="LONG"?"CLOSE_LONG":"CLOSE_SHORT",position:Be,pnlPercent:$s,rsi:pe,bb:Re,macd:it,atr:Ke,volume:Ue,emaTrend:It,lastPrice:De,tpPrice:EA,slPrice:Xa,params:q};if(dh)return{signal:" ",signalType:$s>=0?"TIME_EXIT_PROFIT":"TIME_EXIT_LOSS",reason:`${$s>=0?"+":""}${$s.toFixed(3)}% | ${ls}`,action:Be.type==="LONG"?"CLOSE_LONG":"CLOSE_SHORT",position:Be,pnlPercent:$s,rsi:pe,bb:Re,macd:it,atr:Ke,volume:Ue,emaTrend:It,lastPrice:De,params:q};const hh=Ce-Vi,Za=Math.max(0,Math.floor(hh/6e4)),lc=Math.max(0,Math.floor(hh%6e4/1e3)),go=Za<=5&&Za>0,_u=Za<=2&&Za>0,dp=Be.type==="LONG"?(EA-De)/De*100:(De-EA)/De*100;Be.type==="LONG"?(De-Xa)/De*100:(Xa-De)/De*100;const fh=Math.max(0,Math.min(100,(1-dp/Bt)*100)),hp=go&&$s>0&&$s<Bt*.5;return{signal:Be.type==="LONG"?" HOLD":" HOLD",signalType:"HOLDING",reason:`${$s>=0?"+":""}${$s.toFixed(3)}% | ${ls}`,action:null,position:Be,pnlPercent:$s,rsi:pe,bb:Re,macd:it,atr:Ke,volume:Ue,emaTrend:It,lastPrice:De,tpPrice:EA,slPrice:Xa,params:ce,remainingMinutes:Za,remainingSeconds:lc,isTimeWarning:go,isTimeCritical:_u,tpProgress:fh,shouldBreakeven:hp,volatilityParams:ce}}const Nt=Ue.ratio>=q.volumeThreshold,Rt=pe<q.rsiOversold,Ye=pe>q.rsiOverbought,jt=Ie>.5,Et=Ie<-.5,Qt=C.length>=4?(De-C[C.length-4].close)/C[C.length-4].close*100:0;q.momentumThreshold;const St=Re?De<=Re.lower*1.002:!1,mt=Re?De>=Re.upper*.998:!1,Pt=il(C.map(tn=>tn.close),10),er=il(C.map(tn=>tn.close),20),lr=Pt&&er&&Pt>er,Br=Pt&&er&&Pt<er,Yt=!lr&&!Br,fr=Pt&&er?Math.abs((Pt-er)/er*100):0,Jr=Rt&&jt,va=Ye&&Et,$n=St&&pe<45,os=mt&&pe>55,$i=Qt>0,Fr=Qt<0,Dr=Ue.ratio>=.7,Pr=lr||Yt,Ir=Br||Yt,Ki=(Jr||$n)&&($i||Dr)&&Pr&&Nt,Hs=(va||os)&&(Fr||Dr)&&Ir&&Nt,Ns=()=>{let tn="";Jr?tn=`RSI${pe.toFixed(0)}`:$n&&(tn="BB");const Kn=[];return $i&&Kn.push(`Mom+${Qt.toFixed(2)}%`),Dr&&Kn.push(`Vol${Ue.ratio.toFixed(1)}x`),lr&&Kn.push(""),tn+(Kn.length>0?` | ${Kn.join(" ")}`:"")},Ms=()=>{let tn="";va?tn=`RSI${pe.toFixed(0)}`:os&&(tn="BB");const Kn=[];return Fr&&Kn.push(`Mom${Qt.toFixed(2)}%`),Dr&&Kn.push(`Vol${Ue.ratio.toFixed(1)}x`),Br&&Kn.push(""),tn+(Kn.length>0?` | ${Kn.join(" ")}`:"")},cp=()=>Jr?"RSI":$n?"BB":"UNKNOWN",up=()=>va?"RSI":os?"BB":"UNKNOWN";if(Ki){const tn=De*(1+Bt/100),Kn=De*(1-Ct/100);return{signal:" LONG",signalType:"ENTRY_LONG",reason:Ns(),action:"OPEN_LONG",rsi:pe,bb:Re,macd:it,atr:Ke,volume:Ue,emaTrend:It,lastPrice:De,momentum:Qt,suggestedTP:tn,suggestedSL:Kn,trendUp:lr,trendDown:Br,trendStrength:fr,params:q,pattern:cp()}}if(Pr&&(pe<q.rsiOversold+5||Re&&De<Re.lower*1.01)&&!Ki)return{signal:" LONG",signalType:"PREPARE_LONG",reason:`RSI${pe.toFixed(0)} | ${lr?"":""} | `,action:null,rsi:pe,bb:Re,macd:it,atr:Ke,volume:Ue,emaTrend:It,lastPrice:De,momentum:Qt,trendUp:lr,trendDown:Br,trendStrength:fr,params:q};if(Hs){const tn=De*(1-Bt/100),Kn=De*(1+Ct/100);return{signal:" SHORT",signalType:"ENTRY_SHORT",reason:Ms(),action:"OPEN_SHORT",rsi:pe,bb:Re,macd:it,atr:Ke,volume:Ue,emaTrend:It,lastPrice:De,momentum:Qt,suggestedTP:tn,suggestedSL:Kn,trendUp:lr,trendDown:Br,trendStrength:fr,params:q,pattern:up()}}if(Ir&&(pe>q.rsiOverbought-5||Re&&De>Re.upper*.99)&&!Hs)return{signal:" SHORT",signalType:"PREPARE_SHORT",reason:`RSI${pe.toFixed(0)} | ${Br?"":""} | `,action:null,rsi:pe,bb:Re,macd:it,atr:Ke,volume:Ue,emaTrend:It,lastPrice:De,momentum:Qt,trendUp:lr,trendDown:Br,trendStrength:fr,params:q};const wa=lr?"":Br?"":"";return{signal:" WAIT",signalType:"WAIT",reason:`RSI${pe.toFixed(0)} | ${wa} | Vol${Ue.ratio.toFixed(1)}x`,action:null,rsi:pe,bb:Re,macd:it,atr:Ke,volume:Ue,emaTrend:It,lastPrice:De,momentum:Qt,trendUp:lr,trendDown:Br,trendStrength:fr,params:q}},al=(C,D,q,ce="")=>{const pe=`${C}_${Date.now()}`;lt(Ie=>({...Ie,[C]:{id:pe,type:D,entryPrice:q,entryTime:new Date().toISOString(),quantity:1}})),ce&&Pe(Ie=>({...Ie,[pe]:{entryMemo:ce,entryTime:new Date().toISOString(),symbol:C,type:D}}))},di=(C,D="")=>{const q=We[C];q!=null&&q.id&&D&&Pe(ce=>({...ce,[q.id]:{...ce[q.id],exitMemo:D,exitTime:new Date().toISOString()}})),lt(ce=>{const pe={...ce};return delete pe[C],pe})},[JA,wA]=V.useState(!1),[_t,Al]=V.useState(null),[Zs,yA]=V.useState(!1),[Zr,ei]=V.useState(null),[_n,Ps]=V.useState(""),[zr,ol]=V.useState({}),[oa,Qi]=V.useState(()=>localStorage.getItem("trade_auto_debate")!=="false"),[ll,nc]=V.useState({}),[cl,YA]=V.useState(null);V.useEffect(()=>{localStorage.setItem("trade_auto_debate",oa.toString())},[oa]);const XA=[{id:"structure",name:"Dr. Michael Webb",title:"",avatar:"",specialty:"",style:"",color:"text-blue-400",bgColor:"bg-blue-900/30",borderColor:"border-blue-500/50",weight:1.2},{id:"technical",name:"Dr. Sarah Chen",title:"",avatar:"",specialty:"",style:"",color:"text-cyan-400",bgColor:"bg-cyan-900/30",borderColor:"border-cyan-500/50",weight:1},{id:"risk",name:" ",title:"",avatar:"",specialty:"",style:"",color:"text-amber-400",bgColor:"bg-amber-900/30",borderColor:"border-amber-500/50",weight:1.3},{id:"sentiment",name:"Elena Volkov",title:"",avatar:"",specialty:"",style:"",color:"text-purple-400",bgColor:"bg-purple-900/30",borderColor:"border-purple-500/50",weight:.9},{id:"execution",name:"James Park",title:"",avatar:"",specialty:"",style:"",color:"text-emerald-400",bgColor:"bg-emerald-900/30",borderColor:"border-emerald-500/50",weight:1}],sc=C=>{var Qt,St;if(!C||C.length<50)return null;const D=C.map(mt=>mt.high),q=C.map(mt=>mt.low),ce=C.map(mt=>mt.close),pe=ce[ce.length-1],Ie=Math.max(...D.slice(-20)),Ue=Math.min(...q.slice(-20)),De=(Ie+Ue+pe)/3,Be=2*De-Ue,Re=2*De-Ie,it=De+(Ie-Ue),Ke=De-(Ie-Ue),It=[],Bt=[];for(let mt=5;mt<C.length-5;mt++)D[mt]===Math.max(...D.slice(mt-5,mt+6))&&It.push({price:D[mt],index:mt}),q[mt]===Math.min(...q.slice(mt-5,mt+6))&&Bt.push({price:q[mt],index:mt});const Ct=((Qt=It.filter(mt=>mt.price>pe).sort((mt,Pt)=>mt.price-Pt.price)[0])==null?void 0:Qt.price)||Be,Ce=((St=Bt.filter(mt=>mt.price<pe).sort((mt,Pt)=>Pt.price-mt.price)[0])==null?void 0:St.price)||Re,Nt=It.slice(-3),Rt=Bt.slice(-3);let Ye="RANGE";if(Nt.length>=2&&Rt.length>=2){const mt=Nt[Nt.length-1].price>Nt[Nt.length-2].price,Pt=Rt[Rt.length-1].price>Rt[Rt.length-2].price,er=Nt[Nt.length-1].price<Nt[Nt.length-2].price,lr=Rt[Rt.length-1].price<Rt[Rt.length-2].price;mt&&Pt?Ye="UPTREND":er&&lr&&(Ye="DOWNTREND")}const jt=(Ct-pe)/pe*100,Et=(pe-Ce)/pe*100;return{pivot:De,r1:Be,r2:it,s1:Re,s2:Ke,nearestResistance:Ct,nearestSupport:Ce,distanceToResistance:jt,distanceToSupport:Et,trendStructure:Ye,swingHighs:It.slice(-5),swingLows:Bt.slice(-5),currentPrice:pe}},ic=C=>{if(!C||C.length<30)return null;const D=C.map(it=>it.volume),q=D.reduce((it,Ke)=>it+Ke,0)/D.length,ce=D.slice(-5).reduce((it,Ke)=>it+Ke,0)/5,pe=ce/q,Ie=D.slice(0,Math.floor(D.length/2)).reduce((it,Ke)=>it+Ke,0),Ue=D.slice(Math.floor(D.length/2)).reduce((it,Ke)=>it+Ke,0),De=Ue>Ie*1.1?"INCREASING":Ue<Ie*.9?"DECREASING":"STABLE";C.slice(1).map((it,Ke)=>it.close-C[Ke].close);const Be=C[C.length-1].close-C[C.length-6].close,Re=Be>0&&pe>1.2||Be<0&&pe>1.2;return{avgVolume:q,recentVolume:ce,volumeRatio:pe,volumeTrend:De,volumeConfirmation:Re,isHighVolume:pe>1.5,isLowVolume:pe<.7}},ZA=C=>{if(!C||C.length<20)return null;const D=[];for(let Re=1;Re<C.length;Re++){const it=Math.max(C[Re].high-C[Re].low,Math.abs(C[Re].high-C[Re-1].close),Math.abs(C[Re].low-C[Re-1].close));D.push(it)}const q=D.slice(-14).reduce((Re,it)=>Re+it,0)/14,ce=D.slice(-5).reduce((Re,it)=>Re+it,0)/5,pe=C[C.length-1].close,Ie=q/pe*100,Ue=ce>q*1.2,De=ce<q*.8;let Be="NORMAL";return Ie>2?Be="VERY_HIGH":Ie>1?Be="HIGH":Ie<.3&&(Be="LOW"),{atr14:q,atr5:ce,atrPercent:Ie,volatilityExpanding:Ue,volatilityContracting:De,volatilityLevel:Be,suggestedSLMultiplier:Be==="VERY_HIGH"?2.5:Be==="HIGH"?2:1.5}},ul=C=>{if(!C||C.length<60)return null;const D=(Bt,Ct)=>{const Ce=2/(Ct+1);let Nt=Bt.slice(0,Ct).reduce((Rt,Ye)=>Rt+Ye,0)/Ct;for(let Rt=Ct;Rt<Bt.length;Rt++)Nt=Bt[Rt]*Ce+Nt*(1-Ce);return Nt},q=C.map(Bt=>Bt.close),ce=D(q,5),pe=D(q,20),Ie=D(q,60),Ue=q[q.length-1],De=Ue>ce?"BULL":"BEAR",Be=Ue>pe?"BULL":"BEAR",Re=Ue>Ie?"BULL":"BEAR",Ke=[De,Be,Re].filter(Bt=>Bt==="BULL").length,It=Ke===3?"FULL_BULL":Ke===0?"FULL_BEAR":Ke>=2?"MIXED_BULL":"MIXED_BEAR";return{ema5:ce,ema20:pe,ema60:Ie,shortTrend:De,mediumTrend:Be,longTrend:Re,alignment:It,trendStrength:Ke===3||Ke===0?"STRONG":"WEAK"}},ti=(C,D,q,ce)=>{var Nt,Rt;const{structure:pe,volume:Ie,volatility:Ue,mtf:De}=ce,Be=(D==null?void 0:D.rsi)||50,Re=D==null?void 0:D.bb,it=D==null?void 0:D.macd,Ke=(D==null?void 0:D.lastPrice)||0,It=(D==null?void 0:D.signalType)||"WAIT",Bt=It==="ENTRY_LONG"||It==="PREPARE_LONG",Ct=It==="ENTRY_SHORT"||It==="PREPARE_SHORT";let Ce={vote:"NEUTRAL",confidence:50,analysis:"",deepThoughts:[],concerns:[],keyInsights:[],suggestedEntry:null,suggestedTP:null,suggestedSL:null,positionSizePercent:0,riskRewardRatio:0};if(C.id==="structure"){if(!pe)return Ce.analysis="",Ce.vote="WAIT",Ce;const{trendStructure:Ye,distanceToResistance:jt,distanceToSupport:Et,nearestResistance:Qt,nearestSupport:St}=pe,mt=Bt&&Ye==="UPTREND"||Ct&&Ye==="DOWNTREND",Pt=Bt&&Ye==="DOWNTREND"||Ct&&Ye==="UPTREND";Ce.deepThoughts.push(`: ${Ye}`),Ce.deepThoughts.push(`: ${jt.toFixed(2)}%`),Ce.deepThoughts.push(`: ${Et.toFixed(2)}%`);let er=50;if(mt?(er+=25,Ce.keyInsights.push(" ")):Pt&&(er-=20,Ce.concerns.push(" ")),Bt?(jt>1?(er+=15,Ce.keyInsights.push(` TP (${jt.toFixed(2)}%)`),Ce.suggestedTP=Qt*.995):(er-=15,Ce.concerns.push(`  (${jt.toFixed(2)}%)`),Ce.suggestedTP=Ke*1.003),Ce.suggestedSL=St*.998):(Et>1?(er+=15,Ce.keyInsights.push(` TP (${Et.toFixed(2)}%)`),Ce.suggestedTP=St*1.005):(er-=15,Ce.concerns.push(`  (${Et.toFixed(2)}%)`),Ce.suggestedTP=Ke*.997),Ce.suggestedSL=Qt*1.002),Ce.suggestedEntry=Ke,Ce.confidence=Math.max(20,Math.min(95,er)),Ce.vote=er>=65?"GO":er>=45?"NEUTRAL":"WAIT",Ce.suggestedTP&&Ce.suggestedSL){const lr=Math.abs(Ce.suggestedTP-Ke),Br=Math.abs(Ke-Ce.suggestedSL);Ce.riskRewardRatio=Br>0?lr/Br:0}Ce.analysis=`: ${Ye}${Bt?"":""}${mt?"":Pt?"":""}RR: ${Ce.riskRewardRatio.toFixed(2)}`,Ce.positionSizePercent=Ce.vote==="GO"?10:Ce.vote==="NEUTRAL"?5:0}else if(C.id==="technical"){let Ye=50;const jt=Be<35,Et=Be>65,Qt=Be>=40&&Be<=60;if(Bt&&jt?(Ye+=20,Ce.keyInsights.push(` RSI (${Be.toFixed(0)})`)):Ct&&Et?(Ye+=20,Ce.keyInsights.push(` RSI (${Be.toFixed(0)})`)):Qt&&(Ye-=5,Ce.concerns.push(` RSI (${Be.toFixed(0)})`)),Re){const St=(Ke-Re.lower)/(Re.upper-Re.lower);Ce.deepThoughts.push(`BB: ${(St*100).toFixed(0)}%`),Bt&&St<.2?(Ye+=15,Ce.keyInsights.push(" BB")):Ct&&St>.8?(Ye+=15,Ce.keyInsights.push(" BB")):(Bt&&St>.7||Ct&&St<.3)&&(Ye-=10,Ce.concerns.push(" BB"))}if(it){const St=it.histogram>0&&it.macd>it.signal,mt=it.histogram<0&&it.macd<it.signal;Bt&&St||Ct&&mt?(Ye+=15,Ce.keyInsights.push(" MACD")):(Bt&&mt||Ct&&St)&&(Ye-=15,Ce.concerns.push(" MACD")),Ce.deepThoughts.push(`MACD: ${it.histogram>0?"+":""}${it.histogram.toFixed(2)}`)}if(De&&(Bt&&De.alignment==="FULL_BULL"||Ct&&De.alignment==="FULL_BEAR"?(Ye+=20,Ce.keyInsights.push(" ")):(Bt&&De.alignment==="FULL_BEAR"||Ct&&De.alignment==="FULL_BULL")&&(Ye-=20,Ce.concerns.push(" "))),Ce.confidence=Math.max(20,Math.min(95,Ye)),Ce.vote=Ye>=65?"GO":Ye>=45?"NEUTRAL":"WAIT",Ue){const St=Ue.volatilityLevel==="HIGH"?2.5:2;Bt?(Ce.suggestedTP=Ke+Ue.atr14*St,Ce.suggestedSL=Ke-Ue.atr14*1.5):(Ce.suggestedTP=Ke-Ue.atr14*St,Ce.suggestedSL=Ke+Ue.atr14*1.5),Ce.suggestedEntry=Ke,Ce.riskRewardRatio=St/1.5}Ce.analysis=`: RSI(${Be.toFixed(0)})${Re?`BB${((Ke-Re.lower)/(Re.upper-Re.lower)*100).toFixed(0)}%`:"BB N/A"}${De?`MTF:${De.alignment}`:""}`,Ce.positionSizePercent=Ce.vote==="GO"?8:Ce.vote==="NEUTRAL"?4:0}else if(C.id==="risk"){let Ye=50;Ue&&(Ce.deepThoughts.push(`ATR: ${Ue.atrPercent.toFixed(2)}%`),Ce.deepThoughts.push(`: ${Ue.volatilityLevel}`),Ue.volatilityLevel==="VERY_HIGH"?(Ye-=25,Ce.concerns.push("  - ")):Ue.volatilityLevel==="HIGH"?(Ye-=10,Ce.concerns.push("  - ")):Ue.volatilityLevel==="LOW"&&(Ye+=10,Ce.keyInsights.push("  - ")),Ue.volatilityExpanding&&(Ye-=15,Ce.concerns.push("  - ")));const jt=Bt?Ke*1.003:Ke*.997,Et=Bt?Ke*.998:Ke*1.002,Qt=Math.abs(jt-Ke)/Math.abs(Ke-Et);Ce.deepThoughts.push(`RR: ${Qt.toFixed(2)}`);const St=((Nt=yr.performance)==null?void 0:Nt.winRate)||50,mt=yr.takeProfitPercent||.25,Pt=yr.stopLossPercent||.15,er=(St/100*mt-(1-St/100)*Pt)/mt,lr=Math.max(0,Math.min(er*.5,.15));Ce.deepThoughts.push(`: ${(er*100).toFixed(1)}%`),Ce.deepThoughts.push(`: ${(lr*100).toFixed(1)}%`),lr>.05?(Ye+=20,Ce.keyInsights.push(`  (${(lr*100).toFixed(1)}%)`)):lr>0?(Ye+=5,Ce.keyInsights.push(`  (${(lr*100).toFixed(1)}%)`)):(Ye-=30,Ce.concerns.push("  - "));const Br=(yr.stopLossPercent||.15)*(lr*100);Br>3&&(Ye-=15,Ce.concerns.push(` 1${Br.toFixed(1)}%`)),Ce.confidence=Math.max(20,Math.min(95,Ye)),Ce.vote=Ye>=60?"GO":Ye>=40?"NEUTRAL":"WAIT";const Yt=Ue?Ue.atrPercent*Ue.suggestedSLMultiplier:.2,fr=Yt*1.5;Bt?(Ce.suggestedTP=Ke*(1+fr/100),Ce.suggestedSL=Ke*(1-Yt/100)):(Ce.suggestedTP=Ke*(1-fr/100),Ce.suggestedSL=Ke*(1+Yt/100)),Ce.suggestedEntry=Ke,Ce.riskRewardRatio=fr/Yt,Ce.positionSizePercent=lr*100,Ce.analysis=`: ${(er*100).toFixed(1)}%${(lr*100).toFixed(1)}%${(Ue==null?void 0:Ue.volatilityLevel)||"N/A"}${Ce.vote==="WAIT"?"":""}`}else if(C.id==="sentiment"){let Ye=50;if(Ce.deepThoughts.push(`RSI: ${Be.toFixed(0)} (${Be<30?"":Be>70?"":""})`),Bt&&Be<25||Ct&&Be>75?(Ye+=25,Ce.keyInsights.push("  - ")):Bt&&Be<35||Ct&&Be>65?(Ye+=10,Ce.keyInsights.push("  - ")):(Bt&&Be>60||Ct&&Be<40)&&(Ye-=15,Ce.concerns.push(" ")),Ie&&(Ie.isHighVolume&&Ie.volumeConfirmation?(Ye+=15,Ce.keyInsights.push(" ")):Ie.isLowVolume&&(Ye-=10,Ce.concerns.push("  - ")),Ie.volumeTrend==="INCREASING"&&(Ye+=5,Ce.deepThoughts.push(" - "))),q&&q.length>=5){const Qt=q.slice(-5),St=Qt.every(Yt=>Yt.close<Yt.open),mt=Qt.every(Yt=>Yt.close>Yt.open);(Bt&&St||Ct&&mt)&&(Ye+=15,Ce.keyInsights.push(" /FOMO"));const Pt=Qt[Qt.length-1],er=Math.abs(Pt.close-Pt.open),lr=Math.min(Pt.close,Pt.open)-Pt.low,Br=Pt.high-Math.max(Pt.close,Pt.open);Bt&&lr>er*2?(Ye+=10,Ce.keyInsights.push("  - ")):Ct&&Br>er*2&&(Ye+=10,Ce.keyInsights.push("  - "))}Ce.confidence=Math.max(20,Math.min(95,Ye)),Ce.vote=Ye>=65?"GO":Ye>=45?"NEUTRAL":"WAIT";const jt=Math.pow(10,Math.floor(Math.log10(Ke))),Et=Math.round(Ke/jt)*jt;Bt?(Ce.suggestedTP=Et+jt*.5,Ce.suggestedSL=Et-jt*.3):(Ce.suggestedTP=Et-jt*.5,Ce.suggestedSL=Et+jt*.3),Ce.suggestedEntry=Ke,Ce.analysis=`: RSI${Be.toFixed(0)}(${Be<35?"":Be>65?"":""})${((Rt=Ie==null?void 0:Ie.volumeRatio)==null?void 0:Rt.toFixed(1))||"N/A"}x${Ce.vote==="GO"?"":""}`,Ce.positionSizePercent=Ce.vote==="GO"?6:Ce.vote==="NEUTRAL"?3:0}else if(C.id==="execution"){let Ye=50;Ie&&(Ie.isHighVolume?(Ye+=15,Ce.keyInsights.push("  - ")):Ie.isLowVolume&&(Ye-=20,Ce.concerns.push("  - "))),Ue&&(Ue.volatilityLevel==="VERY_HIGH"?(Ye-=15,Ce.concerns.push("  - ")):Ue.volatilityLevel==="LOW"&&(Ye+=10,Ce.keyInsights.push("  - ")),Ue.volatilityExpanding&&(Ye-=10,Ce.concerns.push("  - ")));const Et=new Date().getUTCHours(),Qt=Et>=7&&Et<=16,St=Et>=13&&Et<=22,mt=Et>=23||Et<=8,Pt=Et>=13&&Et<=16;Pt?(Ye+=15,Ce.keyInsights.push(" -NY - ")):Qt||St?(Ye+=5,Ce.keyInsights.push(" ")):mt&&(Ye-=5,Ce.concerns.push("  - ")),Ce.deepThoughts.push(`(UTC): ${Et}:00`),Ce.deepThoughts.push(`: ${Qt?"London":""}${St?"NY":""}${mt?"Asia":""}`);let er="";(Ue==null?void 0:Ue.volatilityLevel)==="VERY_HIGH"||Ie!=null&&Ie.isLowVolume?(er="3",Ye-=5):(Ue==null?void 0:Ue.volatilityLevel)==="LOW"&&(Ie!=null&&Ie.isHighVolume)?(er="",Ye+=5):er="2",Ce.deepThoughts.push(`: ${er}`),Ce.confidence=Math.max(20,Math.min(95,Ye)),Ce.vote=Ye>=60?"GO":Ye>=40?"NEUTRAL":"WAIT";const lr=Ue!=null&&Ue.atrPercent?Ue.atrPercent*.1:.02;Bt?(Ce.suggestedEntry=Ke*(1+lr/100),Ce.suggestedTP=(D==null?void 0:D.suggestedTP)||Ke*1.003,Ce.suggestedSL=(D==null?void 0:D.suggestedSL)||Ke*.998):(Ce.suggestedEntry=Ke*(1-lr/100),Ce.suggestedTP=(D==null?void 0:D.suggestedTP)||Ke*.997,Ce.suggestedSL=(D==null?void 0:D.suggestedSL)||Ke*1.002),Ce.analysis=`: ${Ie!=null&&Ie.isHighVolume?"":Ie!=null&&Ie.isLowVolume?"":""}${(Ue==null?void 0:Ue.volatilityLevel)||"N/A"}${Pt?"":""}${er}`,Ce.positionSizePercent=Ce.vote==="GO"?8:Ce.vote==="NEUTRAL"?4:0}return Ce},bu=async C=>{const D=a[C],q=n[C];if(!D||!q||q.length<50){alert("50");return}ei(C),wA(!0),yA(!0),Al(null);try{Ps(" ..."),await new Promise(Yt=>setTimeout(Yt,400));const ce=sc(q),pe=ic(q),Ie=ZA(q),Ue=ul(q),De={structure:ce,volume:pe,volatility:Ie,mtf:Ue};Ps(" ..."),await new Promise(Yt=>setTimeout(Yt,500));const Be=[];for(const Yt of XA){Ps(` ${Yt.name}...`),await new Promise(Jr=>setTimeout(Jr,300));const fr=ti(Yt,D,q,De);Be.push({expert:Yt,opinion:fr})}Ps(" ..."),await new Promise(Yt=>setTimeout(Yt,400));let Re=0,it=0,Ke=0,It=0,Bt=0;Be.forEach(({expert:Yt,opinion:fr})=>{const Jr=Yt.weight;It+=Jr,Bt+=fr.confidence*Jr,fr.vote==="GO"?Re+=Jr:fr.vote==="WAIT"?it+=Jr:Ke+=Jr});let Ct=0,Ce=0,Nt=0,Rt=0,Ye=0,jt=0;Be.forEach(({expert:Yt,opinion:fr})=>{fr.suggestedTP&&(Ct+=fr.suggestedTP*Yt.weight,Rt+=Yt.weight),fr.suggestedSL&&(Ce+=fr.suggestedSL*Yt.weight,Ye+=Yt.weight),fr.suggestedEntry&&(Nt+=fr.suggestedEntry*Yt.weight,jt+=Yt.weight)}),Rt>0&&(Ct/=Rt),Ye>0&&(Ce/=Ye),jt>0&&(Nt/=jt);const Et=Be.find(Yt=>Yt.expert.id==="risk"),Qt=(Et==null?void 0:Et.opinion.positionSizePercent)||5;let St="NEUTRAL",mt="",Pt=[];const er=Re/It,lr=it/It;er>=.6?(St="GO",mt=`${(er*100).toFixed(0)}%`,Pt.push(" ")):lr>=.5?(St="WAIT",mt=`${(lr*100).toFixed(0)}%`,Pt.push(" ")):(St="NEUTRAL",mt="",Pt.push(" ")),(Et==null?void 0:Et.opinion.vote)==="WAIT"&&St==="GO"&&(St="NEUTRAL",mt="",Pt.push(" "));const Br=Nt&&Ct&&Ce?Math.abs(Ct-Nt)/Math.abs(Nt-Ce):0;Br<1&&St==="GO"&&(St="NEUTRAL",mt=`RR(${Br.toFixed(2)})1.0`,Pt.push(" ")),Al({symbol:C,signal:D,opinions:Be,analyses:De,votes:{GO:Re,NEUTRAL:Ke,WAIT:it},avgConfidence:Bt/It,finalVerdict:St,verdictReason:mt,verdictDetails:Pt,finalEntry:Nt,finalTP:Ct,finalSL:Ce,finalRR:Br,finalPositionSize:Qt,timestamp:new Date().toISOString()})}catch(ce){console.error("Debate error:",ce),alert("")}yA(!1),Ps("")},Ha=V.useCallback(async C=>{const D=a[C],q=n[C];if(!D||!q||q.length<50)return null;try{const ce=sc(q),pe=ic(q),Ie=ZA(q),Ue=ul(q),De={structure:ce,volume:pe,volatility:Ie,mtf:Ue},Be=[];for(const Yt of XA){const fr=ti(Yt,D,q,De);Be.push({expert:Yt,opinion:fr})}let Re=0,it=0,Ke=0,It=0,Bt=0;Be.forEach(({expert:Yt,opinion:fr})=>{const Jr=Yt.weight;It+=Jr,Bt+=fr.confidence*Jr,fr.vote==="GO"?Re+=Jr:fr.vote==="WAIT"?it+=Jr:Ke+=Jr});let Ct=0,Ce=0,Nt=0,Rt=0,Ye=0,jt=0;Be.forEach(({expert:Yt,opinion:fr})=>{fr.suggestedTP&&(Ct+=fr.suggestedTP*Yt.weight,Rt+=Yt.weight),fr.suggestedSL&&(Ce+=fr.suggestedSL*Yt.weight,Ye+=Yt.weight),fr.suggestedEntry&&(Nt+=fr.suggestedEntry*Yt.weight,jt+=Yt.weight)}),Rt>0&&(Ct/=Rt),Ye>0&&(Ce/=Ye),jt>0&&(Nt/=jt);const Et=Be.find(Yt=>Yt.expert.id==="risk"),Qt=(Et==null?void 0:Et.opinion.positionSizePercent)||5;let St="NEUTRAL",mt="",Pt=[];const er=Re/It,lr=it/It;er>=.6?(St="GO",mt=`${(er*100).toFixed(0)}%`,Pt.push(" ")):lr>=.5?(St="WAIT",mt=`${(lr*100).toFixed(0)}%`,Pt.push(" ")):(St="NEUTRAL",mt="",Pt.push(" ")),(Et==null?void 0:Et.opinion.vote)==="WAIT"&&St==="GO"&&(St="NEUTRAL",mt="",Pt.push(" "));const Br=Nt&&Ct&&Ce?Math.abs(Ct-Nt)/Math.abs(Nt-Ce):0;return Br<1&&St==="GO"&&(St="NEUTRAL",mt=`RR(${Br.toFixed(2)})1.0`,Pt.push(" ")),{symbol:C,signal:D,opinions:Be,analyses:De,votes:{GO:Re,NEUTRAL:Ke,WAIT:it},avgConfidence:Bt/It,finalVerdict:St,verdictReason:mt,verdictDetails:Pt,finalEntry:Nt,finalTP:Ct,finalSL:Ce,finalRR:Br,finalPositionSize:Qt,timestamp:new Date().toISOString()}}catch(ce){return console.error("Auto debate error:",ce),null}},[a,n,XA]);V.useEffect(()=>{var C;if(!(!oa||Zs))for(const D of t){const q=a[D];if(!q||!(q.signalType==="ENTRY_LONG"||q.signalType==="ENTRY_SHORT"))continue;const pe=ll[D],Ie=`${q.signalType}_${(C=q.lastPrice)==null?void 0:C.toFixed(2)}`;if(pe===Ie)continue;const Ue=zr[D];Ue&&Ue.signal.signalType===q.signalType&&(Date.now()-new Date(Ue.confirmedAt).getTime())/6e4<5||(console.log(` : ${D} (${q.signalType})`),nc(De=>({...De,[D]:Ie})),Ha(D).then(De=>{De&&(console.log(` : ${D} -> ${De.finalVerdict}`),De.finalVerdict==="GO"?(ol(Be=>({...Be,[D]:{signal:q,debateResult:De,confirmedAt:new Date().toISOString()}})),x&&nr("entry")):ol(Be=>{const Re={...Be};return delete Re[D],Re}))}))}},[a,oa,Zs,ll,zr,t,x,Ha]),V.useEffect(()=>{const C=setInterval(()=>{const D=Date.now();ol(q=>{const ce={...q};let pe=!1;for(const Ie in ce)D-new Date(ce[Ie].confirmedAt).getTime()>18e5&&(delete ce[Ie],pe=!0,console.log(` : ${Ie}`));return pe?ce:q})},6e4);return()=>clearInterval(C)},[]);const[dr,ac]=V.useState(null),[Ar,Ac]=V.useState(!1),[Bu,oc]=V.useState(!1),[Nr,Os]=V.useState({symbol:"BTC/USDT",days:3,interval:"1m",initialCapital:1e4,positionSize:.1,feeRate:.001}),Cu=async(C,D,q="15m")=>{const ce=C.replace("/",""),Ie=Math.min(D*(q==="1h"?24:q==="15m"?96:q==="5m"?288:1440),1e3),Ue=await fetch(`https://api.binance.com/api/v3/klines?symbol=${ce}&interval=${q}&limit=${Ie}`);if(!Ue.ok)throw new Error("Binance API error");return(await Ue.json()).map(Be=>({timestamp:new Date(Be[0]),open:parseFloat(Be[1]),high:parseFloat(Be[2]),low:parseFloat(Be[3]),close:parseFloat(Be[4]),volume:parseFloat(Be[5])}))},Nu=(C,D,q=null,ce=null)=>{if(!C||C.length<30)return{signalType:"WAIT",action:null};const pe=ce||yr,Ie=(Fr,Dr)=>{if(Fr.length<Dr+1)return null;let Pr=0,Ir=0;for(let Ns=Fr.length-Dr;Ns<Fr.length;Ns++){const Ms=Fr[Ns].close-Fr[Ns-1].close;Ms>0?Pr+=Ms:Ir-=Ms}const Ki=Pr/Dr,Hs=Ir/Dr;return Hs===0?100:100-100/(1+Ki/Hs)},Ue=(Fr,Dr)=>{if(Fr.length<Dr+3)return 0;const Pr=Ie(Fr.slice(0,-2),Dr),Ir=Ie(Fr,Dr);return!Pr||!Ir?0:Ir-Pr},De=Fr=>{if(Fr.length<20)return 1;const Dr=Fr.slice(-20).reduce((Pr,Ir)=>Pr+Ir.volume,0)/20;return Fr[Fr.length-1].volume/Dr},Be=Ie(C,pe.rsiPeriod),Re=Ue(C,pe.rsiPeriod),it=De(C),Ke=C[C.length-1].close,It=C[C.length-1].timestamp;if(!Be)return{signalType:"WAIT",action:null};const Bt=pe.takeProfitPercent,Ct=pe.stopLossPercent,Ce=pe.maxHoldingMinutes*60*1e3;if(D){const Fr=D.entryPrice,Dr=q?It.getTime()-new Date(q).getTime():0,Pr=D.type==="LONG"?(Ke-Fr)/Fr*100:(Fr-Ke)/Fr*100,Ir=Pr>=Bt,Ki=Pr<=-Ct,Hs=Dr>=Ce;return Ir?{signalType:"TAKE_PROFIT",action:D.type==="LONG"?"CLOSE_LONG":"CLOSE_SHORT",pnlPercent:Pr,lastPrice:Ke}:Ki?{signalType:"STOP_LOSS",action:D.type==="LONG"?"CLOSE_LONG":"CLOSE_SHORT",pnlPercent:Pr,lastPrice:Ke}:Hs?{signalType:Pr>=0?"TIME_EXIT_PROFIT":"TIME_EXIT_LOSS",action:D.type==="LONG"?"CLOSE_LONG":"CLOSE_SHORT",pnlPercent:Pr,lastPrice:Ke}:{signalType:"HOLDING",action:null,pnlPercent:Pr,lastPrice:Ke}}const Nt=it>=pe.volumeThreshold,Rt=Be<pe.rsiOversold,Ye=Be>pe.rsiOverbought,jt=Re>.5,Et=Re<-.5,Qt=C.length>=4?(Ke-C[C.length-4].close)/C[C.length-4].close*100:0,St=pe.momentumThreshold||.08,Pt=((Fr,Dr=20)=>{if(Fr.length<Dr)return null;const Pr=Fr.slice(-Dr),Ir=Pr.reduce((Ns,Ms)=>Ns+Ms.close,0)/Dr,Ki=Pr.reduce((Ns,Ms)=>Ns+Math.pow(Ms.close-Ir,2),0)/Dr,Hs=Math.sqrt(Ki);return{middle:Ir,upper:Ir+Hs*2,lower:Ir-Hs*2}})(C),er=Pt?Ke<=Pt.lower*1.002:!1,lr=Pt?Ke>=Pt.upper*.998:!1,Br=Rt&&jt,Yt=er&&Be<50,fr=Qt>St&&Be<55,Jr=(Br||Yt||fr)&&Nt,va=Ye&&Et,$n=lr&&Be>50,os=Qt<-St&&Be>45,$i=(va||$n||os)&&Nt;return Jr?{signalType:"ENTRY_LONG",action:"OPEN_LONG",lastPrice:Ke,rsi:Be,rsiSlope:Re,volumeRatio:it,momentum:Qt,pattern:Br?"RSI":Yt?"BB":"MOM"}:$i?{signalType:"ENTRY_SHORT",action:"OPEN_SHORT",lastPrice:Ke,rsi:Be,rsiSlope:Re,volumeRatio:it,momentum:Qt,pattern:va?"RSI":$n?"BB":"MOM"}:{signalType:"WAIT",action:null,lastPrice:Ke,rsi:Be,momentum:Qt}},eo=async()=>{Ac(!0),ac(null);try{const C=await Cu(Nr.symbol,Nr.days,Nr.interval);if(C.length<100)throw new Error("100");let D=Nr.initialCapital,q=null,ce=0;const pe=[],Ie=[{time:C[50].timestamp,equity:D}];for(let Ye=50;Ye<C.length;Ye++){const jt=C.slice(0,Ye+1),Et=Nu(jt.slice(-100),q,q==null?void 0:q.entryTime,yr),Qt=C[Ye].close,St=C[Ye].timestamp;if(!q&&(Et.action==="OPEN_LONG"||Et.action==="OPEN_SHORT")){const mt=D*Nr.positionSize,Pt=mt*Nr.feeRate;q={type:Et.action==="OPEN_LONG"?"LONG":"SHORT",entryPrice:Qt,entryTime:St,size:mt,entryFee:Pt},D-=Pt}if(q&&(Et.action==="CLOSE_LONG"||Et.action==="CLOSE_SHORT")){ce=Ye;const mt=q.size*Nr.feeRate;let Pt=0;q.type==="LONG"?Pt=q.size*((Qt-q.entryPrice)/q.entryPrice):Pt=q.size*((q.entryPrice-Qt)/q.entryPrice),Pt-=q.entryFee+mt,D+=Pt,pe.push({type:q.type,entryPrice:q.entryPrice,exitPrice:Qt,entryTime:q.entryTime,exitTime:St,pnl:Pt,pnlPercent:Pt/q.size*100,exitReason:Et.signalType}),q=null}if(Ye%10===0){let mt=0;q&&(q.type==="LONG"?mt=q.size*((Qt-q.entryPrice)/q.entryPrice):mt=q.size*((q.entryPrice-Qt)/q.entryPrice)),Ie.push({time:St,equity:D+mt})}}const Ue=pe.filter(Ye=>Ye.pnl>0),De=pe.filter(Ye=>Ye.pnl<=0),Be=pe.reduce((Ye,jt)=>Ye+jt.pnl,0),Re=Ue.length>0?Ue.reduce((Ye,jt)=>Ye+jt.pnl,0)/Ue.length:0,it=De.length>0?Math.abs(De.reduce((Ye,jt)=>Ye+jt.pnl,0)/De.length):0;let Ke=Nr.initialCapital,It=0;for(const Ye of Ie){Ye.equity>Ke&&(Ke=Ye.equity);const jt=(Ke-Ye.equity)/Ke*100;jt>It&&(It=jt)}const Bt=pe.map(Ye=>Ye.pnlPercent),Ct=Bt.length>0?Bt.reduce((Ye,jt)=>Ye+jt,0)/Bt.length:0,Ce=Bt.length>1?Math.sqrt(Bt.reduce((Ye,jt)=>Ye+Math.pow(jt-Ct,2),0)/(Bt.length-1)):0,Nt=Ce>0?Ct/Ce*Math.sqrt(252*288/Nr.days):0,Rt=pe.reduce((Ye,jt)=>(Ye[jt.exitReason]=(Ye[jt.exitReason]||0)+1,Ye),{});ac({symbol:Nr.symbol,interval:Nr.interval,period:`${Nr.days}`,dataPoints:C.length,initialCapital:Nr.initialCapital,finalCapital:D,totalReturn:(D-Nr.initialCapital)/Nr.initialCapital*100,totalPnL:Be,totalTrades:pe.length,winTrades:Ue.length,loseTrades:De.length,winRate:pe.length>0?Ue.length/pe.length*100:0,avgWin:Re,avgLoss:it,profitFactor:it>0?Re/it:Re>0?1/0:0,maxDrawdown:It,sharpeRatio:Nt,exitReasons:Rt,trades:pe.slice(-20),equityCurve:Ie})}catch(C){console.error("Backtest error:",C),alert(`: ${C.message}`)}finally{Ac(!1)}},dl=async C=>{const D=C.replace("/",""),q=await fetch(`https://api.binance.com/api/v3/klines?symbol=${D}&interval=5m&limit=100`);if(!q.ok)throw new Error("Binance API error");return(await q.json()).map(pe=>({timestamp:new Date(pe[0]),open:parseFloat(pe[1]),high:parseFloat(pe[2]),low:parseFloat(pe[3]),close:parseFloat(pe[4]),volume:parseFloat(pe[5])}))},la=V.useCallback(async()=>{l(!0);const C={},D={},q=t.map(async ce=>{try{const pe=await dl(ce);if(pe.length>=20)C[ce]=pe,D[ce]=rc(pe,ce);else throw new Error("Insufficient data")}catch(pe){console.log(`API fetch failed for ${ce}:`,pe.message),D[ce]={signal:" API Error",signalType:"WAIT",reason:pe.message,action:null}}});await Promise.all(q),s(C),A(D),b(new Date),l(!1)},[t,p]);V.useEffect(()=>{la();const C=setInterval(la,1e4);return()=>clearInterval(C)},[la]);const Er=(C,D)=>C?D==="DOGE/USDT"?C.toFixed(5):C<1?C.toFixed(4):C<100?C.toFixed(2):C.toLocaleString(void 0,{maximumFractionDigits:2}):"-",hi=C=>{switch(C){case"ENTRY_LONG":return"text-emerald-400 bg-emerald-500/20 border-emerald-500";case"ENTRY_SHORT":return"text-red-400 bg-red-500/20 border-red-500";case"TAKE_PROFIT":return"text-yellow-400 bg-yellow-500/20 border-yellow-500 animate-pulse";case"STOP_LOSS":return"text-red-500 bg-red-600/30 border-red-600 animate-pulse";case"PREPARE_LONG":return"text-emerald-300/70 bg-emerald-500/10 border-emerald-500/50";case"PREPARE_SHORT":return"text-red-300/70 bg-red-500/10 border-red-500/50";case"HOLDING":return"text-blue-400 bg-blue-500/20 border-blue-500";default:return"text-slate-500 bg-slate-700/30 border-slate-600"}},Su=w==="midnight"?"bg-[#1B2631]":"bg-[#F5F5F5]",sr=w==="midnight"?"text-white":"text-slate-800",bs=w==="midnight"?"bg-slate-800/50":"bg-white/80";return i.jsxs("div",{className:`min-h-[calc(100vh-200px)] ${Su} rounded-xl p-4 md:p-6 transition-colors`,children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-2xl md:text-3xl font-light tracking-widest text-[#D4AF37]",children:["BOTANICAL QUARTET",i.jsx("span",{className:"text-xs text-emerald-400 ml-2",children:"LIVE"})]}),i.jsxs("p",{className:`text-xs ${sr} opacity-50 mt-1`,children:[h?`Last: ${h.toLocaleTimeString()}`:"Loading...",te&&i.jsxs("span",{className:"ml-2 text-emerald-400",children:["  ",((Ti=te.availableBalance)==null?void 0:Ti.toFixed(2))||"0.00"," USDT",te.unrealisedPNL!==0&&i.jsxs("span",{className:te.unrealisedPNL>=0?"text-emerald-300":"text-red-400",children:[" ","(PnL: ",te.unrealisedPNL>=0?"+":"",(to=te.unrealisedPNL)==null?void 0:to.toFixed(2),")"]})]})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx("button",{onClick:()=>{if(y(!x),!x)try{const C=new(window.AudioContext||window.webkitAudioContext),D=C.createOscillator(),q=C.createGain();D.connect(q),q.connect(C.destination),D.frequency.setValueAtTime(880,C.currentTime),q.gain.setValueAtTime(.1,C.currentTime),q.gain.exponentialRampToValueAtTime(.01,C.currentTime+.1),D.start(C.currentTime),D.stop(C.currentTime+.1)}catch{}},className:`px-4 py-2 rounded-lg text-sm transition-all ${x?"bg-[#D4AF37] text-slate-900":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:x?"":""}),i.jsx("button",{onClick:()=>d(!c),className:`px-4 py-2 rounded-lg text-sm transition-all ${c?"bg-[#D4AF37] text-slate-900":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:" ZEN"}),i.jsx("button",{onClick:()=>j(w==="midnight"?"canvas":"midnight"),className:"px-4 py-2 bg-slate-700 text-slate-300 rounded-lg text-sm hover:bg-slate-600",children:w==="midnight"?"":""}),i.jsxs("button",{onClick:()=>O(!0),className:`px-4 py-2 rounded-lg text-sm transition-all ${L?"bg-emerald-600 text-white":"bg-amber-600 text-white animate-pulse"}`,children:[" ",L?"KuCoin":"KuCoin"]}),i.jsx("button",{onClick:()=>oc(!0),className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-lg text-sm transition-all",children:" Backtest"})]})]}),z&&i.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:`${bs} rounded-2xl p-6 max-w-md w-full border border-amber-500/30`,children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-amber-400",children:" KuCoin Futures API"}),i.jsx("button",{onClick:()=>O(!1),className:"text-slate-400 hover:text-white text-2xl",children:""})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 block mb-1",children:"API Key"}),i.jsx("input",{type:"text",value:L,onChange:C=>U(C.target.value),placeholder:"6981985ebec02400012ddbcb",className:"w-full bg-slate-800 border border-slate-600 rounded-lg px-4 py-2 text-white text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 block mb-1",children:"API Secret"}),i.jsx("input",{type:"password",value:M,onChange:C=>G(C.target.value),placeholder:"",className:"w-full bg-slate-800 border border-slate-600 rounded-lg px-4 py-2 text-white text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 block mb-1",children:"PassphraseAPI"}),i.jsx("input",{type:"password",value:N,onChange:C=>$(C.target.value),placeholder:"",className:"w-full bg-slate-800 border border-slate-600 rounded-lg px-4 py-2 text-white text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 block mb-1",children:"APIKuCoin API"}),i.jsxs("select",{value:k,onChange:C=>_(C.target.value),className:"w-full bg-slate-800 border border-slate-600 rounded-lg px-4 py-2 text-white text-sm",children:[i.jsx("option",{value:"3",children:"Version 3V3API"}),i.jsx("option",{value:"2",children:"Version 2V2API"})]}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:" KuCoinAPI"})]}),ee&&i.jsxs("div",{className:`p-3 rounded-lg ${ee.includes("")?"bg-emerald-900/30 border border-emerald-500/30":ee.includes("")?"bg-red-900/30 border border-red-500/30":"bg-blue-900/30 border border-blue-500/30"}`,children:[i.jsx("div",{className:`text-sm font-medium ${ee.includes("")?"text-emerald-400":ee.includes("")?"text-red-400":"text-blue-400"}`,children:ee}),te&&i.jsxs("div",{className:"text-xs text-slate-400 mt-2 space-y-1",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[" : ",i.jsx("span",{className:"text-white font-mono",children:(bA=te.availableBalance)==null?void 0:bA.toFixed(2)})," USDT"]}),i.jsxs("div",{children:[" : ",i.jsx("span",{className:"text-white font-mono",children:(ro=te.accountEquity)==null?void 0:ro.toFixed(2)})," USDT"]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[" : ",i.jsx("span",{className:"text-amber-400 font-mono",children:(Ma=te.marginBalance)==null?void 0:Ma.toFixed(2)})," USDT"]}),i.jsxs("div",{children:[" PnL: ",i.jsxs("span",{className:`font-mono ${te.unrealisedPNL>=0?"text-emerald-400":"text-red-400"}`,children:[te.unrealisedPNL>=0?"+":"",(no=te.unrealisedPNL)==null?void 0:no.toFixed(2)]})," USDT"]})]})]})]}),i.jsxs("div",{className:"p-3 bg-slate-800/50 border border-slate-600 rounded-lg",children:[i.jsx("div",{className:"text-xs text-slate-400 mb-2",children:" "}),i.jsx("select",{value:Je,onChange:C=>Xe(parseInt(C.target.value)),className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white text-sm",children:_e.map((C,D)=>i.jsxs("option",{value:D,children:[C.name," (",C.region,")"]},D))}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:" VPN/SG"})]}),i.jsx("div",{className:"p-3 bg-amber-900/30 border border-amber-500/30 rounded-lg",children:i.jsxs("div",{className:"text-xs text-amber-400",children:[" KuCoin Futures",i.jsx("br",{}),"APIFutures",i.jsx("br",{}),"API",i.jsx("br",{}),": ",((fl=_e[Je])==null?void 0:fl.name)||"Cloudflare Workers",""]})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{Le()},disabled:!L||!M||!N,className:`flex-1 py-2 rounded-lg text-sm ${L&&M&&N?"bg-slate-700 hover:bg-slate-600 text-white":"bg-slate-800 text-slate-500 cursor-not-allowed"}`,children:" "}),i.jsx("button",{onClick:()=>O(!1),className:"flex-1 py-2 bg-amber-600 hover:bg-amber-500 text-white rounded-lg text-sm",children:""})]})]})]})}),Bu&&i.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:`${bs} rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-slate-700`,children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-[#D4AF37]",children:" "}),i.jsx("button",{onClick:()=>oc(!1),className:"text-slate-400 hover:text-white text-2xl",children:""})]}),i.jsxs("div",{className:"mb-4 p-3 bg-gradient-to-r from-amber-900/30 to-orange-900/30 border border-amber-500/30 rounded-lg",children:[i.jsx("div",{className:"text-sm text-amber-300 font-medium mb-1",children:" V5.1 Raschke/Grimes/Volman"}),i.jsxs("div",{className:"text-xs text-slate-400 space-y-1",children:[i.jsx("div",{className:"text-cyan-300 font-medium",children:"3OR:"}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-1",children:[i.jsxs("div",{className:"text-center p-1 bg-emerald-900/30 rounded",children:[i.jsx("div",{className:"text-emerald-400",children:"RSI"}),i.jsxs("div",{className:"text-[10px]",children:["RSI","<",yr.rsiOversold,""]})]}),i.jsxs("div",{className:"text-center p-1 bg-blue-900/30 rounded",children:[i.jsx("div",{className:"text-blue-400",children:"BB"}),i.jsxs("div",{className:"text-[10px]",children:["BB+RSI","<","50"]})]}),i.jsxs("div",{className:"text-center p-1 bg-purple-900/30 rounded",children:[i.jsx("div",{className:"text-purple-400",children:""}),i.jsxs("div",{className:"text-[10px]",children:["+",yr.momentumThreshold||.08,"%"]})]})]}),i.jsx("div",{className:"mt-2",children:(()=>{const C=Rn();return i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-yellow-400",children:"TP:"})," ",C.takeProfitPercent,"% |",i.jsx("span",{className:"text-red-400 ml-2",children:"SL:"})," ",C.stopLossPercent,"% |",i.jsx("span",{className:"text-purple-400 ml-2",children:"Time:"})," ",C.maxHoldingMinutes," |",i.jsx("span",{className:"text-cyan-400 ml-2",children:"Vol:"})," ",yr.volumeThreshold,"x",i.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[" : ",i.jsx("span",{className:"text-amber-400",children:C.timeZoneName})]})]})})()}),i.jsx("div",{className:"text-amber-400 mt-1",children:" 30 | "})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:`text-xs ${sr} opacity-60 block mb-1`,children:""}),i.jsx("select",{value:Nr.symbol,onChange:C=>Os({...Nr,symbol:C.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-white",children:t.map(C=>i.jsx("option",{value:C,children:C},C))})]}),i.jsxs("div",{children:[i.jsx("label",{className:`text-xs ${sr} opacity-60 block mb-1`,children:" "}),i.jsxs("select",{value:Nr.interval,onChange:C=>Os({...Nr,interval:C.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-white",children:[i.jsx("option",{value:"1m",children:"1"}),i.jsx("option",{value:"5m",children:"5"}),i.jsx("option",{value:"15m",children:"15"}),i.jsx("option",{value:"1h",children:"1"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:`text-xs ${sr} opacity-60 block mb-1`,children:""}),i.jsxs("select",{value:Nr.days,onChange:C=>Os({...Nr,days:parseInt(C.target.value)}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-white",children:[i.jsx("option",{value:1,children:"1"}),i.jsx("option",{value:3,children:"3"}),i.jsx("option",{value:7,children:"7"}),i.jsx("option",{value:10,children:"10"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:`text-xs ${sr} opacity-60 block mb-1`,children:""}),i.jsx("input",{type:"number",value:Nr.initialCapital,onChange:C=>Os({...Nr,initialCapital:parseFloat(C.target.value)}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:`text-xs ${sr} opacity-60 block mb-1`,children:""}),i.jsxs("select",{value:Nr.positionSize,onChange:C=>Os({...Nr,positionSize:parseFloat(C.target.value)}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm text-white",children:[i.jsx("option",{value:.05,children:"5%"}),i.jsx("option",{value:.1,children:"10%"}),i.jsx("option",{value:.2,children:"20%"}),i.jsx("option",{value:.5,children:"50%"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[i.jsx("button",{onClick:eo,disabled:Ar||aa,className:"py-3 bg-purple-600 hover:bg-purple-500 disabled:bg-slate-700 text-white rounded-lg font-medium transition-all",children:Ar?" ...":" "}),i.jsx("button",{onClick:Xs,disabled:aa||Ar,className:"py-3 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-400 hover:to-orange-400 disabled:bg-slate-700 text-white rounded-lg font-medium transition-all",children:aa?` ... ${rl}%`:" "})]}),aa&&i.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-amber-900/30 to-orange-900/30 border border-amber-500/30 rounded-lg",children:[i.jsxs("div",{className:"flex justify-between text-sm text-amber-300 mb-2",children:[i.jsx("span",{children:" ..."}),i.jsxs("span",{children:[rl,"%"]})]}),i.jsx("div",{className:"w-full h-2 bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-amber-500 to-orange-500 transition-all duration-300",style:{width:`${rl}%`}})}),i.jsx("div",{className:"mt-2 text-xs text-slate-400 space-y-1",children:ec.map((C,D)=>i.jsx("div",{children:C},D))})]}),i.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-cyan-900/30 to-blue-900/30 border border-cyan-500/30 rounded-lg",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"text-sm text-cyan-300 font-medium",children:" V5 "}),yr.lastUpdated&&i.jsxs("span",{className:"text-xs text-slate-400",children:[": ",new Date(yr.lastUpdated).toLocaleDateString("ja-JP")]})]}),i.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-7 gap-2 text-xs",children:[i.jsxs("div",{className:"text-center p-2 bg-slate-800/50 rounded",children:[i.jsx("div",{className:"text-slate-400",children:"RSI"}),i.jsx("div",{className:"text-cyan-400 font-bold",children:yr.rsiPeriod})]}),i.jsxs("div",{className:"text-center p-2 bg-slate-800/50 rounded",children:[i.jsx("div",{className:"text-slate-400",children:""}),i.jsx("div",{className:"text-emerald-400 font-bold",children:yr.rsiOversold})]}),i.jsxs("div",{className:"text-center p-2 bg-slate-800/50 rounded",children:[i.jsx("div",{className:"text-slate-400",children:""}),i.jsx("div",{className:"text-red-400 font-bold",children:yr.rsiOverbought})]}),i.jsxs("div",{className:"text-center p-2 bg-slate-800/50 rounded",children:[i.jsx("div",{className:"text-slate-400",children:"%"}),i.jsxs("div",{className:"text-emerald-400 font-bold",children:[Rn().takeProfitPercent,"%"]})]}),i.jsxs("div",{className:"text-center p-2 bg-slate-800/50 rounded",children:[i.jsx("div",{className:"text-slate-400",children:"%"}),i.jsxs("div",{className:"text-red-400 font-bold",children:[Rn().stopLossPercent,"%"]})]}),i.jsxs("div",{className:"text-center p-2 bg-slate-800/50 rounded",children:[i.jsx("div",{className:"text-slate-400",children:"Vol"}),i.jsxs("div",{className:"text-yellow-400 font-bold",children:[yr.volumeThreshold,"x"]})]}),i.jsxs("div",{className:"text-center p-2 bg-slate-800/50 rounded",children:[i.jsx("div",{className:"text-slate-400",children:""}),i.jsxs("div",{className:"text-purple-400 font-bold",children:[Rn().maxHoldingMinutes,""]})]})]}),yr.performance&&yr.performance.winRate>0&&i.jsxs("div",{className:"mt-2 flex gap-4 text-xs",children:[i.jsx("span",{className:"text-slate-400",children:":"}),i.jsxs("span",{className:"text-emerald-400",children:[" ",yr.performance.winRate.toFixed(1),"%"]}),i.jsxs("span",{className:"text-cyan-400",children:["PF ",yr.performance.profitFactor.toFixed(2)]})]})]}),dr&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:`${w==="midnight"?"bg-slate-900/50":"bg-slate-100"} rounded-lg p-4`,children:[i.jsx("div",{className:`text-xs ${sr} opacity-50`,children:""}),i.jsxs("div",{className:`text-2xl font-bold ${dr.totalReturn>=0?"text-emerald-400":"text-red-400"}`,children:[dr.totalReturn>=0?"+":"",dr.totalReturn.toFixed(2),"%"]})]}),i.jsxs("div",{className:`${w==="midnight"?"bg-slate-900/50":"bg-slate-100"} rounded-lg p-4`,children:[i.jsx("div",{className:`text-xs ${sr} opacity-50`,children:""}),i.jsxs("div",{className:`text-2xl font-bold ${dr.winRate>=50?"text-emerald-400":"text-yellow-400"}`,children:[dr.winRate.toFixed(1),"%"]})]}),i.jsxs("div",{className:`${w==="midnight"?"bg-slate-900/50":"bg-slate-100"} rounded-lg p-4`,children:[i.jsx("div",{className:`text-xs ${sr} opacity-50`,children:"DD"}),i.jsxs("div",{className:"text-2xl font-bold text-red-400",children:["-",dr.maxDrawdown.toFixed(2),"%"]})]}),i.jsxs("div",{className:`${w==="midnight"?"bg-slate-900/50":"bg-slate-100"} rounded-lg p-4`,children:[i.jsx("div",{className:`text-xs ${sr} opacity-50`,children:"Profit Factor"}),i.jsx("div",{className:`text-2xl font-bold ${dr.profitFactor>=1.5?"text-emerald-400":dr.profitFactor>=1?"text-yellow-400":"text-red-400"}`,children:dr.profitFactor===1/0?"":dr.profitFactor.toFixed(2)})]})]}),i.jsxs("div",{className:`${w==="midnight"?"bg-slate-900/50":"bg-slate-100"} rounded-lg p-4`,children:[i.jsx("h4",{className:`text-sm font-medium ${sr} mb-3`,children:""}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:`${sr} opacity-50`,children:":"}),i.jsx("span",{className:`ml-2 ${sr}`,children:dr.period})]}),i.jsxs("div",{children:[i.jsx("span",{className:`${sr} opacity-50`,children:":"}),i.jsx("span",{className:`ml-2 ${sr}`,children:dr.interval})]}),i.jsxs("div",{children:[i.jsx("span",{className:`${sr} opacity-50`,children:":"}),i.jsxs("span",{className:`ml-2 ${sr}`,children:[dr.dataPoints,""]})]}),i.jsxs("div",{children:[i.jsx("span",{className:`${sr} opacity-50`,children:":"}),i.jsxs("span",{className:`ml-2 ${sr}`,children:[dr.totalTrades,""]})]}),i.jsxs("div",{children:[i.jsx("span",{className:`${sr} opacity-50`,children:":"}),i.jsxs("span",{className:"ml-2 text-emerald-400",children:[dr.winTrades,""]}),i.jsxs("span",{className:"text-red-400 ml-1",children:[dr.loseTrades,""]})]}),i.jsxs("div",{children:[i.jsx("span",{className:`${sr} opacity-50`,children:":"}),i.jsxs("span",{className:"ml-2 text-emerald-400",children:["$",dr.avgWin.toFixed(2)]})]}),i.jsxs("div",{children:[i.jsx("span",{className:`${sr} opacity-50`,children:":"}),i.jsxs("span",{className:"ml-2 text-red-400",children:["-$",dr.avgLoss.toFixed(2)]})]}),i.jsxs("div",{children:[i.jsx("span",{className:`${sr} opacity-50`,children:"Sharpe:"}),i.jsx("span",{className:`ml-2 ${dr.sharpeRatio>=1?"text-emerald-400":"text-yellow-400"}`,children:dr.sharpeRatio.toFixed(2)})]}),i.jsxs("div",{children:[i.jsx("span",{className:`${sr} opacity-50`,children:":"}),i.jsxs("span",{className:`ml-2 ${sr}`,children:["$",dr.finalCapital.toFixed(2)]})]})]})]}),dr.exitReasons&&Object.keys(dr.exitReasons).length>0&&i.jsxs("div",{className:`${w==="midnight"?"bg-slate-900/50":"bg-slate-100"} rounded-lg p-4`,children:[i.jsx("h4",{className:`text-sm font-medium ${sr} mb-3`,children:"Triple Barrier "}),i.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(dr.exitReasons).map(([C,D])=>i.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${C==="TAKE_PROFIT"?"bg-emerald-500/20 text-emerald-400":C==="STOP_LOSS"?"bg-red-500/20 text-red-400":C==="TIME_EXIT_PROFIT"?"bg-purple-500/20 text-purple-400":C==="TIME_EXIT_LOSS"?"bg-orange-500/20 text-orange-400":C==="TREND_REVERSAL"?"bg-blue-500/20 text-blue-400":"bg-slate-500/20 text-slate-400"}`,children:[C==="TAKE_PROFIT"?" (2ATR)":C==="STOP_LOSS"?" (1ATR)":C==="TIME_EXIT_PROFIT"?" (+)":C==="TIME_EXIT_LOSS"?" (-)":C==="TREND_REVERSAL"?" ":C,": ",D,""]},C))})]}),i.jsxs("div",{className:`${w==="midnight"?"bg-slate-900/50":"bg-slate-100"} rounded-lg p-4`,children:[i.jsx("h4",{className:`text-sm font-medium ${sr} mb-3`,children:""}),i.jsx("div",{className:"h-32 flex items-end gap-0.5",children:dr.equityCurve.map((C,D)=>{const q=Math.min(...dr.equityCurve.map(De=>De.equity)),pe=Math.max(...dr.equityCurve.map(De=>De.equity))-q||1,Ie=(C.equity-q)/pe*100,Ue=C.equity>=dr.initialCapital;return i.jsx("div",{className:`flex-1 ${Ue?"bg-emerald-500/60":"bg-red-500/60"} rounded-t`,style:{height:`${Math.max(Ie,5)}%`},title:`${C.time.toLocaleDateString()} - $${C.equity.toFixed(2)}`},D)})}),i.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mt-2",children:[i.jsx("span",{children:(pl=dr.equityCurve[0])==null?void 0:pl.time.toLocaleDateString()}),i.jsx("span",{children:(Li=dr.equityCurve[dr.equityCurve.length-1])==null?void 0:Li.time.toLocaleDateString()})]})]}),dr.trades.length>0&&i.jsxs("div",{className:`${w==="midnight"?"bg-slate-900/50":"bg-slate-100"} rounded-lg p-4`,children:[i.jsx("h4",{className:`text-sm font-medium ${sr} mb-3`,children:""}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-xs",children:[i.jsx("thead",{children:i.jsxs("tr",{className:`${sr} opacity-50`,children:[i.jsx("th",{className:"text-left py-1",children:""}),i.jsx("th",{className:"text-right",children:"Entry"}),i.jsx("th",{className:"text-right",children:"Exit"}),i.jsx("th",{className:"text-right",children:"PnL"}),i.jsx("th",{className:"text-right",children:""})]})}),i.jsx("tbody",{children:dr.trades.map((C,D)=>i.jsxs("tr",{className:"border-t border-slate-700/50",children:[i.jsx("td",{className:`py-2 ${C.type==="LONG"?"text-emerald-400":"text-red-400"}`,children:C.type}),i.jsx("td",{className:`text-right ${sr}`,children:Er(C.entryPrice,dr.symbol)}),i.jsx("td",{className:`text-right ${sr}`,children:Er(C.exitPrice,dr.symbol)}),i.jsxs("td",{className:`text-right ${C.pnl>=0?"text-emerald-400":"text-red-400"}`,children:[C.pnl>=0?"+":"",C.pnlPercent.toFixed(2),"%"]}),i.jsx("td",{className:`text-right ${sr} opacity-60`,children:C.exitReason==="TAKE_PROFIT"?"":""})]},D))})]})})]}),i.jsxs("div",{className:`${w==="midnight"?"bg-slate-900/50":"bg-slate-100"} rounded-lg p-4`,children:[i.jsx("h4",{className:`text-sm font-medium ${sr} mb-2`,children:" "}),i.jsx("p",{className:`text-sm ${sr} opacity-70`,children:dr.totalTrades===0?" ":dr.profitFactor>=1.5&&dr.winRate>=50?" ":dr.profitFactor>=1?" ":" "}),i.jsx("p",{className:`text-xs ${sr} opacity-40 mt-2`,children:" "})]})]})]})}),JA&&i.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:`${bs} rounded-2xl p-6 max-w-5xl w-full max-h-[95vh] overflow-y-auto border border-purple-500/30`,children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold bg-gradient-to-r from-purple-400 to-indigo-400 bg-clip-text text-transparent",children:" AI v2.0"}),i.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:[Zr," - ",((Pi=a[Zr])==null?void 0:Pi.signalType)==="ENTRY_LONG"?"LONG":"SHORT",""]})]}),i.jsx("button",{onClick:()=>wA(!1),className:"text-slate-400 hover:text-white text-2xl",children:""})]}),Zs?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-5xl mb-4 animate-pulse",children:""}),i.jsx("div",{className:"text-lg text-purple-400 font-medium",children:_n||"..."}),i.jsx("div",{className:"flex justify-center gap-3 mt-6",children:XA.map((C,D)=>i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("span",{className:"text-3xl animate-bounce",style:{animationDelay:`${D*.15}s`},children:C.avatar}),i.jsx("span",{className:"text-xs text-slate-500 mt-1",children:C.name.split(" ")[0]})]},C.id))}),i.jsx("div",{className:"mt-6 w-64 mx-auto bg-slate-800 rounded-full h-2 overflow-hidden",children:i.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-500 h-full animate-pulse",style:{width:"60%"}})})]}):_t?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:`p-5 rounded-xl border-2 ${_t.finalVerdict==="GO"?"bg-emerald-900/30 border-emerald-500":_t.finalVerdict==="WAIT"?"bg-red-900/30 border-red-500":"bg-amber-900/30 border-amber-500"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:`text-3xl font-bold ${_t.finalVerdict==="GO"?"text-emerald-400":_t.finalVerdict==="WAIT"?"text-red-400":"text-amber-400"}`,children:_t.finalVerdict==="GO"?" ":_t.finalVerdict==="WAIT"?" ":" "}),i.jsx("div",{className:"text-sm text-slate-400 mt-1",children:_t.verdictReason}),_t.verdictDetails&&_t.verdictDetails.map((C,D)=>i.jsx("div",{className:"text-xs text-slate-500 mt-1",children:C},D))]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm text-slate-400",children:""}),i.jsxs("div",{className:`text-3xl font-bold ${_t.avgConfidence>=70?"text-emerald-400":_t.avgConfidence>=50?"text-amber-400":"text-red-400"}`,children:[_t.avgConfidence.toFixed(0),"%"]})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex gap-1 h-3 rounded-full overflow-hidden",children:[i.jsx("div",{className:"bg-emerald-500",style:{width:`${_t.votes.GO/(_t.votes.GO+_t.votes.NEUTRAL+_t.votes.WAIT)*100}%`}}),i.jsx("div",{className:"bg-amber-500",style:{width:`${_t.votes.NEUTRAL/(_t.votes.GO+_t.votes.NEUTRAL+_t.votes.WAIT)*100}%`}}),i.jsx("div",{className:"bg-red-500",style:{width:`${_t.votes.WAIT/(_t.votes.GO+_t.votes.NEUTRAL+_t.votes.WAIT)*100}%`}})]}),i.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[i.jsxs("span",{className:"text-emerald-400",children:["GO: ",_t.votes.GO.toFixed(1)]}),i.jsxs("span",{className:"text-amber-400",children:[": ",_t.votes.NEUTRAL.toFixed(1)]}),i.jsxs("span",{className:"text-red-400",children:["WAIT: ",_t.votes.WAIT.toFixed(1)]})]})]})]}),_t.finalVerdict!=="WAIT"&&_t.finalTP&&_t.finalSL&&i.jsxs("div",{className:"p-5 rounded-xl bg-gradient-to-br from-slate-800 to-slate-900 border-2 border-purple-500",children:[i.jsx("h4",{className:"text-lg font-bold text-purple-400 mb-4 flex items-center gap-2",children:" "}),i.jsxs("div",{className:"grid grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"p-4 rounded-xl bg-red-900/40 border-2 border-red-500",children:[i.jsx("div",{className:"text-sm text-red-400 font-medium mb-2",children:"  (SL)"}),i.jsx("div",{className:"text-2xl font-bold text-red-400 font-mono",children:Er(_t.finalSL,Zr)}),i.jsxs("div",{className:"text-xs text-red-300 mt-1",children:[((_t.finalSL-_t.finalEntry)/_t.finalEntry*100).toFixed(2),"%"]})]}),i.jsxs("div",{className:"p-4 rounded-xl bg-blue-900/40 border-2 border-blue-500",children:[i.jsx("div",{className:"text-sm text-blue-400 font-medium mb-2",children:" "}),i.jsx("div",{className:"text-2xl font-bold text-white font-mono",children:Er(_t.finalEntry,Zr)}),i.jsx("div",{className:"text-xs text-slate-400 mt-1",children:""})]}),i.jsxs("div",{className:"p-4 rounded-xl bg-emerald-900/40 border-2 border-emerald-500",children:[i.jsx("div",{className:"text-sm text-emerald-400 font-medium mb-2",children:"  (TP)"}),i.jsx("div",{className:"text-2xl font-bold text-emerald-400 font-mono",children:Er(_t.finalTP,Zr)}),i.jsxs("div",{className:"text-xs text-emerald-300 mt-1",children:[((_t.finalTP-_t.finalEntry)/_t.finalEntry*100*(((gl=a[Zr])==null?void 0:gl.action)==="OPEN_LONG"?1:-1)).toFixed(2),"%"]})]}),i.jsxs("div",{className:"p-4 rounded-xl bg-purple-900/40 border-2 border-purple-500",children:[i.jsx("div",{className:"text-sm text-purple-400 font-medium mb-2",children:" RR"}),i.jsxs("div",{className:`text-2xl font-bold font-mono ${_t.finalRR>=1.5?"text-emerald-400":_t.finalRR>=1?"text-amber-400":"text-red-400"}`,children:["1:",_t.finalRR.toFixed(2)]}),i.jsx("div",{className:"text-xs text-slate-400 mt-1",children:_t.finalRR>=1.5?"":_t.finalRR>=1?"":""})]})]}),i.jsxs("div",{className:"mb-4 p-3 rounded-lg bg-slate-900/50",children:[i.jsxs("div",{className:"flex justify-between text-xs mb-2",children:[i.jsxs("span",{className:"text-red-400",children:["SL ",Er(_t.finalSL,Zr)]}),i.jsxs("span",{className:"text-blue-400 font-bold",children:["Entry ",Er(_t.finalEntry,Zr)]}),i.jsxs("span",{className:"text-emerald-400",children:["TP ",Er(_t.finalTP,Zr)]})]}),i.jsxs("div",{className:"h-4 bg-slate-700 rounded-full overflow-hidden relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 bg-red-500/30",style:{width:"30%"}}),i.jsx("div",{className:"absolute inset-y-0 right-0 bg-emerald-500/30",style:{width:"70%"}}),i.jsx("div",{className:"absolute inset-y-0 left-[30%] w-1 bg-blue-400"})]})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-slate-800/50",children:[i.jsx("span",{className:"text-sm text-slate-400",children:""}),i.jsxs("span",{className:"text-lg font-bold text-amber-400",children:[_t.finalPositionSize.toFixed(1),"%"]})]})]}),i.jsxs("details",{className:"group",children:[i.jsxs("summary",{className:"cursor-pointer p-3 rounded-lg bg-slate-800/50 hover:bg-slate-800 transition-colors flex items-center justify-between",children:[i.jsx("span",{className:"text-slate-300 font-medium",children:" "}),i.jsx("span",{className:"text-slate-400 group-open:rotate-180 transition-transform",children:""})]}),i.jsx("div",{className:"mt-4 space-y-4",children:_t.opinions.map(({expert:C,opinion:D})=>{var q;return i.jsx("div",{className:`p-4 rounded-xl ${C.bgColor} border ${C.borderColor}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"text-3xl",children:C.avatar}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:`font-bold ${C.color}`,children:C.name}),i.jsxs("div",{className:"text-xs text-slate-400",children:[C.title," | ",C.specialty]})]}),i.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-bold ${D.vote==="GO"?"bg-emerald-500/20 text-emerald-400":D.vote==="WAIT"?"bg-red-500/20 text-red-400":"bg-amber-500/20 text-amber-400"}`,children:[D.vote==="GO"?" GO":D.vote==="WAIT"?" WAIT":" ",i.jsxs("span",{className:"ml-1 text-xs opacity-70",children:[D.confidence,"%"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[D.deepThoughts&&D.deepThoughts.length>0&&i.jsx("div",{className:"text-xs text-slate-500 flex flex-wrap gap-2",children:D.deepThoughts.map((ce,pe)=>i.jsx("span",{className:"px-2 py-0.5 bg-slate-800/50 rounded",children:ce},pe))}),i.jsx("div",{className:"text-sm text-slate-300",children:D.analysis}),D.keyInsights&&D.keyInsights.length>0&&i.jsx("div",{className:"text-sm text-emerald-400",children:D.keyInsights.join(" | ")}),D.concerns&&D.concerns.length>0&&i.jsx("div",{className:"text-sm text-amber-400",children:D.concerns.join(" | ")}),D.suggestedTP&&D.suggestedSL&&i.jsxs("div",{className:"text-xs text-slate-500 flex gap-4 mt-2 pt-2 border-t border-slate-700/50",children:[i.jsxs("span",{children:["Entry: ",Er(D.suggestedEntry,Zr)]}),i.jsxs("span",{className:"text-emerald-400",children:["TP: ",Er(D.suggestedTP,Zr)]}),i.jsxs("span",{className:"text-red-400",children:["SL: ",Er(D.suggestedSL,Zr)]}),i.jsxs("span",{children:["RR: ",((q=D.riskRewardRatio)==null?void 0:q.toFixed(2))||"N/A"]})]})]})]})]})},C.id)})})]}),i.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-700",children:[i.jsx("button",{onClick:()=>wA(!1),className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-medium transition-all",children:""}),_t.finalVerdict!=="WAIT"&&(($a=a[Zr])==null?void 0:$a.action)&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>{al(Zr,a[Zr].action==="OPEN_LONG"?"LONG":"SHORT",_t.finalEntry),wA(!1)},className:"px-6 py-3 bg-slate-600 hover:bg-slate-500 text-white rounded-lg font-medium transition-all",children:" "}),L&&i.jsx("button",{onClick:()=>{yt(Zr,a[Zr].action==="OPEN_LONG"?"buy":"sell",Math.min(de,_t.finalPositionSize*2).toString(),ve),wA(!1)},disabled:fe,className:`flex-1 py-3 rounded-lg font-bold transition-all ${((ml=a[Zr])==null?void 0:ml.action)==="OPEN_LONG"?"bg-gradient-to-r from-emerald-600 to-emerald-500 hover:from-emerald-500 hover:to-emerald-400 text-white shadow-lg shadow-emerald-500/30":"bg-gradient-to-r from-red-600 to-red-500 hover:from-red-500 hover:to-red-400 text-white shadow-lg shadow-red-500/30"} ${fe?"opacity-50":""}`,children:fe?" ...":((m=a[Zr])==null?void 0:m.action)==="OPEN_LONG"?` LONG @ ${Er(_t.finalEntry,Zr)}`:` SHORT @ ${Er(_t.finalEntry,Zr)}`})]}),_t.finalVerdict==="WAIT"&&i.jsxs("div",{className:"flex-1 py-3 px-4 bg-red-900/30 border border-red-500/50 rounded-lg text-center",children:[i.jsx("span",{className:"text-red-400 font-medium",children:" "}),i.jsx("span",{className:"text-slate-400 text-sm ml-2",children:""})]})]})]}):null]})}),H.length>0&&i.jsxs("div",{className:`${bs} rounded-xl p-4 border border-amber-500/50 mb-6`,children:[(()=>{const C=Rn();return i.jsxs("div",{className:"flex items-center justify-between mb-3 pb-3 border-b border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-slate-400 text-xs",children:" :"}),i.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${C.volatilityMultiplier>=1.5?"bg-red-500/30 text-red-400":C.volatilityMultiplier>=1?"bg-amber-500/30 text-amber-400":"bg-blue-500/30 text-blue-400"}`,children:C.timeZoneName})]}),i.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[i.jsxs("span",{className:"text-emerald-400",children:[" TP: ",C.takeProfitPercent,"%"]}),i.jsxs("span",{className:"text-red-400",children:[" SL: ",C.stopLossPercent,"%"]}),i.jsxs("span",{className:"text-purple-400",children:[" Max: ",C.maxHoldingMinutes,""]})]})]})})(),i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-amber-400 font-bold",children:" "}),i.jsxs("span",{className:"px-2 py-0.5 bg-amber-500/20 text-amber-400 text-xs rounded-full",children:[H.length,""]})]}),i.jsx("button",{onClick:At,disabled:Y,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-bold rounded-lg transition-all disabled:opacity-50 flex items-center gap-2",children:Y?i.jsx(i.Fragment,{children:" ..."}):i.jsx(i.Fragment,{children:" "})})]}),i.jsx("div",{className:"space-y-3",children:H.map((C,D)=>{var Rt,Ye,jt,Et,Qt;const q=C.openTime?Date.now()-C.openTime:0,ce=Math.floor(q/6e4),pe=Math.floor(ce/60),Ie=ce%60,Ue=C.entryPrice>0?(C.markPrice-C.entryPrice)/C.entryPrice*100*(C.side==="LONG"?1:-1):0,De=30*60*1e3,Be=Math.max(0,De-q),Re=Math.floor(Be/6e4),it=Math.floor(Be%6e4/1e3),Ke=Re<=5&&Re>0,It=Re<=2&&Re>0,Bt=Be<=0,Ct=Rn(),Ce=C.side==="LONG"?C.entryPrice*(1+Ct.takeProfitPercent/100):C.entryPrice*(1-Ct.takeProfitPercent/100),Nt=C.side==="LONG"?C.entryPrice*(1-Ct.stopLossPercent/100):C.entryPrice*(1+Ct.stopLossPercent/100);return i.jsxs("div",{className:`p-3 rounded-lg bg-slate-900/50 border ${It?"border-red-500 animate-pulse":Ke?"border-amber-500":Bt?"border-purple-500":"border-slate-700"}`,children:[i.jsxs("div",{className:`flex items-center justify-between mb-2 pb-2 border-b border-slate-700/50 ${It?"text-red-400":Ke?"text-amber-400":Bt?"text-purple-400":"text-slate-400"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx("span",{children:" :"}),i.jsx("span",{className:`font-mono font-bold ${It?"text-red-400 text-lg":Ke?"text-amber-400":Bt?"text-purple-400":"text-white"}`,children:Bt?"":`${Re}:${it.toString().padStart(2,"0")}`})]}),Bt&&i.jsx("span",{className:"px-2 py-0.5 bg-purple-500/30 text-purple-400 text-xs rounded font-bold",children:" "}),It&&!Bt&&i.jsx("span",{className:"px-2 py-0.5 bg-red-500/30 text-red-400 text-xs rounded font-bold animate-pulse",children:" "}),Ke&&!It&&i.jsx("span",{className:"px-2 py-0.5 bg-amber-500/30 text-amber-400 text-xs rounded",children:" 5"})]}),i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${C.side==="LONG"?"bg-emerald-500/30 text-emerald-400":"bg-red-500/30 text-red-400"}`,children:C.side}),i.jsx("span",{className:"text-white font-medium",children:C.symbol}),i.jsxs("span",{className:"text-slate-400 text-xs",children:["",((Rt=C.leverage)==null?void 0:Rt.toFixed(1))||"-"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:`text-lg font-bold ${C.unrealisedPnl>=0?"text-emerald-400":"text-red-400"}`,children:[C.unrealisedPnl>=0?"+":"",(Ye=C.unrealisedPnl)==null?void 0:Ye.toFixed(2)," USDT"]}),i.jsxs("div",{className:`text-xs ${Ue>=0?"text-emerald-400":"text-red-400"}`,children:["ROE: ",Ue>=0?"+":"",Ue.toFixed(2),"%"]})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs mb-2 p-2 bg-slate-800/50 rounded",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("span",{className:"text-red-400 text-[10px]",children:" SL"}),i.jsx("div",{className:"text-red-400 font-mono",children:Nt.toFixed(2)})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("span",{className:"text-blue-400 text-[10px]",children:" Entry"}),i.jsx("div",{className:"text-white font-mono",children:(jt=C.entryPrice)==null?void 0:jt.toFixed(2)})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("span",{className:"text-emerald-400 text-[10px]",children:" TP"}),i.jsx("div",{className:"text-emerald-400 font-mono",children:Ce.toFixed(2)})]})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-500",children:""}),i.jsx("div",{className:"text-white font-mono",children:C.qty})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-500",children:""}),i.jsx("div",{className:"text-white font-mono",children:(Et=C.entryPrice)==null?void 0:Et.toFixed(2)})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-500",children:""}),i.jsx("div",{className:"text-[#D4AF37] font-mono",children:(Qt=C.markPrice)==null?void 0:Qt.toFixed(2)})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-500",children:""}),i.jsxs("div",{className:`font-mono ${Bt?"text-purple-400":"text-slate-300"}`,children:[pe>0?`${pe}h `:"",Ie,"m"]})]})]}),i.jsxs("div",{className:"mt-2",children:[i.jsxs("div",{className:"h-3 bg-slate-700 rounded-full overflow-hidden relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 bg-red-500/30",style:{width:"30%"}}),i.jsx("div",{className:"absolute inset-y-0 right-0 bg-emerald-500/30",style:{width:"70%"}}),(()=>{const St=Ce-Nt,mt=(C.markPrice-Nt)/St*100,Pt=Math.max(0,Math.min(100,mt));return i.jsx("div",{className:`absolute inset-y-0 w-1 transition-all ${Ue>=0?"bg-emerald-400":"bg-red-400"}`,style:{left:`${Pt}%`}})})(),i.jsx("div",{className:"absolute inset-y-0 left-[30%] w-0.5 bg-blue-400"})]}),i.jsxs("div",{className:"flex justify-between text-[10px] text-slate-500 mt-1",children:[i.jsxs("span",{className:"text-red-400",children:["SL ",Ct.stopLossPercent,"%"]}),i.jsx("span",{className:"text-blue-400",children:"Entry"}),i.jsxs("span",{className:"text-emerald-400",children:["TP ",Ct.takeProfitPercent,"%"]})]})]})]},D)})})]}),Ve.trades>0&&i.jsx("div",{className:`${bs} rounded-xl p-4 border border-slate-700/50 mb-6`,children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-slate-400 text-sm",children:" "}),i.jsx("span",{className:"text-xs text-slate-500",children:Ve.date})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-slate-500",children:""}),i.jsx("div",{className:"text-white font-bold",children:Ve.trades})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-slate-500",children:""}),i.jsxs("div",{className:`font-bold ${Ve.wins/Ve.trades>=.5?"text-emerald-400":"text-red-400"}`,children:[(Ve.wins/Ve.trades*100).toFixed(0),"%"]})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-slate-500",children:""}),i.jsxs("div",{className:`font-bold ${Ve.pnl>=0?"text-emerald-400":"text-red-400"}`,children:[Ve.pnl>=0?"+":"",Ve.pnl.toFixed(2)," USDT"]})]})]})]})}),c?i.jsxs("div",{className:"text-center py-16 md:py-24",children:[i.jsxs("div",{className:`text-lg opacity-50 tracking-[0.5em] mb-4 ${sr}`,children:[e,We[e]&&i.jsxs("span",{className:`ml-2 text-sm ${We[e].type==="LONG"?"text-emerald-400":"text-red-400"}`,children:["[",We[e].type,"]"]})]}),i.jsx("div",{className:"text-6xl md:text-8xl font-extralight text-[#D4AF37] mb-4",children:Er((ae=(T=n[e])==null?void 0:T.slice(-1)[0])==null?void 0:ae.close,e)}),i.jsx("div",{className:`text-3xl md:text-4xl tracking-widest ${hi((xe=a[e])==null?void 0:xe.signalType).split(" ")[0]}`,children:((Qe=a[e])==null?void 0:Qe.signal)||" WAIT"}),i.jsx("div",{className:`text-sm mt-2 opacity-50 ${sr}`,children:((tt=a[e])==null?void 0:tt.reason)||"..."}),((ct=a[e])==null?void 0:ct.pnlPercent)!=null&&i.jsxs("div",{className:`text-2xl mt-4 ${(((Mt=a[e])==null?void 0:Mt.pnlPercent)||0)>=0?"text-emerald-400":"text-red-400"}`,children:[(((Vt=a[e])==null?void 0:Vt.pnlPercent)||0)>=0?"+":"",(((or=a[e])==null?void 0:or.pnlPercent)||0).toFixed(2),"%"]}),i.jsx("div",{className:"flex justify-center gap-2 mt-8",children:t.map(C=>i.jsxs("button",{onClick:()=>r(C),className:`px-3 py-1 rounded text-xs transition-all ${e===C?"bg-[#D4AF37] text-slate-900":"bg-slate-700/50 text-slate-400 hover:bg-slate-700"}`,children:[C.split("/")[0],We[C]&&i.jsx("span",{className:"ml-1",children:""})]},C))})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",children:t.map((C,D)=>{var Ce,Nt,Rt,Ye;const q=n[C],ce=a[C],pe=We[C],Ie=zr[C],Ue=(Ce=q==null?void 0:q.slice(-1)[0])==null?void 0:Ce.close,De=(Nt=q==null?void 0:q.slice(-2)[0])==null?void 0:Nt.close,Be=Ue&&De?(Ue-De)/De*100:0,Re=["ENTRY_LONG","ENTRY_SHORT","TAKE_PROFIT","STOP_LOSS"].includes(ce==null?void 0:ce.signalType),it=Ie&&((Rt=Ie.debateResult)==null?void 0:Rt.finalVerdict)==="GO",Ke=(q==null?void 0:q.slice(-20))||[],It=Ke.length>0?Math.min(...Ke.map(jt=>jt.close)):0,Ct=(Ke.length>0?Math.max(...Ke.map(jt=>jt.close)):1)-It||1;return i.jsxs("div",{onClick:()=>r(C),className:`${bs} rounded-xl p-4 border cursor-pointer transition-all hover:scale-[1.02] ${e===C?"border-[#D4AF37]":"border-slate-700/50"} ${it?"ring-2 ring-emerald-500 animate-pulse":Re?"ring-2 ring-[#D4AF37]/50":""}`,children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsxs("span",{className:`text-xs ${sr} opacity-60`,children:[C,i.jsxs("span",{className:"ml-1 text-slate-500 text-[10px]",children:["[",D+1,"]"]}),it&&i.jsx("span",{className:"ml-1 text-emerald-400 text-[10px]",children:""})]}),pe&&i.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${pe.type==="LONG"?"bg-emerald-500/30 text-emerald-400":"bg-red-500/30 text-red-400"}`,children:pe.type})]}),i.jsx("div",{className:"text-xl md:text-2xl font-light text-[#D4AF37]",children:Er(Ue,C)}),i.jsxs("div",{className:`text-xs ${Be>=0?"text-emerald-400":"text-red-400"}`,children:[Be>=0?"+":"",Be.toFixed(2),"%"]}),Ke.length>1&&i.jsx("div",{className:"h-8 mt-2 relative",children:i.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 30",preserveAspectRatio:"none",children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:`sparkGrad-${C.replace("/","")}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:Be>=0?"#10b981":"#ef4444",stopOpacity:"0.3"}),i.jsx("stop",{offset:"100%",stopColor:Be>=0?"#10b981":"#ef4444",stopOpacity:"0"})]})}),i.jsx("path",{d:`M0,30 ${Ke.map((jt,Et)=>{const Qt=Et/(Ke.length-1)*100,St=30-(jt.close-It)/Ct*28;return`L${Qt},${St}`}).join(" ")} L100,30 Z`,fill:`url(#sparkGrad-${C.replace("/","")})`}),i.jsx("path",{d:Ke.map((jt,Et)=>{const Qt=Et/(Ke.length-1)*100,St=30-(jt.close-It)/Ct*28;return`${Et===0?"M":"L"}${Qt},${St}`}).join(" "),fill:"none",stroke:Be>=0?"#10b981":"#ef4444",strokeWidth:"1.5"}),i.jsx("circle",{cx:"100",cy:30-(((Ye=Ke[Ke.length-1])==null?void 0:Ye.close)-It)/Ct*28,r:"2",fill:Be>=0?"#10b981":"#ef4444"})]})}),it?i.jsxs("div",{className:"mt-2 text-center py-1.5 rounded text-xs font-bold border-2 border-emerald-500 bg-emerald-500/20 text-emerald-400",children:[" ",ce==null?void 0:ce.signal," "]}):i.jsx("div",{className:`mt-2 text-center py-1 rounded text-xs font-medium border ${hi(ce==null?void 0:ce.signalType)}`,children:(ce==null?void 0:ce.signal)||" WAIT"})]},C)})}),i.jsx("div",{className:`${bs} rounded-xl p-3 border border-slate-700/50 mb-4`,children:i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:me,onChange:C=>ke(C.target.checked),className:"w-4 h-4 accent-amber-500"}),i.jsx("span",{className:`text-sm font-medium ${me?"text-amber-400":"text-slate-400"}`,children:" "})]}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer ml-3",children:[i.jsx("input",{type:"checkbox",checked:oa,onChange:C=>Qi(C.target.checked),className:"w-4 h-4 accent-emerald-500"}),i.jsx("span",{className:`text-sm font-medium ${oa?"text-emerald-400":"text-slate-400"}`,children:" "})]}),oa&&i.jsx("span",{className:"px-2 py-0.5 bg-emerald-500/20 text-emerald-400 text-xs rounded",children:"5"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>ut(C=>!C),className:`px-3 py-1.5 text-xs rounded-lg transition-all ${nt?"bg-purple-500 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"  [K]"}),i.jsx("button",{onClick:()=>d(!0),className:"px-3 py-1.5 bg-slate-700 text-slate-300 hover:bg-slate-600 text-xs rounded-lg transition-all",children:" ZEN [Esc]"})]}),i.jsxs("div",{className:"hidden md:flex items-center gap-2 text-xs text-slate-500",children:[i.jsx("span",{className:"px-1.5 py-0.5 bg-slate-800 rounded",children:"L"}),"=Long",i.jsx("span",{className:"px-1.5 py-0.5 bg-slate-800 rounded",children:"S"}),"=Short",i.jsx("span",{className:"px-1.5 py-0.5 bg-slate-800 rounded",children:"C"}),"=Close",i.jsx("span",{className:"px-1.5 py-0.5 bg-slate-800 rounded",children:"1-4"}),"="]})]})}),nt&&i.jsxs("div",{className:`${bs} rounded-xl p-4 border border-purple-500/50 mb-4`,children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsx("span",{className:"text-purple-400 font-bold",children:" "}),i.jsx("button",{onClick:()=>ut(!1),className:"text-slate-400 hover:text-white",children:""})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 mb-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:""}),i.jsx("input",{type:"number",value:he,onChange:C=>Ze(C.target.value),placeholder:Er((Sr=(hr=n[e])==null?void 0:hr.slice(-1)[0])==null?void 0:Sr.close,e),className:"w-full px-2 py-1.5 bg-slate-800 border border-slate-600 rounded text-sm text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:""}),i.jsx("input",{type:"number",value:F,onChange:C=>se(C.target.value),placeholder:"0",className:"w-full px-2 py-1.5 bg-slate-800 border border-slate-600 rounded text-sm text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:" (USDT)"}),i.jsx("input",{type:"number",value:qe,onChange:C=>X(C.target.value),placeholder:"100",className:"w-full px-2 py-1.5 bg-slate-800 border border-slate-600 rounded text-sm text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:""}),i.jsx("select",{value:ne,onChange:C=>je(C.target.value),className:"w-full px-2 py-1.5 bg-slate-800 border border-slate-600 rounded text-sm text-white",children:["1","2","3","5","10","20","25","50","75","100","125"].map(C=>i.jsxs("option",{value:C,children:[C,"x"]},C))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:""}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{onClick:()=>{var q,ce;const C=parseFloat(he)||((ce=(q=n[e])==null?void 0:q.slice(-1)[0])==null?void 0:ce.close)||0,D=Rn();se((C*(1+D.takeProfitPercent/100)).toFixed(2))},className:"flex-1 px-2 py-1.5 bg-emerald-600 hover:bg-emerald-700 text-white text-xs rounded",children:"Long TP"}),i.jsx("button",{onClick:()=>{var q,ce;const C=parseFloat(he)||((ce=(q=n[e])==null?void 0:q.slice(-1)[0])==null?void 0:ce.close)||0,D=Rn();se((C*(1-D.takeProfitPercent/100)).toFixed(2))},className:"flex-1 px-2 py-1.5 bg-red-600 hover:bg-red-700 text-white text-xs rounded",children:"Short TP"})]})]})]}),he&&F&&qe&&(()=>{const C=parseFloat(he),D=parseFloat(F),q=parseFloat(qe),ce=parseInt(ne),pe=(D-C)/C*100,Ie=pe/100*q*ce,Ue=pe*ce;return i.jsxs("div",{className:"grid grid-cols-3 gap-3 p-3 bg-slate-900/50 rounded-lg",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-slate-500",children:""}),i.jsxs("div",{className:`text-lg font-bold ${pe>=0?"text-emerald-400":"text-red-400"}`,children:[pe>=0?"+":"",pe.toFixed(3),"%"]})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-slate-500",children:" (USDT)"}),i.jsxs("div",{className:`text-lg font-bold ${Ie>=0?"text-emerald-400":"text-red-400"}`,children:[Ie>=0?"+":"",Ie.toFixed(2)]})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-xs text-slate-500",children:["ROE (",ce,"x)"]}),i.jsxs("div",{className:`text-lg font-bold ${Ue>=0?"text-emerald-400":"text-red-400"}`,children:[Ue>=0?"+":"",Ue.toFixed(2),"%"]})]})]})})()]}),zr[e]&&((en=zr[e].debateResult)==null?void 0:en.finalVerdict)==="GO"&&i.jsxs("div",{className:"mb-4 p-4 rounded-xl bg-gradient-to-r from-emerald-900/30 to-emerald-800/20 border-2 border-emerald-500 animate-pulse",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsx("span",{className:"text-emerald-400 font-bold text-lg",children:""}),i.jsx("span",{className:"px-2 py-0.5 bg-emerald-500/30 text-emerald-300 text-xs rounded",children:"5"})]}),i.jsx("div",{className:"text-xs text-slate-400",children:new Date(zr[e].confirmedAt).toLocaleTimeString("ja-JP")})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-3",children:[i.jsxs("div",{className:"p-2 bg-slate-800/50 rounded-lg",children:[i.jsx("div",{className:"text-xs text-slate-400",children:""}),i.jsxs("div",{className:`text-lg font-bold ${zr[e].debateResult.avgConfidence>=70?"text-emerald-400":zr[e].debateResult.avgConfidence>=50?"text-amber-400":"text-red-400"}`,children:[zr[e].debateResult.avgConfidence.toFixed(0),"%"]})]}),i.jsxs("div",{className:"p-2 bg-slate-800/50 rounded-lg",children:[i.jsx("div",{className:"text-xs text-slate-400",children:"TP"}),i.jsx("div",{className:"text-lg font-bold text-emerald-400",children:Er(zr[e].debateResult.finalTP,e)})]}),i.jsxs("div",{className:"p-2 bg-slate-800/50 rounded-lg",children:[i.jsx("div",{className:"text-xs text-slate-400",children:"SL"}),i.jsx("div",{className:"text-lg font-bold text-red-400",children:Er(zr[e].debateResult.finalSL,e)})]}),i.jsxs("div",{className:"p-2 bg-slate-800/50 rounded-lg",children:[i.jsx("div",{className:"text-xs text-slate-400",children:"RR"}),i.jsxs("div",{className:`text-lg font-bold ${zr[e].debateResult.finalRR>=1.5?"text-emerald-400":"text-amber-400"}`,children:["1:",zr[e].debateResult.finalRR.toFixed(2)]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx("span",{className:"text-slate-400",children:":"}),i.jsxs("div",{className:"flex-1 h-2 rounded-full overflow-hidden bg-slate-700 flex",children:[i.jsx("div",{className:"bg-emerald-500",style:{width:`${zr[e].debateResult.votes.GO/5.4*100}%`}}),i.jsx("div",{className:"bg-amber-500",style:{width:`${zr[e].debateResult.votes.NEUTRAL/5.4*100}%`}}),i.jsx("div",{className:"bg-red-500",style:{width:`${zr[e].debateResult.votes.WAIT/5.4*100}%`}})]}),i.jsxs("span",{className:"text-emerald-400",children:["GO:",zr[e].debateResult.votes.GO.toFixed(1)]}),i.jsxs("span",{className:"text-red-400",children:["WAIT:",zr[e].debateResult.votes.WAIT.toFixed(1)]})]})]}),i.jsxs("div",{className:`${bs} rounded-xl p-4 md:p-6 border border-slate-700/50`,children:[i.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:`text-sm ${sr} opacity-60 flex items-center gap-2`,children:["Focus",((Hr=(mn=zr[e])==null?void 0:mn.debateResult)==null?void 0:Hr.finalVerdict)==="GO"&&i.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-emerald-500/30 text-emerald-400",children:" "}),We[e]&&i.jsxs("span",{className:`text-xs px-2 py-0.5 rounded ${We[e].type==="LONG"?"bg-emerald-500/30 text-emerald-400":"bg-red-500/30 text-red-400"}`,children:[We[e].type," @ ",Er(We[e].entryPrice,e)]})]}),i.jsxs("div",{className:"text-3xl md:text-4xl font-light text-[#D4AF37]",children:[e," - ",Er((xn=(Bn=n[e])==null?void 0:Bn.slice(-1)[0])==null?void 0:xn.close,e)]})]}),i.jsxs("div",{className:`text-center px-6 py-3 rounded-lg border-2 ${((Oi=(Hn=zr[e])==null?void 0:Hn.debateResult)==null?void 0:Oi.finalVerdict)==="GO"?"border-emerald-500 bg-emerald-500/20":hi((ri=a[e])==null?void 0:ri.signalType)}`,children:[i.jsx("div",{className:"text-2xl font-bold",children:((so=(Di=zr[e])==null?void 0:Di.debateResult)==null?void 0:so.finalVerdict)==="GO"?` ${(BA=a[e])==null?void 0:BA.signal}`:((ca=a[e])==null?void 0:ca.signal)||" WAIT"}),i.jsx("div",{className:"text-xs opacity-70",children:((Ga=(Ka=zr[e])==null?void 0:Ka.debateResult)==null?void 0:Ga.finalVerdict)==="GO"?"5":((ua=a[e])==null?void 0:ua.reason)||"..."})]})]}),((Mn=a[e])==null?void 0:Mn.action)&&i.jsxs("div",{className:"mb-4 p-4 rounded-lg bg-slate-900/50 border border-slate-700",children:[i.jsxs("div",{className:`text-lg font-bold mb-4 ${((Va=a[e])==null?void 0:Va.signalType)==="ENTRY_LONG"?"text-emerald-400":((za=a[e])==null?void 0:za.signalType)==="ENTRY_SHORT"?"text-red-400":((io=a[e])==null?void 0:io.signalType)==="TAKE_PROFIT"?"text-yellow-400":"text-red-500"}`,children:[((ao=a[e])==null?void 0:ao.action)==="OPEN_LONG"&&" LONG",((ns=a[e])==null?void 0:ns.action)==="OPEN_SHORT"&&" SHORT",((Ri=a[e])==null?void 0:Ri.action)==="CLOSE_LONG"&&" LONG/",((CA=a[e])==null?void 0:CA.action)==="CLOSE_SHORT"&&" SHORT/"]}),((xl=a[e])==null?void 0:xl.suggestedTP)&&(((Ds=a[e])==null?void 0:Ds.action)==="OPEN_LONG"||((qa=a[e])==null?void 0:qa.action)==="OPEN_SHORT")&&i.jsxs("div",{className:"mb-4 grid grid-cols-3 gap-3",children:[i.jsxs("div",{className:"p-3 rounded-lg bg-slate-800 border-2 border-blue-500/50",children:[i.jsx("div",{className:"text-xs text-blue-400 mb-1 font-medium",children:" "}),i.jsx("div",{className:"text-lg font-bold text-white font-mono",children:Er((Ao=a[e])==null?void 0:Ao.lastPrice,e)}),i.jsx("div",{className:"text-xs text-slate-400 mt-1",children:""})]}),i.jsxs("div",{className:"p-3 rounded-lg bg-emerald-900/30 border-2 border-emerald-500",children:[i.jsx("div",{className:"text-xs text-emerald-400 mb-1 font-medium",children:"  (TP)"}),i.jsx("div",{className:"text-lg font-bold text-emerald-400 font-mono",children:Er((oo=a[e])==null?void 0:oo.suggestedTP,e)}),i.jsxs("div",{className:"text-xs text-emerald-300 mt-1",children:["+",Rn().takeProfitPercent,"% (",((da=a[e])==null?void 0:da.action)==="OPEN_LONG"?"":"",")"]})]}),i.jsxs("div",{className:"p-3 rounded-lg bg-red-900/30 border-2 border-red-500",children:[i.jsx("div",{className:"text-xs text-red-400 mb-1 font-medium",children:"  (SL)"}),i.jsx("div",{className:"text-lg font-bold text-red-400 font-mono",children:Er((Wa=a[e])==null?void 0:Wa.suggestedSL,e)}),i.jsxs("div",{className:"text-xs text-red-300 mt-1",children:["-",Rn().stopLossPercent,"% (",((Bs=a[e])==null?void 0:Bs.action)==="OPEN_LONG"?"":"",")"]})]})]}),((Cs=a[e])==null?void 0:Cs.suggestedTP)&&(((ha=a[e])==null?void 0:ha.action)==="OPEN_LONG"||((Hi=a[e])==null?void 0:Hi.action)==="OPEN_SHORT")&&(()=>{const C=Rn();return i.jsxs("div",{className:"mb-4 p-3 rounded-lg bg-slate-800/50 border border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-slate-400",children:" (RR)"}),i.jsxs("span",{className:"text-lg font-bold text-amber-400",children:["1 : ",(C.takeProfitPercent/C.stopLossPercent).toFixed(2)]})]}),i.jsxs("div",{className:"mt-2 h-2 bg-slate-700 rounded-full overflow-hidden flex",children:[i.jsx("div",{className:"bg-red-500 h-full",style:{width:`${C.stopLossPercent/(C.takeProfitPercent+C.stopLossPercent)*100}%`}}),i.jsx("div",{className:"bg-emerald-500 h-full",style:{width:`${C.takeProfitPercent/(C.takeProfitPercent+C.stopLossPercent)*100}%`}})]}),i.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[i.jsxs("span",{className:"text-red-400",children:[" ",C.stopLossPercent,"%"]}),i.jsxs("span",{className:"text-emerald-400",children:[" ",C.takeProfitPercent,"%"]})]}),i.jsxs("div",{className:"text-center text-xs text-slate-500 mt-2",children:[" ",C.timeZoneName," | Max ",C.maxHoldingMinutes,""]})]})})(),i.jsx("div",{className:"flex flex-wrap items-center justify-between gap-3",children:i.jsxs("div",{className:"flex flex-col gap-3",children:[(((fa=a[e])==null?void 0:fa.action)==="OPEN_LONG"||((lo=a[e])==null?void 0:lo.action)==="OPEN_SHORT")&&i.jsx("div",{className:"w-full p-4 bg-slate-800/70 rounded-lg border border-slate-700",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"text-sm font-medium text-slate-300",children:" "}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("span",{className:"text-lg font-bold text-emerald-400",children:[de,"%"]})})]}),i.jsx("input",{type:"range",min:"1",max:"100",value:de,onChange:C=>ge(C.target.value),className:"w-full h-3 bg-slate-700 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #10b981 0%, #10b981 ${de}%, #334155 ${de}%, #334155 100%)`}}),i.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mt-2",children:[i.jsx("span",{children:"1%"}),i.jsx("span",{children:"25%"}),i.jsx("span",{children:"50%"}),i.jsx("span",{children:"75%"}),i.jsx("span",{children:"100%"})]}),i.jsx("div",{className:"flex gap-1 mt-3",children:["10","25","50","75","100"].map(C=>i.jsxs("button",{onClick:()=>ge(C),className:`flex-1 py-1.5 text-xs rounded transition-all font-medium ${de===C?"bg-emerald-500 text-white font-bold":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[C,"%"]},C))})]}),L&&te&&i.jsxs("div",{className:"p-3 bg-slate-900/50 rounded-lg space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-400",children:" "}),i.jsxs("span",{className:"text-white font-mono",children:[(NA=te.availableBalance)==null?void 0:NA.toFixed(2)," USDT"]})]}),(()=>{const D=(te.availableBalance||0)*de/100,q=D*parseInt(ve),ce=parseInt(de),pe=ce*parseInt(ve)/100,Ie=ce>=50,Ue=pe>=.5;return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-slate-700",children:[i.jsxs("span",{className:"text-slate-400",children:[" (",de,"%)"]}),i.jsxs("span",{className:"text-emerald-400 font-mono font-bold",children:[D.toFixed(2)," USDT"]})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-400",children:" "}),i.jsxs("span",{className:"text-amber-400 font-mono font-bold",children:[q.toFixed(2)," USDT"]})]}),(Ie||Ue)&&i.jsxs("div",{className:`mt-2 p-2 rounded-lg border ${Ue?"bg-red-900/30 border-red-500/50":"bg-amber-900/30 border-amber-500/50"}`,children:[i.jsx("div",{className:`text-xs font-bold flex items-center gap-1 ${Ue?"text-red-400":"text-amber-400"}`,children:Ue?" ":" "}),i.jsxs("div",{className:"text-xs text-slate-300 mt-1",children:[" ",i.jsxs("span",{className:`font-bold ${Ue?"text-red-400":"text-amber-400"}`,children:[ce,"%"]})," ",parseInt(ve)>1&&i.jsxs("span",{className:"text-slate-400",children:["",ve,"x ",(pe*100).toFixed(0),"%"]})]}),Ue&&i.jsx("div",{className:"text-[10px] text-red-300 mt-1",children:" "})]})]})})()]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"text-sm font-medium text-slate-300",children:" "}),i.jsxs("span",{className:`text-lg font-bold ${parseInt(ve)>=100?"text-red-400":parseInt(ve)>=50?"text-orange-400":"text-amber-400"}`,children:[ve,"x"]})]}),i.jsx("div",{className:"flex gap-1 mb-1",children:["1","2","3","5","10","20"].map(C=>i.jsxs("button",{onClick:()=>I(C),className:`flex-1 py-2 text-xs rounded-lg transition-all font-medium ${ve===C?"bg-amber-500 text-slate-900 font-bold shadow-lg shadow-amber-500/30":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[C,"x"]},C))}),i.jsx("div",{className:"flex gap-1",children:["25","50","75","100","125"].map(C=>i.jsxs("button",{onClick:()=>I(C),className:`flex-1 py-2 text-xs rounded-lg transition-all font-medium ${ve===C?parseInt(C)>=100?"bg-red-500 text-white font-bold shadow-lg shadow-red-500/30":"bg-orange-500 text-slate-900 font-bold shadow-lg shadow-orange-500/30":parseInt(C)>=100?"bg-red-900/50 text-red-300 hover:bg-red-800/50 border border-red-500/30":"bg-orange-900/50 text-orange-300 hover:bg-orange-800/50 border border-orange-500/30"}`,children:[C,"x"]},C))}),parseInt(ve)>=50&&i.jsxs("div",{className:`mt-2 p-2 rounded text-xs ${parseInt(ve)>=100?"bg-red-900/30 border border-red-500/50 text-red-300":"bg-orange-900/30 border border-orange-500/50 text-orange-300"}`,children:[parseInt(ve)>=100?"":"",parseInt(ve),"",parseInt(ve)>=100?"":"","",parseInt(ve)>=100&&" "]})]})]})}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[(((un=a[e])==null?void 0:un.action)==="OPEN_LONG"||((vl=a[e])==null?void 0:vl.action)==="OPEN_SHORT")&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>bu(e),className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white rounded-lg text-sm font-medium transition-all",children:" AI"}),i.jsx("button",{onClick:()=>{var C,D;return al(e,((C=a[e])==null?void 0:C.action)==="OPEN_LONG"?"LONG":"SHORT",(D=a[e])==null?void 0:D.lastPrice)},className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-lg text-sm font-medium transition-all",children:" "}),L&&i.jsx("button",{onClick:()=>{var C;return yt(e,((C=a[e])==null?void 0:C.action)==="OPEN_LONG"?"buy":"sell",de,ve)},disabled:fe,className:`flex-1 min-w-[150px] py-3 rounded-lg text-sm font-bold transition-all ${((fi=a[e])==null?void 0:fi.action)==="OPEN_LONG"?"bg-gradient-to-r from-emerald-600 to-emerald-500 hover:from-emerald-500 hover:to-emerald-400 text-white shadow-lg shadow-emerald-500/30":"bg-gradient-to-r from-red-600 to-red-500 hover:from-red-500 hover:to-red-400 text-white shadow-lg shadow-red-500/30"} ${fe?"opacity-50 cursor-not-allowed":""}`,children:fe?" ...":((pi=a[e])==null?void 0:pi.action)==="OPEN_LONG"?" LONG ":" SHORT "})]}),(((co=a[e])==null?void 0:co.action)==="CLOSE_LONG"||((uo=a[e])==null?void 0:uo.action)==="CLOSE_SHORT")&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>di(e),className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-lg text-sm font-medium transition-all",children:" "}),L&&i.jsx("button",{onClick:()=>kt(e),disabled:fe,className:`px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-white rounded-lg text-sm font-medium transition-all ${fe?"opacity-50 cursor-not-allowed":""}`,children:fe?"":" "})]})]})]})})]}),We[e]&&!((ho=a[e])!=null&&ho.action)&&(()=>{var Ke,It;const C=We[e],D=C.entryPrice,q=((It=(Ke=n[e])==null?void 0:Ke.slice(-1)[0])==null?void 0:It.close)||D,ce=C.type==="LONG",pe=yr.takeProfitPercent,Ie=yr.stopLossPercent,Ue=ce?D*(1+pe/100):D*(1-pe/100),De=ce?D*(1-Ie/100):D*(1+Ie/100),Be=ce?(q-D)/D*100:(D-q)/D*100,Re=ce?(q-D)/(Ue-D)*100:(D-q)/(D-Ue)*100,it=ce?(D-q)/(D-De)*100:(q-D)/(De-D)*100;return i.jsxs("div",{className:"mb-4 p-4 rounded-lg bg-slate-900/50 border border-slate-700",children:[i.jsxs("div",{className:`text-lg font-bold mb-3 ${ce?"text-emerald-400":"text-red-400"}`,children:[ce?"":""," ",C.type," "]}),i.jsxs("div",{className:"mb-4 grid grid-cols-4 gap-2",children:[i.jsxs("div",{className:`p-3 rounded-lg border-2 ${it>50?"bg-red-900/50 border-red-400 animate-pulse":"bg-red-900/30 border-red-500/50"}`,children:[i.jsx("div",{className:"text-xs text-red-400 mb-1 font-medium",children:" "}),i.jsx("div",{className:"text-base font-bold text-red-400 font-mono",children:Er(De,e)}),i.jsxs("div",{className:"text-xs text-red-300 mt-1",children:["-",Ie,"%"]})]}),i.jsxs("div",{className:"p-3 rounded-lg bg-slate-800 border-2 border-blue-500/50",children:[i.jsx("div",{className:"text-xs text-blue-400 mb-1 font-medium",children:" Entry"}),i.jsx("div",{className:"text-base font-bold text-white font-mono",children:Er(D,e)}),i.jsx("div",{className:"text-xs text-slate-400 mt-1",children:""})]}),i.jsxs("div",{className:`p-3 rounded-lg border-2 ${Be>=0?"bg-emerald-900/30 border-emerald-500/50":"bg-red-900/30 border-red-500/50"}`,children:[i.jsx("div",{className:"text-xs text-slate-400 mb-1 font-medium",children:" "}),i.jsx("div",{className:`text-base font-bold font-mono ${Be>=0?"text-emerald-400":"text-red-400"}`,children:Er(q,e)}),i.jsxs("div",{className:`text-xs mt-1 ${Be>=0?"text-emerald-300":"text-red-300"}`,children:[Be>=0?"+":"",Be.toFixed(2),"%"]})]}),i.jsxs("div",{className:`p-3 rounded-lg border-2 ${Re>80?"bg-emerald-900/50 border-emerald-400 animate-pulse":"bg-emerald-900/30 border-emerald-500/50"}`,children:[i.jsx("div",{className:"text-xs text-emerald-400 mb-1 font-medium",children:" "}),i.jsx("div",{className:"text-base font-bold text-emerald-400 font-mono",children:Er(Ue,e)}),i.jsxs("div",{className:"text-xs text-emerald-300 mt-1",children:["+",pe,"%"]})]})]}),i.jsxs("div",{className:"mb-4 p-3 rounded-lg bg-slate-800/50",children:[i.jsxs("div",{className:"flex justify-between text-xs mb-2",children:[i.jsxs("span",{className:"text-red-400",children:["SL ",Er(De,e)]}),i.jsxs("span",{className:`font-bold ${Be>=0?"text-emerald-400":"text-red-400"}`,children:[": ",Be>=0?"+":"",Be.toFixed(2),"%"]}),i.jsxs("span",{className:"text-emerald-400",children:["TP ",Er(Ue,e)]})]}),i.jsxs("div",{className:"h-3 bg-slate-700 rounded-full overflow-hidden relative",children:[i.jsx("div",{className:"absolute left-0 top-0 h-full bg-red-500/30",style:{width:`${Ie/(pe+Ie)*100}%`}}),i.jsx("div",{className:"absolute right-0 top-0 h-full bg-emerald-500/30",style:{width:`${pe/(pe+Ie)*100}%`}}),i.jsx("div",{className:"absolute top-0 h-full w-0.5 bg-blue-400",style:{left:`${Ie/(pe+Ie)*100}%`}}),i.jsx("div",{className:`absolute top-0 h-full w-1 ${Be>=0?"bg-emerald-400":"bg-red-400"} shadow-lg`,style:{left:`${Math.max(0,Math.min(100,(Ie+Be)/(pe+Ie)*100))}%`,transition:"left 0.3s ease"}})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>di(e),className:"px-3 py-2 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded text-sm transition-all",children:" "}),L&&i.jsx("button",{onClick:()=>kt(e),disabled:fe,className:`flex-1 px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-white rounded text-sm font-bold transition-all ${fe?"opacity-50":""}`,children:fe?" ...":" "})]})]})})(),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-4",children:[i.jsxs("div",{className:`${w==="midnight"?"bg-slate-900/50":"bg-slate-100"} rounded-lg p-3`,children:[i.jsx("div",{className:`text-xs ${sr} opacity-50`,children:"RSI (14)"}),i.jsx("div",{className:`text-xl font-medium ${(((fo=a[e])==null?void 0:fo.rsi)||50)<30?"text-emerald-400":(((pa=a[e])==null?void 0:pa.rsi)||50)>70?"text-red-400":"text-[#D4AF37]"}`,children:((ma=(ga=a[e])==null?void 0:ga.rsi)==null?void 0:ma.toFixed(1))||"-"})]}),i.jsxs("div",{className:`${w==="midnight"?"bg-slate-900/50":"bg-slate-100"} rounded-lg p-3`,children:[i.jsx("div",{className:`text-xs ${sr} opacity-50`,children:"MACD"}),i.jsx("div",{className:`text-xl font-medium ${(((xa=(Ja=a[e])==null?void 0:Ja.macd)==null?void 0:xa.histogram)||0)>0?"text-emerald-400":"text-red-400"}`,children:((gi=(Rs=(Ya=a[e])==null?void 0:Ya.macd)==null?void 0:Rs.histogram)==null?void 0:gi.toFixed(2))||"-"})]}),i.jsxs("div",{className:`${w==="midnight"?"bg-slate-900/50":"bg-slate-100"} rounded-lg p-3`,children:[i.jsx("div",{className:`text-xs ${sr} opacity-50`,children:"BB Upper"}),i.jsx("div",{className:"text-xl font-medium text-red-400",children:Er((Or=(Ur=a[e])==null?void 0:Ur.bb)==null?void 0:Or.upper,e)})]}),i.jsxs("div",{className:`${w==="midnight"?"bg-slate-900/50":"bg-slate-100"} rounded-lg p-3`,children:[i.jsx("div",{className:`text-xs ${sr} opacity-50`,children:"BB Lower"}),i.jsx("div",{className:"text-xl font-medium text-emerald-400",children:Er((Cn=(dn=a[e])==null?void 0:dn.bb)==null?void 0:Cn.lower,e)})]}),i.jsxs("div",{className:`${w==="midnight"?"bg-slate-900/50":"bg-slate-100"} rounded-lg p-3`,children:[i.jsx("div",{className:`text-xs ${sr} opacity-50`,children:"Trend"}),i.jsx("div",{className:`text-xl font-medium ${((Mi=a[e])==null?void 0:Mi.trend)==="UP"?"text-emerald-400":((po=a[e])==null?void 0:po.trend)==="DOWN"?"text-red-400":"text-slate-400"}`,children:((SA=a[e])==null?void 0:SA.trend)==="UP"?"":((wl=a[e])==null?void 0:wl.trend)==="DOWN"?"":""})]})]}),i.jsxs("div",{className:`${w==="midnight"?"bg-slate-900/50":"bg-slate-100"} rounded-lg p-4`,children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:`text-sm ${sr}`,children:"Sensitivity"}),i.jsxs("span",{className:"text-sm text-[#D4AF37]",children:[(p*100).toFixed(0),"%"]})]}),i.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:p,onChange:C=>g(parseFloat(C.target.value)),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-[#D4AF37]"}),i.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mt-1",children:[i.jsx("span",{children:"Conservative"}),i.jsx("span",{children:"Aggressive"})]})]})]}),i.jsx("div",{className:`mt-4 text-center text-xs ${sr} opacity-40`,children:" LONG () |  SHORT () |   |   |  HOLD |  WAIT"}),L&&i.jsxs("div",{className:`mt-8 ${bs} rounded-2xl p-6 border border-slate-700/50`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>ur("history"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${Dt==="history"?"bg-[#D4AF37] text-slate-900":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:" "}),i.jsx("button",{onClick:()=>ur("pnl"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${Dt==="pnl"?"bg-[#D4AF37] text-slate-900":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:" "}),i.jsx("button",{onClick:()=>ur("stats"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${Dt==="stats"?"bg-[#D4AF37] text-slate-900":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:" "}),i.jsxs("button",{onClick:()=>ur("alerts"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${Dt==="alerts"?"bg-[#D4AF37] text-slate-900":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[" ",J.filter(C=>!C.triggered).length>0&&i.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-amber-500 text-slate-900 text-xs rounded-full",children:J.filter(C=>!C.triggered).length})]})]}),i.jsx("button",{onClick:()=>{Lt(),gr()},disabled:st,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg text-sm transition-all",children:st?" ...":" "})]}),Dt==="history"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-[#D4AF37] mb-4",children:" 100"}),Ut.length===0?i.jsxs("div",{className:"text-center py-12 text-slate-400",children:[i.jsx("div",{className:"text-4xl mb-4",children:""}),i.jsx("div",{children:""}),i.jsx("div",{className:"text-sm mt-2",children:"KuCoin Futures"})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-slate-700",children:[i.jsx("th",{className:"text-left py-3 px-2 text-slate-400",children:""}),i.jsx("th",{className:"text-left py-3 px-2 text-slate-400",children:""}),i.jsx("th",{className:"text-left py-3 px-2 text-slate-400",children:""}),i.jsx("th",{className:"text-right py-3 px-2 text-slate-400",children:""}),i.jsx("th",{className:"text-right py-3 px-2 text-slate-400",children:""}),i.jsx("th",{className:"text-right py-3 px-2 text-slate-400",children:""}),i.jsx("th",{className:"text-right py-3 px-2 text-slate-400",children:""}),i.jsx("th",{className:"text-right py-3 px-2 text-slate-400",children:""})]})}),i.jsx("tbody",{children:Ut.slice(0,50).map((C,D)=>i.jsxs("tr",{className:"border-b border-slate-800 hover:bg-slate-800/50",children:[i.jsxs("td",{className:"py-3 px-2 text-slate-300 text-xs",children:[C.time.toLocaleDateString("ja-JP"),i.jsx("br",{}),i.jsx("span",{className:"text-slate-500",children:C.time.toLocaleTimeString("ja-JP")})]}),i.jsx("td",{className:"py-3 px-2 text-white font-medium",children:C.symbol}),i.jsx("td",{className:"py-3 px-2",children:i.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${C.side==="buy"?"bg-emerald-500/20 text-emerald-400":"bg-red-500/20 text-red-400"}`,children:C.side==="buy"?"BUY":"SELL"})}),i.jsx("td",{className:"py-3 px-2 text-right text-slate-300 font-mono",children:C.price.toLocaleString()}),i.jsx("td",{className:"py-3 px-2 text-right text-slate-300 font-mono",children:C.size}),i.jsxs("td",{className:"py-3 px-2 text-right text-slate-300 font-mono",children:["$",C.value.toFixed(2)]}),i.jsxs("td",{className:"py-3 px-2 text-right text-amber-400 font-mono text-xs",children:["-$",C.fee.toFixed(4)]}),i.jsx("td",{className:`py-3 px-2 text-right font-mono font-bold ${C.pnl>=0?"text-emerald-400":"text-red-400"}`,children:C.pnl!==0?`${C.pnl>=0?"+":""}$${C.pnl.toFixed(2)}`:"-"})]},C.id||D))})]})})]}),Dt==="pnl"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-[#D4AF37] mb-4",children:" "}),Jt.length===0?i.jsxs("div",{className:"text-center py-12 text-slate-400",children:[i.jsx("div",{className:"text-4xl mb-4",children:""}),i.jsx("div",{children:""}),i.jsx("div",{className:"text-sm mt-2",children:""})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"h-64 bg-slate-900/50 rounded-xl p-4 mb-6 relative",children:[i.jsxs("svg",{viewBox:"0 0 800 200",className:"w-full h-full",children:[i.jsx("defs",{children:i.jsx("pattern",{id:"grid",width:"80",height:"40",patternUnits:"userSpaceOnUse",children:i.jsx("path",{d:"M 80 0 L 0 0 0 40",fill:"none",stroke:"#334155",strokeWidth:"0.5"})})}),i.jsx("rect",{width:"800",height:"200",fill:"url(#grid)"}),(()=>{Math.max(...Jt.map(D=>Math.abs(D.cumulative)),1);const C=100;return i.jsx("line",{x1:"0",y1:C,x2:"800",y2:C,stroke:"#64748b",strokeWidth:"1",strokeDasharray:"4"})})(),(()=>{var pe;const C=Math.max(...Jt.map(Ie=>Math.abs(Ie.cumulative)),1),D=Jt.map((Ie,Ue)=>{const De=Ue/(Jt.length-1||1)*780+10,Be=100-Ie.cumulative/C*80;return`${De},${Be}`}).join(" "),q=((pe=Jt[Jt.length-1])==null?void 0:pe.cumulative)||0,ce=q>=0?"#10b981":"#ef4444";return i.jsxs(i.Fragment,{children:[i.jsx("polygon",{points:`10,100 ${D} 790,100`,fill:q>=0?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)"}),i.jsx("polyline",{points:D,fill:"none",stroke:ce,strokeWidth:"2",strokeLinejoin:"round"}),Jt.map((Ie,Ue)=>{const De=Ue/(Jt.length-1||1)*780+10,Be=100-Ie.cumulative/C*80;return i.jsx("circle",{cx:De,cy:Be,r:"4",fill:Ie.pnl>=0?"#10b981":"#ef4444",stroke:"#1e293b",strokeWidth:"2"},Ue)})]})})()]}),i.jsxs("div",{className:"absolute top-4 right-4 text-right",children:[i.jsx("div",{className:"text-xs text-slate-400",children:""}),i.jsxs("div",{className:`text-2xl font-bold ${(((ju=Jt[Jt.length-1])==null?void 0:ju.cumulative)||0)>=0?"text-emerald-400":"text-red-400"}`,children:[(((Eu=Jt[Jt.length-1])==null?void 0:Eu.cumulative)||0)>=0?"+":"","$",(((Fu=Jt[Jt.length-1])==null?void 0:Fu.cumulative)||0).toFixed(2)]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"text-sm font-medium text-slate-400 mb-3",children:" "}),Q.slice(0,20).map((C,D)=>i.jsxs("div",{className:`p-3 rounded-lg border ${C.pnl>=0?"bg-emerald-900/20 border-emerald-500/30":"bg-red-900/20 border-red-500/30"}`,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${C.side==="buy"?"bg-emerald-500/20 text-emerald-400":"bg-red-500/20 text-red-400"}`,children:C.side==="buy"?"LONG":"SHORT"}),i.jsx("span",{className:"text-white font-medium",children:C.symbol}),i.jsxs("span",{className:"text-slate-400 text-xs",children:["",C.leverage]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:`font-bold ${C.pnl>=0?"text-emerald-400":"text-red-400"}`,children:[C.pnl>=0?"+":"","$",C.pnl.toFixed(2)]}),i.jsxs("div",{className:`text-xs ${C.roe>=0?"text-emerald-300":"text-red-300"}`,children:["ROE: ",C.roe>=0?"+":"",C.roe.toFixed(2),"%"]})]})]}),i.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mt-2",children:[i.jsxs("span",{children:["Entry: $",C.entryPrice.toLocaleString(),"  Exit: $",C.closePrice.toLocaleString()]}),i.jsxs("span",{children:[C.closeTime.toLocaleDateString("ja-JP")," ",C.closeTime.toLocaleTimeString("ja-JP")]})]})]},C.id||D))]})]})]}),Dt==="stats"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-[#D4AF37] mb-4",children:" "}),ot?i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"p-4 rounded-xl bg-slate-800/50 border border-slate-700",children:[i.jsx("div",{className:"text-xs text-slate-400 mb-1",children:""}),i.jsx("div",{className:"text-2xl font-bold text-white",children:ot.totalTrades})]}),i.jsxs("div",{className:"p-4 rounded-xl bg-slate-800/50 border border-slate-700",children:[i.jsx("div",{className:"text-xs text-slate-400 mb-1",children:""}),i.jsxs("div",{className:`text-2xl font-bold ${ot.winRate>=50?"text-emerald-400":"text-red-400"}`,children:[ot.winRate.toFixed(1),"%"]}),i.jsxs("div",{className:"text-xs text-slate-500",children:[ot.wins," / ",ot.losses,""]})]}),i.jsxs("div",{className:"p-4 rounded-xl bg-slate-800/50 border border-slate-700",children:[i.jsx("div",{className:"text-xs text-slate-400 mb-1",children:""}),i.jsxs("div",{className:`text-2xl font-bold ${ot.totalPnl>=0?"text-emerald-400":"text-red-400"}`,children:[ot.totalPnl>=0?"+":"","$",ot.totalPnl.toFixed(2)]})]}),i.jsxs("div",{className:"p-4 rounded-xl bg-slate-800/50 border border-slate-700",children:[i.jsx("div",{className:"text-xs text-slate-400 mb-1",children:""}),i.jsx("div",{className:`text-2xl font-bold ${ot.profitFactor>=1?"text-emerald-400":"text-red-400"}`,children:ot.profitFactor.toFixed(2)})]}),i.jsxs("div",{className:"p-4 rounded-xl bg-emerald-900/30 border border-emerald-500/30",children:[i.jsx("div",{className:"text-xs text-emerald-400 mb-1",children:""}),i.jsxs("div",{className:"text-xl font-bold text-emerald-400",children:["+$",ot.avgWin.toFixed(2)]}),i.jsxs("div",{className:"text-xs text-emerald-300",children:[": +$",ot.maxWin.toFixed(2)]})]}),i.jsxs("div",{className:"p-4 rounded-xl bg-red-900/30 border border-red-500/30",children:[i.jsx("div",{className:"text-xs text-red-400 mb-1",children:""}),i.jsxs("div",{className:"text-xl font-bold text-red-400",children:["$",ot.avgLoss.toFixed(2)]}),i.jsxs("div",{className:"text-xs text-red-300",children:[": $",ot.maxLoss.toFixed(2)]})]}),i.jsxs("div",{className:"p-4 rounded-xl bg-amber-900/30 border border-amber-500/30",children:[i.jsx("div",{className:"text-xs text-amber-400 mb-1",children:""}),i.jsxs("div",{className:"text-xl font-bold text-amber-400",children:["-$",ot.totalFees.toFixed(2)]})]}),i.jsxs("div",{className:"p-4 rounded-xl bg-slate-800/50 border border-[#D4AF37]/50",children:[i.jsx("div",{className:"text-xs text-[#D4AF37] mb-1",children:""}),i.jsxs("div",{className:`text-xl font-bold ${ot.netPnl>=0?"text-emerald-400":"text-red-400"}`,children:[ot.netPnl>=0?"+":"","$",ot.netPnl.toFixed(2)]})]}),i.jsxs("div",{className:"p-4 rounded-xl bg-slate-800/50 border border-slate-700 col-span-2",children:[i.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"ROE"}),i.jsxs("div",{className:`text-2xl font-bold ${ot.avgRoe>=0?"text-emerald-400":"text-red-400"}`,children:[ot.avgRoe>=0?"+":"",ot.avgRoe.toFixed(2),"%"]})]})]}):i.jsxs("div",{className:"text-center py-12 text-slate-400",children:[i.jsx("div",{className:"text-4xl mb-4",children:""}),i.jsx("div",{children:""}),i.jsx("div",{className:"text-sm mt-2",children:""})]}),Q.length>0&&i.jsxs("div",{className:"mt-6",children:[i.jsx("h4",{className:"text-md font-bold text-slate-300 mb-3",children:" "}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:(()=>{const C={morning:{name:" (6-12)",trades:[],pnl:0},afternoon:{name:" (12-18)",trades:[],pnl:0},night:{name:" (18-6)",trades:[],pnl:0}};return Q.forEach(D=>{const q=new Date(D.closeTime).getHours();let ce="night";q>=6&&q<12?ce="morning":q>=12&&q<18&&(ce="afternoon"),C[ce].trades.push(D),C[ce].pnl+=D.pnl}),Object.entries(C).map(([D,q])=>{const ce=q.trades.filter(Ue=>Ue.pnl>0).length,pe=q.trades.length,Ie=pe>0?ce/pe*100:0;return i.jsxs("div",{className:"p-4 rounded-xl bg-slate-800/50 border border-slate-700",children:[i.jsx("div",{className:"text-sm text-slate-400 mb-2",children:q.name}),i.jsxs("div",{className:"flex justify-between items-end",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-slate-500",children:""}),i.jsx("div",{className:"text-lg font-bold text-white",children:pe})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-slate-500",children:""}),i.jsxs("div",{className:`text-lg font-bold ${Ie>=50?"text-emerald-400":"text-red-400"}`,children:[Ie.toFixed(0),"%"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-xs text-slate-500",children:""}),i.jsxs("div",{className:`text-lg font-bold ${q.pnl>=0?"text-emerald-400":"text-red-400"}`,children:[q.pnl>=0?"+":"",q.pnl.toFixed(2)]})]})]}),i.jsx("div",{className:"mt-2 h-1.5 bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full ${Ie>=50?"bg-emerald-500":"bg-red-500"}`,style:{width:`${Ie}%`}})})]},D)})})()}),i.jsx("div",{className:"mt-3 text-xs text-slate-500 text-center",children:" "})]})]}),Dt==="alerts"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-[#D4AF37] mb-4",children:" "}),i.jsxs("div",{className:"p-4 bg-slate-900/50 rounded-xl mb-6",children:[i.jsx("div",{className:"text-sm text-slate-400 mb-3",children:""}),i.jsxs("div",{className:"flex flex-wrap gap-2 items-end",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:""}),i.jsx("select",{id:"alertSymbol",className:"px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white text-sm",defaultValue:"BTC/USDT",children:t.map(C=>i.jsx("option",{value:C,children:C},C))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:""}),i.jsxs("select",{id:"alertCondition",className:"px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white text-sm",defaultValue:"above",children:[i.jsx("option",{value:"above",children:" "}),i.jsx("option",{value:"below",children:" "})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:""}),i.jsx("input",{type:"number",id:"alertPrice",placeholder:"100000",className:"px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white text-sm w-32"})]}),i.jsx("button",{onClick:()=>{const C=document.getElementById("alertSymbol").value,D=document.getElementById("alertCondition").value,q=document.getElementById("alertPrice").value;q&&(Wr(C,q,D),document.getElementById("alertPrice").value="")},className:"px-4 py-2 bg-amber-500 hover:bg-amber-600 text-slate-900 rounded-lg text-sm font-bold transition-all",children:"+ "})]}),i.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:[" : ",t.map(C=>{var D,q,ce;return`${C.split("/")[0]} ${((ce=(q=(D=n[C])==null?void 0:D.slice(-1)[0])==null?void 0:q.close)==null?void 0:ce.toFixed(2))||"-"}`}).join(" | ")]})]}),J.length===0?i.jsxs("div",{className:"text-center py-12 text-slate-400",children:[i.jsx("div",{className:"text-4xl mb-4",children:""}),i.jsx("div",{children:""}),i.jsx("div",{className:"text-sm mt-2",children:""})]}):i.jsx("div",{className:"space-y-2",children:J.map(C=>{var ce,pe;const D=(pe=(ce=n[C.symbol])==null?void 0:ce.slice(-1)[0])==null?void 0:pe.close,q=D?(C.price-D)/D*100:null;return i.jsxs("div",{className:`p-3 rounded-lg border flex items-center justify-between ${C.triggered?"bg-emerald-900/30 border-emerald-500/50":"bg-slate-800/50 border-slate-700"}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:`text-2xl ${C.triggered?"opacity-50":""}`,children:C.condition==="above"?"":""}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-white font-medium",children:C.symbol}),i.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${C.condition==="above"?"bg-emerald-500/30 text-emerald-400":"bg-red-500/30 text-red-400"}`,children:C.condition==="above"?"":""}),C.triggered&&i.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-emerald-500/30 text-emerald-400",children:" "})]}),i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"text-[#D4AF37] font-mono",children:C.price.toFixed(2)}),q!==null&&!C.triggered&&i.jsxs("span",{className:`ml-2 text-xs ${Math.abs(q)<1?"text-amber-400":"text-slate-500"}`,children:["(",q>=0?"+":"",q.toFixed(2),"%)"]})]})]})]}),i.jsx("button",{onClick:()=>gn(C.id),className:"px-3 py-1 bg-slate-700 hover:bg-red-600 text-slate-300 hover:text-white rounded text-xs transition-all",children:""})]},C.id)})})]})]})]})]})}function j6({transactions:t,addTransaction:e,updateTransaction:r,deleteTransaction:n,tasks:s,events:a,goals:A}){var ye,Le,ft,At,wt,pt,xt,yt,zt,kt,Ut,br;const[o,l]=V.useState(!1),[c,d]=V.useState(null),[p,g]=V.useState({title:"",amount:"",type:"expense",category:"",date:new Date().toISOString().split("T")[0],paymentTiming:"immediate",linkedType:"",linkedId:""}),[h,b]=V.useState("all"),[w,j]=V.useState(!1),[x,y]=V.useState(()=>{const Q=localStorage.getItem("budgetPlanner_income");return Q?parseInt(Q):3e5}),[B,E]=V.useState(()=>{const Q=localStorage.getItem("budgetPlanner_allocations");return Q?JSON.parse(Q):{necessities:50,wants:30,savings:20}}),[L,U]=V.useState(()=>{const Q=localStorage.getItem("budgetPlanner_special");return Q?JSON.parse(Q):[]}),[M,G]=V.useState({title:"",amount:"",month:new Date().toISOString().slice(0,7),linkedType:"",linkedId:""}),N=[{id:"allowance",name:"",icon:"",defaultAmount:7e4,isFixed:!0},{id:"kbt",name:"KBT",icon:"",keywords:["KBT","KB","",""],paymentType:"nextMonth"},{id:"stripchat",name:"Stripchat",icon:"",keywords:["Stripchat","StripChat","","stripchat",""],paymentType:"currentMonth"},{id:"massage",name:"",icon:"",keywords:[""],paymentType:"currentMonth"},{id:"system",name:"",icon:"",keywords:["","","","IT"],paymentType:"nextMonth"},{id:"housework",name:"",icon:"",keywords:["",""],paymentType:"currentMonth"}],$=[{id:"rent",name:"",icon:"",defaultAmount:132e3,isFixed:!0},{id:"shop_rent",name:"",icon:"",defaultAmount:8e4,isFixed:!0},{id:"electricity",name:"",icon:"",defaultAmount:15e3,isFixed:!0},{id:"gas",name:"",icon:"",defaultAmount:4e3,isFixed:!0},{id:"water",name:"",icon:"",defaultAmount:3e3,isFixed:!0},{id:"tobacco",name:"",icon:"",defaultAmount:16e3,isFixed:!0},{id:"ai_subscription",name:"AI",icon:"",defaultAmount:5e4,isFixed:!0},{id:"food",name:"",icon:"",defaultAmount:2e4,isFixed:!0},{id:"transport",name:"",icon:"",defaultAmount:5e3,isFixed:!0},{id:"phone",name:"",icon:"",defaultAmount:9e3,isFixed:!0},{id:"travel",name:"",icon:"",budgetRatio:.05,isFixed:!1},{id:"entertainment",name:"",icon:"",budgetRatio:.05,isFixed:!1},{id:"savings",name:"",icon:"",budgetRatio:.1,isFixed:!1},{id:"other_expense",name:"",icon:"",budgetRatio:.05,isFixed:!1}],[k,_]=V.useState(()=>{const Q=localStorage.getItem("budgetPlanner_incomeBreakdown");return Q?JSON.parse(Q):N.map(Te=>({categoryId:Te.id,amount:0,linkedItems:[]}))}),[z,O]=V.useState(()=>{const Q=localStorage.getItem("budgetPlanner_expenseBreakdown");if(Q){const Te=JSON.parse(Q);return $.map(st=>{const Ge=Te.find(Dt=>Dt.categoryId===st.id);return Ge||{categoryId:st.id,amount:st.isFixed&&st.defaultAmount||0,linkedItems:[]}})}return $.map(Te=>({categoryId:Te.id,amount:Te.isFixed&&Te.defaultAmount||0,linkedItems:[]}))}),[te,ue]=V.useState(null),[fe,ie]=V.useState(null),de=[{id:"cash",name:"",icon:""},{id:"savings",name:"",icon:""},{id:"insurance",name:"",icon:""},{id:"stocks",name:"",icon:""},{id:"investment",name:"",icon:""},{id:"bonds",name:"",icon:""},{id:"pension",name:"",icon:""},{id:"realEstate",name:"",icon:""},{id:"car",name:"",icon:""},{id:"household",name:"",icon:""}],ge=[{id:"mortgage",name:"",icon:""},{id:"carLoan",name:"",icon:""},{id:"educationLoan",name:"",icon:""},{id:"scholarship",name:"",icon:""},{id:"cardLoan",name:"",icon:""},{id:"otherLoan",name:"",icon:""}],[ve,I]=V.useState(()=>{const Q=localStorage.getItem("balanceSheet_assets");return Q?JSON.parse(Q):de.map(Te=>({id:Te.id,amount:0}))}),[H,re]=V.useState(()=>{const Q=localStorage.getItem("balanceSheet_liabilities");return Q?JSON.parse(Q):ge.map(Te=>({id:Te.id,amount:0}))}),[Y,le]=V.useState(!1);V.useEffect(()=>{localStorage.setItem("balanceSheet_assets",JSON.stringify(ve))},[ve]),V.useEffect(()=>{localStorage.setItem("balanceSheet_liabilities",JSON.stringify(H))},[H]),ve.reduce((Q,Te)=>Q+(Te.amount||0),0),H.reduce((Q,Te)=>Q+(Te.amount||0),0);const me=(Q,Te)=>{if(!Q||!Te)return null;if(Q==="event"){const st=a==null?void 0:a.find(Ge=>String(Ge.id)===String(Te));return st?{name:st.title,icon:"",color:"text-blue-400"}:null}if(Q==="goal"){const st=A==null?void 0:A.find(Ge=>String(Ge.id)===String(Te));return st?{name:st.title,icon:"",color:"text-purple-400"}:null}if(Q==="task"){const st=s==null?void 0:s.find(Ge=>String(Ge.id)===String(Te));return st?{name:st.title,icon:"",color:"text-emerald-400"}:null}return null},ke=(Q=0)=>{const Te=new Date,st=new Date(Te.getFullYear(),Te.getMonth()+Q,1),Ge=new Date(st.getFullYear(),st.getMonth(),1),Dt=new Date(st.getFullYear(),st.getMonth()+1,0);return{start:Ge.toISOString().split("T")[0],end:Dt.toISOString().split("T")[0]}},Ee=Q=>{if(Q.isFixed&&Q.defaultAmount)return{total:Q.defaultAmount,matchedItems:[],count:0,isFixed:!0};const Te=Q.keywords||[];if(Te.length===0)return{total:0,matchedItems:[],count:0};const st=Q.paymentType==="nextMonth",Ge=ke(st?-1:0),Dt=new Set,ur=(a||[]).filter(ot=>{const nr=ot.title||"",Wr=ot.date;return Te.some(Lr=>nr.toLowerCase().includes(Lr.toLowerCase()))&&Wr>=Ge.start&&Wr<=Ge.end?(Dt.add(String(ot.id)),!0):!1}),Lt=(t||[]).filter(ot=>{if(ot.type!=="income")return!1;const nr=ot.title||"",Wr=ot.originalDate||ot.date;if(Wr<Ge.start||Wr>Ge.end)return!1;if(ot.linkedType==="event"&&ot.linkedId){if(Dt.has(String(ot.linkedId)))return!0;const Lr=a==null?void 0:a.find(rs=>String(rs.id)===String(ot.linkedId));if(Lr){const rs=Lr.title||"";if(Te.some(qn=>rs.toLowerCase().includes(qn.toLowerCase())))return!0}}return!!Te.some(Lr=>nr.toLowerCase().includes(Lr.toLowerCase()))}),gr=Lt.reduce((ot,nr)=>ot+(nr.amount||0),0),Jt=Lt.map(ot=>({type:"transaction",id:String(ot.id),name:ot.title,amount:ot.amount||0}));return{total:gr,matchedItems:Jt,targetRange:Ge,isNextMonth:st,eventCount:ur.length,count:Lt.length}},Pe=V.useMemo(()=>N.map(Q=>{const Te=Ee(Q);return{categoryId:Q.id,...Te}}),[a,t,N]),nt=()=>($.filter(Q=>Q.isFixed).reduce((Q,Te)=>Q+(Te.defaultAmount||0),0),$.map(Q=>{if(Q.isFixed)return{categoryId:Q.id,amount:Q.defaultAmount||0};{const Te=Math.round(se*(Q.budgetRatio||0));return{categoryId:Q.id,amount:Te}}})),ut=()=>{const Q=nt();O(Q)},he=V.useRef(null),Ze=()=>{const Q={date:new Date().toISOString(),month:new Date().toLocaleDateString("ja-JP",{year:"numeric",month:"long"}),income:Pe.map(st=>{const Ge=N.find(Dt=>Dt.id===st.categoryId);return{name:(Ge==null?void 0:Ge.name)||st.categoryId,amount:st.total||0,isFixed:(Ge==null?void 0:Ge.isFixed)||!1}}),expenses:z.map(st=>{const Ge=$.find(Dt=>Dt.id===st.categoryId);return{name:(Ge==null?void 0:Ge.name)||st.categoryId,amount:st.amount||0,isFixed:(Ge==null?void 0:Ge.isFixed)||!1}}),totalIncome:se,totalExpense:qe,balance:se-qe},Te=JSON.parse(localStorage.getItem("balanceSheet_history")||"[]");Te.unshift(Q),localStorage.setItem("balanceSheet_history",JSON.stringify(Te.slice(0,12))),alert("")},F=()=>{const Q=new Date().toLocaleDateString("ja-JP",{year:"numeric",month:"long"}),Te=se-qe,st=N.map(Lt=>{const gr=Pe.find(nr=>nr.categoryId===Lt.id)||{total:0,count:0},Jt=Lt.isFixed?"":Lt.paymentType==="nextMonth"?"1":"2",ot=gr.count>0?`(${gr.count})`:"";return`
        <tr>
          <td class="cell-name">${Lt.name}</td>
          <td class="cell-label">${Jt} ${ot}</td>
          <td class="cell-amount">${gr.total.toLocaleString()}</td>
        </tr>
      `}).join(""),Ge=$.map(Lt=>{const gr=z.find(ot=>ot.categoryId===Lt.id)||{amount:0},Jt=Lt.isFixed?"":"";return`
        <tr>
          <td class="cell-name">${Lt.name}</td>
          <td class="cell-label">${Jt}</td>
          <td class="cell-amount">${gr.amount.toLocaleString()}</td>
        </tr>
      `}).join(""),Dt=`
      <!DOCTYPE html>
      <html lang="ja">
      <head>
        <meta charset="UTF-8">
        <title> - ${Q}</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
        <style>
          * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
          }
          body { 
            font-family: 'Noto Sans JP', 'Hiragino Sans', 'Meiryo', sans-serif; 
            background-color: #ffffff !important; 
            color: #000000 !important; 
            padding: 50px;
            font-size: 16px;
            line-height: 1.8;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
          }
          .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #ffffff;
          }
          .header { 
            text-align: center; 
            margin-bottom: 40px; 
            padding-bottom: 20px;
            border-bottom: 3px solid #000000;
          }
          .header h1 { 
            font-size: 28px; 
            font-weight: 700; 
            color: #000000;
            margin-bottom: 10px;
            letter-spacing: 2px;
          }
          .header .date { 
            font-size: 18px; 
            color: #333333;
            font-weight: 500;
          }
          .content { 
            display: flex; 
            gap: 40px; 
            margin-bottom: 40px;
          }
          .section { 
            flex: 1; 
          }
          .section-title { 
            font-size: 20px; 
            font-weight: 700; 
            padding: 14px 20px;
            margin-bottom: 0;
            border: 2px solid #000000;
            color: #000000;
            background-color: #f5f5f5;
          }
          table { 
            width: 100%; 
            border-collapse: collapse; 
            background-color: #ffffff;
            border: 2px solid #000000;
            border-top: none;
          }
          .cell-name {
            padding: 12px 16px;
            border-bottom: 1px solid #cccccc;
            font-size: 15px;
            color: #000000;
            font-weight: 500;
          }
          .cell-label {
            padding: 12px 16px;
            border-bottom: 1px solid #cccccc;
            text-align: center;
            color: #555555;
            font-size: 14px;
          }
          .cell-amount {
            padding: 12px 16px;
            border-bottom: 1px solid #cccccc;
            text-align: right;
            font-size: 16px;
            font-weight: 500;
            color: #000000;
            font-variant-numeric: tabular-nums;
          }
          .total-row { 
            background-color: #f0f0f0; 
          }
          .total-row td {
            padding: 14px 16px !important;
            border-bottom: none !important;
            font-weight: 700;
            font-size: 17px;
            color: #000000;
          }
          .summary { 
            margin-top: 30px; 
            padding: 25px;
            border: 3px solid #000000;
            background-color: #f8f8f8;
            text-align: center;
          }
          .summary-label { 
            font-size: 18px; 
            margin-bottom: 10px;
            color: #000000;
            font-weight: 500;
          }
          .summary-value { 
            font-size: 32px; 
            font-weight: 700; 
            color: #000000;
            font-variant-numeric: tabular-nums;
          }
          .summary-positive {
            color: #006600;
          }
          .summary-negative {
            color: #cc0000;
          }
          .footer {
            margin-top: 50px;
            text-align: center;
            font-size: 14px;
            color: #666666;
            border-top: 1px solid #cccccc;
            padding-top: 20px;
          }
          @media print {
            body { 
              padding: 30px;
              background-color: #ffffff !important;
              color: #000000 !important;
            }
            .content { gap: 30px; }
            .section-title,
            table,
            .summary {
              -webkit-print-color-adjust: exact;
              print-color-adjust: exact;
            }
          }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="header">
            <h1></h1>
            <div class="date">${Q}</div>
          </div>
          
          <div class="content">
            <div class="section">
              <div class="section-title"></div>
              <table>
                ${st}
                <tr class="total-row">
                  <td colspan="2"> </td>
                  <td style="text-align: right;">${se.toLocaleString()}</td>
                </tr>
              </table>
            </div>
            
            <div class="section">
              <div class="section-title"></div>
              <table>
                ${Ge}
                <tr class="total-row">
                  <td colspan="2"> </td>
                  <td style="text-align: right;">${qe.toLocaleString()}</td>
                </tr>
              </table>
            </div>
          </div>
          
          <div class="summary">
            <div class="summary-label">  </div>
            <div class="summary-value ${Te>=0?"summary-positive":"summary-negative"}">${Te.toLocaleString()}</div>
          </div>
          
          <div class="footer">
            : ${new Date().toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"})}
          </div>
        </div>
      </body>
      </html>
    `,ur=window.open("","_blank");ur?(ur.document.write(Dt),ur.document.close(),setTimeout(()=>{ur.print()},800)):alert("")};V.useEffect(()=>{localStorage.setItem("budgetPlanner_income",x.toString())},[x]),V.useEffect(()=>{localStorage.setItem("budgetPlanner_allocations",JSON.stringify(B))},[B]),V.useEffect(()=>{localStorage.setItem("budgetPlanner_incomeBreakdown",JSON.stringify(k))},[k]),V.useEffect(()=>{localStorage.setItem("budgetPlanner_expenseBreakdown",JSON.stringify(z))},[z]),V.useEffect(()=>{z.some(Te=>{const st=$.find(Ge=>Ge.id===Te.categoryId);return(st==null?void 0:st.isFixed)&&st.defaultAmount&&Te.amount===0})&&O(Te=>Te.map(st=>{const Ge=$.find(Dt=>Dt.id===st.categoryId);return Ge!=null&&Ge.isFixed&&Ge.defaultAmount&&st.amount===0?{...st,amount:Ge.defaultAmount}:st}))},[]);const se=Pe.reduce((Q,Te)=>Q+(Te.total||0),0),qe=z.reduce((Q,Te)=>Q+(Te.amount||0),0),X=(Q,Te)=>{O(st=>st.map(Ge=>Ge.categoryId===Q?{...Ge,amount:parseInt(Te)||0}:Ge))},ne=()=>{y(se)};V.useEffect(()=>{localStorage.setItem("budgetPlanner_special",JSON.stringify(L))},[L]);const je=Q=>Math.round(x*Q/100),J=()=>{M.title&&M.amount&&(U([...L,{id:Date.now(),...M,amount:parseInt(M.amount)}]),G({title:"",amount:"",month:new Date().toISOString().slice(0,7),linkedType:"",linkedId:""}))},$e=(Q,Te)=>{Q==="event"?`${Te.title}`:Q==="goal"?`${Te.title}`:`${Te.title}`,G({title:Te.title,amount:"",month:Te.date?Te.date.slice(0,7):Te.deadline?Te.deadline.slice(0,7):new Date().toISOString().slice(0,7),linkedType:Q,linkedId:String(Te.id)})},Ve=Q=>{U(L.filter(Te=>Te.id!==Q))},ze=L.filter(Q=>Q.month===new Date().toISOString().slice(0,7)).reduce((Q,Te)=>Q+Te.amount,0),We={expense:["","","","","","","","","","",""],income:["","","","","",""]},lt=Q=>{const Te=new Date(Q);return Te.setMonth(Te.getMonth()+2),Te.setDate(0),Te.toISOString().split("T")[0]},be=()=>{const Q=new Date,Te=new Date(Q.getFullYear(),Q.getMonth(),1),st=new Date(Q.getFullYear(),Q.getMonth()+1,0);return{start:Te.toISOString().split("T")[0],end:st.toISOString().split("T")[0]}},Se=V.useMemo(()=>{const Q=be(),Te=t.filter(ot=>ot.type==="income"&&ot.date>=Q.start&&ot.date<=Q.end).reduce((ot,nr)=>ot+nr.amount,0),st=t.filter(ot=>ot.type==="expense"&&ot.date>=Q.start&&ot.date<=Q.end).reduce((ot,nr)=>ot+nr.amount,0),Ge=t.filter(ot=>ot.type==="income").reduce((ot,nr)=>ot+nr.amount,0),Dt=t.filter(ot=>ot.type==="expense").reduce((ot,nr)=>ot+nr.amount,0),ur=new Date().toISOString().split("T")[0],Lt=t.filter(ot=>ot.type==="income"&&ot.paymentTiming==="nextMonthEnd"&&ot.date>ur).reduce((ot,nr)=>ot+nr.amount,0),gr={};t.filter(ot=>ot.type==="expense").forEach(ot=>{gr[ot.category]=(gr[ot.category]||0)+ot.amount});const Jt={};return t.filter(ot=>ot.type==="income").forEach(ot=>{Jt[ot.category]=(Jt[ot.category]||0)+ot.amount}),{monthlyIncome:Te,monthlyExpense:st,monthlyBalance:Te-st,totalIncome:Ge,totalExpense:Dt,totalBalance:Ge-Dt,pendingIncome:Lt,categoryTotals:gr,incomeCategoryTotals:Jt}},[t]),ee=(Q,Te)=>{if(!Q||!Te)return null;if(Q==="task"){const st=s==null?void 0:s.find(Ge=>String(Ge.id)===String(Te));return st?{type:"task",name:st.title,icon:"",colorId:st.colorId||"blue"}:null}if(Q==="event"){const st=a==null?void 0:a.find(Ge=>String(Ge.id)===String(Te));return st?{type:"event",name:st.title,icon:"",colorId:st.colorId||"emerald"}:null}if(Q==="goal"){const st=A==null?void 0:A.find(Ge=>String(Ge.id)===String(Te));return st?{type:"goal",name:st.title,icon:"",colorId:st.colorId||"purple"}:null}return null},we=t.filter(Q=>h==="all"||Q.type===h).sort((Q,Te)=>new Date(Te.date)-new Date(Q.date)),_e=async()=>{if(p.title.trim()&&p.amount){let Q=p.date;p.type==="income"&&p.paymentTiming==="nextMonthEnd"&&(Q=lt(p.date));const Te={title:p.title,amount:parseFloat(p.amount),type:p.type,category:p.category,date:Q,originalDate:p.date,paymentTiming:p.type==="income"?p.paymentTiming:"immediate",linkedType:p.linkedType||"",linkedId:p.linkedId||""};await e(Te),g({title:"",amount:"",type:"expense",category:"",date:new Date().toISOString().split("T")[0],paymentTiming:"immediate",linkedType:"",linkedId:""}),l(!1)}},Je=async()=>{if(c&&c.title.trim()&&c.amount){let Q=c.originalDate||c.date;c.type==="income"&&c.paymentTiming==="nextMonthEnd"?Q=lt(c.originalDate||c.date):c.type==="income"&&c.paymentTiming==="immediate"&&(Q=c.originalDate||c.date),await r(c.id,{title:c.title,amount:parseFloat(c.amount),type:c.type,category:c.category,date:Q,originalDate:c.originalDate||c.date,paymentTiming:c.type==="income"?c.paymentTiming:"immediate",linkedType:c.linkedType||"",linkedId:c.linkedId||""}),d(null)}},Xe=async Q=>{confirm("")&&await n(Q)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-gradient-to-br from-slate-800/80 to-slate-900/80 rounded-2xl border border-slate-700/50 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsx("h2",{className:"text-xl font-bold text-white",children:""}),i.jsx("span",{className:"text-sm text-slate-400",children:new Date().toLocaleDateString("ja-JP",{year:"numeric",month:"long"})})]}),i.jsx("button",{onClick:()=>j(!w),className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg text-sm font-medium transition-all",children:w?" ":" "})]}),w&&i.jsxs("div",{className:"mb-6 p-5 bg-slate-900/70 rounded-xl border border-slate-600/50 space-y-5",children:[i.jsxs("h3",{className:"text-lg font-bold text-emerald-400 flex items-center gap-2",children:[i.jsx("span",{children:""})," "]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"text-sm text-slate-400",children:" "}),i.jsx("button",{onClick:ne,className:"px-3 py-1 bg-emerald-600 hover:bg-emerald-500 text-white rounded text-xs font-medium",children:" "})]}),i.jsxs("div",{className:"p-3 bg-slate-800/50 rounded-lg text-xs space-y-1 mb-3",children:[i.jsx("div",{className:"text-slate-400 font-medium",children:" :"}),i.jsxs("div",{className:"text-cyan-400",children:[" KBT  ",i.jsx("span",{className:"text-white",children:""}),""]}),i.jsxs("div",{className:"text-pink-400",children:[" StripChat  ",i.jsx("span",{className:"text-white",children:""}),""]})]}),i.jsx("div",{className:"grid grid-cols-2 gap-3",children:N.map(Q=>{const Te=k.find(Lt=>Lt.categoryId===Q.id)||{amount:0},st=me(Te.linkedType,Te.linkedId),Ge=Te.linkedType==="event"?a==null?void 0:a.find(Lt=>String(Lt.id)===String(Te.linkedId)):null,Dt=Ge&&nextMonthPaymentKeywords.some(Lt=>{var gr;return(gr=Ge.title)==null?void 0:gr.includes(Lt)}),ur=Ge&&currentMonthPaymentKeywords.some(Lt=>{var gr;return(gr=Ge.title)==null?void 0:gr.includes(Lt)});return i.jsxs("div",{className:`p-3 rounded-lg ${Q.bgColor} border ${Q.borderColor}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:Q.icon}),i.jsx("span",{className:`text-sm font-medium ${Q.color}`,children:Q.name})]}),i.jsx("button",{onClick:()=>ue(te===Q.id?null:Q.id),className:"text-xs text-slate-400 hover:text-white",children:te===Q.id?"":""})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-slate-500 text-sm",children:""}),i.jsx("input",{type:"number",value:Te.amount||"",onChange:Lt=>updateIncomeBreakdown(Q.id,Lt.target.value,Te.linkedType,Te.linkedId),className:`flex-1 px-2 py-1.5 bg-slate-900/50 border rounded text-white text-sm font-mono ${Te.autoCalculated?"border-emerald-500":"border-slate-600"}`,placeholder:"0"})]}),st&&i.jsxs("div",{className:"mt-2 space-y-1",children:[i.jsxs("div",{className:`text-xs ${st.color} flex items-center gap-1`,children:[i.jsx("span",{children:st.icon})," ",st.name]}),Dt&&i.jsx("div",{className:"text-[10px] text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded",children:" "}),ur&&i.jsx("div",{className:"text-[10px] text-pink-400 bg-pink-900/30 px-2 py-0.5 rounded",children:" "}),Te.autoCalculated&&i.jsx("div",{className:"text-[10px] text-emerald-400",children:" "})]}),te===Q.id&&i.jsxs("div",{className:"mt-2 p-2 bg-slate-900/50 rounded text-xs",children:[i.jsx("div",{className:"text-slate-500 mb-1",children:":"}),i.jsxs("div",{className:"flex flex-wrap gap-1 max-h-24 overflow-y-auto",children:[a==null?void 0:a.slice(0,10).map(Lt=>{var nr;const gr=Te.linkedType==="event"&&Te.linkedId===String(Lt.id),Jt=nextMonthPaymentKeywords.some(Wr=>{var gn;return(gn=Lt.title)==null?void 0:gn.includes(Wr)}),ot=currentMonthPaymentKeywords.some(Wr=>{var gn;return(gn=Lt.title)==null?void 0:gn.includes(Wr)});return i.jsxs("button",{onClick:()=>updateIncomeBreakdownWithAutoCalc(Q.id,"event",String(Lt.id)),className:`px-1.5 py-0.5 rounded text-[10px] ${gr?"bg-blue-500 text-white":Jt?"bg-cyan-900/50 text-cyan-300 border border-cyan-700":ot?"bg-pink-900/50 text-pink-300 border border-pink-700":"bg-blue-900/50 text-blue-300"}`,children:["",(nr=Lt.title)==null?void 0:nr.slice(0,8)]},`e-${Lt.id}`)}),A==null?void 0:A.slice(0,3).map(Lt=>i.jsxs("button",{onClick:()=>updateIncomeBreakdown(Q.id,Te.amount,"goal",String(Lt.id)),className:`px-1.5 py-0.5 rounded text-[10px] ${Te.linkedType==="goal"&&Te.linkedId===String(Lt.id)?"bg-purple-500 text-white":"bg-purple-900/50 text-purple-300"}`,children:["",Lt.title.slice(0,8)]},`g-${Lt.id}`)),s==null?void 0:s.filter(Lt=>!Lt.completed).slice(0,3).map(Lt=>i.jsxs("button",{onClick:()=>updateIncomeBreakdown(Q.id,Te.amount,"task",String(Lt.id)),className:`px-1.5 py-0.5 rounded text-[10px] ${Te.linkedType==="task"&&Te.linkedId===String(Lt.id)?"bg-emerald-500 text-white":"bg-emerald-900/50 text-emerald-300"}`,children:["",Lt.title.slice(0,8)]},`t-${Lt.id}`)),Te.linkedType&&i.jsx("button",{onClick:()=>updateIncomeBreakdown(Q.id,Te.amount,"",""),className:"px-1.5 py-0.5 rounded text-[10px] bg-red-900/50 text-red-300",children:""})]})]})]},Q.id)})}),i.jsxs("div",{className:"flex items-center justify-between p-3 bg-emerald-900/30 rounded-lg border border-emerald-700/50",children:[i.jsx("span",{className:"text-sm text-emerald-300",children:""}),i.jsxs("span",{className:"text-lg font-bold text-emerald-400 font-mono",children:["",se.toLocaleString()]})]})]}),i.jsxs("div",{className:"pt-4 border-t border-slate-700",children:[i.jsx("label",{className:"block text-sm text-slate-400 mb-2",children:" "}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-slate-400",children:""}),i.jsx("input",{type:"number",value:x,onChange:Q=>y(parseInt(Q.target.value)||0),className:"flex-1 px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white text-lg font-mono",placeholder:"300000"}),i.jsx("div",{className:"flex gap-1",children:[2e5,25e4,3e5,35e4,4e5,5e5].map(Q=>i.jsxs("button",{onClick:()=>y(Q),className:`px-2 py-1 text-xs rounded ${x===Q?"bg-emerald-500 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[(Q/1e4).toFixed(0),""]},Q))})]}),se!==x&&se>0&&i.jsxs("div",{className:"mt-2 text-xs text-amber-400",children:[" ",se.toLocaleString(),""]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-slate-300",children:" 50/30/20"}),i.jsx("button",{onClick:()=>E({necessities:50,wants:30,savings:20}),className:"text-xs text-emerald-400 hover:text-emerald-300",children:""})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-slate-300",children:" "}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-lg font-bold text-red-400",children:[B.necessities,"%"]}),i.jsxs("span",{className:"text-sm text-slate-500",children:["= ",je(B.necessities).toLocaleString()]})]})]}),i.jsx("input",{type:"range",min:"30",max:"70",value:B.necessities,onChange:Q=>{const Te=parseInt(Q.target.value),st=100-Te,Ge=B.wants/(B.wants+B.savings);E({necessities:Te,wants:Math.round(st*Ge),savings:st-Math.round(st*Ge)})},className:"w-full h-2 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #ef4444 0%, #ef4444 ${(B.necessities-30)/40*100}%, #334155 ${(B.necessities-30)/40*100}%, #334155 100%)`}})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-slate-300",children:" "}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-lg font-bold text-amber-400",children:[B.wants,"%"]}),i.jsxs("span",{className:"text-sm text-slate-500",children:["= ",je(B.wants).toLocaleString()]})]})]}),i.jsx("input",{type:"range",min:"10",max:"50",value:B.wants,onChange:Q=>{const Te=parseInt(Q.target.value),st=100-B.necessities-Te;st>=5&&E({...B,wants:Te,savings:st})},className:"w-full h-2 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #f59e0b 0%, #f59e0b ${(B.wants-10)/40*100}%, #334155 ${(B.wants-10)/40*100}%, #334155 100%)`}})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-slate-300",children:" "}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-lg font-bold text-emerald-400",children:[B.savings,"%"]}),i.jsxs("span",{className:"text-sm text-slate-500",children:["= ",je(B.savings).toLocaleString()]})]})]}),i.jsx("div",{className:"w-full h-2 rounded-lg bg-emerald-500/30",children:i.jsx("div",{className:"h-full bg-emerald-500 rounded-lg transition-all",style:{width:`${B.savings/50*100}%`}})}),i.jsx("div",{className:"text-xs text-slate-500",children:" "})]}),i.jsxs("div",{className:"flex h-6 rounded-lg overflow-hidden mt-4",children:[i.jsxs("div",{className:"bg-red-500 flex items-center justify-center text-xs text-white font-bold",style:{width:`${B.necessities}%`},children:[B.necessities,"%"]}),i.jsxs("div",{className:"bg-amber-500 flex items-center justify-center text-xs text-white font-bold",style:{width:`${B.wants}%`},children:[B.wants,"%"]}),i.jsxs("div",{className:"bg-emerald-500 flex items-center justify-center text-xs text-white font-bold",style:{width:`${B.savings}%`},children:[B.savings,"%"]})]})]}),i.jsxs("div",{className:"pt-4 border-t border-slate-700",children:[i.jsxs("h4",{className:"text-sm font-bold text-amber-400 mb-3 flex items-center gap-2",children:[i.jsx("span",{children:""})," "]}),i.jsxs("div",{className:"mb-4 p-3 bg-slate-800/50 rounded-lg",children:[i.jsx("div",{className:"text-xs text-slate-400 mb-2",children:" :"}),i.jsxs("div",{className:"flex flex-wrap gap-2 max-h-24 overflow-y-auto",children:[a==null?void 0:a.filter(Q=>!L.some(Te=>Te.linkedType==="event"&&String(Te.linkedId)===String(Q.id))).slice(0,5).map(Q=>i.jsxs("button",{onClick:()=>$e("event",Q),className:"px-2 py-1 bg-blue-900/50 hover:bg-blue-800/50 text-blue-300 rounded text-xs border border-blue-700/50 flex items-center gap-1",children:[i.jsx("span",{children:""})," ",Q.title.slice(0,15),Q.title.length>15?"...":""]},`event-${Q.id}`)),A==null?void 0:A.filter(Q=>!L.some(Te=>Te.linkedType==="goal"&&String(Te.linkedId)===String(Q.id))).slice(0,5).map(Q=>i.jsxs("button",{onClick:()=>$e("goal",Q),className:"px-2 py-1 bg-purple-900/50 hover:bg-purple-800/50 text-purple-300 rounded text-xs border border-purple-700/50 flex items-center gap-1",children:[i.jsx("span",{children:""})," ",Q.title.slice(0,15),Q.title.length>15?"...":""]},`goal-${Q.id}`)),s==null?void 0:s.filter(Q=>!Q.completed&&!L.some(Te=>Te.linkedType==="task"&&String(Te.linkedId)===String(Q.id))).slice(0,5).map(Q=>i.jsxs("button",{onClick:()=>$e("task",Q),className:"px-2 py-1 bg-emerald-900/50 hover:bg-emerald-800/50 text-emerald-300 rounded text-xs border border-emerald-700/50 flex items-center gap-1",children:[i.jsx("span",{children:""})," ",Q.title.slice(0,15),Q.title.length>15?"...":""]},`task-${Q.id}`))]})]}),i.jsxs("div",{className:"space-y-2 mb-3",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:M.title,onChange:Q=>G({...M,title:Q.target.value}),className:"flex-1 px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white text-sm",placeholder:": "}),i.jsx("input",{type:"number",value:M.amount,onChange:Q=>G({...M,amount:Q.target.value}),className:"w-28 px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white text-sm",placeholder:""}),i.jsx("input",{type:"month",value:M.month,onChange:Q=>G({...M,month:Q.target.value}),className:"px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white text-sm"}),i.jsx("button",{onClick:J,className:"px-4 py-2 bg-amber-600 hover:bg-amber-500 text-white rounded-lg text-sm font-medium",children:""})]}),M.linkedType&&i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx("span",{className:"text-slate-500",children:":"}),(()=>{const Q=me(M.linkedType,M.linkedId);return Q?i.jsxs("span",{className:`${Q.color} flex items-center gap-1`,children:[i.jsx("span",{children:Q.icon})," ",Q.name]}):null})(),i.jsx("button",{onClick:()=>G({...M,linkedType:"",linkedId:""}),className:"text-red-400 hover:text-red-300",children:""})]})]}),L.length>0&&i.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:L.map(Q=>{const Te=me(Q.linkedType,Q.linkedId);return i.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-slate-800/50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-amber-400",children:""}),i.jsxs("div",{children:[i.jsx("span",{className:"text-white text-sm",children:Q.title}),Te&&i.jsxs("div",{className:`text-xs ${Te.color} flex items-center gap-1`,children:[i.jsx("span",{children:Te.icon})," ",Te.name]})]}),i.jsx("span",{className:"text-xs text-slate-500",children:Q.month})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"text-amber-400 font-mono",children:["",Q.amount.toLocaleString()]}),i.jsx("button",{onClick:()=>Ve(Q.id),className:"text-red-400 hover:text-red-300 text-xs",children:""})]})]},Q.id)})})]})]}),i.jsxs("div",{className:"mb-4",ref:he,children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[" ",i.jsx("span",{className:"text-sm text-slate-400 font-normal",children:new Date().toLocaleDateString("ja-JP",{year:"numeric",month:"long"})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:ut,className:"px-3 py-2 bg-emerald-600 hover:bg-emerald-500 text-white text-sm font-medium rounded-lg transition-colors",children:" "}),i.jsx("button",{onClick:Ze,className:"px-3 py-2 bg-blue-600 hover:bg-blue-500 text-white text-sm font-medium rounded-lg transition-colors",children:" "}),i.jsx("button",{onClick:F,className:"px-3 py-2 bg-slate-600 hover:bg-slate-500 text-white text-sm font-medium rounded-lg transition-colors",children:" PDF"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"border border-slate-600 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"bg-slate-800 px-4 py-2 text-center border-b border-slate-600",children:i.jsx("span",{className:"font-bold text-emerald-400",children:""})}),i.jsx("div",{className:"p-3 space-y-1",children:N.map(Q=>{const Te=Pe.find(Dt=>Dt.categoryId===Q.id)||{total:0,count:0},st=Q.paymentType==="nextMonth",Ge=Q.isFixed;return i.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-700/30 last:border-b-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm",children:Q.icon}),i.jsx("span",{className:"text-sm text-slate-300",children:Q.name}),Ge?i.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-slate-700 text-slate-400",children:""}):i.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-slate-700 text-slate-400",children:st?"1":"2"}),Te.count>0&&i.jsxs("span",{className:"text-[10px] text-slate-500",children:["(",Te.count,")"]})]}),i.jsxs("span",{className:`font-mono ${Te.total>0?"text-white":"text-slate-600"}`,children:["",Te.total.toLocaleString()]})]},Q.id)})}),i.jsx("div",{className:"bg-slate-800 px-4 py-3 border-t border-slate-600",children:i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"font-bold text-emerald-400",children:""}),i.jsxs("span",{className:"font-bold text-emerald-400 font-mono text-lg",children:["",se.toLocaleString()]})]})})]}),i.jsxs("div",{className:"border border-slate-600 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"bg-slate-800 px-4 py-2 text-center border-b border-slate-600",children:i.jsx("span",{className:"font-bold text-red-400",children:""})}),i.jsx("div",{className:"p-3 space-y-1",children:$.map(Q=>{const Te=z.find(st=>st.categoryId===Q.id)||{amount:0};return i.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-700/30 last:border-b-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm",children:Q.icon}),i.jsx("span",{className:"text-sm text-slate-300",children:Q.name}),Q.isFixed&&i.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-slate-700 text-slate-400",children:""})]}),i.jsx("input",{type:"number",value:Te.amount||"",onChange:st=>X(Q.id,st.target.value),className:"w-28 bg-slate-800 border border-slate-600 rounded px-2 py-1 text-right text-white font-mono text-sm",placeholder:"0"})]},Q.id)})}),i.jsx("div",{className:"bg-slate-800 px-4 py-3 border-t border-slate-600",children:i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"font-bold text-red-400",children:""}),i.jsxs("span",{className:"font-bold text-red-400 font-mono text-lg",children:["",qe.toLocaleString()]})]})})]})]}),i.jsx("div",{className:`mt-4 p-4 rounded-lg border ${se-qe>=0?"bg-slate-800 border-emerald-600":"bg-slate-800 border-red-600"}`,children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"font-bold text-lg text-slate-300",children:""}),i.jsxs("span",{className:`font-bold font-mono text-2xl ${se-qe>=0?"text-emerald-400":"text-red-400"}`,children:["",(se-qe).toLocaleString()]})]})})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{className:"bg-slate-900/50 rounded-xl p-4 border border-red-900/30",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsx("span",{className:"text-sm text-slate-400",children:""})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-xs text-slate-500",children:""}),i.jsxs("span",{className:"text-sm text-slate-300 font-mono",children:["",je(B.necessities).toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-xs text-slate-500",children:""}),i.jsxs("span",{className:"text-sm text-red-400 font-mono",children:["",((((ye=Se.categoryTotals)==null?void 0:ye.)||0)+(((Le=Se.categoryTotals)==null?void 0:Le.)||0)+(((ft=Se.categoryTotals)==null?void 0:ft.)||0)+(((At=Se.categoryTotals)==null?void 0:At.)||0)).toLocaleString()]})]}),i.jsx("div",{className:"w-full h-2 bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-red-500 transition-all",style:{width:`${Math.min(100,((((wt=Se.categoryTotals)==null?void 0:wt.)||0)+(((pt=Se.categoryTotals)==null?void 0:pt.)||0)+(((xt=Se.categoryTotals)==null?void 0:xt.)||0)+(((yt=Se.categoryTotals)==null?void 0:yt.)||0))/je(B.necessities)*100)}%`}})})]})]}),i.jsxs("div",{className:"bg-slate-900/50 rounded-xl p-4 border border-amber-900/30",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsx("span",{className:"text-sm text-slate-400",children:""})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-xs text-slate-500",children:""}),i.jsxs("span",{className:"text-sm text-slate-300 font-mono",children:["",je(B.wants).toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-xs text-slate-500",children:""}),i.jsxs("span",{className:"text-sm text-amber-400 font-mono",children:["",((((zt=Se.categoryTotals)==null?void 0:zt.)||0)+(((kt=Se.categoryTotals)==null?void 0:kt.)||0)).toLocaleString()]})]}),i.jsx("div",{className:"w-full h-2 bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-amber-500 transition-all",style:{width:`${Math.min(100,((((Ut=Se.categoryTotals)==null?void 0:Ut.)||0)+(((br=Se.categoryTotals)==null?void 0:br.)||0))/je(B.wants)*100)}%`}})})]})]}),i.jsxs("div",{className:"bg-slate-900/50 rounded-xl p-4 border border-emerald-900/30",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsx("span",{className:"text-sm text-slate-400",children:""})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-xs text-slate-500",children:""}),i.jsxs("span",{className:"text-sm text-slate-300 font-mono",children:["",je(B.savings).toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-xs text-slate-500",children:""}),i.jsxs("span",{className:"text-sm text-emerald-400 font-mono",children:["",Math.max(0,Se.monthlyBalance).toLocaleString()]})]}),i.jsx("div",{className:"w-full h-2 bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-emerald-500 transition-all",style:{width:`${Math.min(100,Math.max(0,Se.monthlyBalance)/je(B.savings)*100)}%`}})})]})]})]}),ze>0&&i.jsxs("div",{className:"p-3 bg-amber-900/30 border border-amber-700/50 rounded-lg flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:""}),i.jsx("span",{className:"text-amber-300 text-sm",children:""})]}),i.jsxs("span",{className:"text-amber-400 font-bold",children:["",ze.toLocaleString()]})]}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[i.jsx("span",{className:"text-sm text-slate-500 self-center",children:":"}),i.jsx("button",{onClick:()=>{g({...p,type:"expense",category:"",amount:Math.round(je(B.necessities)*.3).toString()}),l(!0)},className:"px-3 py-1.5 bg-red-900/50 hover:bg-red-800/50 text-red-300 rounded-lg text-xs border border-red-700/50",children:"  (30%)"}),i.jsx("button",{onClick:()=>{g({...p,type:"expense",category:"",amount:Math.round(je(B.wants)*.5).toString()}),l(!0)},className:"px-3 py-1.5 bg-amber-900/50 hover:bg-amber-800/50 text-amber-300 rounded-lg text-xs border border-amber-700/50",children:"  (50%)"}),i.jsx("button",{onClick:()=>{g({...p,type:"expense",category:"",amount:""}),l(!0)},className:"px-3 py-1.5 bg-purple-900/50 hover:bg-purple-800/50 text-purple-300 rounded-lg text-xs border border-purple-700/50",children:" "})]})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-gradient-to-br from-emerald-900/50 to-emerald-800/30 rounded-xl border border-emerald-700/50 p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx(bt,{name:"trendingUp",size:24,className:"text-emerald-400"}),i.jsx("span",{className:"text-slate-400 text-sm",children:""})]}),i.jsxs("div",{className:"text-2xl font-bold text-emerald-400",children:["",Se.monthlyIncome.toLocaleString()]}),Se.pendingIncome>0&&i.jsxs("div",{className:"text-xs text-blue-400 mt-1",children:[" : ",Se.pendingIncome.toLocaleString()]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-red-900/50 to-red-800/30 rounded-xl border border-red-700/50 p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx(bt,{name:"trendingDown",size:24,className:"text-red-400"}),i.jsx("span",{className:"text-slate-400 text-sm",children:""})]}),i.jsxs("div",{className:"text-2xl font-bold text-red-400",children:["",Se.monthlyExpense.toLocaleString()]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-blue-900/50 to-blue-800/30 rounded-xl border border-blue-700/50 p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx(bt,{name:"wallet",size:24,className:"text-blue-400"}),i.jsx("span",{className:"text-slate-400 text-sm",children:""})]}),i.jsxs("div",{className:`text-2xl font-bold ${Se.monthlyBalance>=0?"text-blue-400":"text-red-400"}`,children:["",Se.monthlyBalance.toLocaleString()]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-purple-900/50 to-purple-800/30 rounded-xl border border-purple-700/50 p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx(bt,{name:"piggyBank",size:24,className:"text-purple-400"}),i.jsx("span",{className:"text-slate-400 text-sm",children:""})]}),i.jsxs("div",{className:`text-2xl font-bold ${Se.totalBalance>=0?"text-purple-400":"text-red-400"}`,children:["",Se.totalBalance.toLocaleString()]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-slate-800/40 rounded-xl border border-slate-700/50 p-6",children:[i.jsx("h3",{className:"text-sm font-bold text-slate-400 mb-4",children:""}),Object.keys(Se.categoryTotals).length>0?i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsxs("div",{className:"relative w-40 h-40 flex-shrink-0",children:[i.jsx("svg",{viewBox:"0 0 100 100",className:"w-full h-full -rotate-90",children:(()=>{const Q=Object.entries(Se.categoryTotals).sort((Dt,ur)=>ur[1]-Dt[1]),Te=Q.reduce((Dt,[,ur])=>Dt+ur,0),st=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899"];let Ge=0;return Q.map(([Dt,ur],Lt)=>{const gr=ur/Te*100,Jt=Ge;Ge+=gr;const ot=gr>50?1:0,nr=50+40*Math.cos(Jt/100*2*Math.PI),Wr=50+40*Math.sin(Jt/100*2*Math.PI),gn=50+40*Math.cos(Ge/100*2*Math.PI),Lr=50+40*Math.sin(Ge/100*2*Math.PI);return i.jsx("path",{d:`M 50 50 L ${nr} ${Wr} A 40 40 0 ${ot} 1 ${gn} ${Lr} Z`,fill:st[Lt%st.length],className:"hover:opacity-80 transition-opacity cursor-pointer"},Dt)})})()}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-slate-500",children:""}),i.jsxs("div",{className:"text-sm font-bold text-red-400",children:["",Se.totalExpense.toLocaleString()]})]})})]}),i.jsx("div",{className:"flex-1 space-y-2",children:(()=>{const Q=Object.entries(Se.categoryTotals).sort((Ge,Dt)=>Dt[1]-Ge[1]),Te=Q.reduce((Ge,[,Dt])=>Ge+Dt,0),st=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899"];return Q.map(([Ge,Dt],ur)=>i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:st[ur%st.length]}}),i.jsx("span",{className:"text-slate-300 flex-1 truncate",children:Ge}),i.jsxs("span",{className:"text-slate-500 text-xs",children:[(Dt/Te*100).toFixed(0),"%"]}),i.jsxs("span",{className:"text-slate-400 w-20 text-right",children:["",Dt.toLocaleString()]})]},Ge))})()})]}):i.jsx("div",{className:"text-center text-slate-500 py-8",children:""})]}),i.jsxs("div",{className:"bg-slate-800/40 rounded-xl border border-slate-700/50 p-6",children:[i.jsx("h3",{className:"text-sm font-bold text-slate-400 mb-4",children:""}),Object.keys(Se.incomeCategoryTotals).length>0?i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsxs("div",{className:"relative w-40 h-40 flex-shrink-0",children:[i.jsx("svg",{viewBox:"0 0 100 100",className:"w-full h-full -rotate-90",children:(()=>{const Q=Object.entries(Se.incomeCategoryTotals).sort((Dt,ur)=>ur[1]-Dt[1]),Te=Q.reduce((Dt,[,ur])=>Dt+ur,0),st=["#10b981","#14b8a6","#06b6d4","#0ea5e9","#3b82f6","#6366f1","#8b5cf6","#a855f7"];let Ge=0;return Q.map(([Dt,ur],Lt)=>{const gr=ur/Te*100,Jt=Ge;Ge+=gr;const ot=gr>50?1:0,nr=50+40*Math.cos(Jt/100*2*Math.PI),Wr=50+40*Math.sin(Jt/100*2*Math.PI),gn=50+40*Math.cos(Ge/100*2*Math.PI),Lr=50+40*Math.sin(Ge/100*2*Math.PI);return i.jsx("path",{d:`M 50 50 L ${nr} ${Wr} A 40 40 0 ${ot} 1 ${gn} ${Lr} Z`,fill:st[Lt%st.length],className:"hover:opacity-80 transition-opacity cursor-pointer"},Dt)})})()}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-slate-500",children:""}),i.jsxs("div",{className:"text-sm font-bold text-emerald-400",children:["",Se.totalIncome.toLocaleString()]})]})})]}),i.jsx("div",{className:"flex-1 space-y-2",children:(()=>{const Q=Object.entries(Se.incomeCategoryTotals).sort((Ge,Dt)=>Dt[1]-Ge[1]),Te=Q.reduce((Ge,[,Dt])=>Ge+Dt,0),st=["#10b981","#14b8a6","#06b6d4","#0ea5e9","#3b82f6","#6366f1","#8b5cf6","#a855f7"];return Q.map(([Ge,Dt],ur)=>i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:st[ur%st.length]}}),i.jsx("span",{className:"text-slate-300 flex-1 truncate",children:Ge}),i.jsxs("span",{className:"text-slate-500 text-xs",children:[(Dt/Te*100).toFixed(0),"%"]}),i.jsxs("span",{className:"text-slate-400 w-20 text-right",children:["",Dt.toLocaleString()]})]},Ge))})()})]}):i.jsx("div",{className:"text-center text-slate-500 py-8",children:""})]})]}),i.jsxs("div",{className:"bg-slate-800/40 rounded-xl border border-slate-700/50 p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-sm font-bold text-slate-400",children:""}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("select",{value:h,onChange:Q=>b(Q.target.value),className:"bg-slate-900 border border-slate-700 text-slate-300 px-3 py-1 rounded-lg text-sm outline-none",children:[i.jsx("option",{value:"all",children:""}),i.jsx("option",{value:"income",children:""}),i.jsx("option",{value:"expense",children:""})]}),i.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-1 bg-blue-600 text-white rounded-lg flex items-center gap-2 text-sm hover:bg-blue-500 transition-colors",children:[i.jsx(bt,{name:"plus",size:16})," "]})]})]}),i.jsxs("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:[we.map(Q=>{const Te=ee(Q.linkedType,Q.linkedId);return i.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-900/50 rounded-lg hover:bg-slate-900/70 transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${Q.type==="income"?"bg-emerald-500/20 text-emerald-400":"bg-red-500/20 text-red-400"}`,children:i.jsx(bt,{name:Q.type==="income"?"trendingUp":"trendingDown",size:20})}),i.jsxs("div",{children:[i.jsxs("div",{className:"text-sm font-medium text-slate-200 flex items-center gap-2",children:[Q.title,Te&&(()=>{const st=Tn(Te.colorId);return i.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${st.bgLight} ${st.text}`,children:[Te.icon," ",Te.name]})})()]}),i.jsxs("div",{className:"text-xs text-slate-500",children:[Q.category,"  ",Q.date,Q.type==="income"&&Q.paymentTiming==="nextMonthEnd"&&i.jsx("span",{className:"ml-2 text-blue-400",children:" "}),Q.type==="income"&&Q.originalDate&&Q.originalDate!==Q.date&&i.jsxs("span",{className:"ml-1 text-slate-600",children:["(: ",Q.originalDate,")"]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:`font-bold ${Q.type==="income"?"text-emerald-400":"text-red-400"}`,children:[Q.type==="income"?"+":"-","",Q.amount.toLocaleString()]}),i.jsx("button",{onClick:()=>d({...Q,amount:Q.amount.toString(),originalDate:Q.originalDate||Q.date,paymentTiming:Q.paymentTiming||"immediate",linkedType:Q.linkedType||"",linkedId:Q.linkedId||""}),className:"text-slate-600 hover:text-blue-400 transition-colors p-1",children:i.jsx(bt,{name:"edit",size:16})}),i.jsx("button",{onClick:()=>Xe(Q.id),className:"text-slate-600 hover:text-red-400 transition-colors p-1",children:i.jsx(bt,{name:"trash",size:16})})]})]},Q.id)}),we.length===0&&i.jsx("div",{className:"text-center py-8 text-slate-500",children:""})]})]}),o&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>l(!1),children:i.jsxs("div",{className:"bg-slate-800 rounded-xl p-6 w-96 border border-slate-700",onClick:Q=>Q.stopPropagation(),children:[i.jsx("h3",{className:"text-lg font-bold text-slate-200 mb-4",children:""}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>g({...p,type:"expense",category:""}),className:`flex-1 py-2 rounded-lg transition-colors ${p.type==="expense"?"bg-red-600 text-white":"bg-slate-700 text-slate-400"}`,children:""}),i.jsx("button",{onClick:()=>g({...p,type:"income",category:""}),className:`flex-1 py-2 rounded-lg transition-colors ${p.type==="income"?"bg-emerald-600 text-white":"bg-slate-700 text-slate-400"}`,children:""})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsx("input",{type:"text",value:p.title,onChange:Q=>g({...p,title:Q.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500",placeholder:": "})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsx("input",{type:"number",value:p.amount,onChange:Q=>g({...p,amount:Q.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500",placeholder:"1000"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsx("select",{value:p.category,onChange:Q=>g({...p,category:Q.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500",children:We[p.type].map(Q=>i.jsx("option",{value:Q,children:Q},Q))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:p.type==="income"?"":""}),i.jsx("input",{type:"date",value:p.date,onChange:Q=>g({...p,date:Q.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500"})]}),p.type==="income"&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>g({...p,paymentTiming:"immediate"}),className:`flex-1 py-2 rounded-lg transition-colors text-sm ${p.paymentTiming==="immediate"?"bg-emerald-600 text-white":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:" "}),i.jsx("button",{onClick:()=>g({...p,paymentTiming:"nextMonthEnd"}),className:`flex-1 py-2 rounded-lg transition-colors text-sm ${p.paymentTiming==="nextMonthEnd"?"bg-blue-600 text-white":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:" "})]}),p.paymentTiming==="nextMonthEnd"&&p.date&&i.jsxs("div",{className:"mt-2 text-xs text-blue-400 bg-blue-500/10 px-3 py-2 rounded-lg",children:[" : ",lt(p.date)]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("select",{value:p.linkedType,onChange:Q=>g({...p,linkedType:Q.target.value,linkedId:""}),className:"bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500 text-sm",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"task",children:" "}),i.jsx("option",{value:"event",children:" "}),i.jsx("option",{value:"goal",children:" "})]}),i.jsxs("select",{value:p.linkedId,onChange:Q=>g({...p,linkedId:Q.target.value}),className:"bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500 text-sm",disabled:!p.linkedType,children:[i.jsx("option",{value:"",children:""}),p.linkedType==="task"&&(s==null?void 0:s.map(Q=>i.jsxs("option",{value:Q.id,children:[Q.date?`${Q.date} - `:"",Q.title]},Q.id))),p.linkedType==="event"&&(a==null?void 0:a.map(Q=>i.jsxs("option",{value:Q.id,children:[Q.date?`${Q.date} - `:"",Q.title]},Q.id))),p.linkedType==="goal"&&(A==null?void 0:A.map(Q=>i.jsxs("option",{value:Q.id,children:[Q.date?`${Q.date} - `:"",Q.title]},Q.id)))]})]})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{onClick:()=>l(!1),className:"flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-slate-200 rounded-lg transition-colors",children:""}),i.jsx("button",{onClick:_e,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",children:""})]})]})]})}),c&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>d(null),children:i.jsxs("div",{className:"bg-slate-800 rounded-xl p-6 w-96 border border-slate-700",onClick:Q=>Q.stopPropagation(),children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-200 mb-4 flex items-center gap-2",children:[i.jsx(bt,{name:"edit",size:20,className:"text-blue-400"}),""]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>d({...c,type:"expense",category:""}),className:`flex-1 py-2 rounded-lg transition-colors ${c.type==="expense"?"bg-red-600 text-white":"bg-slate-700 text-slate-400"}`,children:""}),i.jsx("button",{onClick:()=>d({...c,type:"income",category:""}),className:`flex-1 py-2 rounded-lg transition-colors ${c.type==="income"?"bg-emerald-600 text-white":"bg-slate-700 text-slate-400"}`,children:""})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsx("input",{type:"text",value:c.title,onChange:Q=>d({...c,title:Q.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsx("input",{type:"number",value:c.amount,onChange:Q=>d({...c,amount:Q.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsx("select",{value:c.category,onChange:Q=>d({...c,category:Q.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500",children:We[c.type].map(Q=>i.jsx("option",{value:Q,children:Q},Q))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:c.type==="income"?"":""}),i.jsx("input",{type:"date",value:c.originalDate||c.date,onChange:Q=>d({...c,originalDate:Q.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500"})]}),c.type==="income"&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>d({...c,paymentTiming:"immediate"}),className:`flex-1 py-2 rounded-lg transition-colors text-sm ${c.paymentTiming==="immediate"?"bg-emerald-600 text-white":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:" "}),i.jsx("button",{onClick:()=>d({...c,paymentTiming:"nextMonthEnd"}),className:`flex-1 py-2 rounded-lg transition-colors text-sm ${c.paymentTiming==="nextMonthEnd"?"bg-blue-600 text-white":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:" "})]}),c.paymentTiming==="nextMonthEnd"&&c.originalDate&&i.jsxs("div",{className:"mt-2 text-xs text-blue-400 bg-blue-500/10 px-3 py-2 rounded-lg",children:[" : ",lt(c.originalDate)]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("select",{value:c.linkedType,onChange:Q=>d({...c,linkedType:Q.target.value,linkedId:""}),className:"bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500 text-sm",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"task",children:" "}),i.jsx("option",{value:"event",children:" "}),i.jsx("option",{value:"goal",children:" "})]}),i.jsxs("select",{value:c.linkedId,onChange:Q=>d({...c,linkedId:Q.target.value}),className:"bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500 text-sm",disabled:!c.linkedType,children:[i.jsx("option",{value:"",children:""}),c.linkedType==="task"&&(s==null?void 0:s.map(Q=>i.jsxs("option",{value:Q.id,children:[Q.date?`${Q.date} - `:"",Q.title]},Q.id))),c.linkedType==="event"&&(a==null?void 0:a.map(Q=>i.jsxs("option",{value:Q.id,children:[Q.date?`${Q.date} - `:"",Q.title]},Q.id))),c.linkedType==="goal"&&(A==null?void 0:A.map(Q=>i.jsxs("option",{value:Q.id,children:[Q.date?`${Q.date} - `:"",Q.title]},Q.id)))]})]})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{onClick:()=>d(null),className:"flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-slate-200 rounded-lg transition-colors",children:""}),i.jsx("button",{onClick:Je,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",children:""})]})]})]})})]})}function E6({settings:t,updateSettings:e,exportData:r,importData:n,clearAllData:s,syncToSupabase:a,autoBackup:A,getLastAutoBackup:o,getBackupHistory:l,restoreFromBackup:c}){const[d,p]=V.useState(!1),[g,h]=V.useState(""),[b,w]=V.useState(()=>localStorage.getItem("ai_api_key")||""),[j,x]=V.useState(()=>localStorage.getItem("ai_provider")||"gemini"),[y,B]=V.useState(!1),[E,L]=V.useState(!1),[U,M]=V.useState(null),[G,N]=V.useState(!1),[$,k]=V.useState([]),[_,z]=V.useState(null),[O,te]=V.useState(!1);V.useEffect(()=>{const H=l();k(H),H.length>0&&z(new Date(H[0].timestamp))},[l]);const ue=()=>{A();const H=l();k(H),H.length>0&&z(new Date(H[0].timestamp)),alert("")},fe=async H=>{if(confirm(""))try{await c(H)?(N(!1),alert(""),window.location.reload()):alert("")}catch(re){console.error("Restore error:",re),alert(": "+re.message)}},ie=(H,re)=>{const Y=new Blob([JSON.stringify(H,null,2)],{type:"application/json"}),le=URL.createObjectURL(Y),me=document.createElement("a");me.href=le,me.download=`life-dashboard-backup-${re.split("T")[0]}.json`,me.click(),URL.revokeObjectURL(le)},de=()=>{localStorage.setItem("ai_api_key",b),localStorage.setItem("ai_provider",j),alert("AI API")},ge=async()=>{try{const H=JSON.parse(g);p(!1),h(""),L(!0),M(null),await n(H),L(!1),alert("Supabase")}catch(H){L(!1),console.error("Import error:",H),alert(": "+H.message)}},ve=()=>{confirm("")&&s()},I=async()=>{if(confirm(`Supabase
Supabase`)){L(!0),M(null);try{const H=await a();M(H),alert("")}catch(H){alert(`: ${H.message}`)}finally{L(!1)}}};return i.jsxs("div",{className:"space-y-6 max-w-2xl",children:[i.jsxs("div",{className:"bg-slate-800/40 rounded-xl border border-slate-700/50 p-6",children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-200 mb-4 flex items-center gap-2",children:[i.jsx(bt,{name:"user",size:20,className:"text-blue-400"}),""]}),i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:""}),i.jsx("input",{type:"text",value:t.username,onChange:H=>e({...t,username:H.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500",placeholder:""})]})})]}),i.jsxs("div",{className:"bg-slate-800/40 rounded-xl border border-slate-700/50 p-6",children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-200 mb-4 flex items-center gap-2",children:[i.jsx(bt,{name:"bell",size:20,className:"text-yellow-400"}),""]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-slate-400 text-sm",children:""}),i.jsxs("button",{onClick:()=>te(!0),className:"w-full px-4 py-3 bg-yellow-600 hover:bg-yellow-500 text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:[i.jsx(bt,{name:"bell",size:20}),""]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-xs",children:[i.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-2",children:[i.jsx("div",{className:"text-yellow-400 font-bold",children:""}),i.jsx("div",{className:"text-slate-400",children:""})]}),i.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-2",children:[i.jsx("div",{className:"text-blue-400 font-bold",children:""}),i.jsx("div",{className:"text-slate-400",children:""})]}),i.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-2",children:[i.jsx("div",{className:"text-green-400 font-bold",children:""}),i.jsx("div",{className:"text-slate-400",children:""})]}),i.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-2",children:[i.jsx("div",{className:"text-purple-400 font-bold",children:""}),i.jsx("div",{className:"text-slate-400",children:""})]}),i.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-2",children:[i.jsx("div",{className:"text-orange-400 font-bold",children:""}),i.jsx("div",{className:"text-slate-400",children:""})]}),i.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-2",children:[i.jsx("div",{className:"text-pink-400 font-bold",children:""}),i.jsx("div",{className:"text-slate-400",children:""})]})]})]})]}),O&&i.jsx(WE,{onClose:()=>te(!1)}),i.jsxs("div",{className:"bg-slate-800/40 rounded-xl border border-slate-700/50 p-6",children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-200 mb-4 flex items-center gap-2",children:[i.jsx(bt,{name:"cpu",size:20,className:"text-purple-400"}),"AI API"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:"AI"}),i.jsxs("select",{value:j,onChange:H=>x(H.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500",children:[i.jsx("option",{value:"gemini",children:"Google Gemini"}),i.jsx("option",{value:"groq",children:"Groq (Llama)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:"API"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:y?"text":"password",value:b,onChange:H=>w(H.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 pr-20 text-slate-200 outline-none focus:border-blue-500",placeholder:j==="gemini"?"AIza...":"gsk_..."}),i.jsx("button",{onClick:()=>B(!y),className:"absolute right-2 top-1/2 -translate-y-1/2 px-2 py-1 text-xs text-slate-400 hover:text-slate-200",children:y?"":""})]})]}),i.jsx("button",{onClick:de,className:"w-full px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-lg transition-colors",children:""}),b&&i.jsx("div",{className:"text-sm text-emerald-400 flex items-center gap-2",children:" API"})]})]}),i.jsxs("div",{className:"bg-slate-800/40 rounded-xl border border-slate-700/50 p-6",children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-200 mb-4 flex items-center gap-2",children:[i.jsx(bt,{name:"download",size:20,className:"text-emerald-400"}),""]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:r,className:"flex-1 px-4 py-3 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg flex items-center justify-center gap-2 transition-colors",children:[i.jsx(bt,{name:"download",size:18}),""]}),i.jsxs("button",{onClick:()=>p(!0),className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-lg flex items-center justify-center gap-2 transition-colors",children:[i.jsx(bt,{name:"upload",size:18}),""]})]}),i.jsxs("button",{onClick:ve,className:"w-full px-4 py-3 bg-red-600/20 hover:bg-red-600/30 text-red-400 border border-red-600/50 rounded-lg flex items-center justify-center gap-2 transition-colors",children:[i.jsx(bt,{name:"trash",size:18}),""]})]})]}),i.jsxs("div",{className:"bg-slate-800/40 rounded-xl border border-slate-700/50 p-6",children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-200 mb-4 flex items-center gap-2",children:[i.jsx(bt,{name:"cloud",size:20,className:"text-cyan-400"}),""]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-sm text-slate-400",children:"Supabase "}),i.jsx("button",{onClick:I,disabled:E,className:"w-full px-4 py-3 bg-cyan-600 hover:bg-cyan-500 disabled:bg-cyan-800 disabled:cursor-not-allowed text-white rounded-lg flex items-center justify-center gap-2 transition-colors",children:E?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"..."]}):i.jsxs(i.Fragment,{children:[i.jsx(bt,{name:"cloud",size:18}),"Supabase"]})}),U&&i.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4 text-sm",children:[i.jsx("div",{className:"font-bold text-slate-200 mb-2",children:":"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-slate-400",children:[i.jsxs("div",{children:[": ",i.jsx("span",{className:"text-emerald-400",children:U.tasks.success})," / ",i.jsx("span",{className:"text-red-400",children:U.tasks.failed})]}),i.jsxs("div",{children:[": ",i.jsx("span",{className:"text-emerald-400",children:U.events.success})," / ",i.jsx("span",{className:"text-red-400",children:U.events.failed})]}),i.jsxs("div",{children:[": ",i.jsx("span",{className:"text-emerald-400",children:U.goals.success})," / ",i.jsx("span",{className:"text-red-400",children:U.goals.failed})]}),i.jsxs("div",{children:[": ",i.jsx("span",{className:"text-emerald-400",children:U.transactions.success})," / ",i.jsx("span",{className:"text-red-400",children:U.transactions.failed})]}),i.jsxs("div",{children:[": ",i.jsx("span",{className:"text-emerald-400",children:U.shoppingItems.success})," / ",i.jsx("span",{className:"text-red-400",children:U.shoppingItems.failed})]}),i.jsxs("div",{children:[": ",i.jsx("span",{className:"text-emerald-400",children:U.scripts.success})," / ",i.jsx("span",{className:"text-red-400",children:U.scripts.failed})]}),i.jsxs("div",{children:[": ",i.jsx("span",{className:"text-emerald-400",children:U.diary.success})," / ",i.jsx("span",{className:"text-red-400",children:U.diary.failed})]})]})]})]})]}),i.jsxs("div",{className:"bg-slate-800/40 rounded-xl border border-slate-700/50 p-6",children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-200 mb-4 flex items-center gap-2",children:[i.jsx(bt,{name:"save",size:20,className:"text-orange-400"}),""]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-slate-400",children:":"}),i.jsx("span",{className:"text-emerald-400 font-medium",children:"30"})]}),_&&i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-slate-400",children:":"}),i.jsx("span",{className:"text-slate-200",children:_.toLocaleString("ja-JP")})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:ue,className:"flex-1 px-4 py-3 bg-orange-600 hover:bg-orange-500 text-white rounded-lg flex items-center justify-center gap-2 transition-colors",children:[i.jsx(bt,{name:"save",size:18}),""]}),i.jsxs("button",{onClick:()=>N(!0),className:"flex-1 px-4 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg flex items-center justify-center gap-2 transition-colors",children:[i.jsx(bt,{name:"clock",size:18}),""]})]}),i.jsx("p",{className:"text-xs text-slate-500",children:"5 "})]})]}),i.jsxs("div",{className:"bg-slate-800/40 rounded-xl border border-slate-700/50 p-6",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-200 mb-4",children:""}),i.jsxs("div",{className:"text-sm text-slate-400 space-y-2",children:[i.jsx("div",{children:": 2.1.0 ()"}),i.jsx("div",{children:": 2026.01.18"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:":"}),i.jsx("span",{className:"text-emerald-400",children:"Supabase Cloud"})]}),i.jsx("div",{className:"pt-2 text-slate-500",children:"Life Dashboard - "})]})]}),d&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>p(!1),children:i.jsxs("div",{className:"bg-slate-800 rounded-xl p-6 w-[500px] border border-slate-700",onClick:H=>H.stopPropagation(),children:[i.jsx("h3",{className:"text-lg font-bold text-slate-200 mb-4",children:""}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:"JSON"}),i.jsx("textarea",{value:g,onChange:H=>h(H.target.value),className:"w-full h-48 bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-slate-200 outline-none focus:border-blue-500 font-mono text-sm",placeholder:'{"tasks": [...], "goals": [...], ...}'})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>p(!1),className:"flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-slate-200 rounded-lg transition-colors",children:""}),i.jsx("button",{onClick:ge,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",children:""})]})]})]})}),G&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>N(!1),children:i.jsxs("div",{className:"bg-slate-800 rounded-xl p-6 w-[600px] max-h-[80vh] border border-slate-700 overflow-hidden flex flex-col",onClick:H=>H.stopPropagation(),children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-200 mb-4 flex items-center gap-2",children:[i.jsx(bt,{name:"clock",size:20,className:"text-orange-400"}),""]}),i.jsx("div",{className:"flex-1 overflow-y-auto space-y-3",children:$.length===0?i.jsx("div",{className:"text-center text-slate-500 py-8",children:""}):$.map((H,re)=>{var Y,le,me,ke;return i.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4 border border-slate-700/50",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-slate-200 font-medium",children:new Date(H.timestamp).toLocaleString("ja-JP")}),i.jsx("div",{className:"text-xs text-slate-500",children:re===0?"":`${re+1}`})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>ie(H.data,H.timestamp),className:"px-3 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/30 text-emerald-400 text-sm rounded-lg transition-colors flex items-center gap-1",children:[i.jsx(bt,{name:"download",size:14}),""]}),i.jsxs("button",{onClick:()=>fe(H.data),className:"px-3 py-1.5 bg-blue-600/20 hover:bg-blue-600/30 text-blue-400 text-sm rounded-lg transition-colors flex items-center gap-1",children:[i.jsx(bt,{name:"refresh-cw",size:14}),""]})]})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs text-slate-500",children:[i.jsxs("div",{children:[": ",((Y=H.data.tasks)==null?void 0:Y.length)||0]}),i.jsxs("div",{children:[": ",((le=H.data.events)==null?void 0:le.length)||0]}),i.jsxs("div",{children:[": ",((me=H.data.goals)==null?void 0:me.length)||0]}),i.jsxs("div",{children:[": ",((ke=H.data.transactions)==null?void 0:ke.length)||0]})]})]},H.timestamp)})}),i.jsx("div",{className:"mt-4 pt-4 border-t border-slate-700",children:i.jsx("button",{onClick:()=>N(!1),className:"w-full px-4 py-2 bg-slate-700 hover:bg-slate-600 text-slate-200 rounded-lg transition-colors",children:""})})]})})]})}function G2(){const{user:t,loading:e}=ah(),r=GE(),n=window.innerWidth<768,[s,a]=V.useState(()=>n?"ai":"calendar"),[A,o]=V.useState(()=>{const d=localStorage.getItem("theme");return d||"dark"});if(V.useEffect(()=>{document.documentElement.setAttribute("data-theme",A)},[]),V.useEffect(()=>{const d=localStorage.getItem("ai_api_key");d&&(d==="AIzaSyDlt0pKNba7l_zR9CQMm_m_nXU1CMASbyg"||d.startsWith("AIzaSyDlt0pKNba7l"))&&(localStorage.removeItem("ai_api_key"),console.log("APIAPI"),alert(`API

Gemini API

: https://aistudio.google.com/apikey`)),localStorage.getItem("ai_provider")||localStorage.setItem("ai_provider","gemini")},[]),e||r.loading)return i.jsx("div",{className:"min-h-screen flex items-center justify-center transition-theme",style:{backgroundColor:"var(--bg-primary)"},children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-2xl mx-auto mb-4 flex items-center justify-center animate-pulse",style:{backgroundColor:"var(--accent-secondary)"},children:i.jsx(bt,{name:"box",size:32,className:"text-white"})}),i.jsx("p",{style:{color:"var(--text-tertiary)"},children:"..."})]})});const l=()=>{switch(s){case"calendar":return i.jsx(p6,{tasks:r.tasks,setTasks:r.setTasks,events:r.events,setEvents:r.setEvents,goals:r.goals,transactions:r.transactions,addTask:r.addTask,updateTask:r.updateTask,deleteTask:r.deleteTask,addEvent:r.addEvent,updateEvent:r.updateEvent,deleteEvent:r.deleteEvent,addGoal:r.addGoal,updateGoal:r.updateGoal,deleteGoal:r.deleteGoal,addTransaction:r.addTransaction});case"tasks":return i.jsx(g6,{tasks:r.tasks,addTask:r.addTask,updateTask:r.updateTask,deleteTask:r.deleteTask,events:r.events,goals:r.goals,setTasks:r.setTasks});case"roadmap":return i.jsx(m6,{tasks:r.tasks,goals:r.goals,events:r.events,updateTask:r.updateTask,deleteTask:r.deleteTask,addTask:r.addTask,addGoal:r.addGoal,addEvent:r.addEvent});case"shopping":return i.jsx(N6,{shoppingItems:r.shoppingItems,addShoppingItem:r.addShoppingItem,updateShoppingItem:r.updateShoppingItem,deleteShoppingItem:r.deleteShoppingItem,events:r.events,goals:r.goals});case"scripts":return i.jsx(b6,{scripts:r.scripts,addScript:r.addScript,updateScript:r.updateScript,deleteScript:r.deleteScript});case"morning":return i.jsx(B6,{diaryEntries:r.diaryEntries,addDiaryEntry:r.addDiaryEntry,settings:r.settings});case"diary":return i.jsx(C6,{diaryEntries:r.diaryEntries,addDiaryEntry:r.addDiaryEntry,updateDiaryEntry:r.updateDiaryEntry,deleteDiaryEntry:r.deleteDiaryEntry,events:r.events,goals:r.goals,tasks:r.tasks});case"tracking":return i.jsx(x6,{});case"analytics":return i.jsx(v6,{tasks:r.tasks,goals:r.goals,transactions:r.transactions});case"ai":return i.jsx(w6,{tasks:r.tasks,goals:r.goals,transactions:r.transactions,events:r.events,addTask:r.addTask,addEvent:r.addEvent,addGoal:r.addGoal,updateTask:r.updateTask,deleteTask:r.deleteTask,diaryEntries:r.diaryEntries,addDiaryEntry:r.addDiaryEntry,settings:r.settings});case"finance":return i.jsx(j6,{transactions:r.transactions,addTransaction:r.addTransaction,updateTransaction:r.updateTransaction,deleteTransaction:r.deleteTransaction,tasks:r.tasks,events:r.events,goals:r.goals});case"trade":return i.jsx(S6,{});case"twin":return i.jsx(y6,{tasks:r.tasks,goals:r.goals,events:r.events,transactions:r.transactions,diaryEntries:r.diaryEntries,shoppingItems:r.shoppingItems,scripts:r.scripts,settings:r.settings});case"system":return i.jsx(E6,{settings:r.settings,updateSettings:r.updateSettings,exportData:r.exportData,importData:r.importData,clearAllData:r.clearAllData,syncToSupabase:r.syncToSupabase,autoBackup:r.autoBackup,getLastAutoBackup:r.getLastAutoBackup,getBackupHistory:r.getBackupHistory,restoreFromBackup:r.restoreFromBackup});default:return i.jsx("div",{className:"text-slate-500 flex items-center justify-center h-96",children:""})}},c=()=>({calendar:"Schedule",tasks:"Task List",roadmap:"Roadmap",shopping:"Shopping List",scripts:"AI Scripts",morning:"Morning Note",diary:"Diary",tracking:"Tracking",analytics:"Activity",ai:"AI Concierge",twin:"Digital Twin",finance:"Finance",system:"System Settings"})[s]||"Dashboard";return i.jsxs("div",{className:"min-h-screen font-sans transition-theme",style:{backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"},children:[i.jsx(zE,{activeTab:s,setActiveTab:a}),i.jsxs("main",{className:"md:pl-[88px] px-2 md:px-6 py-2 md:py-6 pb-36 md:pb-6",children:[i.jsx(qE,{title:c(),tasks:r.tasks,goals:r.goals,events:r.events,theme:A,setTheme:o}),i.jsx("div",{className:"animate-in",children:l()})]})]})}function F6(){const{user:t,loading:e}=ah();return e?i.jsx("div",{className:"min-h-screen flex items-center justify-center transition-theme",style:{backgroundColor:"var(--bg-primary)"},children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-2xl mx-auto mb-4 flex items-center justify-center animate-pulse",style:{backgroundColor:"var(--accent-secondary)"},children:i.jsx(bt,{name:"box",size:32,className:"text-white"})}),i.jsx("p",{style:{color:"var(--text-tertiary)"},children:"..."})]})}):(t==null?void 0:t.id)==="local-user"?i.jsx(G2,{}):t?i.jsx(G2,{}):i.jsx(VE,{})}function _6(){return i.jsx(KE,{children:i.jsx(F6,{})})}Vg.createRoot(document.getElementById("root")).render(i.jsx(XC.StrictMode,{children:i.jsx(_6,{})}));export{Gr as _,U6 as c,LC as g};
